{"version":3,"sources":["webpack:///(webpack)/buildin/harmony-module.js","webpack:///./src/data.ts","webpack:///../node_modules/simple-swizzle/index.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","webpack:///../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/element.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/global.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/process.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/scheduler.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObservation.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserver.js","webpack:///../src/utils/useWidth.ts","webpack:///../src/utils/useMakeLine.ts","webpack:///../node_modules/d3-scale/src/nice.js","webpack:///../node_modules/d3-scale/src/log.js","webpack:///../node_modules/d3-time/src/month.js","webpack:///../node_modules/d3-time/src/hour.js","webpack:///../node_modules/d3-time/src/minute.js","webpack:///../node_modules/d3-time/src/second.js","webpack:///../node_modules/d3-time/src/millisecond.js","webpack:///../node_modules/d3-scale/src/time.js","webpack:///../src/utils/scales.ts","webpack:///../node_modules/d3-shape/src/curve/linear.js","webpack:///../node_modules/lodash/merge.js","webpack:///../node_modules/d3-shape/src/area.js","webpack:///../node_modules/d3-shape/src/line.js","webpack:///../node_modules/color/index.js","webpack:///../node_modules/d3-shape/src/point.js","webpack:///../src/TornadoD3.ts","webpack:///../src/Tornado.tsx","webpack:///../node_modules/is-arrayish/index.js","webpack:///../node_modules/color-convert/index.js","webpack:///../node_modules/d3-dispatch/src/dispatch.js","webpack:///../src/v3/Histogram.tsx","webpack:///../src/components/AreaFill.tsx","webpack:///../src/components/Line.tsx","webpack:///../src/components/Points.tsx","webpack:///../src/v3/LineChart.tsx","webpack:///../src/lineChartD3.ts","webpack:///../src/LineChart.tsx","webpack:///../src/ScatterPlot.tsx","webpack:///../src/ScatterPlotD3.ts","webpack:///../src/HorizontalHistogramD3.ts","webpack:///../src/HorizontalHistogram.tsx","webpack:///../src/components/Bars/HistogramBars.tsx","webpack:///../src/components/Bars/histogramHelper.ts","webpack:///../node_modules/react-use-measure/dist/web.js","webpack:///../node_modules/d3-timer/src/timer.js","webpack:///../node_modules/d3-timer/src/timeout.js","webpack:///../node_modules/d3-transition/src/transition/schedule.js","webpack:///../node_modules/d3-transition/src/interrupt.js","webpack:///../node_modules/d3-transition/src/transition/tween.js","webpack:///../node_modules/d3-transition/src/transition/interpolate.js","webpack:///../node_modules/d3-transition/src/transition/attr.js","webpack:///../node_modules/d3-transition/src/transition/attrTween.js","webpack:///../node_modules/d3-transition/src/transition/delay.js","webpack:///../node_modules/d3-transition/src/transition/duration.js","webpack:///../node_modules/d3-transition/src/transition/ease.js","webpack:///../node_modules/d3-transition/src/transition/on.js","webpack:///../node_modules/d3-transition/src/transition/remove.js","webpack:///../node_modules/d3-transition/src/transition/selection.js","webpack:///../node_modules/d3-transition/src/transition/style.js","webpack:///../node_modules/d3-transition/src/transition/styleTween.js","webpack:///../node_modules/d3-transition/src/transition/textTween.js","webpack:///../node_modules/d3-transition/src/transition/index.js","webpack:///../node_modules/d3-transition/src/transition/select.js","webpack:///../node_modules/d3-transition/src/transition/selectAll.js","webpack:///../node_modules/d3-transition/src/transition/filter.js","webpack:///../node_modules/d3-transition/src/transition/merge.js","webpack:///../node_modules/d3-transition/src/transition/transition.js","webpack:///../node_modules/d3-transition/src/transition/text.js","webpack:///../node_modules/d3-transition/src/transition/end.js","webpack:///../node_modules/d3-transition/src/selection/transition.js","webpack:///../node_modules/d3-ease/src/cubic.js","webpack:///../node_modules/d3-transition/src/selection/index.js","webpack:///../node_modules/d3-transition/src/selection/interrupt.js","webpack:///../node_modules/d3-transition/src/active.js","webpack:///../node_modules/d3-shape/src/descending.js","webpack:///../node_modules/d3-shape/src/identity.js","webpack:///../node_modules/d3-shape/src/arc.js","webpack:///../src/PieChartD3.ts","webpack:///../node_modules/d3-shape/src/pie.js","webpack:///../src/PieChart.tsx","webpack:///../node_modules/d3-path/src/path.js","webpack:///../src/utils/outputSvg.ts","webpack:///../node_modules/color-convert/conversions.js","webpack:///../node_modules/color-convert/route.js","webpack:///../node_modules/d3-shape/src/constant.js","webpack:///../node_modules/color-name/index.js","webpack:///../src/Legend.tsx","webpack:///../node_modules/color-string/index.js","webpack:///../node_modules/debounce/index.js","webpack:///../src/colors/filterRange.ts"],"names":["module","exports","originalModule","webpackPolyfill","Object","create","children","defineProperty","enumerable","get","l","i","grid","x","style","lineStyle","ticks","y","smallData","bins","counts","data","label","smallDataContinuous","annotationsData","color","value","smallAnnotationsData","analyticsAxis","scale","numberFormat","labelOrientation","ELabelOrientation","horizontal","data2","borderColors","title","theme","filterRange","isArrayish","concat","Array","prototype","slice","swizzle","args","results","len","length","arg","call","push","wrap","fn","arguments","ResizeObserverBoxOptions","resizeObservers","msg","trigger","DOMRectReadOnly","width","height","this","top","left","bottom","right","freeze","toJSON","_a","fromRect","rectangle","isSVG","target","SVGElement","isHidden","getBBox","_b","offsetWidth","offsetHeight","getClientRects","isElement","obj","scope","ownerDocument","defaultView","Element","global","window","cache","WeakMap","scrollRegexp","verticalRegexp","IE","test","navigator","userAgent","parseDimension","pixel","parseFloat","inlineSize","blockSize","switchSizes","zeroBoxes","devicePixelContentBoxSize","borderBoxSize","contentBoxSize","contentRect","forceRecalculation","has","set","cs","getComputedStyle","svg","ownerSVGElement","removePadding","boxSizing","writingMode","canScrollVertically","overflowY","canScrollHorizontally","overflowX","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","horizontalPadding","verticalPadding","horizontalBorderArea","borderLeftWidth","verticalBorderArea","horizontalScrollbarThickness","clientHeight","verticalScrollbarThickness","clientWidth","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","Math","round","devicePixelRatio","observedBox","DEVICE_PIXEL_CONTENT_BOX","BORDER_BOX","node","Infinity","depth","parent","parentNode","shallowestDepth","callbacks","forEach","ro","activeTargets","entries","ot","entry","targetDepth","lastReportedSize","callback","observer","splice","_i","callbacks_1","skippedTargets","observationTargets","isActive","event","some","ErrorEvent","message","document","createEvent","initEvent","dispatchEvent","queueMicroTask","toggle_1","el_1","createTextNode","MutationObserver","cb","observe","characterData","textContent","watching","observerConfig","attributes","childList","subtree","events","time","timeout","Date","now","scheduled","scheduler","Scheduler","_this","stopped","listener","schedule","run","until","elementsHaveResized","start","requestAnimationFrame","stop","body","addEventListener","name","disconnect","removeEventListener","updateCount","n","ResizeObservation","CONTENT_BOX","size","tagName","type","isReplacedElement","display","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","ResizeObserverController","connect","detail","options","firstObservation","box","unobserve","index","lastObservation","indexOf","ResizeObserver","TypeError","toString","useWidth","origWidth","useMeasure","debounce","polyfill","ref","useState","r","setR","useEffect","w","includes","parseInt","useScales","axis","xScale","yScale","scales","setScales","buildScales","ys","xs","d","parsedY","parsedX","yDomain","rangeAffordance","extent","xDomain","domain","rangeRound","range","useMakeLine","props","current","setCurrent","previous","setPrevious","line","curveType","curveCatmullRom","next","String","curve","useMakeArea","area","y0","y1","thisArea","t","i0","i1","x0","x1","interval","floor","ceil","transformLog","log","transformExp","exp","transformLogn","transformExpn","pow10","isFinite","reflect","f","loggish","transform","logs","pows","base","rescale","E","log10","log2","logp","pow","powp","_","count","u","v","p","k","j","z","min","map","reverse","tickFormat","specifier","max","nice","copy","init","apply","date","setDate","setHours","step","setMonth","getMonth","end","getFullYear","setTime","getMilliseconds","getSeconds","duration","getMinutes","getHours","getUTCSeconds","every","number","calendar","year","month","week","day","hour","minute","second","millisecond","format","continuous","invert","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","tickIntervals","durationSecond","durationMinute","durationHour","durationDay","tickInterval","abs","bisector","from","t0","t1","scaleLog","clamp","scaleTime","scaleLinear","Linear","context","_context","areaStart","_line","areaEnd","NaN","lineStart","_point","lineEnd","closePath","point","lineTo","moveTo","baseMerge","merge","createAssigner","object","source","srcIndex","defined","output","buffer","defined0","x0z","y0z","arealine","lineX0","lineY0","lineY1","lineX1","colorString","convert","_slice","skippedModels","hashedModelKeys","keys","model","labels","sort","join","limiters","Color","Error","channels","valpha","result","newArr","zeroArray","alpha","hashedKeys","JSON","stringify","limit","getset","channel","modifier","isArray","m","val","maxfn","assertArray","arr","string","places","self","to","rgb","percentString","percent","array","unitArray","unitObject","g","b","num","Number","toFixed","roundTo","roundToPlace","red","green","blue","hue","saturationl","lightness","saturationv","chroma","gray","white","wblack","cyan","magenta","yellow","black","a","keyword","hex","rgbNumber","luminosity","lum","chan","contrast","color2","lum1","lum2","level","contrastRatio","isDark","isLight","negate","lighten","ratio","hsl","darken","saturate","desaturate","whiten","hwb","blacken","grayscale","fade","opaquer","rotate","degrees","mix","mixinColor","weight","color1","undefined","w1","w2","newAlpha","raw","TornadoD3","scaleBand","innerScaleBand","dataSets","cloneDeep","defaultAxis","bar","grouped","paddingInner","paddingOuter","overlayMargin","className","colorScheme","center","delay","defaultGrid","groupLayout","EGroupedBarLayout","GROUPED","margin","showBinPercentages","splitBins","stroke","dasharray","linecap","tip","tips","tipContainer","tipContentFn","visible","el","newProps","mergeProps","makeSvg","sizeSVG","makeTip","tipContent","makeGrid","gridX","gridY","xAxisContainer2","append","attr","container","makeScales","xAxisContainer","yAxisContainer","xAxisLabel","yAxisLabel","update","drawAxes","valuesCount","reduce","gridWidth","h","gridHeight","dataLabels","c","groupedPaddingInner","groupedBarsUseSameXAxisValue","bandwidth","xAxis","axisBottom","replace","shouldFormatTick","timeFormat","dateFormat","isNaN","tickSize","axisLength","axisConfig","limitByValues","calculateDomain","x2","scalePoint","xGroupAxis","tickPadding","yAxis","axisLeft","xAxisY","xAxisHeight","yAxisWidth","attrs","selectAll","text","leftValues","prev","rightValues","applyDomainAffordance","updateChart","groupData","percentData","totals","datum","side","groupLabel","total","calculatePercents","colors","scaleOrdinal","gWidth","bars","enter","yd","on","onClick","onMouseOver","hover","fx","move","onMouseOut","OVERLAID","getBarWidth","transition","stackIndex","percents","exit","remove","yText","xText","mergeWith","objValue","srcValue","key","stack","genderIndex","aValue","rowIndex","colorRef","destroy","Tornado","chart","state","parentWidth","handleResize","getDOMNode","setState","getChartState","componentDidMount","e","componentDidUpdate","rest","componentWillUnmount","ReactDOM","findDOMNode","Text","render","Component","Function","getOwnPropertyDescriptor","constructor","conversions","route","fromModel","routes","toModel","wrappedFn","conversion","wrapRounded","wrapRaw","noop","dispatch","Dispatch","parseTypenames","typenames","types","trim","split","hasOwnProperty","typename","T","that","Histogram","animation","axisLabelFormat","schemeSet3","direction","EChartDirection","VERTICAL","hoverColorScheme","LabelComponent","showLabels","xAxisLabelOrientation","HORIZONTAL","continuousDomain","svgProps","lines","vertical","values","config","labelFormat","AreaFill","spring","useSpring","reset","getInterpolator","interpolate","interpolator","useRef","useLayoutEffect","path","fill","Line","strokeDashoffset","strokeDashOffset","strokeDasharray","strokeDashArray","Points","radius","yValue","xValue","cy","cx","LineChart","useLineDomain","Base","Grid","item","show","YAxis","XAxis","lineChartD3","xParseTime","xFormatTime","lineContainer","lineProps","pointProps","info","datumProps","getYAxisWidth","_drawDataPointSet","pointContainer","points","dx","html","in","out","xOffset","_drawLines","oldData","find","newD","select","dataset","selector","selection","empty","drawAreas","timeParse","assign","drawGrid","React","ScatterPlot","domainByTrait","choices","distModels","legendWidth","padding","_makeSvg","childNodes","getElementsByTagName","removeChild","_drawScales","xSize","ySize","each","_drawLegend","legend","cell","_drawPoints","traits","nx","cross","plotCell","findIndex","filter","trait","scatterPlotD3","componentWillReceiveProps","defaultProps","HorizontalHistogramD3","yAnnotations","yAnnotationAxisContainer","annotations","annotationTextSize","stacked","maxValueCount","annotationsEnabled","groupedPaddingOuter","axisYAnnotationAllowance","axisLabelTipContentFn","onMouseOverAxis","annotationAxis","annotationAxisDefaults","appendDomainRange","isStacked","formatTick","stackedOffset","oSet","gData","isItStacked","offset","calculateYPosition","overlaidYPos","finalYPos","currentHeight","barWidth","group","percentage","overlaidOffset","BaseHistogramD3","HorizontalHistogram","histogram","binWidth","bin","HistogramBars","brighter","binLabels","datasetIndex","totalArea","binIndex","numericScale","continuousScale","setHover","springs","useSprings","bandPosition","itemWidth","itemHeight","hoverFill","buildHistogramSprings","refs","createRef","rect","onMouseEnter","onMouseLeave","Labels","items","ToolTips","_ref","scroll","debounce$1","_useState","_useState2","bounds","element","scrollContainers","lastBounds","scrollDebounce","resizeDebounce","resize","_useMemo","_state$current$elemen","getBoundingClientRect","areBoundsEqual","_useMemo2","forceRefresh","resizeChange","scrollChange","removeListeners","addListeners","scrollContainer","capture","passive","findScrollContainers","useOnWindowScroll","Boolean","useOnWindowResize","onWindowResize","onScroll","enabled","_window$getComputedSt","overflow","prop","parentElement","writable","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","performance","setFrame","bind","setTimeout","clearNow","Timer","_call","_time","_next","timer","restart","wake","timerFlush","t2","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","emptyOn","emptyTween","schedules","__transition","id","tween","o","__data__","tick","ease","timing","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","space","local","attrConstant","value1","string00","interpolate0","string1","string0","getAttribute","attrConstantNS","getAttributeNS","attrFunction","string10","attrFunctionNS","attrInterpolate","setAttribute","attrInterpolateNS","setAttributeNS","attrTweenNS","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","Selection","styleRemove","removeProperty","styleInterpolate","priority","setProperty","styleTween","textInterpolate","textTween","Transition","groups","parents","_groups","_parents","_name","newId","selection_prototype","subgroups","subnode","subgroup","selectorAll","child","inherit","match","matcher","groups0","groups1","m0","m1","merges","group0","group1","id0","id1","nodes","namespace","styleNull","styleFunction","listener0","styleMaybeRemove","styleConstant","textFunction","textConstant","Promise","resolve","reject","cancel","interrupt","defaultTiming","active","arcInnerRadius","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","intersect","y2","x3","y3","x10","y10","x32","y32","cornerTangents","r1","rc","cw","x01","y01","lo","ox","oy","x11","y11","x00","y00","dy","d2","D","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cornerRadius","constant","padRadius","arc","r0","a0","a1","da","a01","a11","a00","a10","da0","da1","ap","rp","rc0","rc1","p0","p1","oc","ax","ay","bx","by","kc","lc","centroid","thisPie","identity","sortValues","descending","pie","sum","arcs","pa","setIndex","donutWidth","getArc","arcTween","thisArc","_current","PieChart","containers","previousData","storedWidth","storedHeight","backgroundColor","displayFn","dataSet","drawChartBg","drawCharts","drawChart","drawLabels","tau","PI","bgArc","background","s","ix","path2","pieChartD3","pi","tauEpsilon","Path","_x0","_y0","_x1","_y1","quadraticCurveTo","bezierCurveTo","arcTo","x21","y21","l01_2","x20","y20","l21_2","l20_2","l21","sqrt","l01","tan","acos","t01","t21","ccw","cos","sin","outputSvg","svgId","watermark","svgStr","XMLSerializer","serializeToString","svgData","btoa","unescape","encodeURIComponent","canvas","createElement","getContext","image","Image","watermarkImage","onload","clearRect","drawImage","globalCompositeOperation","fillStyle","fillRect","toBlob","pngData","toDataURL","src","cssKeywords","reverseKeywords","hsv","cmyk","xyz","lab","lch","ansi16","ansi256","hcg","apple","delta","rdif","gdif","bdif","diff","diffc","reversed","currentClosestKeyword","currentClosestDistance","distance","t3","smin","lmin","hi","q","sl","vmin","wh","bl","z2","atan2","hr","ansi","mult","rem","toUpperCase","substring","char","integer","mg","pure","deriveBFS","graph","models","buildGraph","queue","pop","adjacents","adjacent","unshift","link","wrapConversion","cur","legendIconStyle","cursor","listStyle","liStyle","alignItems","Legend","onSelect","scheme","border","colorNames","reverseNames","hexDouble","str","toLowerCase","hexAlpha","i2","rgba","hsla","hwba","func","wait","immediate","timestamp","later","last","debounced","callNow","clear","flush","random"],"mappings":"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","file":"f81be11c034672e3aa72f3b3c736f1e0587056cc-ac2e8828ec01ab10ad97.js","sourcesContent":["module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import {\n  IAxes,\n  IBarChartData,\n} from '../../src';\nimport filterRange from '../../src/colors/filterRange';\nimport { ELabelOrientation } from '../../src/components/YAxis';\nimport {\n  IAnnotation,\n  IGrid,\n  IHistogramData,\n} from '../../src/Histogram';\nimport { lineStyle } from '../../src/utils/defaults';\nimport { DeepPartial } from '../../src/utils/types';\n\nexport const grid: IGrid = {\n  x: {\n    style: {\n      ...lineStyle,\n      'stroke': '#ccc',\n      'stroke-opacity': 0.4,\n    },\n    ticks: 5,\n  },\n  y: {\n    style: {\n      ...lineStyle,\n      'stroke': '#ccc',\n      'stroke-opacity': 0.4,\n    },\n    ticks: 6,\n  },\n};\n\nexport const smallData: IBarChartData = {\n  bins: ['Female long label test', 'Male', 'Other'],\n  counts: [\n    {\n      data: [79200, 52400, 13300],\n      label: 'Baseline',\n    },\n    {\n      data: [60000, 34230, 10000],\n      label: 'Filtered',\n    },\n  ]\n}\n\nexport const smallData2: IBarChartData = {\n  bins: ['Female', 'Male', 'Other'],\n  counts: [\n    {\n      data: [89200, 12400, 33300],\n      label: 'Baseline',\n    },\n    {\n      data: [70000, 24230, 40000],\n      label: 'Filtered',\n    },\n  ]\n}\n\nexport const smallDataContinuous: IHistogramData = {\n  bins: [[0, 50], [50, 150], [150, 300]],\n  counts: [\n    {\n      data: [500, 2000, 1500],\n      label: 'Baseline',\n    },\n  ]\n}\n\nexport const data: IBarChartData = {\n  bins: ['Female', 'Male', 'Other', 'sdfdfg', 'dagdsg', 'sfsd', 'ds34fsdf', 'dfsfsd', 'sdfs34dfs', 'ghf34hfg', 'fd33gag', 'jg343hj', 'a343wes', 'ye343ye', 'fd343gjs', 'sdfd343fg', '34', 'sfsd', '433', '45245', '745'],\n  counts: [\n    {\n      data: [58483, 52400, 13300, 79200, 52400, 13300, 79200, 52400, 13300, 79200, 52400, 13300, 79200, 52400, 13300, 79200, 52400, 13300, 79200, 52400, 13300],\n      label: 'Baseline',\n    },\n    {\n      data: [54932, 34230, 10000, 60000, 34230, 10000, 60000, 34230, 10000, 60000, 34230, 10000, 60000, 34230, 10000, 60000, 34230, 10000, 60000, 34230, 10000],\n      label: 'Filtered',\n    },\n  ]\n}\n\nexport const annotationsData: IAnnotation[] = [\n  { color: 'grey', value: '0%' },\n  { color: 'grey', value: '0%' },\n  { color: 'red', value: '-50%' },\n  { color: 'grey', value: '-1%' },\n  { color: 'red', value: '-56%' },\n  { color: 'grey', value: '-99%' },\n  { color: 'grey', value: '-100%' },\n  { color: 'red', value: '-5%' },\n  { color: 'grey', value: '0%' },\n  { color: 'red', value: '-5%' },\n  { color: 'grey', value: '0%' },\n  { color: 'grey', value: '0%' },\n  { color: 'red', value: '-5%' },\n  { color: 'grey', value: '0%' },\n  { color: 'red', value: '-50%' },\n  { color: 'grey', value: '-67%' },\n  { color: 'red', value: '-5%' },\n  { color: 'grey', value: '0%' },\n  { color: 'red', value: '-100%' },\n  { color: 'grey', value: '-70%' },\n  { color: 'grey', value: '-99%' },\n];\n\nexport const smallAnnotationsData: IAnnotation[] = [\n  { color: 'grey', value: '0%' },\n  { color: 'grey', value: '0%' },\n  { color: 'red', value: '-5%' },\n]\n/*\nexport const data: IBarChartData = {\n  bins: ['Data 1', 'Data 6', 'Data 3', 'Dat 4'],\n  counts: [\n    {\n      data: [10, 40, 300, 1200],\n      label: 'DataSet 1',\n    },\n    {\n      data: [5, 10, 15, 50],\n      label: 'DataSet 2',\n    },\n  ],\n};\n*/\n\nexport const analyticsAxis: DeepPartial<IAxes> = {\n  x: {\n    scale: 'ORDINAL',\n    numberFormat: '.2s',\n    labelOrientation: ELabelOrientation.horizontal,\n  },\n  y: {\n    // ...defaultAxis.y,\n    ticks: 3,\n    numberFormat: '.2s',\n    labelOrientation: ELabelOrientation.horizontal,\n  },\n};\n\nexport const verticalXAxis: DeepPartial<IAxes> = {\n  x: {\n    scale: 'ORDINAL',\n    text: {\n      style: {\n        'dy': '.35em',\n        'font-size': '0.1rem',\n        'stroke-opacity': 0,\n        'text-anchor': 'start',\n        'transform': 'rotate(90)',\n      },\n    }\n  },\n  y: {\n    // ...defaultAxis.y,\n    ticks: 3,\n  },\n}\n\nexport const axis: DeepPartial<IAxes> = {\n  x: {\n    // ...defaultAxis.x,\n    dateFormat: '%d-%b-%y',\n    scale: 'TIME',\n  },\n  y: {\n    // ...defaultAxis.y,\n    ticks: 3,\n  },\n};\n\nexport const data2 = {\n  bins: ['bin 1', 'bin 2', 'bin 3 with a long name', 'bin 4', 'bin 5', 'bin 6', 'bin 7'],\n  counts: [\n    {\n      borderColors: ['red'],\n      data: [1, 2, 3, 4, 5, 6, 7],\n      label: 'Data 1',\n    },\n  ],\n  title: 'Plot 1',\n};\n\nexport const data3 = {\n  bins: ['bin 1', 'bin 2', 'bin 3'],\n  counts: [\n    {\n      borderColors: ['red'],\n      colors: ['red'],\n      data: [100, 50, 40],\n      label: 'Data 1',\n    },\n    {\n      borderColors: ['red'],\n      colors: ['blue'],\n      data: [32, 1, 5, 0],\n      label: 'Data 2',\n    },\n  ],\n};\n\nexport const theme = filterRange(['rgba(255, 113, 1, 0.5)', '#fff6ef', 'rgba(0, 169, 123, 0.5)', '#f6fffd',\n  '#D7263D', 'rgba(215, 38, 61, 0.05)',\n  '#0f2629', '#ededed', 'rgba(86, 180, 191, 0.5)', '#f5fbfb', '#000000', '#0f2629', '#D7263D', '#FBD7D9',\n  '#ffebec', '#963540', '#22545a', '#56b4bf', '#56b4bf', '#56b4bf', '#FF7101', '#449098', '#77c3cb', '#d4eef8',\n  '#ff7101', '#FF7101', '#cc5a00', '#ff8d33', '#fef9e5', '#7d5d2e', '#00a97b', '#008762', '#33ba95', '#dbf1d6',\n  '#227839', '#0f5e7b', '#d4eef8', '#0f5e7b', '#F9C80E', '#007656', '#c5e5e9', '#f9c80e', '#a9a9a9',\n  '#dbdbdb', '#cccccc', '#e6e6e6', '#56b4bf', '#449098', '#77c3cb', '#22545a', '#ff7101', '#cdcdcd', '#ffffff',\n  '#d7263d', '#00a97b', '#888888', '#e6e6e6', '#f2f2f2', '#f4f4f4']);\n","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n  var results = [];\n\n  for (var i = 0, len = args.length; i < len; i++) {\n    var arg = args[i];\n\n    if (isArrayish(arg)) {\n      // http://jsperf.com/javascript-array-concat-vs-push/98\n      results = concat.call(results, slice.call(arg));\n    } else {\n      results.push(arg);\n    }\n  }\n\n  return results;\n};\n\nswizzle.wrap = function (fn) {\n  return function () {\n    return fn(swizzle(arguments));\n  };\n};","var ResizeObserverBoxOptions;\n\n(function (ResizeObserverBoxOptions) {\n  ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n  ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n  ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\n\nexport { ResizeObserverBoxOptions };","var resizeObservers = [];\nexport { resizeObservers };","var msg = 'ResizeObserver loop completed with undelivered notifications.';\n\nvar deliverResizeLoopError = function deliverResizeLoopError() {\n  var event;\n\n  if (typeof ErrorEvent === 'function') {\n    event = new ErrorEvent('error', {\n      message: msg\n    });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent('error', false, false);\n    event.message = msg;\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport { deliverResizeLoopError };","var DOMRectReadOnly = function () {\n  function DOMRectReadOnly(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.top = this.y;\n    this.left = this.x;\n    this.bottom = this.top + this.height;\n    this.right = this.left + this.width;\n    return Object.freeze(this);\n  }\n\n  DOMRectReadOnly.prototype.toJSON = function () {\n    var _a = this,\n        x = _a.x,\n        y = _a.y,\n        top = _a.top,\n        right = _a.right,\n        bottom = _a.bottom,\n        left = _a.left,\n        width = _a.width,\n        height = _a.height;\n\n    return {\n      x: x,\n      y: y,\n      top: top,\n      right: right,\n      bottom: bottom,\n      left: left,\n      width: width,\n      height: height\n    };\n  };\n\n  DOMRectReadOnly.fromRect = function (rectangle) {\n    return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n  };\n\n  return DOMRectReadOnly;\n}();\n\nexport { DOMRectReadOnly };","var trigger;\nvar callbacks = [];\n\nvar notify = function notify() {\n  return callbacks.splice(0).forEach(function (cb) {\n    return cb();\n  });\n};\n\nvar queueMicroTask = function queueMicroTask(callback) {\n  if (!trigger) {\n    var toggle_1 = 0;\n    var el_1 = document.createTextNode('');\n    var config = {\n      characterData: true\n    };\n    new MutationObserver(function () {\n      return notify();\n    }).observe(el_1, config);\n\n    trigger = function trigger() {\n      el_1.textContent = \"\" + (toggle_1 ? toggle_1-- : toggle_1++);\n    };\n  }\n\n  callbacks.push(callback);\n  trigger();\n};\n\nexport { queueMicroTask };","var isSVG = function isSVG(target) {\n  return target instanceof SVGElement && 'getBBox' in target;\n};\n\nvar isHidden = function isHidden(target) {\n  if (isSVG(target)) {\n    var _a = target.getBBox(),\n        width = _a.width,\n        height = _a.height;\n\n    return !width && !height;\n  }\n\n  var _b = target,\n      offsetWidth = _b.offsetWidth,\n      offsetHeight = _b.offsetHeight;\n  return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\n\nvar isElement = function isElement(obj) {\n  var _a, _b;\n\n  var scope = (_b = (_a = obj) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView;\n  return !!(scope && obj instanceof scope.Element);\n};\n\nvar isReplacedElement = function isReplacedElement(target) {\n  switch (target.tagName) {\n    case 'INPUT':\n      if (target.type !== 'image') {\n        break;\n      }\n\n    case 'VIDEO':\n    case 'AUDIO':\n    case 'EMBED':\n    case 'OBJECT':\n    case 'CANVAS':\n    case 'IFRAME':\n    case 'IMG':\n      return true;\n  }\n\n  return false;\n};\n\nexport { isSVG, isHidden, isElement, isReplacedElement };","export var global = typeof window !== 'undefined' ? window : {};","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = /msie|trident/i.test(global.navigator && global.navigator.userAgent);\n\nvar parseDimension = function parseDimension(pixel) {\n  return parseFloat(pixel || '0');\n};\n\nvar size = function size(inlineSize, blockSize, switchSizes) {\n  if (inlineSize === void 0) {\n    inlineSize = 0;\n  }\n\n  if (blockSize === void 0) {\n    blockSize = 0;\n  }\n\n  if (switchSizes === void 0) {\n    switchSizes = false;\n  }\n\n  return Object.freeze({\n    inlineSize: (switchSizes ? blockSize : inlineSize) || 0,\n    blockSize: (switchSizes ? inlineSize : blockSize) || 0\n  });\n};\n\nvar zeroBoxes = Object.freeze({\n  devicePixelContentBoxSize: size(),\n  borderBoxSize: size(),\n  contentBoxSize: size(),\n  contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\n\nvar calculateBoxSizes = function calculateBoxSizes(target, forceRecalculation) {\n  if (forceRecalculation === void 0) {\n    forceRecalculation = false;\n  }\n\n  if (cache.has(target) && !forceRecalculation) {\n    return cache.get(target);\n  }\n\n  if (isHidden(target)) {\n    cache.set(target, zeroBoxes);\n    return zeroBoxes;\n  }\n\n  var cs = getComputedStyle(target);\n  var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n  var removePadding = !IE && cs.boxSizing === 'border-box';\n  var switchSizes = verticalRegexp.test(cs.writingMode || '');\n  var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n  var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n  var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n  var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n  var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n  var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n  var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n  var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n  var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n  var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n  var horizontalPadding = paddingLeft + paddingRight;\n  var verticalPadding = paddingTop + paddingBottom;\n  var horizontalBorderArea = borderLeft + borderRight;\n  var verticalBorderArea = borderTop + borderBottom;\n  var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n  var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n  var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n  var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n  var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n  var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n  var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n  var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n  var boxes = Object.freeze({\n    devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n    borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n    contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n    contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n  });\n  cache.set(target, boxes);\n  return boxes;\n};\n\nvar calculateBoxSize = function calculateBoxSize(target, observedBox, forceRecalculation) {\n  var _a = calculateBoxSizes(target, forceRecalculation),\n      borderBoxSize = _a.borderBoxSize,\n      contentBoxSize = _a.contentBoxSize,\n      devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n\n  switch (observedBox) {\n    case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n      return devicePixelContentBoxSize;\n\n    case ResizeObserverBoxOptions.BORDER_BOX:\n      return borderBoxSize;\n\n    default:\n      return contentBoxSize;\n  }\n};\n\nexport { calculateBoxSize, calculateBoxSizes };","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\n\nvar ResizeObserverEntry = function () {\n  function ResizeObserverEntry(target) {\n    var boxes = calculateBoxSizes(target);\n    this.target = target;\n    this.contentRect = boxes.contentRect;\n    this.borderBoxSize = [boxes.borderBoxSize];\n    this.contentBoxSize = [boxes.contentBoxSize];\n    this.devicePixelContentBoxSize = [boxes.devicePixelContentBoxSize];\n  }\n\n  return ResizeObserverEntry;\n}();\n\nexport { ResizeObserverEntry };","import { isHidden } from '../utils/element';\n\nvar calculateDepthForNode = function calculateDepthForNode(node) {\n  if (isHidden(node)) {\n    return Infinity;\n  }\n\n  var depth = 0;\n  var parent = node.parentNode;\n\n  while (parent) {\n    depth += 1;\n    parent = parent.parentNode;\n  }\n\n  return depth;\n};\n\nexport { calculateDepthForNode };","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\n\nvar broadcastActiveObservations = function broadcastActiveObservations() {\n  var shallowestDepth = Infinity;\n  var callbacks = [];\n  resizeObservers.forEach(function processObserver(ro) {\n    if (ro.activeTargets.length === 0) {\n      return;\n    }\n\n    var entries = [];\n    ro.activeTargets.forEach(function processTarget(ot) {\n      var entry = new ResizeObserverEntry(ot.target);\n      var targetDepth = calculateDepthForNode(ot.target);\n      entries.push(entry);\n      ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n\n      if (targetDepth < shallowestDepth) {\n        shallowestDepth = targetDepth;\n      }\n    });\n    callbacks.push(function resizeObserverCallback() {\n      ro.callback.call(ro.observer, entries, ro.observer);\n    });\n    ro.activeTargets.splice(0, ro.activeTargets.length);\n  });\n\n  for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n    var callback = callbacks_1[_i];\n    callback();\n  }\n\n  return shallowestDepth;\n};\n\nexport { broadcastActiveObservations };","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\n\nvar gatherActiveObservationsAtDepth = function gatherActiveObservationsAtDepth(depth) {\n  resizeObservers.forEach(function processObserver(ro) {\n    ro.activeTargets.splice(0, ro.activeTargets.length);\n    ro.skippedTargets.splice(0, ro.skippedTargets.length);\n    ro.observationTargets.forEach(function processTarget(ot) {\n      if (ot.isActive()) {\n        if (calculateDepthForNode(ot.target) > depth) {\n          ro.activeTargets.push(ot);\n        } else {\n          ro.skippedTargets.push(ot);\n        }\n      }\n    });\n  });\n};\n\nexport { gatherActiveObservationsAtDepth };","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\n\nvar process = function process() {\n  var depth = 0;\n  gatherActiveObservationsAtDepth(depth);\n\n  while (hasActiveObservations()) {\n    depth = broadcastActiveObservations();\n    gatherActiveObservationsAtDepth(depth);\n  }\n\n  if (hasSkippedObservations()) {\n    deliverResizeLoopError();\n  }\n\n  return depth > 0;\n};\n\nexport { process };","import { resizeObservers } from '../utils/resizeObservers';\n\nvar hasActiveObservations = function hasActiveObservations() {\n  return resizeObservers.some(function (ro) {\n    return ro.activeTargets.length > 0;\n  });\n};\n\nexport { hasActiveObservations };","import { resizeObservers } from '../utils/resizeObservers';\n\nvar hasSkippedObservations = function hasSkippedObservations() {\n  return resizeObservers.some(function (ro) {\n    return ro.skippedTargets.length > 0;\n  });\n};\n\nexport { hasSkippedObservations };","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\n\nvar isWatching = function isWatching() {\n  return !!watching;\n};\n\nvar CATCH_PERIOD = 250;\nvar observerConfig = {\n  attributes: true,\n  characterData: true,\n  childList: true,\n  subtree: true\n};\nvar events = ['resize', 'load', 'transitionend', 'animationend', 'animationstart', 'animationiteration', 'keyup', 'keydown', 'mouseup', 'mousedown', 'mouseover', 'mouseout', 'blur', 'focus'];\n\nvar time = function time(timeout) {\n  if (timeout === void 0) {\n    timeout = 0;\n  }\n\n  return Date.now() + timeout;\n};\n\nvar scheduled = false;\n\nvar Scheduler = function () {\n  function Scheduler() {\n    var _this = this;\n\n    this.stopped = true;\n\n    this.listener = function () {\n      return _this.schedule();\n    };\n  }\n\n  Scheduler.prototype.run = function (timeout) {\n    var _this = this;\n\n    if (timeout === void 0) {\n      timeout = CATCH_PERIOD;\n    }\n\n    if (scheduled) {\n      return;\n    }\n\n    scheduled = true;\n    var until = time(timeout);\n    queueResizeObserver(function () {\n      var elementsHaveResized = false;\n\n      try {\n        elementsHaveResized = process();\n      } finally {\n        scheduled = false;\n        timeout = until - time();\n\n        if (!isWatching()) {\n          return;\n        }\n\n        if (elementsHaveResized) {\n          _this.run(1000);\n        } else if (timeout > 0) {\n          _this.run(timeout);\n        } else {\n          _this.start();\n        }\n      }\n    });\n  };\n\n  Scheduler.prototype.schedule = function () {\n    this.stop();\n    this.run();\n  };\n\n  Scheduler.prototype.observe = function () {\n    var _this = this;\n\n    var cb = function cb() {\n      return _this.observer && _this.observer.observe(document.body, observerConfig);\n    };\n\n    document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n  };\n\n  Scheduler.prototype.start = function () {\n    var _this = this;\n\n    if (this.stopped) {\n      this.stopped = false;\n      this.observer = new MutationObserver(this.listener);\n      this.observe();\n      events.forEach(function (name) {\n        return global.addEventListener(name, _this.listener, true);\n      });\n    }\n  };\n\n  Scheduler.prototype.stop = function () {\n    var _this = this;\n\n    if (!this.stopped) {\n      this.observer && this.observer.disconnect();\n      events.forEach(function (name) {\n        return global.removeEventListener(name, _this.listener, true);\n      });\n      this.stopped = true;\n    }\n  };\n\n  return Scheduler;\n}();\n\nvar scheduler = new Scheduler();\n\nvar updateCount = function updateCount(n) {\n  !watching && n > 0 && scheduler.start();\n  watching += n;\n  !watching && scheduler.stop();\n};\n\nexport { scheduler, updateCount };","import { queueMicroTask } from './queueMicroTask';\n\nvar queueResizeObserver = function queueResizeObserver(cb) {\n  queueMicroTask(function ResizeObserver() {\n    requestAnimationFrame(cb);\n  });\n};\n\nexport { queueResizeObserver };","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\n\nvar skipNotifyOnElement = function skipNotifyOnElement(target) {\n  return !isSVG(target) && !isReplacedElement(target) && getComputedStyle(target).display === 'inline';\n};\n\nvar ResizeObservation = function () {\n  function ResizeObservation(target, observedBox) {\n    this.target = target;\n    this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n    this.lastReportedSize = {\n      inlineSize: 0,\n      blockSize: 0\n    };\n  }\n\n  ResizeObservation.prototype.isActive = function () {\n    var size = calculateBoxSize(this.target, this.observedBox, true);\n\n    if (skipNotifyOnElement(this.target)) {\n      this.lastReportedSize = size;\n    }\n\n    if (this.lastReportedSize.inlineSize !== size.inlineSize || this.lastReportedSize.blockSize !== size.blockSize) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return ResizeObservation;\n}();\n\nexport { ResizeObservation };","var ResizeObserverDetail = function () {\n  function ResizeObserverDetail(resizeObserver, callback) {\n    this.activeTargets = [];\n    this.skippedTargets = [];\n    this.observationTargets = [];\n    this.observer = resizeObserver;\n    this.callback = callback;\n  }\n\n  return ResizeObserverDetail;\n}();\n\nexport { ResizeObserverDetail };","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\n\nvar getObservationIndex = function getObservationIndex(observationTargets, target) {\n  for (var i = 0; i < observationTargets.length; i += 1) {\n    if (observationTargets[i].target === target) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar ResizeObserverController = function () {\n  function ResizeObserverController() {}\n\n  ResizeObserverController.connect = function (resizeObserver, callback) {\n    var detail = new ResizeObserverDetail(resizeObserver, callback);\n    observerMap.set(resizeObserver, detail);\n  };\n\n  ResizeObserverController.observe = function (resizeObserver, target, options) {\n    var detail = observerMap.get(resizeObserver);\n    var firstObservation = detail.observationTargets.length === 0;\n\n    if (getObservationIndex(detail.observationTargets, target) < 0) {\n      firstObservation && resizeObservers.push(detail);\n      detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n      updateCount(1);\n      scheduler.schedule();\n    }\n  };\n\n  ResizeObserverController.unobserve = function (resizeObserver, target) {\n    var detail = observerMap.get(resizeObserver);\n    var index = getObservationIndex(detail.observationTargets, target);\n    var lastObservation = detail.observationTargets.length === 1;\n\n    if (index >= 0) {\n      lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n      detail.observationTargets.splice(index, 1);\n      updateCount(-1);\n    }\n  };\n\n  ResizeObserverController.disconnect = function (resizeObserver) {\n    var _this = this;\n\n    var detail = observerMap.get(resizeObserver);\n    detail.observationTargets.slice().forEach(function (ot) {\n      return _this.unobserve(resizeObserver, ot.target);\n    });\n    detail.activeTargets.splice(0, detail.activeTargets.length);\n  };\n\n  return ResizeObserverController;\n}();\n\nexport { ResizeObserverController };","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\n\nvar ResizeObserver = function () {\n  function ResizeObserver(callback) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (typeof callback !== 'function') {\n      throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n    }\n\n    ResizeObserverController.connect(this, callback);\n  }\n\n  ResizeObserver.prototype.observe = function (target, options) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (!isElement(target)) {\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    }\n\n    ResizeObserverController.observe(this, target, options);\n  };\n\n  ResizeObserver.prototype.unobserve = function (target) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (!isElement(target)) {\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    }\n\n    ResizeObserverController.unobserve(this, target);\n  };\n\n  ResizeObserver.prototype.disconnect = function () {\n    ResizeObserverController.disconnect(this);\n  };\n\n  ResizeObserver.toString = function () {\n    return 'function ResizeObserver () { [polyfill code] }';\n  };\n\n  return ResizeObserver;\n}();\n\nexport { ResizeObserver };","import {\n  useEffect,\n  useState,\n} from 'react';\nimport useMeasure from 'react-use-measure';\n\nimport { ResizeObserver } from '@juggle/resize-observer';\n\n// Helper hook to monitor container ref width and calculate pixel value from percent or number.\nexport const useWidth = (origWidth: string | number) => {\n  const [ref, { width }] = useMeasure({\n    debounce: 20,\n    polyfill: ResizeObserver,\n  });\n  const [r, setR] = useState<any>(width);\n  useEffect(() => {\n    const w = typeof origWidth === 'number'\n      ? origWidth\n      : origWidth.includes('%')\n        ? width * (parseInt(origWidth, 10) / 100)\n        : parseInt(origWidth, 10);\n    setR(w);\n  }, [origWidth, width]);\n  return [ref, r];\n}\n","import { extent } from 'd3-array';\nimport {\n  area,\n  curveCatmullRom,\n  CurveFactory,\n  CurveFactoryLineOnly,\n  line,\n} from 'd3-shape';\nimport {\n  useEffect,\n  useState,\n} from 'react';\n\nimport { IAxes } from '../Histogram';\nimport {\n  IChartPoint,\n  IChartPointValue,\n  ILineProps,\n} from '../LineChart';\nimport { rangeAffordance } from './domain';\nimport {\n  AnyScale,\n  buildScales,\n} from './scales';\n\nconst ZERO_SUBSTITUTE: number = 1e-6;\n\nexport interface IProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  data: T[];\n  axis: IAxes;\n  line: ILineProps;\n  curveType?: CurveFactory | CurveFactoryLineOnly;\n  width: number;\n  left?: number;\n  height: number;\n}\n\nexport const useScales: (props: Omit<IProps, 'line'>) => { xScale: any, yScale: any } = ({\n  data,\n  width,\n  height,\n  axis,\n  left = 0,\n}) => {\n  const [scales, setScales] = useState<{ xScale: any, yScale: any }>({ xScale: null, yScale: null });\n  useEffect(() => {\n    const [xScale, yScale] = buildScales(axis);\n\n    const ys: any[] = [];\n    const xs: any[] = [];\n    data.forEach((d) => {\n      let parsedY = axis.y.scale === 'LOG' && d.y === 0 ? ZERO_SUBSTITUTE : d.y;\n      let parsedX = axis.x.scale === 'LOG' && d.x === 0 ? ZERO_SUBSTITUTE : d.x;\n      ys.push(parsedY);\n      xs.push(parsedX);\n    });\n\n    const yDomain = rangeAffordance(extent(ys), axis.y);\n    const xDomain = rangeAffordance(extent(xs), axis.x);\n    (xScale as any)\n      .domain(xDomain)\n      .rangeRound([left, width + left]);\n    (yScale as any).domain(yDomain)\n      .range([height, 0]);\n    setScales({ xScale, yScale })\n\n  }, [])\n\n  return scales;\n}\n\n\nexport const useMakeLine: (props: IProps) => { previous: string, current: string } = (props) => {\n  const [current, setCurrent] = useState('');\n  const [previous, setPrevious] = useState('');\n  const { xScale, yScale } = useScales(props);\n  useEffect(() => {\n    const { data } = props;\n    const { curveType = curveCatmullRom } = props.line;\n    if (yScale !== null) {\n      const curve = (\n        x: AnyScale,\n        y: AnyScale,\n      ) => line()\n        .curve(curveType)\n        .x((d: any) => {\n          return x(d.x);\n        })\n        .y((d: any) => y(d.y));\n      const next = String(curve(xScale, yScale)(data as any))\n      if (next !== current) {\n        setPrevious(current);\n        setCurrent(next);\n      }\n    }\n\n  }, [xScale, yScale, props.data])\n\n  return { previous, current };\n}\n\nexport const useMakeArea: (props: IProps) => { previous: string, current: string } = (props) => {\n  const [current, setCurrent] = useState('');\n  const [previous, setPrevious] = useState('');\n  const { xScale, yScale } = useScales(props);\n  useEffect(() => {\n    const { data, height } = props;\n    const { curveType = curveCatmullRom } = props.line;\n    if (yScale !== null) {\n      const thisArea = () => area()\n        .curve(curveType as CurveFactory)\n        .x((d: any) => xScale(d.x))\n        .y0((d) => height)\n        .y1((d: any) => yScale(d.y));\n      const next = String(thisArea()(data as any));\n      if (next !== current) {\n        setPrevious(current);\n        setCurrent(next);\n      }\n    }\n  }, [xScale, yScale, props.data]);\n  return { previous, current };\n}\n","export default function (domain, interval) {\n  domain = domain.slice();\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}","import { ticks } from \"d3-array\";\nimport { format } from \"d3-format\";\nimport nice from \"./nice.js\";\nimport { copy, transformer } from \"./continuous.js\";\nimport { initRange } from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10 : base === Math.E ? Math.exp : function (x) {\n    return Math.pow(base, x);\n  };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log : base === 10 && Math.log10 || base === 2 && Math.log2 || (base = Math.log(base), function (x) {\n    return Math.log(x) / base;\n  });\n}\n\nfunction reflect(f) {\n  return function (x) {\n    return -f(-x);\n  };\n}\n\nexport function loggish(transform) {\n  var scale = transform(transformLog, transformExp),\n      domain = scale.domain,\n      base = 10,\n      logs,\n      pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n\n    return scale;\n  }\n\n  scale.base = function (_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function (_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function (count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n    if (r = v < u) i = u, u = v, v = i;\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function (count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n\n    return function (d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function () {\n    return domain(nice(domain(), {\n      floor: function floor(x) {\n        return pows(Math.floor(logs(x)));\n      },\n      ceil: function ceil(x) {\n        return pows(Math.ceil(logs(x)));\n      }\n    }));\n  };\n\n  return scale;\n}\nexport default function log() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function () {\n    return copy(scale, log()).base(scale.base());\n  };\n\n  initRange.apply(scale, arguments);\n  return scale;\n}","import interval from \"./interval.js\";\nvar month = interval(function (date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function (date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function (start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function (date) {\n  return date.getMonth();\n});\nexport default month;\nexport var months = month.range;","import interval from \"./interval.js\";\nimport { durationHour, durationMinute, durationSecond } from \"./duration.js\";\nvar hour = interval(function (date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function (date, step) {\n  date.setTime(+date + step * durationHour);\n}, function (start, end) {\n  return (end - start) / durationHour;\n}, function (date) {\n  return date.getHours();\n});\nexport default hour;\nexport var hours = hour.range;","import interval from \"./interval.js\";\nimport { durationMinute, durationSecond } from \"./duration.js\";\nvar minute = interval(function (date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function (date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function (start, end) {\n  return (end - start) / durationMinute;\n}, function (date) {\n  return date.getMinutes();\n});\nexport default minute;\nexport var minutes = minute.range;","import interval from \"./interval.js\";\nimport { durationSecond } from \"./duration.js\";\nvar second = interval(function (date) {\n  date.setTime(date - date.getMilliseconds());\n}, function (date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function (start, end) {\n  return (end - start) / durationSecond;\n}, function (date) {\n  return date.getUTCSeconds();\n});\nexport default second;\nexport var seconds = second.range;","import interval from \"./interval.js\";\nvar millisecond = interval(function () {// noop\n}, function (date, step) {\n  date.setTime(+date + step);\n}, function (start, end) {\n  return end - start;\n}); // An optimized implementation for this simple case.\n\nmillisecond.every = function (k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function (date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function (date, step) {\n    date.setTime(+date + step * k);\n  }, function (start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;","import { bisector, tickStep } from \"d3-array\";\nimport { timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond } from \"d3-time\";\nimport { timeFormat } from \"d3-time-format\";\nimport continuous, { copy } from \"./continuous.js\";\nimport { initRange } from \"./init.js\";\nimport nice from \"./nice.js\";\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n  var tickIntervals = [[second, 1, durationSecond], [second, 5, 5 * durationSecond], [second, 15, 15 * durationSecond], [second, 30, 30 * durationSecond], [minute, 1, durationMinute], [minute, 5, 5 * durationMinute], [minute, 15, 15 * durationMinute], [minute, 30, 30 * durationMinute], [hour, 1, durationHour], [hour, 3, 3 * durationHour], [hour, 6, 6 * durationHour], [hour, 12, 12 * durationHour], [day, 1, durationDay], [day, 2, 2 * durationDay], [week, 1, durationWeek], [month, 1, durationMonth], [month, 3, 3 * durationMonth], [year, 1, durationYear]];\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond : minute(date) < date ? formatSecond : hour(date) < date ? formatMinute : day(date) < date ? formatHour : month(date) < date ? week(date) < date ? formatDay : formatWeek : year(date) < date ? formatMonth : formatYear)(date);\n  }\n\n  function tickInterval(interval, start, stop) {\n    if (interval == null) interval = 10; // If a desired tick count is specified, pick a reasonable tick interval\n    // based on the extent of the domain and a rough estimate of tick size.\n    // Otherwise, assume interval is already a time interval and use it.\n\n    if (typeof interval === \"number\") {\n      var target = Math.abs(stop - start) / interval,\n          i = bisector(function (i) {\n        return i[2];\n      }).right(tickIntervals, target),\n          step;\n\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, interval);\n        interval = year;\n      } else if (i) {\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n        step = i[1];\n        interval = i[0];\n      } else {\n        step = Math.max(tickStep(start, stop, interval), 1);\n        interval = millisecond;\n      }\n\n      return interval.every(step);\n    }\n\n    return interval;\n  }\n\n  scale.invert = function (y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function (_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function (interval) {\n    var d = domain(),\n        t0 = d[0],\n        t1 = d[d.length - 1],\n        r = t1 < t0,\n        t;\n    if (r) t = t0, t0 = t1, t1 = t;\n    t = tickInterval(interval, t0, t1);\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n\n    return r ? t.reverse() : t;\n  };\n\n  scale.tickFormat = function (count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function (interval) {\n    var d = domain();\n    return (interval = tickInterval(interval, d[0], d[d.length - 1])) ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function () {\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n  };\n\n  return scale;\n}\nexport default function () {\n  return initRange.apply(calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}","import {\n  ScaleBand,\n  scaleLinear,\n  ScaleLinear,\n  scaleLog,\n  ScaleLogarithmic,\n  ScalePoint,\n  scaleTime,\n  ScaleTime,\n} from 'd3-scale';\n\nimport { IAxes } from '../';\n\nexport type AnyScale = ScaleLinear<number, number>\n  | ScaleTime<any, any>\n  | ScaleLogarithmic<any, any>\n  | ScaleBand<string>\n  | ScalePoint<string>;\n\nexport const buildScales = (axis: IAxes) => {\n  let x: AnyScale;\n  let y: AnyScale;\n  switch (axis.x.scale) {\n    case 'LOG':\n      x = scaleLog().clamp(true); // clamp values below 1 to be equal to 0\n      break;\n    case 'TIME':\n      x = scaleTime();\n      break;\n    default:\n      x = scaleLinear();\n      break;\n  }\n\n  switch (axis.y.scale) {\n    case 'LOG':\n      y = scaleLog().clamp(true); // clamp values below 1 to be equal to 0\n      break;\n    case 'TIME':\n      y = scaleTime();\n      break;\n    default:\n      y = scaleLinear();\n      break;\n  }\n  return [x, y];\n};\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function areaStart() {\n    this._line = 0;\n  },\n  areaEnd: function areaEnd() {\n    this._line = NaN;\n  },\n  lineStart: function lineStart() {\n    this._point = 0;\n  },\n  lineEnd: function lineEnd() {\n    if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function point(x, y) {\n    x = +x, y = +y;\n\n    switch (this._point) {\n      case 0:\n        this._point = 1;\n        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);\n        break;\n\n      case 1:\n        this._point = 2;\n      // proceed\n\n      default:\n        this._context.lineTo(x, y);\n\n        break;\n    }\n  }\n};\nexport default function (context) {\n  return new Linear(context);\n}","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","import { path } from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport { x as pointX, y as pointY } from \"./point.js\";\nexport default function () {\n  var x0 = pointX,\n      x1 = null,\n      y0 = constant(0),\n      y1 = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function (_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function (_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function (_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function (_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function (_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function (_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 = area.lineY0 = function () {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function () {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function () {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function (_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function (_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function (_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}","import { path } from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport { x as pointX, y as pointY } from \"./point.js\";\nexport default function () {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();else output.lineEnd();\n      }\n\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function (_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function (_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function (_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}","'use strict';\n\nvar colorString = require('color-string');\n\nvar convert = require('color-convert');\n\nvar _slice = [].slice;\nvar skippedModels = [// to be honest, I don't really feel like keyword belongs in color convert, but eh.\n'keyword', // gray conflicts with some method names, and has its own method defined.\n'gray', // shouldn't really be in color-convert either...\n'hex'];\nvar hashedModelKeys = {};\nObject.keys(convert).forEach(function (model) {\n  hashedModelKeys[_slice.call(convert[model].labels).sort().join('')] = model;\n});\nvar limiters = {};\n\nfunction Color(obj, model) {\n  if (!(this instanceof Color)) {\n    return new Color(obj, model);\n  }\n\n  if (model && model in skippedModels) {\n    model = null;\n  }\n\n  if (model && !(model in convert)) {\n    throw new Error('Unknown model: ' + model);\n  }\n\n  var i;\n  var channels;\n\n  if (obj == null) {\n    // eslint-disable-line no-eq-null,eqeqeq\n    this.model = 'rgb';\n    this.color = [0, 0, 0];\n    this.valpha = 1;\n  } else if (obj instanceof Color) {\n    this.model = obj.model;\n    this.color = obj.color.slice();\n    this.valpha = obj.valpha;\n  } else if (typeof obj === 'string') {\n    var result = colorString.get(obj);\n\n    if (result === null) {\n      throw new Error('Unable to parse color from string: ' + obj);\n    }\n\n    this.model = result.model;\n    channels = convert[this.model].channels;\n    this.color = result.value.slice(0, channels);\n    this.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;\n  } else if (obj.length) {\n    this.model = model || 'rgb';\n    channels = convert[this.model].channels;\n\n    var newArr = _slice.call(obj, 0, channels);\n\n    this.color = zeroArray(newArr, channels);\n    this.valpha = typeof obj[channels] === 'number' ? obj[channels] : 1;\n  } else if (typeof obj === 'number') {\n    // this is always RGB - can be converted later on.\n    obj &= 0xFFFFFF;\n    this.model = 'rgb';\n    this.color = [obj >> 16 & 0xFF, obj >> 8 & 0xFF, obj & 0xFF];\n    this.valpha = 1;\n  } else {\n    this.valpha = 1;\n    var keys = Object.keys(obj);\n\n    if ('alpha' in obj) {\n      keys.splice(keys.indexOf('alpha'), 1);\n      this.valpha = typeof obj.alpha === 'number' ? obj.alpha : 0;\n    }\n\n    var hashedKeys = keys.sort().join('');\n\n    if (!(hashedKeys in hashedModelKeys)) {\n      throw new Error('Unable to parse color from object: ' + JSON.stringify(obj));\n    }\n\n    this.model = hashedModelKeys[hashedKeys];\n    var labels = convert[this.model].labels;\n    var color = [];\n\n    for (i = 0; i < labels.length; i++) {\n      color.push(obj[labels[i]]);\n    }\n\n    this.color = zeroArray(color);\n  } // perform limitations (clamping, etc.)\n\n\n  if (limiters[this.model]) {\n    channels = convert[this.model].channels;\n\n    for (i = 0; i < channels; i++) {\n      var limit = limiters[this.model][i];\n\n      if (limit) {\n        this.color[i] = limit(this.color[i]);\n      }\n    }\n  }\n\n  this.valpha = Math.max(0, Math.min(1, this.valpha));\n\n  if (Object.freeze) {\n    Object.freeze(this);\n  }\n}\n\nColor.prototype = {\n  toString: function toString() {\n    return this.string();\n  },\n  toJSON: function toJSON() {\n    return this[this.model]();\n  },\n  string: function string(places) {\n    var self = this.model in colorString.to ? this : this.rgb();\n    self = self.round(typeof places === 'number' ? places : 1);\n    var args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n    return colorString.to[self.model](args);\n  },\n  percentString: function percentString(places) {\n    var self = this.rgb().round(typeof places === 'number' ? places : 1);\n    var args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n    return colorString.to.rgb.percent(args);\n  },\n  array: function array() {\n    return this.valpha === 1 ? this.color.slice() : this.color.concat(this.valpha);\n  },\n  object: function object() {\n    var result = {};\n    var channels = convert[this.model].channels;\n    var labels = convert[this.model].labels;\n\n    for (var i = 0; i < channels; i++) {\n      result[labels[i]] = this.color[i];\n    }\n\n    if (this.valpha !== 1) {\n      result.alpha = this.valpha;\n    }\n\n    return result;\n  },\n  unitArray: function unitArray() {\n    var rgb = this.rgb().color;\n    rgb[0] /= 255;\n    rgb[1] /= 255;\n    rgb[2] /= 255;\n\n    if (this.valpha !== 1) {\n      rgb.push(this.valpha);\n    }\n\n    return rgb;\n  },\n  unitObject: function unitObject() {\n    var rgb = this.rgb().object();\n    rgb.r /= 255;\n    rgb.g /= 255;\n    rgb.b /= 255;\n\n    if (this.valpha !== 1) {\n      rgb.alpha = this.valpha;\n    }\n\n    return rgb;\n  },\n  round: function round(places) {\n    places = Math.max(places || 0, 0);\n    return new Color(this.color.map(roundToPlace(places)).concat(this.valpha), this.model);\n  },\n  alpha: function alpha(val) {\n    if (arguments.length) {\n      return new Color(this.color.concat(Math.max(0, Math.min(1, val))), this.model);\n    }\n\n    return this.valpha;\n  },\n  // rgb\n  red: getset('rgb', 0, maxfn(255)),\n  green: getset('rgb', 1, maxfn(255)),\n  blue: getset('rgb', 2, maxfn(255)),\n  hue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, function (val) {\n    return (val % 360 + 360) % 360;\n  }),\n  // eslint-disable-line brace-style\n  saturationl: getset('hsl', 1, maxfn(100)),\n  lightness: getset('hsl', 2, maxfn(100)),\n  saturationv: getset('hsv', 1, maxfn(100)),\n  value: getset('hsv', 2, maxfn(100)),\n  chroma: getset('hcg', 1, maxfn(100)),\n  gray: getset('hcg', 2, maxfn(100)),\n  white: getset('hwb', 1, maxfn(100)),\n  wblack: getset('hwb', 2, maxfn(100)),\n  cyan: getset('cmyk', 0, maxfn(100)),\n  magenta: getset('cmyk', 1, maxfn(100)),\n  yellow: getset('cmyk', 2, maxfn(100)),\n  black: getset('cmyk', 3, maxfn(100)),\n  x: getset('xyz', 0, maxfn(100)),\n  y: getset('xyz', 1, maxfn(100)),\n  z: getset('xyz', 2, maxfn(100)),\n  l: getset('lab', 0, maxfn(100)),\n  a: getset('lab', 1),\n  b: getset('lab', 2),\n  keyword: function keyword(val) {\n    if (arguments.length) {\n      return new Color(val);\n    }\n\n    return convert[this.model].keyword(this.color);\n  },\n  hex: function hex(val) {\n    if (arguments.length) {\n      return new Color(val);\n    }\n\n    return colorString.to.hex(this.rgb().round().color);\n  },\n  rgbNumber: function rgbNumber() {\n    var rgb = this.rgb().color;\n    return (rgb[0] & 0xFF) << 16 | (rgb[1] & 0xFF) << 8 | rgb[2] & 0xFF;\n  },\n  luminosity: function luminosity() {\n    // http://www.w3.org/TR/WCAG20/#relativeluminancedef\n    var rgb = this.rgb().color;\n    var lum = [];\n\n    for (var i = 0; i < rgb.length; i++) {\n      var chan = rgb[i] / 255;\n      lum[i] = chan <= 0.03928 ? chan / 12.92 : Math.pow((chan + 0.055) / 1.055, 2.4);\n    }\n\n    return 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n  },\n  contrast: function contrast(color2) {\n    // http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n    var lum1 = this.luminosity();\n    var lum2 = color2.luminosity();\n\n    if (lum1 > lum2) {\n      return (lum1 + 0.05) / (lum2 + 0.05);\n    }\n\n    return (lum2 + 0.05) / (lum1 + 0.05);\n  },\n  level: function level(color2) {\n    var contrastRatio = this.contrast(color2);\n\n    if (contrastRatio >= 7.1) {\n      return 'AAA';\n    }\n\n    return contrastRatio >= 4.5 ? 'AA' : '';\n  },\n  isDark: function isDark() {\n    // YIQ equation from http://24ways.org/2010/calculating-color-contrast\n    var rgb = this.rgb().color;\n    var yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n    return yiq < 128;\n  },\n  isLight: function isLight() {\n    return !this.isDark();\n  },\n  negate: function negate() {\n    var rgb = this.rgb();\n\n    for (var i = 0; i < 3; i++) {\n      rgb.color[i] = 255 - rgb.color[i];\n    }\n\n    return rgb;\n  },\n  lighten: function lighten(ratio) {\n    var hsl = this.hsl();\n    hsl.color[2] += hsl.color[2] * ratio;\n    return hsl;\n  },\n  darken: function darken(ratio) {\n    var hsl = this.hsl();\n    hsl.color[2] -= hsl.color[2] * ratio;\n    return hsl;\n  },\n  saturate: function saturate(ratio) {\n    var hsl = this.hsl();\n    hsl.color[1] += hsl.color[1] * ratio;\n    return hsl;\n  },\n  desaturate: function desaturate(ratio) {\n    var hsl = this.hsl();\n    hsl.color[1] -= hsl.color[1] * ratio;\n    return hsl;\n  },\n  whiten: function whiten(ratio) {\n    var hwb = this.hwb();\n    hwb.color[1] += hwb.color[1] * ratio;\n    return hwb;\n  },\n  blacken: function blacken(ratio) {\n    var hwb = this.hwb();\n    hwb.color[2] += hwb.color[2] * ratio;\n    return hwb;\n  },\n  grayscale: function grayscale() {\n    // http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n    var rgb = this.rgb().color;\n    var val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n    return Color.rgb(val, val, val);\n  },\n  fade: function fade(ratio) {\n    return this.alpha(this.valpha - this.valpha * ratio);\n  },\n  opaquer: function opaquer(ratio) {\n    return this.alpha(this.valpha + this.valpha * ratio);\n  },\n  rotate: function rotate(degrees) {\n    var hsl = this.hsl();\n    var hue = hsl.color[0];\n    hue = (hue + degrees) % 360;\n    hue = hue < 0 ? 360 + hue : hue;\n    hsl.color[0] = hue;\n    return hsl;\n  },\n  mix: function mix(mixinColor, weight) {\n    // ported from sass implementation in C\n    // https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n    if (!mixinColor || !mixinColor.rgb) {\n      throw new Error('Argument to \"mix\" was not a Color instance, but rather an instance of ' + typeof mixinColor);\n    }\n\n    var color1 = mixinColor.rgb();\n    var color2 = this.rgb();\n    var p = weight === undefined ? 0.5 : weight;\n    var w = 2 * p - 1;\n    var a = color1.alpha() - color2.alpha();\n    var w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n    var w2 = 1 - w1;\n    return Color.rgb(w1 * color1.red() + w2 * color2.red(), w1 * color1.green() + w2 * color2.green(), w1 * color1.blue() + w2 * color2.blue(), color1.alpha() * p + color2.alpha() * (1 - p));\n  }\n}; // model conversion methods and static constructors\n\nObject.keys(convert).forEach(function (model) {\n  if (skippedModels.indexOf(model) !== -1) {\n    return;\n  }\n\n  var channels = convert[model].channels; // conversion methods\n\n  Color.prototype[model] = function () {\n    if (this.model === model) {\n      return new Color(this);\n    }\n\n    if (arguments.length) {\n      return new Color(arguments, model);\n    }\n\n    var newAlpha = typeof arguments[channels] === 'number' ? channels : this.valpha;\n    return new Color(assertArray(convert[this.model][model].raw(this.color)).concat(newAlpha), model);\n  }; // 'static' construction methods\n\n\n  Color[model] = function (color) {\n    if (typeof color === 'number') {\n      color = zeroArray(_slice.call(arguments), channels);\n    }\n\n    return new Color(color, model);\n  };\n});\n\nfunction roundTo(num, places) {\n  return Number(num.toFixed(places));\n}\n\nfunction roundToPlace(places) {\n  return function (num) {\n    return roundTo(num, places);\n  };\n}\n\nfunction getset(model, channel, modifier) {\n  model = Array.isArray(model) ? model : [model];\n  model.forEach(function (m) {\n    (limiters[m] || (limiters[m] = []))[channel] = modifier;\n  });\n  model = model[0];\n  return function (val) {\n    var result;\n\n    if (arguments.length) {\n      if (modifier) {\n        val = modifier(val);\n      }\n\n      result = this[model]();\n      result.color[channel] = val;\n      return result;\n    }\n\n    result = this[model]().color[channel];\n\n    if (modifier) {\n      result = modifier(result);\n    }\n\n    return result;\n  };\n}\n\nfunction maxfn(max) {\n  return function (v) {\n    return Math.max(0, Math.min(max, v));\n  };\n}\n\nfunction assertArray(val) {\n  return Array.isArray(val) ? val : [val];\n}\n\nfunction zeroArray(arr, length) {\n  for (var i = 0; i < length; i++) {\n    if (typeof arr[i] !== 'number') {\n      arr[i] = 0;\n    }\n  }\n\n  return arr;\n}\n\nmodule.exports = Color;","export function x(p) {\n  return p[0];\n}\nexport function y(p) {\n  return p[1];\n}","import {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport { format } from 'd3-format';\nimport {\n  scaleBand,\n  scaleLinear,\n  scaleOrdinal,\n  scalePoint,\n} from 'd3-scale';\nimport { Selection } from 'd3-selection';\nimport { timeFormat } from 'd3-time-format';\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nimport {\n  IGroupData,\n  IGroupDataItem,\n} from './BaseHistogramD3';\nimport colorScheme from './colors';\nimport attrs from './d3/attrs';\nimport {\n  gridHeight,\n  gridWidth,\n  xAxisHeight,\n  yAxisWidth,\n} from './grid';\nimport {\n  EGroupedBarLayout,\n  IChartAdaptor,\n} from './Histogram';\nimport tips, { makeTip } from './tip';\nimport {\n  ITornadoDataSet,\n  ITornadoProps,\n} from './Tornado';\nimport {\n  getBarWidth,\n  groupedBarsUseSameXAxisValue,\n  groupedPaddingInner,\n  paddingInner,\n} from './utils/bars';\nimport {\n  axis as defaultAxis,\n  grid as defaultGrid,\n} from './utils/defaults';\nimport {\n  applyDomainAffordance,\n  shouldFormatTick,\n  ticks,\n  tickSize,\n} from './utils/domain';\nimport {\n  onClick,\n  onMouseOut,\n  onMouseOver,\n} from './utils/mouseOver';\nimport {\n  makeGrid,\n  makeScales,\n  makeSvg,\n  sizeSVG,\n  TSelection,\n} from './utils/svg';\nimport { DeepPartial } from './utils/types';\n\nexport const maxValueCount = (counts: ITornadoDataSet[]): number => {\n  return counts.reduce((a: number, b: ITornadoDataSet): number => {\n    return b.data.length > a ? b.data.length : a;\n  }, 0);\n};\n\n// The height for the x axis labels showing the left/right labels.\nconst SPLIT_AXIS_HEIGHT = 20;\n\nconst calculatePercents = (groupData: IGroupData) => {\n  const totals = groupData.reduce((prev, next) => {\n\n    next.forEach((datum, i) => {\n      const side = datum.side!;\n      const groupLabel = datum.groupLabel!;\n      if (!prev[groupLabel]) {\n        prev[groupLabel] = { left: 0, right: 0 };\n      }\n      prev[groupLabel][side] = prev[groupLabel][side] + datum.value;\n    })\n    return prev;\n  }, {} as Record<string, { left: number, right: number }>);\n\n\n  return groupData.map((data, i) => {\n    return data.map((datum) => {\n      const side = datum.side!;\n      const groupLabel = datum.groupLabel!;\n      const total = totals[groupLabel][side];\n      return {\n        ...datum,\n        percent: total === 0 ? 0 : Math.round(datum.value / total * 100),\n      }\n    })\n\n  });\n}\n\nexport class TornadoD3 {\n  svg: undefined | Selection<any, any, any, any>;;\n  tipContainer;\n  tipContent;\n  x = scaleLinear();\n  y = scaleBand();\n  innerScaleBand = scaleBand();\n  container: undefined | Selection<SVGElement, any, any, any>;\n  dataSets: IGroupData = [[]];\n  gridX: undefined | TSelection;\n  gridY: undefined | TSelection;\n  yAxisContainer: undefined | TSelection;\n  xAxisContainer: undefined | TSelection;\n  xAxisContainer2: undefined | TSelection;\n  yAxisLabel: undefined | TSelection;\n  xAxisLabel: undefined | TSelection;\n  domain: [number, number] = [0, 0];\n\n  props: ITornadoProps = {\n    axis: cloneDeep(defaultAxis),\n    bar: {\n      grouped: {\n        paddingInner: 0.1,\n        paddingOuter: 0,\n      },\n      paddingInner: 0.1,\n      paddingOuter: 0,\n      overlayMargin: 5,\n    },\n    className: 'torando-d3',\n    colorScheme,\n    center: true,\n    data: {\n      bins: [],\n      colorScheme: [],\n      counts: [],\n    },\n    delay: 0,\n    domain: {\n      max: null,\n      min: null,\n    },\n    duration: 400,\n    grid: defaultGrid,\n    groupLayout: EGroupedBarLayout.GROUPED,\n    height: 200,\n    margin: {\n      bottom: 0,\n      left: 5,\n      right: 0,\n      top: 5,\n    },\n    showBinPercentages: false,\n    splitBins: ['Left', 'Right'],\n    stroke: {\n      color: '#005870',\n      dasharray: '',\n      linecap: 'butt',\n      width: 0,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (bins: string[], i: number, d: number): string =>\n      bins[i] + '<br />' + d,\n    visible: {},\n    width: 200,\n  };\n\n  /**\n   * Initialization\n   */\n  create(el: Element, newProps: DeepPartial<ITornadoProps> = {}) {\n    const { props } = this;\n    this.mergeProps(newProps);\n    this.svg = makeSvg(el, undefined);\n    const { margin, width, height, className } = props;\n    sizeSVG(this.svg, { margin, width, height, className });\n    const r = makeTip(props.tipContainer, this.tipContainer);\n    this.tipContent = r.tipContent;\n    this.tipContainer = r.tipContainer;\n    [this.gridX, this.gridY] = makeGrid(this.svg);\n\n    // Used to display the 2 split bin labels\n    this.xAxisContainer2 = this.svg.append('g').attr('class', 'xAxisContainer2');\n    this.container = this.svg\n      .append<SVGElement>('g')\n      .attr('class', 'histogram-container');\n\n    // Render Axis above bars so that we can see the y axis overlaid\n    [this.xAxisContainer, this.yAxisContainer, this.xAxisLabel, this.yAxisLabel] = makeScales(this.svg);\n\n    this.update(props);\n  }\n\n  /**\n   * Draw Axes\n   */\n  drawAxes() {\n    const { props, svg, x, y, innerScaleBand, yAxisContainer, domain, xAxisContainer, xAxisContainer2 } = this;\n    const { bar, data, groupLayout, margin, width, height, axis } = props;\n    const valuesCount = maxValueCount(data.counts);\n    const w = gridWidth(props);\n    const h = gridHeight(props) - SPLIT_AXIS_HEIGHT;\n    const dataLabels = data.counts.map((c) => c.label);\n\n    y.domain(data.bins)\n      .rangeRound([h, 0])\n      .paddingInner(groupedPaddingInner(bar));\n\n    innerScaleBand\n      .domain(groupedBarsUseSameXAxisValue({ groupLayout }) ? ['main'] : dataLabels)\n      .rangeRound([0, y.bandwidth()])\n      .paddingInner(paddingInner(props.bar));\n\n    const xAxis = axisBottom<number>(x)\n      .tickFormat((v) => {\n        const n = v.toString().replace('-', '');\n\n        if (shouldFormatTick(axis.x)) {\n          if (axis.x.scale === 'TIME') {\n            return timeFormat(axis.x.dateFormat)(new Date(n));\n          }\n          return isNaN(Number(v)) ? n : format(axis.x.numberFormat)(Number(n))\n        }\n        return n;\n      });\n\n    tickSize({\n      axis: xAxis,\n      axisLength: w,\n      scaleBand: x,\n      axisConfig: axis.x,\n      limitByValues: false,\n      valuesCount: 10,\n    });\n\n    this.calculateDomain();\n\n    const x2 = scalePoint<any>();\n\n    const xGroupAxis = axisBottom(x2).tickPadding(SPLIT_AXIS_HEIGHT)\n      .tickSize(0)\n\n    x2.range([Number(width) / 4, Number(width) * (3 / 4) - (margin.top * 2) - axis.y.width])\n      .domain(props.splitBins);\n\n    /** Y-Axis (label axis) set up */\n    const yAxis = axisLeft<string>(y);\n    ticks({\n      axis: yAxis,\n      valuesCount,\n      axisLength: h,\n      axisConfig: axis.y,\n      scaleBand: y,\n      limitByValues: true,\n    });\n\n\n    // @TODO - Stacked? (was using appendDomainRange())\n    x.range([0, Number(width) - (margin.top * 2) - axis.y.width])\n      .domain(this.domain)\n      .nice();\n\n    const xAxisY = height - xAxisHeight(props.axis) - margin.top - SPLIT_AXIS_HEIGHT;\n    xAxisContainer\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        xAxisY + ')')\n      .call(xAxis);\n\n    xAxisContainer2\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        (xAxisY) + ')')\n      .call(xGroupAxis);\n\n\n    // Move the y axis ticks to the left of the chart (need to go after the x axis range set up)\n    yAxis.tickPadding(x(0) + 10)\n    yAxisContainer\n      // Place the y axis in the middle of the chart\n      ?.attr('transform', 'translate(' + (yAxisWidth(axis) + x(0)) + ', ' + margin.top + ' )')\n      .call(yAxis);\n    attrs(svg?.selectAll('.y-axis .domain, .y-axis .tick line'), axis.y.style);\n    attrs(svg?.selectAll('.y-axis .tick text'), axis.y.text.style as any);\n\n    attrs(svg?.selectAll('.x-axis .domain, .x-axis .tick line'), axis.x.style);\n    attrs(svg?.selectAll('.x-axis .tick text'), axis.x.text.style as any);\n  }\n\n  calculateDomain() {\n    const { props } = this;\n    const { data, center } = props;\n    const leftValues = data.counts.reduce((prev, next) => prev.concat(next.data[0]), [] as number[]);\n    const rightValues = data.counts.reduce((prev, next) => prev.concat(next.data[1]), [] as number[]);\n\n    // Use applyDomainAffordance to allow space for percentage labels\n    this.domain = [\n      applyDomainAffordance(-Math.max(...leftValues)),\n      applyDomainAffordance(Math.max(...rightValues)),\n    ];\n\n    // Center the 0 axis value in the middle of the chart\n    if (center) {\n      const max = Math.max(Math.max(...leftValues), this.domain[1]);\n      this.domain = [\n        applyDomainAffordance(-max),\n        applyDomainAffordance(max)];\n    }\n    return this.domain;\n  }\n\n  /**\n   * Draw a single data set into the chart\n   */\n  updateChart(\n    bins: string[],\n    groupData: IGroupData,\n  ) {\n    const { props, container, tipContainer, yAxisLabel, x, innerScaleBand, tipContent, y } = this;\n    const { axis, height, margin, delay, duration, tip, showBinPercentages } = props;\n\n    const percentData = calculatePercents(groupData);\n\n    const stackedOffset = (d: IGroupDataItem, stackIndex: number) => {\n      const w = d.side === 'left' ? -d.value : d.value;\n      return x(Math.min(0, w));\n    }\n\n    const colors = scaleOrdinal(props.colorScheme);\n    const gWidth = gridWidth(props);\n\n    const g = container\n      ?.selectAll<SVGElement, {}>('g')\n      .data(percentData);\n\n    const bars = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const xX = yAxisWidth(axis) + axis.x.style['stroke-width'];\n        return `translate(${xX}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('rect')\n      .data((d) => d);\n\n    bars\n      ?.enter()\n      .append<SVGElement>('rect')\n      .attr('width', 0)\n      .attr('x', (d) => x(0))\n      .attr('class', (d) => `bar ${d.side}`)\n      .on('click', onClick(props.onClick))\n      .on('mouseover', onMouseOver({ bins, hover: props.bar.hover, colors, tipContentFn: props.tipContentFn, tipContent, tip, tipContainer }))\n      .on('mousemove', () => tip.fx.move(tipContainer))\n      .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n      .merge(bars)\n      .attr('y', (d: IGroupDataItem, i: number) => {\n        const overlay = (props.groupLayout === EGroupedBarLayout.OVERLAID)\n          ? Math.floor(i / 2) * props.bar.overlayMargin\n          : Number(innerScaleBand(String(d.groupLabel)));\n        return overlay;\n      })\n      .attr('height', (d, i) => getBarWidth(Math.floor(i / 2), props.groupLayout, props.bar, innerScaleBand))\n      .attr('fill', (d, i) => colors(String(d.groupLabel)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', stackedOffset)\n      .attr('width', (d: IGroupDataItem): number => {\n        const w = d.side === 'left' ? -d.value : d.value;\n        return Math.abs(x(w) - x(0));\n      });\n\n    const percents = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const xX = yAxisWidth(axis) + axis.x.style['stroke-width'];\n        return `translate(${xX}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('text')\n      .data((d) => d);\n\n    percents\n      ?.enter()\n      .append<SVGElement>('text')\n      .attr('width', 0)\n      .attr('x', (d) => {\n        const w = d.side === 'left' ? -40 : 40;\n        return x(0) + w;\n      })\n      .attr('class', 'percentage-label')\n      .style('text-anchor', 'middle')\n      .style('font-size', '0.675rem')\n      .merge(percents)\n      .text((d, i) => {\n        return showBinPercentages ? `${d.percent}%` : '';\n      })\n      .attr('y', (d: IGroupDataItem, i: number) => {\n        const h = getBarWidth(0, props.groupLayout, props.bar, innerScaleBand);\n        const offset = h / 2;\n\n        // Ensure that percentage labels don't overlap\n        const verticalOffset = i < 2 ? 0 : 14;\n        return offset + verticalOffset;\n      })\n      .attr('fill', (d, i) => colors(String(d.groupLabel)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', (d) => {\n        const w = d.side === 'left' ? - 20 : 20;\n        const v = d.side === 'left' ? -d.value : d.value;\n        return x(v) + w;\n      })\n      .attr('width', (d: IGroupDataItem): number => {\n        const w = d.side === 'left' ? -d.value : d.value;\n        return Math.abs(x(w) - x(0));\n      });\n\n    percents?.exit().remove();\n\n    bars?.exit().remove();\n    g?.exit().remove();\n\n    const yText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.y.label]);\n\n    yText?.enter().append('text')\n      .attr('class', 'y-axis-label')\n      .merge(yText)\n      .attr('transform',\n        'translate(' + 0 + ' ,' +\n        ((height - yAxisWidth(props.axis) - (margin.left * 2)) + axis.x.margin) + ')')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n\n    const xText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.x.label]);\n\n    xText?.enter().append('text')\n      .attr('class', 'x-axis-label')\n      .merge(xText)\n      .attr('transform', 'rotate(-90)')\n      .attr('y', 0)\n      .attr('x', 0 - (gWidth / 2 - (margin.top * 2)))\n      .attr('dy', '1em')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n  }\n\n  mergeProps(newProps: DeepPartial<ITornadoProps>) {\n    const { props } = this;\n\n    const customerizer = (objValue, srcValue, key, object, source, stack) => {\n      if (['data'].includes(key)) {\n        return srcValue;\n      }\n    }\n    mergeWith(props, newProps, customerizer);\n  }\n\n  /**\n   * Update chart\n   */\n  update(newProps: DeepPartial<ITornadoProps>) {\n    const { props } = this;\n    if (!props.data) {\n      return;\n    }\n    if (!props.data.bins) {\n      return;\n    }\n    this.mergeProps(newProps);\n    const { margin, width, height, className, data, visible } = props;\n    sizeSVG(this.svg, { margin, width, height, className });\n    this.dataSets = [];\n\n    data.counts.forEach((count) => {\n      count.data.forEach((value, genderIndex) => {\n        value.forEach((aValue, rowIndex) => {\n          if (!this.dataSets[rowIndex]) {\n            this.dataSets[rowIndex] = [];\n          }\n          this.dataSets[rowIndex].push({\n            side: genderIndex === 0 ? 'left' : 'right',\n            groupLabel: count.label,\n            colorRef: count.label,\n            label: data.bins[rowIndex],\n            value: visible[data.bins[rowIndex]] !== false && visible[count.label] !== false ? aValue : 0,\n          });\n        })\n\n      });\n    });\n    this.drawAxes();\n    // @TODO add back in,\n    // drawHorizontalGrid<any>({ x, y, gridX, gridY, props, ticks: maxValueCount(data.counts) });\n    this.updateChart(data.bins, this.dataSets);\n  }\n\n  /**\n   * Any necessary clean up\n   */\n  destroy() {\n    this.svg?.selectAll('svg > *').remove();\n  }\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { IGroupDataItem } from './BaseHistogramD3';\nimport {\n  EGroupedBarLayout,\n  IAxes,\n  IChartAdaptor,\n  IChartState,\n  IDomain,\n  IGrid,\n  IHistogramBar,\n  IMargin,\n  IStroke,\n  TipContentFn,\n} from './Histogram';\nimport { TornadoD3 } from './TornadoD3';\nimport { DeepPartial } from './utils/types';\n\nexport interface ITornadoDataSet {\n  borderColors?: string[];\n  colors?: string[];\n  label: string;\n  data: [number[], number[]];\n}\n\nexport interface ITornadoData {\n  bins: string[];\n  counts: ITornadoDataSet[];\n  colorScheme?: string[];\n  title?: string;\n}\n\nexport interface ITornadoProps {\n  axis: IAxes;\n  bar: IHistogramBar;\n  center: boolean;\n  className: string;\n  data: ITornadoData;\n  delay: number;\n  duration: number;\n  colorScheme: string[];\n  domain: IDomain;\n  grid: IGrid;\n  height: number;\n  margin: IMargin;\n  groupLayout: EGroupedBarLayout;\n  onClick?: (bar: IGroupDataItem) => void;\n  showBinPercentages: boolean;\n  splitBins: [string, string];\n  stroke: IStroke;\n  tip: any;\n  tipContainer: string;\n  tipContentFn: TipContentFn<string>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\n/**\n * Tornado component\n */\nclass Tornado extends Component<DeepPartial<ITornadoProps>, IChartState> {\n\n  private chart: IChartAdaptor<ITornadoProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<ITornadoProps>) {\n    super(props);\n    this.chart = new TornadoD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.chart.update(this.getChartState()));\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<ITornadoProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    this.chart.destroy();\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"tornado-chart-container\"></div>);\n  }\n}\n\nexport default Tornado;\n","module.exports = function isArrayish(obj) {\n  if (!obj || typeof obj === 'string') {\n    return false;\n  }\n\n  return obj instanceof Array || Array.isArray(obj) || obj.length >= 0 && (obj.splice instanceof Function || Object.getOwnPropertyDescriptor(obj, obj.length - 1) && obj.constructor.name !== 'String');\n};","var conversions = require('./conversions');\n\nvar route = require('./route');\n\nvar convert = {};\nvar models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n  var wrappedFn = function wrappedFn(args) {\n    if (args === undefined || args === null) {\n      return args;\n    }\n\n    if (arguments.length > 1) {\n      args = Array.prototype.slice.call(arguments);\n    }\n\n    return fn(args);\n  }; // preserve .conversion property if there is one\n\n\n  if ('conversion' in fn) {\n    wrappedFn.conversion = fn.conversion;\n  }\n\n  return wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n  var wrappedFn = function wrappedFn(args) {\n    if (args === undefined || args === null) {\n      return args;\n    }\n\n    if (arguments.length > 1) {\n      args = Array.prototype.slice.call(arguments);\n    }\n\n    var result = fn(args); // we're assuming the result is an array here.\n    // see notice in conversions.js; don't use box types\n    // in conversion functions.\n\n    if (typeof result === 'object') {\n      for (var len = result.length, i = 0; i < len; i++) {\n        result[i] = Math.round(result[i]);\n      }\n    }\n\n    return result;\n  }; // preserve .conversion property if there is one\n\n\n  if ('conversion' in fn) {\n    wrappedFn.conversion = fn.conversion;\n  }\n\n  return wrappedFn;\n}\n\nmodels.forEach(function (fromModel) {\n  convert[fromModel] = {};\n  Object.defineProperty(convert[fromModel], 'channels', {\n    value: conversions[fromModel].channels\n  });\n  Object.defineProperty(convert[fromModel], 'labels', {\n    value: conversions[fromModel].labels\n  });\n  var routes = route(fromModel);\n  var routeModels = Object.keys(routes);\n  routeModels.forEach(function (toModel) {\n    var fn = routes[toModel];\n    convert[fromModel][toModel] = wrapRounded(fn);\n    convert[fromModel][toModel].raw = wrapRaw(fn);\n  });\n});\nmodule.exports = convert;","var noop = {\n  value: function value() {}\n};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || t in _) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function (t) {\n    var name = \"\",\n        i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {\n      type: t,\n      name: name\n    };\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function on(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length; // If no callback was specified, return the callback of the given type and name.\n\n    if (arguments.length < 2) {\n      while (++i < n) {\n        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      }\n\n      return;\n    } // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n\n\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);else if (callback == null) for (t in _) {\n        _[t] = set(_[t], typename.name, null);\n      }\n    }\n\n    return this;\n  },\n  copy: function copy() {\n    var copy = {},\n        _ = this._;\n\n    for (var t in _) {\n      copy[t] = _[t].slice();\n    }\n\n    return new Dispatch(copy);\n  },\n  call: function call(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) {\n      args[i] = arguments[i + 2];\n    }\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  },\n  apply: function apply(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n\n  if (callback != null) type.push({\n    name: name,\n    value: callback\n  });\n  return type;\n}\n\nexport default dispatch;","import { extent } from 'd3-array';\nimport { schemeSet3 } from 'd3-scale-chromatic';\nimport React, { FC } from 'react';\nimport { SpringConfig } from 'react-spring';\n\nimport HistogramBars from '../components/Bars/HistogramBars';\nimport Base from '../components/Base';\nimport Grid from '../components/Grid';\nimport { TLabelComponent } from '../components/Label';\nimport { TTipFunc } from '../components/ToolTip';\nimport XAxis from '../components/XAxis';\nimport YAxis, {\n  ELabelOrientation,\n  TAxisLabelFormat,\n} from '../components/YAxis';\nimport {\n  IGrid,\n  IHistogramData,\n} from '../Histogram';\nimport { EChartDirection } from './BarChart';\n\nexport interface IHistogramProps {\n  animation?: SpringConfig;\n  axisLabelFormat?: TAxisLabelFormat;\n  colorScheme?: string[];\n  data: IHistogramData;\n  direction?: EChartDirection;\n  grid?: IGrid;\n  height: number;\n  LabelComponent?: TLabelComponent;\n  hoverColorScheme?: string[];\n  showLabels?: boolean[];\n  tip?: TTipFunc;\n  visible?: Record<string, boolean>;\n  width: number;\n  xAxisHeight?: number;\n  xAxisLabelOrientation?: ELabelOrientation;\n  yAxisWidth?: number;\n}\n\n/**\n * A Histogram renders continuous data and thus use a ScaleLinear x & y axis \n */\nconst Histogram: FC<IHistogramProps> = ({\n  animation,\n  axisLabelFormat,\n  colorScheme = schemeSet3,\n  data,\n  direction = EChartDirection.VERTICAL,\n  grid,\n  height,\n  hoverColorScheme,\n  LabelComponent,\n  showLabels = [],\n  tip,\n  visible,\n  width,\n  xAxisHeight,\n  xAxisLabelOrientation = ELabelOrientation.HORIZONTAL,\n  yAxisWidth,\n}) => {\n  if (!yAxisWidth) {\n    yAxisWidth = direction === EChartDirection.VERTICAL ? 40 : 100;\n  }\n  if (!xAxisHeight) {\n    xAxisHeight = direction === EChartDirection.VERTICAL ? 100 : 40;\n  }\n\n  if (width === 0) {\n    return null;\n  }\n\n  const bins = data.bins.reduce((p, n) => p.concat(Array.isArray(n) ? n : [n]), [] as number[]);\n  const continuousDomain = extent(bins) as [number, number];\n  const domain = extent([0].concat(data.counts.reduce((p, n) => p.concat(n.data), [] as number[]))) as [number, number];\n  return (\n    <Base\n      width={width + 30} // @TODO work out why without this the bars exceed the chart\n      height={height}>\n\n      {\n        grid && <Grid\n          left={yAxisWidth}\n          height={height - xAxisHeight}\n          svgProps={{ ...grid.x.style }}\n          lines={{\n            vertical: grid.y.ticks,\n            horizontal: grid.x.ticks,\n          }}\n          width={width - yAxisWidth} />\n      }\n\n      <HistogramBars\n        colorScheme={colorScheme}\n        hoverColorScheme={hoverColorScheme}\n        left={yAxisWidth}\n        height={height - xAxisHeight}\n        width={width - yAxisWidth}\n        values={data.counts}\n        config={animation}\n        bins={data.bins}\n        showLabels={showLabels}\n        direction={direction}\n        LabelComponent={LabelComponent}\n        domain={domain}\n        continuousDomain={continuousDomain}\n        tip={tip}\n        visible={visible}\n      />\n\n      <YAxis\n        width={yAxisWidth}\n        height={height - xAxisHeight}\n        labelFormat={axisLabelFormat}\n        scale=\"linear\"\n        domain={direction === EChartDirection.HORIZONTAL ? continuousDomain : domain}\n        values={direction === EChartDirection.HORIZONTAL\n          ? [\n            continuousDomain[0],\n            ((continuousDomain[1] - continuousDomain[0]) * 1) / 3,\n            ((continuousDomain[1] - continuousDomain[0]) * 2) / 3,\n            continuousDomain[1],\n          ]\n          : domain\n        }\n      />\n\n      <XAxis\n        width={width - yAxisWidth}\n        height={xAxisHeight}\n        top={height - xAxisHeight}\n        left={yAxisWidth}\n        labelFormat={axisLabelFormat}\n        labelOrientation={xAxisLabelOrientation}\n        scale=\"linear\"\n        domain={direction === EChartDirection.HORIZONTAL ? domain : continuousDomain}\n        values={direction === EChartDirection.HORIZONTAL\n          ? domain\n          : [\n            continuousDomain[0],\n            ((continuousDomain[1] - continuousDomain[0]) * 1) / 3,\n            ((continuousDomain[1] - continuousDomain[0]) * 2) / 3,\n            continuousDomain[1],\n          ]}\n      />\n\n    </Base>\n  )\n\n}\n\nexport default Histogram;\n","import { interpolate } from 'd3-interpolate';\nimport React, {\n  FC,\n  useLayoutEffect,\n  useRef,\n} from 'react';\nimport {\n  animated,\n  useSpring,\n} from 'react-spring';\n\nimport { IAxes } from '../Histogram';\nimport {\n  IChartPoint,\n  IChartPointValue,\n  ILineProps,\n} from '../LineChart';\nimport { useMakeArea } from '../utils/useMakeLine';\n\ninterface IProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  label?: string;\n  line: ILineProps;\n  width: number;\n  left: number;\n  height: number;\n  axis: IAxes;\n  data: T[];\n}\n\nconst AreaFill: FC<IProps> = (props) => {\n  const { label = '', line } = props;\n  const className = `area-${label.replace(/[^a-z]/gi, '')}`;\n  const { previous, current } = useMakeArea(props);\n\n  const spring = useSpring<any>({\n    from: { t: 0 },\n    to: { t: 1 },\n    reset: true,\n    delay: 0\n  });\n\n  const getInterpolator = () => interpolate(previous, current);\n\n  const interpolator = useRef(getInterpolator());\n  useLayoutEffect(() => {\n    interpolator.current = getInterpolator();\n  });\n\n  return (\n    <>\n      <animated.path\n        className={className}\n        fill={line.fill.fill}\n        d={spring.t.interpolate((t) => interpolator.current(t))}\n      />\n    </>\n  )\n}\n\nexport default AreaFill;\n","import { interpolate } from 'd3-interpolate';\nimport React, {\n  FC,\n  useLayoutEffect,\n  useRef,\n} from 'react';\nimport {\n  animated,\n  useSpring,\n} from 'react-spring';\n\nimport {\n  IProps,\n  useMakeLine,\n} from '../utils/useMakeLine';\n\n// @TODO look at using https://github.com/pbeshai/d3-interpolate-path instead \nconst Line: FC<IProps & { label: string }> = (props) => {\n  const { label = '', line } = props;\n  const className = `line-${label.replace(/[^a-z]/gi, '')}`;\n  const { previous, current } = useMakeLine(props);\n\n  const spring = useSpring<any>({\n    from: { t: 0 },\n    to: { t: 1 },\n    reset: true,\n    delay: 0\n  });\n\n  const getInterpolator = () => interpolate(previous, current);\n\n  const interpolator = useRef(getInterpolator());\n  useLayoutEffect(() => {\n    interpolator.current = getInterpolator();\n  });\n\n  return (\n    <>\n      <animated.path\n        className={className}\n        fill=\"none\"\n        strokeDashoffset={line.strokeDashOffset}\n        strokeDasharray={line.strokeDashArray}\n        stroke={line.stroke}\n        d={spring.t.interpolate((t) => interpolator.current(t))}\n      />\n    </>\n  )\n}\n\nexport default Line;\n","import React, { FC } from 'react';\n\nimport {\n  IProps,\n  useScales,\n} from '../utils/useMakeLine';\n\nconst Points: FC<Omit<IProps, 'line'> & {\n  radius?: number;\n  fill?: string;\n  stroke?: string;\n}> = (props) => {\n  const { data, radius = 5, fill = '#000', stroke = '#000' } = props;\n  const { xScale, yScale } = useScales(props);\n\n  if (yScale === null) {\n    return null;\n  }\n\n  return <>\n    {\n      data.map((d) => {\n        const { x, y, ...rest } = d;\n        const yValue = yScale(y);\n        const xValue = xScale(x);\n        return <circle\n          key={`point-${xValue}-${yValue}`}\n          className={`point-${xValue}-${yValue}`}\n          r={radius}\n          cy={yValue}\n          cx={xValue}\n          fill={fill}\n          stroke={stroke}\n          {...rest}\n        />\n      })\n    }\n  </>\n}\n\nexport default Points;\n","import React, { FC } from 'react';\n\nimport AreaFill from '../components/AreaFill';\nimport Base from '../components/Base';\nimport Grid from '../components/Grid';\nimport Line from '../components/Line';\nimport Points from '../components/Points';\nimport XAxis from '../components/XAxis';\nimport YAxis from '../components/YAxis';\nimport {\n  IAxes,\n  IGrid,\n} from '../Histogram';\nimport {\n  IChartPoint,\n  IChartPointValue,\n  ILineChartDataSet,\n} from '../LineChart';\nimport { useLineDomain } from '../utils/useDomain';\n\ninterface IProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  axis: IAxes;\n  data: ILineChartDataSet<T>[];\n  grid: IGrid;\n  height: number;\n  width: number;\n  xAxisHeight?: number;\n  yAxisWidth?: number;\n}\nconst LineChart: FC<IProps> = ({\n  axis,\n  data,\n  grid,\n  height,\n  width,\n  xAxisHeight = 60,\n  yAxisWidth = 100,\n}) => {\n  const domain = useLineDomain({\n    values: data,\n  });\n  return (\n    <Base\n      width={width}\n      height={height}>\n\n      <Grid\n        left={yAxisWidth}\n        height={height - xAxisHeight}\n        svgProps={{ ...grid.x.style }}\n        lines={{\n          vertical: grid.y.ticks,\n          horizontal: grid.x.ticks,\n        }}\n        width={width - yAxisWidth} />\n      {\n        data.map((item) => <> <Line\n          axis={axis}\n          key={item.label}\n          label={item.label}\n          line={item.line}\n          width={width - yAxisWidth}\n          left={yAxisWidth}\n          height={height - xAxisHeight}\n          data={item.data} />\n          {\n\n            item.point.show &&\n            <Points\n              axis={axis}\n              key={item.label}\n              width={width - yAxisWidth}\n              left={yAxisWidth}\n              height={height - xAxisHeight}\n              radius={item.point.radius}\n              fill={item.point.fill}\n              stroke={item.point.stroke}\n              data={item.data} />\n          }\n\n          {\n            item.line.fill.show && <AreaFill\n              axis={axis}\n              key={item.label}\n              width={width - yAxisWidth}\n              left={yAxisWidth}\n              height={height - xAxisHeight}\n              line={item.line}\n              data={item.data} />\n          }\n        </>)}\n\n      <YAxis\n        width={yAxisWidth}\n        height={height - xAxisHeight}\n        // values={[0, 1000, 2000]}\n        scale=\"linear\"\n        domain={domain}\n      />\n\n      <XAxis\n        width={width - yAxisWidth}\n        height={xAxisHeight}\n        top={height - xAxisHeight}\n        left={yAxisWidth} />\n\n    </Base>\n  )\n}\n\nexport default LineChart;\n","import { extent } from 'd3-array';\nimport {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport { Selection } from 'd3-selection';\nimport {\n  area,\n  curveCatmullRom,\n  CurveFactory,\n  line,\n} from 'd3-shape';\nimport {\n  timeFormat,\n  timeParse,\n} from 'd3-time-format';\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nimport attrs from './d3/attrs';\nimport {\n  drawGrid,\n  gridHeight,\n  gridWidth,\n  yAxisWidth as getYAxisWidth,\n} from './grid';\nimport { IChartAdaptor } from './Histogram';\nimport {\n  IChartPoint,\n  ILineChartDataSet,\n  ILineChartProps,\n  ILineProps,\n  ISVGPoint,\n} from './LineChart';\nimport tips, { makeTip } from './tip';\nimport {\n  axis as defaultAxis,\n  grid as defaultGrid,\n  lineStyle,\n} from './utils/defaults';\nimport {\n  rangeAffordance,\n  ticks,\n} from './utils/domain';\nimport { buildScales } from './utils/scales';\nimport {\n  makeGrid,\n  makeScales,\n  makeSvg,\n  sizeSVG,\n  TSelection,\n} from './utils/svg';\nimport { DeepPartial } from './utils/types';\n\nconst ZERO_SUBSTITUTE: number = 1e-6;\n\nexport const lineChartD3 = ((): IChartAdaptor<ILineChartProps> => {\n  let svg: TSelection;\n  let tipContainer: any;\n  let xParseTime: (x: string) => Date | null;\n  let xFormatTime: (v: any) => string;\n  let tipContent: {\n    html: (fn: any) => string,\n  };\n\n  const lineProps: ILineProps = {\n    curveType: curveCatmullRom,\n    fill: {\n      fill: '#eee',\n      show: false,\n    },\n    show: true,\n    stroke: '#005870',\n    strokeDashArray: '5 5',\n    strokeDashOffset: 0,\n  };\n\n  const pointProps: ISVGPoint = {\n    ...lineStyle,\n    fill: 'rgba(255, 255, 255, 0)',\n    radius: 4,\n    show: true,\n    stroke: '#005870',\n  };\n\n  const props: ILineChartProps = {\n    axis: cloneDeep(defaultAxis),\n    className: 'line-chart-d3',\n    data: [],\n    grid: defaultGrid,\n    height: 250,\n    margin: {\n      bottom: 0,\n      left: 5,\n      right: 0,\n      top: 5,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (info, i, d) => {\n      switch (typeof info[i].x) {\n        case 'object': // date\n          return xFormatTime(info[i].x) + ', ' + info[i].y;\n        default:\n          return Number(info[i].x).toFixed(3) + ', ' + info[i].y;\n      }\n    },\n    visible: {},\n    width: 200,\n  };\n\n  const datumProps = {\n    line: lineProps,\n    point: pointProps,\n  };\n\n  const curve = (\n    dataset: ILineChartDataSet<any>,\n    x: (x: number) => number,\n    y: (y: number) => number,\n  ) => line()\n    .curve(dataset.line.curveType)\n    .x((d: any) => x(d.x))\n    .y((d: any) => y(d.y));\n\n  let container: Selection<SVGElement, any, any, any>;\n  let lineContainer: TSelection;\n  let gridX: TSelection;\n  let gridY: TSelection;\n  let xScale: any; // AnyScale;\n  let yScale: any; // AnyScale;\n  let xAxisContainer: TSelection;\n  let yAxisContainer: TSelection;\n  let xAxisLabel: TSelection;\n  let yAxisLabel: TSelection;\n\n  const xOffset = (d: ILineChartDataSet<any>) => {\n    return d.point.show ? d.point.radius / 2 : 0;\n  };\n\n  const LineChartD3 = {\n    /**\n     * Initialization\n     */\n    create(el: Element, newProps: DeepPartial<ILineChartProps> = {}) {\n      this.mergeProps(newProps);\n      svg = makeSvg(el, svg);\n      const { margin, width, height, className } = props;\n      sizeSVG(svg, { margin, width, height, className });\n      const r = makeTip(props.tipContainer, tipContainer);\n      tipContent = r.tipContent;\n      tipContainer = r.tipContainer;\n      [xScale, yScale] = buildScales(props.axis);\n      [xAxisContainer, yAxisContainer, xAxisLabel, yAxisLabel] = makeScales(svg);\n      [gridX, gridY] = makeGrid(svg);\n      const yAxisWidth = getYAxisWidth(props.axis);\n      container = svg\n        .append<SVGElement>('g')\n        .attr('class', 'linechart-container')\n        .attr('transform', `translate(${yAxisWidth}, 0)`)\n\n      lineContainer = container\n        .append<SVGElement>('g')\n        .attr('class', 'line-container');\n      this.update(props);\n    },\n\n    mergeProps(newProps: DeepPartial<ILineChartProps>) {\n      const customerizer = (objValue, srcValue, key, object, source, stack) => {\n        if (key === 'data') {\n          return srcValue;\n        }\n      }\n      mergeWith(props, newProps, customerizer);\n    },\n\n    /**\n     * Iterate over the dataset drawing points for sets marked as\n     * requiring points.\n     */\n    _drawDataPointSet(data: ILineChartProps['data']) {\n      const { tip, tipContentFn } = props;\n\n      const pointContainer = container.selectAll<SVGElement, {}>('g').data(data);\n\n      // Don't ask why but we must reference tipContentFn as props.tipContentFn otherwise\n      // it doesn't update with props changes\n      const onMouseOver = (d: any) => {\n        tipContent.html(() => tipContentFn([d as any], 0, 0, ''));\n        tip.fx.in(tipContainer);\n      };\n      const onMouseMove = () => tip.fx.move(tipContainer);\n      const onMouseOut = () => tip.fx.out(tipContainer);\n\n      const points = pointContainer.enter()\n        .append<SVGElement>('g')\n        .attr('class', (d, i: number) => 'point-container' + i)\n        .merge(pointContainer)\n        .selectAll<SVGElement, {}>('circle')\n        .data((d: ILineChartDataSet<any>) => {\n          return d.data.map((dx) => ({\n            ...dx,\n            point: d.point,\n          }));\n        });\n\n      // UPDATE - Update old elements as needed.\n      points.attr('class', 'update');\n\n      // ENTER + UPDATE\n      // After merging the entered elements with the update selection,\n      // apply operations to both.\n      points.enter().append<SVGElement>('circle')\n        .attr('class', 'enter')\n        .on('mouseover', onMouseOver)\n        .on('mousemove', onMouseMove)\n        .on('mouseout', onMouseOut)\n        .merge(points)\n        .attr('class', 'point')\n        .attr('cy', (d) => yScale(d.y))\n        .attr('r', (d, i: number) => 0)\n        .attr('fill', (d) => d.point.fill)\n        .attr('stroke', (d) => d.point.stroke)\n        .attr('cx', (d) => {\n          return xScale(d.x);\n        })\n        .transition()\n        .duration(400)\n        .attr('r', (d: ILineChartDataSet<any>) => xOffset(d) * 2)\n        .delay(650);\n\n      // EXIT - Remove old elements as needed.\n      pointContainer.exit().remove();\n      points.exit().remove();\n    },\n\n    /**\n     * Draw the chart axes\n     */\n    drawAxes() {\n      const { axis, data } = props;\n      const valuesCount = data.reduce((a: number, b): number => {\n        return b.data.length > a ? b.data.length : a;\n      }, 0)\n      const w = gridWidth(props);\n      const h = gridHeight(props);\n      const ys: any[] = [];\n      const xs: any[] = [];\n\n      const yAxis = axisLeft<number>(yScale);\n      const xAxis = axisBottom<number | string>(xScale);\n\n      ticks({\n        axis: xAxis,\n        valuesCount,\n        axisLength: w,\n        axisConfig: axis.x,\n        scaleBand: xScale,\n        limitByValues: true,\n      });\n\n      ticks({\n        axis: yAxis,\n        valuesCount,\n        axisLength: h,\n        axisConfig: axis.y,\n        scaleBand: yScale,\n        limitByValues: true,\n      });\n\n      const yAxisWidth = getYAxisWidth(axis);\n\n      data.forEach((datum) => {\n        datum.data.forEach((d) => {\n          let parsedY = d.y;\n          let parsedX = d.x;\n          if (axis.y.scale === 'LOG' && d.y === 0) {\n            parsedY = ZERO_SUBSTITUTE;\n          }\n          if (axis.x.scale === 'LOG' && d.x === 0) {\n            parsedX = ZERO_SUBSTITUTE;\n          }\n          ys.push(parsedY);\n          xs.push(parsedX);\n        });\n      });\n      const yDomain = rangeAffordance(extent(ys), axis.y);\n      const xDomain = rangeAffordance(extent(xs), axis.x);\n\n      xScale\n        .domain(xDomain)\n        .rangeRound([0, w]);\n      yScale.domain(yDomain)\n        .range([h, 0]);\n\n      yAxisContainer\n        .attr('transform', `translate(${yAxisWidth}, 0)`)\n        .transition()\n        .call(yAxis);\n\n      xAxisContainer\n        .attr('transform', `translate(${yAxisWidth + axis.y.style['stroke-width']},${h})`)\n        .call(xAxis);\n\n      attrs(svg.selectAll('.y-axis .domain, .y-axis .tick line'), axis.y.style);\n      attrs(svg.selectAll('.y-axis .tick text'), axis.y.text.style as any);\n\n      attrs(svg.selectAll('.x-axis .domain, .x-axis .tick line'), axis.x.style);\n      attrs(svg.selectAll('.x-axis .tick text'), axis.x.text.style as any);\n    },\n\n    /**\n     * Iterate over data and update lines\n     */\n    _drawLines(data: ILineChartDataSet<any>[], oldData: ILineChartDataSet<any>[]) {\n\n      // Remove old lines\n      oldData.forEach((d, i) => {\n        const keep = data.find(((newD) => newD.label === d.label));\n        if (keep === undefined) {\n          const l = d.label.replace(/[^a-z]/gi, '');\n          lineContainer.select(`.line-${l}`)\n            .remove();\n        }\n      })\n\n      // change the line\n      data.forEach((d, i) => {\n        const selector = `line-${d.label.replace(/[^a-z]/gi, '')}`;\n        let selection = lineContainer.select(`.${selector}`)\n        if (selection.empty()) {\n          lineContainer.append('path')\n            .attr('class', selector);\n          selection = lineContainer.select(`.${selector}`)\n        }\n        selection\n          .attr('fill', 'none')\n          .attr('stroke-dashoffset', d.line.strokeDashOffset)\n          .attr('stroke-dasharray', d.line.strokeDashOffset)\n          .attr('stroke', d.line.stroke)\n          .transition()\n          .duration(500)\n          .attr('d', curve(d, xScale, yScale)(d.data as any) as any)\n          .delay(50);\n      });\n    },\n\n    /**\n     * Iterates ove data and updates area fills\n     */\n    drawAreas(data: ILineChartDataSet<any>[], oldData: ILineChartDataSet<any>[]) {\n      const h = gridHeight(props);\n      const thisArea = (dataset: ILineChartDataSet<any>) => area()\n        .curve(dataset.line.curveType as CurveFactory)\n        .x((d: any) => xScale(d.x))\n        .y0((d) => h)\n        .y1((d: any) => yScale(d.y));\n\n      // Remove old lines\n      oldData.forEach((d, i) => {\n        const keep = data.find(((newD) => newD.label === d.label));\n        if (keep === undefined) {\n          const l = d.label.replace(/[^a-z]/gi, '');\n          lineContainer.select(`.fill-${l}`).remove();\n        }\n      })\n\n      // change the line\n      data\n        .forEach((d, i) => {\n          const selector = `fill-${d.label.replace(/[^a-z]/gi, '')}`;\n          let selection = lineContainer.select(`.${selector}`);\n          if (selection.empty()) {\n            lineContainer.append('path')\n              .attr('class', selector);\n            selection = lineContainer.select(`.${selector}`)\n\n          }\n          selection\n            .attr('fill', d.line.fill.fill)\n            .style('opacity', d.line.show && d.line.fill.show ? 1 : 0)\n            .transition()\n            .duration(500)\n            .delay(50)\n            .attr('d', thisArea(d)(d.data) as any);\n        });\n    },\n\n    /**\n     * Get a max count of values in each data set\n     */\n    valuesCount(data: ILineChartProps['data']): number {\n      return data.reduce((a: number, b): number => {\n        return b.data.length > a ? b.data.length : a;\n      }, 0);\n    },\n\n    /**\n     * Update chart\n     */\n    update(newProps: DeepPartial<ILineChartProps>) {\n      if (!newProps.data) {\n        return;\n      }\n      const oldData = [...props.data];\n      this.mergeProps(newProps);\n      const { margin, width, height, className } = props;\n      sizeSVG(svg, { margin, width, height, className });\n      [xScale, yScale] = buildScales(props.axis);\n      let data = [...props.data];\n\n      xParseTime = timeParse(props.axis.x.dateFormat);\n      xFormatTime = timeFormat(props.axis.x.dateFormat);\n      data = data.map((datum) => {\n        if (props.axis.x.scale === 'TIME') {\n          datum.data = datum.data.map((d) => {\n            const newd: IChartPoint<any> = {\n              ...d,\n              x: typeof d.x === 'object'\n                ? d.x\n                : xParseTime(d.x.toString()),\n            };\n            return newd;\n          });\n        }\n        // Assign in default line & point styles\n        return Object.assign({}, datumProps, datum);\n      });\n      this.drawAxes();\n      this._drawLines(data, oldData);\n      this.drawAreas(data, oldData);\n      drawGrid(xScale, yScale, gridX, gridY, props, this.valuesCount(data));\n      this._drawDataPointSet(data);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n  return LineChartD3;\n});\n","import {\n  CurveFactory,\n  CurveFactoryLineOnly,\n} from 'd3-shape';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  IAxes,\n  IChartAdaptor,\n  IGrid,\n  IMargin,\n  ISVGLineStyle,\n  TipContentFn,\n} from './Histogram';\nimport { lineChartD3 } from './lineChartD3';\nimport { DeepPartial } from './utils/types';\n\ninterface IState {\n  parentWidth?: number;\n}\n\nexport type IChartPointValue = number | string | Date | object;\nexport interface IChartPoint<X extends IChartPointValue = Date | number | string, Y extends IChartPointValue = number> {\n  x: X;\n  y: Y;\n}\nexport interface ILineProps {\n  show: boolean;\n  fill: {\n    show: boolean;\n    fill: string;\n  };\n  curveType: CurveFactory | CurveFactoryLineOnly;\n  stroke: string;\n  strokeDashOffset: number;\n  strokeDashArray: string;\n}\n\nexport interface ILineChartDataSet<T> {\n  label: string;\n  point: {\n    radius: number;\n    stroke: string;\n    fill: string;\n    show: boolean;\n  };\n  line: ILineProps;\n  data: T[];\n}\n\nexport interface ISVGPoint extends ISVGLineStyle {\n  radius?: 4;\n  show: boolean;\n}\n\nexport interface ILineChartProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  axis: IAxes;\n  className: string;\n  data: ILineChartDataSet<T>[];\n  grid: IGrid;\n  height: number | string;\n  margin: IMargin;\n  tip: any;\n  tipContainer?: string;\n  tipContentFn: TipContentFn<{ x: string | number, y: string | number }>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\nclass LineChart extends React.Component<DeepPartial<ILineChartProps>, IState> {\n\n  private chart: IChartAdaptor<ILineChartProps>;\n  private ref: HTMLDivElement | null = null;\n\n  constructor(props: DeepPartial<ILineChartProps>) {\n    super(props);\n    this.chart = lineChartD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.chart.update(this.getChartState()));\n\n  }\n\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state. If a histogram has been assigned\n   * to the props, then render this data. Otherwise generate\n   * a random normal dist\n   */\n  public getChartState(): DeepPartial<ILineChartProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  public componentWillUnmount() {\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.destroy();\n  }\n\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  public render(): JSX.Element {\n    return <div ref={(ref) => this.ref = ref} className=\"chart-container\"></div>;\n  }\n}\n\nexport default LineChart;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  IChartAdaptor,\n  IChartState,\n} from './Histogram';\nimport { scatterPlotD3 } from './ScatterPlotD3';\nimport { DeepPartial } from './utils/types';\n\nexport interface IScatterPlotProps {\n  choices: string[];\n  className: string;\n  data: {\n    keys: string[],\n    values: any[];\n  };\n  delay: number;\n  distModels: string[];\n  duration: number;\n  height: number;\n  legendWidth: number;\n  colorScheme: string[];\n  padding: number;\n  radius: number;\n  split: string;\n  width: string | number;\n}\nclass ScatterPlot extends Component<DeepPartial<IScatterPlotProps>, IChartState> {\n\n  private chart: IChartAdaptor<IScatterPlotProps>;\n  private ref: HTMLDivElement | null = null;\n\n  public static defaultProps = {\n    height: 400,\n    width: '100%',\n  };\n\n  constructor(props: IScatterPlotProps) {\n    super(props);\n    this.chart = scatterPlotD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (el) {\n      const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n      this.setState({\n        parentWidth: width,\n      }, () => this.chart.update(this.getChartState()));\n    }\n  }\n\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    const { width } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  private getChartState(): DeepPartial<IScatterPlotProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  public componentWillReceiveProps(props: DeepPartial<IScatterPlotProps>) {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  public componentWillUnmount() {\n    const { width } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    this.chart.destroy();\n  }\n\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  public render() {\n    return <div ref={(ref) => this.ref = ref} className=\"scatterplot-chart-container\"></div>;\n  }\n}\n\nexport default ScatterPlot;\n","import { extent } from 'd3-array';\nimport {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport {\n  scaleLinear,\n  scaleOrdinal,\n} from 'd3-scale';\nimport {\n  select,\n  Selection,\n} from 'd3-selection';\nimport merge from 'lodash/merge';\n\nimport colorScheme from './colors';\nimport { IChartAdaptor } from './Histogram';\nimport { IChartPoint } from './LineChart';\nimport { IScatterPlotProps } from './ScatterPlot';\nimport { DeepPartial } from './utils/types';\n\nexport const scatterPlotD3 = ((): IChartAdaptor<IScatterPlotProps> => {\n  let svg: Selection<any, any, any, any>;\n  const yScale = scaleLinear();\n  const xScale = scaleLinear();\n  const domainByTrait = {};\n  let xAxis;\n  let color;\n  let yAxis;\n\n  const props: IScatterPlotProps = {\n    choices: [],\n    className: 'scatter-plot-d3',\n    colorScheme,\n    data: {\n      keys: [],\n      values: []\n    },\n    delay: 0,\n    distModels: [],\n    duration: 400,\n    height: 300,\n    legendWidth: 100,\n    padding: 20,\n    radius: 4,\n    split: '',\n    width: '100%',\n  };\n\n  const GenerateChart = {\n\n    /**\n     * Initialization\n     */\n    create(el: Element, newProps: DeepPartial<IScatterPlotProps> = props) {\n      merge(props, newProps);\n      this._makeSvg(el, props.data);\n      this.update(newProps);\n    },\n\n    /**\n     * Make the SVG container element\n     * Recreate if it previously existed\n     */\n    _makeSvg(el: Element, data: IScatterPlotProps['data']) {\n      if (svg) {\n        svg.selectAll('svg > *').remove();\n        svg.remove();\n        const childNodes = el.getElementsByTagName('svg');\n        if (childNodes.length > 0) {\n          el.removeChild(childNodes[0]);\n        }\n      }\n      const { width, className, height, legendWidth, padding } = props;\n\n      // Reference to svg element containing chart\n      svg = select(el).append('svg')\n        .attr('class', className)\n        .attr('width', Number(width) + padding + legendWidth)\n        .attr('height', height + padding)\n        .append('g')\n        .attr('transform', 'translate(' + padding + ',' + padding / 2 + ')');\n\n      color = scaleOrdinal(props.colorScheme);\n    },\n\n    /**\n     * Draw the chart scales\n     */\n    _drawScales(data: IScatterPlotProps['data']['keys']) {\n      const { height, padding, width } = props;\n      const xSize = Number(width) / data.length;\n      const ySize = height / data.length;\n      xScale.range([padding / 2, xSize - padding / 2]);\n      yScale.range([height - padding / 2, padding / 2]);\n\n      svg.selectAll('.x.axis')\n        .data(data)\n        .enter().append('g')\n        .attr('class', 'x axis')\n        .attr('transform', (d, i) =>\n          'translate(' + (data.length - i - 1) * xSize + ',0)')\n        .each(function (this: any, d: any) {\n          xScale.domain(domainByTrait[d]);\n          select(this).call(xAxis);\n        });\n\n      svg.selectAll('.y.axis')\n        .data(data)\n        .enter().append('g')\n        .attr('class', 'y axis')\n        .attr('transform', (d: any, i: number) => 'translate(0,' + i * ySize + ')')\n        .each(function (this: any, d: any) {\n          yScale.domain(domainByTrait[d]);\n          select(this).call(yAxis);\n        });\n    },\n\n    /**\n     * Make a legend showing spit choice options\n     */\n    _drawLegend() {\n      const { choices, padding, width, split } = props;\n      if (choices === undefined) {\n        return;\n      }\n      const legend = svg.append('g')\n        .attr('transform', 'translate(' + (Number(width) + padding / 2) +\n          ', ' + (padding + 50) + ')');\n\n      legend.append('g').append('text')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dy', '.71em')\n        .text((d) => split);\n      legend.selectAll('.legendItem')\n        .data(choices)\n        .enter().append('g')\n        .each(function (this: any, c, i: number) {\n          const cell = select(this);\n          cell.append('rect')\n            .attr('class', 'legendItem')\n            .attr('x', 0)\n            .attr('y', 20 + (i * 15))\n            .attr('fill', color(i))\n            .attr('height', 10)\n            .attr('width', 10);\n\n          cell.append('text')\n            .attr('x', 15)\n            .attr('y', 20 + (i * 15))\n            .attr('dy', '.71em')\n            .text((d) => c);\n        });\n\n      legend.exit().remove();\n    },\n\n    /**\n     * Draw scatter points\n     */\n    _drawPoints(traits, width: number, height: number) {\n      const { data, delay, duration,\n        choices, split, padding, radius } = props;\n      const n = traits.length;\n      const cell = svg.selectAll('.cell')\n        .data(cross(traits, traits))\n        .enter().append('g')\n        .attr('class', 'cell')\n        .attr('transform', (d) => 'translate(' + (n - d.i - 1) * width +\n          ',' + d.j * width + ')')\n        .each(plot);\n\n      // Titles for the diagonal.\n      cell.filter((d) => d.i === d.j).append('text')\n        .attr('x', padding)\n        .attr('y', padding)\n        .attr('dy', '.71em')\n        .text((d) => d.x);\n\n      /**\n       * Plot a point\n       */\n      function plot(this: any, p: IChartPoint) {\n        const plotCell = select(this);\n        let circle: Selection<SVGCircleElement, any, any, any>;\n        xScale.domain(domainByTrait[Number(p.x)]);\n        yScale.domain(domainByTrait[Number(p.y)]);\n\n        plotCell.append<SVGRectElement>('rect')\n          .attr('class', 'frame')\n          .attr('x', padding / 2)\n          .attr('y', padding / 2)\n          .attr('width', width - padding)\n          .attr('height', height - padding);\n\n        circle = plotCell.selectAll('circle')\n          .data(data.values)\n          .enter().append('circle')\n          .attr('r', (d) => radius)\n          .attr('cx', (d) => xScale(d[Number(p.x)]))\n          .attr('cy', (d) => yScale(d[Number(p.y)]))\n          .style('fill', (d) => {\n            if (d[split]) {\n              const i = choices.findIndex((c) => c === d[split]);\n              return color(i);\n            }\n            return '#eeaabb';\n          });\n\n        circle\n          .transition()\n          .duration(duration)\n          .delay(delay)\n          .attr('r', (d) => radius);\n      }\n\n      /**\n       * Create cross array\n       * // @TODO looks like d3 has its own cross function now...\n       */\n      function cross(a, b) {\n        const c: { x: number; i: number; y: number; j: number; }[] = [];\n        const nx = a.length;\n        const m = b.length;\n        let i: number;\n        let j: number;\n        for (i = -1; ++i < nx;) {\n          for (j = -1; ++j < m;) {\n            c.push({ x: a[i], i, y: b[j], j });\n          }\n        }\n        return c;\n      }\n    },\n\n    /**\n     * Update chart\n     */\n    update(newProps: DeepPartial<IScatterPlotProps>) {\n      merge(props, newProps);\n      if (!props.data) {\n        return;\n      }\n      const { data, distModels, height, width } = props;\n      this._drawLegend();\n      const traits = data.keys.filter((k) => distModels.indexOf(k) !== -1);\n      const xSize = Number(width) / traits.length;\n      const ySize = height / traits.length;\n      const n = traits.length;\n\n      traits.forEach((trait) => {\n        domainByTrait[trait] = extent<any>(data.values, (d) => d[trait]);\n      });\n      xAxis = axisBottom(xScale)\n        .ticks(6)\n        .tickSize(xSize * n);\n      yAxis = axisLeft(yScale)\n        .ticks(6)\n        .tickSize(-ySize * n);\n\n      this._drawScales(traits);\n      this._drawPoints(traits, xSize, ySize);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n  return GenerateChart;\n});\n","import {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport {\n  scaleBand,\n  scaleLinear,\n  scaleOrdinal,\n} from 'd3-scale';\n\nimport {\n  BaseHistogramD3,\n  IGroupData,\n  IGroupDataItem,\n} from './BaseHistogramD3';\nimport attrs from './d3/attrs';\nimport {\n  gridHeight,\n  gridWidth,\n  xAxisHeight,\n  yAxisWidth,\n} from './grid';\nimport {\n  EGroupedBarLayout,\n  IAxis,\n} from './Histogram';\nimport {\n  getBarWidth,\n  groupedBarsUseSameXAxisValue,\n  groupedPaddingInner,\n  groupedPaddingOuter,\n  paddingInner,\n  paddingOuter,\n} from './utils/bars';\nimport { annotationAxisDefaults } from './utils/defaults';\nimport {\n  appendDomainRange,\n  formatTick,\n  isStacked,\n  maxValueCount,\n  shouldFormatTick,\n  ticks,\n} from './utils/domain';\nimport {\n  onClick,\n  onMouseOut,\n  onMouseOver,\n  onMouseOverAxis,\n} from './utils/mouseOver';\n\nexport class HorizontalHistogramD3 extends BaseHistogramD3 {\n  public x = scaleLinear();\n  public y = scaleBand();\n  public yAnnotations = scaleBand();\n\n  /**\n   * Draw Axes\n   */\n  public drawAxes() {\n    const { props, dataSets, xAxisContainer, svg, innerScaleBand, tipContent,\n      y, x, yAxisContainer, tipContainer, yAnnotationAxisContainer, yAnnotations } = this;\n    const { annotations, annotationTextSize, bar, data, domain, groupLayout, stacked,\n      margin, width, height, axis, tip } = props;\n    const valuesCount = maxValueCount(data.counts);\n    const h = gridHeight(props);\n    const dataLabels = data.counts.map((c) => c.label);\n    const annotationsEnabled = annotations && annotations.length === data.bins.length;\n\n    y.domain(data.bins)\n      .rangeRound([0, h])\n      .paddingInner(paddingInner(bar))\n      .paddingOuter(paddingOuter(bar));\n\n    innerScaleBand\n      .domain(groupedBarsUseSameXAxisValue({ groupLayout, stacked }) ? ['main'] : dataLabels)\n      .rangeRound([0, y.bandwidth()])\n      .paddingInner(groupedPaddingInner(bar))\n      .paddingOuter(groupedPaddingOuter(bar));\n\n    const xAxis = axisBottom<number>(x);\n    const yAxis = axisLeft<string>(y);\n\n    /** Y-Axis (label axis) set up */\n    const axisYAnnotationAllowance: IAxis = {\n      ...axis.y,\n      style: {\n        'fill': 'none',\n        'stroke': 'none',\n        'opacity': 0,\n        'shape-rendering': 'none',\n        'stroke-opacity': 0,\n        'stroke-width': 0,\n        'visible': false,\n      },\n      tickSize: 30,\n      visible: false,\n    };\n\n    ticks({\n      axis: yAxis,\n      axisConfig: annotationsEnabled ? axisYAnnotationAllowance : axis.y,\n      axisLength: h,\n      limitByValues: true,\n      scaleBand: y,\n      valuesCount,\n    });\n    yAxisContainer\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ', ' + margin.top + ' )')\n      .call(yAxis);\n\n    // Add a tooltip to the y axis if a custom method has been sent\n    const colors = scaleOrdinal(props.colorScheme);\n    if (props.axisLabelTipContentFn) {\n      yAxisContainer\n        ?.selectAll('g.tick')\n        .select('text')\n        .on('mouseover', (onMouseOverAxis({\n          ...props.data, colors,\n          tipContentFn: props.axisLabelTipContentFn, tipContent, tip, tipContainer,\n        })))\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', () => tip.fx.out(tipContainer));\n    }\n\n    /** Y-Axis 2 (bottom axis) for annotations if annotations data sent (and match bin length) */\n    if (annotations && annotations.length === data.bins.length) {\n\n      yAxisContainer\n        ?.selectAll('line')\n        .style('opacity', 0);\n\n      yAnnotations.domain(data.bins)\n        .rangeRound([0, h])\n        .paddingInner(paddingInner(bar))\n        .paddingOuter(paddingOuter(bar));\n\n      const annotationAxis = axisLeft<string>(yAnnotations);\n\n      ticks({\n        axis: annotationAxis,\n        axisConfig: annotationAxisDefaults,\n        axisLength: h,\n        limitByValues: true,\n        scaleBand: yAnnotations,\n        valuesCount: annotations.length,\n      });\n      // Override the default axis bin labels with the custom annotations\n      annotationAxis.tickFormat((d, i) => annotations[i].value);\n      yAnnotationAxisContainer\n        ?.attr('transform', 'translate(' + Number(yAxisWidth(axis)) + ', ' + margin.top + ' )')\n        .call(annotationAxis);\n\n      // Style the annotations with their specific color\n      yAnnotationAxisContainer\n        ?.selectAll('g.tick')\n        .select('text')\n        .style('font-size', annotationTextSize ? annotationTextSize : '0.475rem')\n        .style('fill', (d, i) => annotations[i].color);\n\n      // Hide the line for the annotations axis\n      yAnnotationAxisContainer?.call((g) => g.select('.domain').remove());\n\n    }\n\n    /** X-Axis (value axis) set up */\n    appendDomainRange({\n      data: dataSets,\n      domain,\n      range: [0, Number(width) - (margin.top * 2) - axis.y.width],\n      scale: x,\n      stacked: isStacked({ groupLayout, stacked }),\n    });\n\n    const xAxisY = height - xAxisHeight(props.axis) - margin.top;\n    // Format number axis if format prop provided\n    if (shouldFormatTick(axis.x)) {\n      xAxis.tickFormat((v) => {\n        const n = v.toString().replace('-', '');\n        return String(formatTick(axis.x)(n));\n      });\n    }\n    xAxisContainer\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        xAxisY + ')')\n      .call(xAxis);\n\n    attrs(svg?.selectAll('.y-axis .domain, .y-axis .tick line'), axis.y.style);\n    attrs(svg?.selectAll('.y-axis .tick text'), axis.y.text.style as any);\n\n    attrs(svg?.selectAll('.x-axis .domain, .x-axis .tick line'), axis.x.style);\n    attrs(svg?.selectAll('.x-axis .tick text'), axis.x.text.style as any);\n  }\n\n  /**\n   * Draw a single data set into the chart\n   */\n  public updateChart(\n    bins: string[],\n    groupData: IGroupData,\n  ) {\n    const { props, innerScaleBand, container, tipContainer, tipContent, yAxisLabel } = this;\n    const { axis, height, margin, delay, duration, tip, groupLayout, showBinPercentages, stacked } = props;\n\n    const stackedOffset = (d: IGroupDataItem, stackIndex: number) => {\n      const thisGroupData = groupData.find((gData) => {\n        return gData.find((dx) => dx.label === d.label) !== undefined;\n      });\n      const oSet = (thisGroupData || [])\n        .filter((_, i) => i < stackIndex)\n        .reduce((prev, next) => prev + next.value, 0);\n      const isItStacked = isStacked({ groupLayout, stacked });\n      const offset = isItStacked && stackIndex > 0\n        ? oSet\n        : 0;\n      return isItStacked ? this.x(offset) : 0;\n    };\n\n    const calculateYPosition = (d: IGroupDataItem, stackIndex: number, offset: number, counts: number): number => {\n      const totalWidth = innerScaleBand.bandwidth();\n      const barWidth = getBarWidth(stackIndex, props.groupLayout, props.bar, innerScaleBand);\n      const overlaidYPos = (totalWidth / 2) - (barWidth / 3) + (stackIndex === 1 ? 1 : 0);\n      const finalYPos = (props.groupLayout === EGroupedBarLayout.OVERLAID || counts === 1)\n        ? overlaidYPos\n        : Number(innerScaleBand(String(d.groupLabel)));\n      return offset ? finalYPos + offset : finalYPos;\n    };\n\n    const colors = scaleOrdinal(props.colorScheme);\n    const gWidth = gridWidth(props);\n\n    const g = container\n      ?.selectAll<SVGElement, {}>('g')\n      .data(groupData);\n\n    const bars = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = this.y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const x = yAxisWidth(axis) + axis.x.style['stroke-width'];\n        return `translate(${x}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('rect')\n      .data((d) => d);\n\n    bars\n      ?.enter()\n      .append<SVGElement>('rect')\n      .attr('width', 0)\n      .attr('x', stackedOffset)\n      .attr('class', 'bar')\n      .on('click', onClick(props.onClick))\n      .on('mouseover', onMouseOver({\n        bins,\n        colors,\n        hover: props.bar.hover,\n        tip,\n        tipContainer,\n        tipContent,\n        tipContentFn: props.tipContentFn,\n      }))\n      .on('mousemove', () => tip.fx.move(tipContainer))\n      .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n      .merge(bars)\n      .attr('y', (d: IGroupDataItem, i: number) => calculateYPosition(d, i, 0, props.data.counts.length))\n      .attr('height', (d, i) => getBarWidth(i, props.groupLayout, props.bar, innerScaleBand))\n      .attr('fill', (d, i) => colors(String(i)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', stackedOffset)\n      // Hide bar's bottom border\n      .attr('stroke-dasharray',\n        (d: IGroupDataItem, i): string => {\n          const currentHeight = gWidth - (this.x(d.value));\n          const barWidth = getBarWidth(i, props.groupLayout, props.bar, innerScaleBand);\n          return `${barWidth} 0 ${currentHeight} ${barWidth}`;\n        })\n      .attr('width', (d: IGroupDataItem): number => this.x(d.value));\n\n    // We need to show the bar percentage splits if flag enabled\n    if (showBinPercentages) {\n\n      const percents = g?.enter()\n        .append<SVGElement>('g')\n        .merge(g)\n        .attr('transform', (d: any[], index: number) => {\n          let yd = this.y(d[0].label);\n          if (yd === undefined) {\n            yd = 0;\n          }\n          const x = yAxisWidth(axis) + axis.x.style['stroke-width'];\n          return `translate(${x}, ${(margin.top + yd)})`;\n        })\n\n        .selectAll<SVGElement, {}>('text')\n        .data((d) => d);\n\n      percents\n        ?.enter()\n        .append<SVGElement>('text')\n        .attr('width', 0)\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dy', 0)\n        .attr('dx', 0)\n        .attr('class', 'percentage-label')\n        .attr('x', stackedOffset)\n        .text((d, i) => {\n          // To show the correct percentage split we need to total all the other values in this count set\n          const total = groupData.reduce((prev, group) => prev + group[i].value, 0);\n          const percentage = d.value === 0 ? 0 : Math.round((d.value / total) * 100);\n          return showBinPercentages[i] ? `${percentage}%` : '';\n        })\n        .data((d) => d)\n        .style('text-anchor', 'middle')\n        .style('font-size', '0.675rem')\n        .attr('fill', (d, i) => colors(String(i)))\n        .merge(percents)\n        .attr('x', (d: IGroupDataItem): number => this.x(d.value) + 12) // 12 added to space the label away from the bar\n        .attr('y', (d: IGroupDataItem, i: number) => {\n          const barWidth = getBarWidth(i, props.groupLayout, props.bar, innerScaleBand);\n          const overlaidOffset = props.bar.overlayMargin;\n          return calculateYPosition(d, i, ((barWidth + overlaidOffset) / 2), props.data.counts.length);\n        });\n      percents?.exit().remove();\n    }\n\n    bars?.exit().remove();\n    g?.exit().remove();\n\n    const yText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.y.label]);\n\n    yText?.enter().append('text')\n      .attr('class', 'y-axis-label')\n      .merge(yText)\n      .attr('transform',\n        'translate(' + (Number(height) / 2) + ' ,' +\n        ((height - yAxisWidth(props.axis) - (margin.left * 2)) + axis.x.margin) + ')')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n\n    const xText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.x.label]);\n\n    xText?.enter().append('text')\n      .attr('class', 'x-axis-label')\n      .merge(xText)\n      .attr('transform', 'rotate(-90)')\n      .attr('y', 0)\n      .attr('x', 0 - (gWidth / 2 - (margin.top * 2)))\n      .attr('dy', '1em')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n  }\n\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  IChartAdaptor,\n  IChartState,\n  IHistogramProps,\n} from './Histogram';\nimport { HorizontalHistogramD3 } from './HorizontalHistogramD3';\nimport { DeepPartial } from './utils/types';\n\n/**\n * Horizontal Histogram component\n */\nclass HorizontalHistogram extends Component<DeepPartial<IHistogramProps>, IChartState> {\n\n  private histogram: IChartAdaptor<IHistogramProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<IHistogramProps>) {\n    super(props);\n    this.histogram = new HorizontalHistogramD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.histogram.update(this.getChartState()));\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.histogram.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.histogram.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<IHistogramProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Props received, update the chart\n   */\n  public componentWillReceiveProps() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.histogram.update(this.getChartState());\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    this.histogram.destroy();\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"histogram-chart-container\"></div>);\n  }\n}\n\nexport default HorizontalHistogram;\n","import { color } from 'd3-color';\nimport { scaleLinear } from 'd3-scale';\nimport React, {\n  FC,\n  RefObject,\n  useState,\n} from 'react';\nimport {\n  animated,\n  SpringConfig,\n  useSprings,\n} from 'react-spring';\n\nimport { IBarChartDataSet } from '../../Histogram';\nimport { EChartDirection } from '../../v3/BarChart';\nimport { TLabelComponent } from '../Label';\nimport { Labels } from '../Labels';\nimport { TTipFunc } from '../ToolTip';\nimport { ToolTips } from '../ToolTips';\nimport { ExtendedGroupItem } from './Bars';\nimport { buildHistogramSprings } from './histogramHelper';\n\nconst binWidth = (bin: [number, number]) => bin[1] - bin[0];\n\ninterface IProps {\n  bins: [number, number][];\n  config?: SpringConfig;\n  colorScheme?: readonly string[],\n  continuousDomain: [number, number];\n  direction?: EChartDirection;\n  domain: [number, number];\n  height: number;\n  hoverColorScheme?: readonly string[];\n  labels?: string[];\n  left?: number;\n  showLabels?: boolean[];\n  LabelComponent?: TLabelComponent;\n  stroke?: string;\n  top?: number;\n  tip?: TTipFunc;\n  values: IBarChartDataSet[];\n  visible?: Record<string, boolean>;\n  width: number;\n}\n\nconst HistogramBars: FC<IProps> = ({\n  bins,\n  config = {\n    duration: 250,\n  },\n  colorScheme = ['#a9a9a9', '#2a5379'],\n  continuousDomain,\n  direction = EChartDirection.HORIZONTAL,\n  domain,\n  height,\n  hoverColorScheme,\n  LabelComponent,\n  labels,\n  left = 0,\n  showLabels = [],\n  stroke = \"#FFF\",\n  top = 0,\n  tip,\n  values,\n  visible = {},\n  width,\n}) => {\n  if (width === 0) {\n    return null;\n  }\n\n  if (!hoverColorScheme) {\n    hoverColorScheme = colorScheme.map((c) => color(c)?.brighter(0.1).toString()) as readonly string[];\n  }\n  const dataSets: ExtendedGroupItem[] = [];\n  const binLabels = bins.reduce((p, n) => p.concat(Array.isArray(n) ? n : [n]), [] as (number | string)[]);\n\n  values.forEach((count, datasetIndex) => {\n\n    const totalArea = count.data.reduce((p, n, i) => p + n * binWidth(bins[i]), 0);\n    count.data.forEach((value, i) => {\n      dataSets.push({\n        groupLabel: count.label,\n        datasetIndex,\n        label: String(binLabels[i]),\n        binIndex: i,\n        percentage: totalArea === 0 ? '0' : (((value * binWidth(bins[i])) / totalArea) * 100).toFixed(2),\n        value: visible[binLabels[i]] !== false && visible[count.label] !== false ? value : 0,\n      });\n    });\n  });\n\n  const numericScale = scaleLinear()\n    .domain(domain)\n    .rangeRound([0, direction === EChartDirection.HORIZONTAL ? width : height]);\n\n  // Distribute the bin values across the x axis\n  const continuousScale = scaleLinear()\n    .domain(continuousDomain)\n    .rangeRound([0, direction === EChartDirection.VERTICAL ? width : height]);\n\n  const transform = `(${left}, ${top})`;\n\n  const [hover, setHover] = useState(-1);\n  const springs = useSprings(dataSets.length, buildHistogramSprings({\n    bins,\n    values,\n    height,\n    width,\n    dataSets,\n    continuousScale,\n    numericScale,\n    colorScheme,\n    hoverColorScheme,\n    config,\n    direction,\n  }));\n\n  const refs: RefObject<any>[] = [];\n  return (\n    <>\n      <g className=\"bars\"\n        transform={`translate${transform}`}>\n        {\n          springs.map((props: any, i) => {\n            const item = dataSets[i];\n            refs[i] = React.createRef<any>();\n            return <animated.rect\n              ref={refs[i]}\n              stroke={stroke}\n              className=\"chart-bar\"\n              onMouseEnter={() => setHover(i)}\n              onMouseLeave={() => setHover(-1)}\n              key={`bar-${item.groupLabel}.${item.label}.${item.value}`}\n              height={props.height}\n              fill={hover == i ? props.hoverFill : props.fill}\n              width={props.width}\n              x={props.x as any}\n              y={props.y as any}\n            />\n          })\n        }\n        <Labels\n          colorScheme={colorScheme}\n          springs={springs}\n          showLabels={showLabels}\n          items={dataSets}\n          direction={direction}\n          labels={labels}\n          LabelComponent={LabelComponent} />\n      </g>\n\n      <ToolTips\n        springs={springs}\n        refs={refs}\n        bins={bins}\n        tip={tip}\n        items={dataSets} />\n\n    </>)\n}\n\n\nexport default HistogramBars;\n","import { ScaleLinear } from 'd3-scale';\nimport { SpringConfig } from 'react-spring';\n\nimport { IBarChartDataSet } from '../../Histogram';\nimport { EChartDirection } from '../../v3/BarChart';\nimport { ExtendedGroupItem } from './Bars';\n\ninterface IHistogramSpringProps {\n  bins: [number, number][];\n  values: IBarChartDataSet[];\n  height: number;\n  width: number;\n  dataSets: ExtendedGroupItem[];\n  numericScale: ScaleLinear<any, any>;\n  continuousScale: ScaleLinear<any, any>;\n  colorScheme: readonly string[];\n  hoverColorScheme?: readonly string[];\n  config: SpringConfig,\n  direction: EChartDirection;\n}\n/**\n * Build the from / to spring animation properties to animate the bars.\n */\nexport const buildHistogramSprings = (props: IHistogramSpringProps) => {\n  const { bins, direction, config, height, dataSets, numericScale, continuousScale, colorScheme, hoverColorScheme } = props;\n  const s = dataSets.map((item, index) => {\n    const bandPosition = continuousScale(bins[index][0]);\n    const itemWidth = continuousScale(bins[index][1] - bins[index][0]);\n    const itemHeight = numericScale(item.value);\n\n    if (direction === EChartDirection.HORIZONTAL) {\n      return {\n        from: {\n          width: 0,\n          fill: colorScheme[item.datasetIndex],\n          hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n          x: 0,\n          y: height - itemWidth - bandPosition,\n          height: itemWidth,\n        },\n        to: {\n          width: itemHeight,\n          fill: colorScheme[item.datasetIndex],\n          hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n          x: 0,\n          y: height - itemWidth - bandPosition,\n          height: itemWidth,\n        },\n        config,\n      }\n    }\n\n    return {\n      from: {\n        height: 0,\n        fill: colorScheme[item.datasetIndex],\n        hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n        x: bandPosition,\n        y: height,\n        width: itemWidth,\n      },\n      to: {\n        height: itemHeight,\n        fill: colorScheme[item.datasetIndex],\n        hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n        x: bandPosition,\n        y: height - numericScale(item.value),\n        width: itemWidth,\n      },\n      config,\n    }\n  });\n  return s;\n}\n","import _toConsumableArray from \"/home/rob/cl-react-graph/docs-src/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/rob/cl-react-graph/docs-src/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/rob/cl-react-graph/docs-src/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport { useState, useRef, useMemo, useEffect } from 'react';\nimport { debounce } from 'debounce';\n\nfunction useMeasure() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    debounce: 0,\n    scroll: false\n  },\n      debounce$1 = _ref.debounce,\n      scroll = _ref.scroll,\n      polyfill = _ref.polyfill;\n\n  var ResizeObserver = polyfill || (typeof window === 'undefined' ? function ResizeObserver() {\n    _classCallCheck(this, ResizeObserver);\n  } : window.ResizeObserver);\n\n  if (!ResizeObserver) {\n    throw new Error('This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills');\n  }\n\n  var _useState = useState({\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n    bottom: 0,\n    right: 0,\n    x: 0,\n    y: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      bounds = _useState2[0],\n      set = _useState2[1]; // keep all state in a ref\n\n\n  var state = useRef({\n    element: null,\n    scrollContainers: null,\n    resizeObserver: null,\n    lastBounds: bounds\n  }); // set actual debounce values early, so effects know if they should react accordingly\n\n  var scrollDebounce = debounce$1 ? typeof debounce$1 === 'number' ? debounce$1 : debounce$1.scroll : null;\n  var resizeDebounce = debounce$1 ? typeof debounce$1 === 'number' ? debounce$1 : debounce$1.resize : null; // memoize handlers, so event-listeners know when they should update\n\n  var _useMemo = useMemo(function () {\n    var callback = function callback() {\n      if (!state.current.element) return;\n\n      var _state$current$elemen = state.current.element.getBoundingClientRect(),\n          left = _state$current$elemen.left,\n          top = _state$current$elemen.top,\n          width = _state$current$elemen.width,\n          height = _state$current$elemen.height,\n          bottom = _state$current$elemen.bottom,\n          right = _state$current$elemen.right,\n          x = _state$current$elemen.x,\n          y = _state$current$elemen.y;\n\n      var size = {\n        left: left,\n        top: top,\n        width: width,\n        height: height,\n        bottom: bottom,\n        right: right,\n        x: x,\n        y: y\n      };\n      Object.freeze(size);\n      if (!areBoundsEqual(state.current.lastBounds, size)) set(state.current.lastBounds = size);\n    };\n\n    return [callback, resizeDebounce ? debounce(callback, resizeDebounce) : callback, scrollDebounce ? debounce(callback, scrollDebounce) : callback];\n  }, [set, scrollDebounce, resizeDebounce]),\n      _useMemo2 = _slicedToArray(_useMemo, 3),\n      forceRefresh = _useMemo2[0],\n      resizeChange = _useMemo2[1],\n      scrollChange = _useMemo2[2]; // cleanup current scroll-listeners / observers\n\n\n  function removeListeners() {\n    if (state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(function (element) {\n        return element.removeEventListener('scroll', scrollChange, true);\n      });\n      state.current.scrollContainers = null;\n    }\n\n    if (state.current.resizeObserver) {\n      state.current.resizeObserver.disconnect();\n      state.current.resizeObserver = null;\n    }\n  } // add scroll-listeners / observers\n\n\n  function addListeners() {\n    if (!state.current.element) return;\n    state.current.resizeObserver = new ResizeObserver(scrollChange);\n    state.current.resizeObserver.observe(state.current.element);\n\n    if (scroll && state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(function (scrollContainer) {\n        return scrollContainer.addEventListener('scroll', scrollChange, {\n          capture: true,\n          passive: true\n        });\n      });\n    }\n  } // the ref we expose to the user\n\n\n  var ref = function ref(node) {\n    if (!node || node === state.current.element) return;\n    removeListeners();\n    state.current.element = node;\n    state.current.scrollContainers = findScrollContainers(node);\n    addListeners();\n  }; // add general event listeners\n\n\n  useOnWindowScroll(scrollChange, Boolean(scroll));\n  useOnWindowResize(resizeChange); // respond to changes that are relevant for the listeners\n\n  useEffect(function () {\n    removeListeners();\n    addListeners();\n  }, [scroll, scrollChange, resizeChange]); // remove all listeners when the components unmounts\n\n  useEffect(function () {\n    return removeListeners;\n  }, []);\n  return [ref, bounds, forceRefresh];\n} // Adds native resize listener to window\n\n\nfunction useOnWindowResize(onWindowResize) {\n  useEffect(function () {\n    var cb = onWindowResize;\n    window.addEventListener('resize', cb);\n    return function () {\n      return void window.removeEventListener('resize', cb);\n    };\n  }, [onWindowResize]);\n}\n\nfunction useOnWindowScroll(onScroll, enabled) {\n  useEffect(function () {\n    if (enabled) {\n      var cb = onScroll;\n      window.addEventListener('scroll', cb, {\n        capture: true,\n        passive: true\n      });\n      return function () {\n        return void window.removeEventListener('scroll', cb, true);\n      };\n    }\n  }, [onScroll, enabled]);\n} // Returns a list of scroll offsets\n\n\nfunction findScrollContainers(element) {\n  var result = [];\n  if (!element || element === document.body) return result;\n\n  var _window$getComputedSt = window.getComputedStyle(element),\n      overflow = _window$getComputedSt.overflow,\n      overflowX = _window$getComputedSt.overflowX,\n      overflowY = _window$getComputedSt.overflowY;\n\n  if ([overflow, overflowX, overflowY].some(function (prop) {\n    return prop === 'auto' || prop === 'scroll';\n  })) result.push(element);\n  return [].concat(result, _toConsumableArray(findScrollContainers(element.parentElement)));\n} // Checks if element boundaries are equal\n\n\nvar keys = ['x', 'y', 'top', 'bottom', 'left', 'right', 'width', 'height'];\n\nvar areBoundsEqual = function areBoundsEqual(a, b) {\n  return keys.every(function (key) {\n    return a[key] === b[key];\n  });\n};\n\nif (typeof module !== 'undefined' && Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(module, 'exports').writable) {\n  module.exports = useMeasure;\n}\n\nexport default useMeasure;","var frame = 0,\n    // is an animation frame pending?\ntimeout = 0,\n    // is a timeout pending?\ninterval = 0,\n    // are any timers active?\npokeDelay = 1000,\n    // how frequently we check for clock skew\ntaskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {\n  setTimeout(f, 17);\n};\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call = this._time = this._next = null;\n}\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function restart(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;else taskHead = this;\n      taskTail = this;\n    }\n\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function stop() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\nexport function timer(callback, delay, time) {\n  var t = new Timer();\n  t.restart(callback, delay, time);\n  return t;\n}\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n\n  ++frame; // Pretend weve set an alarm, if we havent already.\n\n  var t = taskHead,\n      e;\n\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(),\n      delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0,\n      t1 = taskHead,\n      t2,\n      time = Infinity;\n\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}","import { Timer } from \"./timer.js\";\nexport default function (callback, delay, time) {\n  var t = new Timer();\n  delay = delay == null ? 0 : +delay;\n  t.restart(function (elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}","import { dispatch } from \"d3-dispatch\";\nimport { timer, timeout } from \"d3-timer\";\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\nexport default function (node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index,\n    // For context during callback.\n    group: group,\n    // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween; // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time); // If the elapsed delay is less than our first sleep, start immediately.\n\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o; // If the state is not SCHEDULED, then we previously errored on start.\n\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue; // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n\n      if (o.state === STARTED) return timeout(start); // Interrupt the active transition, if any.\n\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      } // Cancel any pre-empted transitions.\n      else if (+i < id) {\n          o.state = ENDED;\n          o.timer.stop();\n          o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n          delete schedules[i];\n        }\n    } // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n\n\n    timeout(function () {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    }); // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n\n    self.state = STARTED; // Initialize the tween, deleting null tween.\n\n    tween = new Array(n = self.tween.length);\n\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    } // Dispatch the end event.\n\n\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n\n    for (var i in schedules) {\n      return;\n    } // eslint-disable-line no-unused-vars\n\n\n    delete node.__transition;\n  }\n}","import { STARTING, ENDING, ENDED } from \"./transition/schedule.js\";\nexport default function (node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n  if (!schedules) return;\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) {\n      empty = false;\n      continue;\n    }\n\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}","import { get, set } from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function () {\n    var schedule = set(this, id),\n        tween = schedule.tween; // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error();\n  return function () {\n    var schedule = set(this, id),\n        tween = schedule.tween; // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n\n      for (var t = {\n        name: name,\n        value: value\n      }, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function (name, value) {\n  var id = this._id;\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n  transition.each(function () {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n  return function (node) {\n    return get(node, id).value[name];\n  };\n}","import { color } from \"d3-color\";\nimport { interpolateNumber, interpolateRgb, interpolateString } from \"d3-interpolate\";\nexport default function (a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber : b instanceof color ? interpolateRgb : (c = color(b)) ? (b = c, interpolateRgb) : interpolateString)(a, b);\n}","import { interpolateTransformSvg as interpolateTransform } from \"d3-interpolate\";\nimport { namespace } from \"d3-selection\";\nimport { tweenValue } from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function () {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function () {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0,\n        value1 = value(this),\n        string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0,\n        value1 = value(this),\n        string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function (name, value) {\n  var fullname = namespace(name),\n      i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\" ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value)) : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname) : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}","import { namespace } from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function (t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function (t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}","import { get, init } from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function () {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function () {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? delayFunction : delayConstant)(id, value)) : get(this.node(), id).delay;\n}","import { get, set } from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function () {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function () {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? durationFunction : durationConstant)(id, value)) : get(this.node(), id).duration;\n}","import { get, set } from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error();\n  return function () {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each(easeConstant(id, value)) : get(this.node(), id).ease;\n}","import { get, set, init } from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function (t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0,\n      on1,\n      sit = start(name) ? init : set;\n  return function () {\n    var schedule = sit(this, id),\n        on = schedule.on; // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n    schedule.on = on1;\n  };\n}\n\nexport default function (name, listener) {\n  var id = this._id;\n  return arguments.length < 2 ? get(this.node(), id).on.on(name) : this.each(onFunction(id, name, listener));\n}","function removeFunction(id) {\n  return function () {\n    var parent = this.parentNode;\n\n    for (var i in this.__transition) {\n      if (+i !== id) return;\n    }\n\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function () {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}","import { selection } from \"d3-selection\";\nvar Selection = selection.prototype.constructor;\nexport default function () {\n  return new Selection(this._groups, this._parents);\n}","import { interpolateTransformCss as interpolateTransform } from \"d3-interpolate\";\nimport { style } from \"d3-selection\";\nimport { set } from \"./schedule.js\";\nimport { tweenValue } from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function () {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = style(this, name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0,\n      on1,\n      listener0,\n      key = \"style.\" + name,\n      event = \"end.\" + key,\n      remove;\n  return function () {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined; // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n    schedule.on = on1;\n  };\n}\n\nexport default function (name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this.styleTween(name, styleNull(name, i)).on(\"end.style.\" + name, styleRemove(name)) : typeof value === \"function\" ? this.styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value))).each(styleMaybeRemove(this._id, name)) : this.styleTween(name, styleConstant(name, i, value), priority).on(\"end.style.\" + name, null);\n}","function styleInterpolate(name, i, priority) {\n  return function (t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}","function textInterpolate(i) {\n  return function (t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  return this.tween(key, textTween(value));\n}","import { selection } from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\nvar id = 0;\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\nexport default function transition(name) {\n  return selection().transition(name);\n}\nexport function newId() {\n  return ++id;\n}\nvar selection_prototype = selection.prototype;\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  end: transition_end\n};","import { selector } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function (select) {\n  var name = this._name,\n      id = this._id;\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}","import { selectorAll } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function (select) {\n  var name = this._name,\n      id = this._id;\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}","import { matcher } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nexport default function (match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}","import { Transition } from \"./index.js\";\nexport default function (transition) {\n  if (transition._id !== this._id) throw new Error();\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}","import { Transition, newId } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function () {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}","import { tweenValue } from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function () {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function () {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function (value) {\n  return this.tween(\"text\", typeof value === \"function\" ? textFunction(tweenValue(this, \"text\", value)) : textConstant(value == null ? \"\" : value + \"\"));\n}","import { set } from \"./schedule.js\";\nexport default function () {\n  var on0,\n      on1,\n      that = this,\n      id = that._id,\n      size = that.size();\n  return new Promise(function (resolve, reject) {\n    var cancel = {\n      value: reject\n    },\n        end = {\n      value: function value() {\n        if (--size === 0) resolve();\n      }\n    };\n    that.each(function () {\n      var schedule = set(this, id),\n          on = schedule.on; // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n\n        on1._.cancel.push(cancel);\n\n        on1._.interrupt.push(cancel);\n\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n  });\n}","import { Transition, newId } from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport { easeCubicInOut } from \"d3-ease\";\nimport { now } from \"d3-timer\";\nvar defaultTiming = {\n  time: null,\n  // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n\n  return timing;\n}\n\nexport default function (name) {\n  var id, timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}","export function cubicIn(t) {\n  return t * t * t;\n}\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}","import { selection } from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;","import interrupt from \"../interrupt.js\";\nexport default function (name) {\n  return this.each(function () {\n    interrupt(this, name);\n  });\n}","import { Transition } from \"./transition/index.js\";\nimport { SCHEDULED } from \"./transition/schedule.js\";\nvar root = [null];\nexport default function (node, name) {\n  var schedules = node.__transition,\n      schedule,\n      i;\n\n  if (schedules) {\n    name = name == null ? null : name + \"\";\n\n    for (i in schedules) {\n      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {\n        return new Transition([[node]], root, name, +i);\n      }\n    }\n  }\n\n  return null;\n}","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}","export default function (d) {\n  return d;\n}","import { path } from \"d3-path\";\nimport constant from \"./constant.js\";\nimport { abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau } from \"./math.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0,\n      y10 = y1 - y0,\n      x32 = x3 - x2,\n      y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n} // Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\n\n\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00; // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function () {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n    if (!context) context = buffer = path(); // Ensure that the outer radius is always larger than the inner radius.\n\n    if (r1 < r0) r = r1, r1 = r0, r0 = r; // Is it a point?\n\n    if (!(r1 > epsilon)) context.moveTo(0, 0); // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n        context.moveTo(r1 * cos(a0), r1 * sin(a0));\n        context.arc(0, 0, r1, a0, a1, !cw);\n\n        if (r0 > epsilon) {\n          context.moveTo(r0 * cos(a1), r0 * sin(a1));\n          context.arc(0, 0, r0, a1, a0, cw);\n        }\n      } // Or is it a circular or annular sector?\n      else {\n          var a01 = a0,\n              a11 = a1,\n              a00 = a0,\n              a10 = a1,\n              da0 = da,\n              da1 = da,\n              ap = padAngle.apply(this, arguments) / 2,\n              rp = ap > epsilon && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n              rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n              rc0 = rc,\n              rc1 = rc,\n              t0,\n              t1; // Apply padding? Note that since r1  r0, da1  da0.\n\n          if (rp > epsilon) {\n            var p0 = asin(rp / r0 * sin(ap)),\n                p1 = asin(rp / r1 * sin(ap));\n            if ((da0 -= p0 * 2) > epsilon) p0 *= cw ? 1 : -1, a00 += p0, a10 -= p0;else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n            if ((da1 -= p1 * 2) > epsilon) p1 *= cw ? 1 : -1, a01 += p1, a11 -= p1;else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n          }\n\n          var x01 = r1 * cos(a01),\n              y01 = r1 * sin(a01),\n              x10 = r0 * cos(a10),\n              y10 = r0 * sin(a10); // Apply rounded corners?\n\n          if (rc > epsilon) {\n            var x11 = r1 * cos(a11),\n                y11 = r1 * sin(a11),\n                x00 = r0 * cos(a00),\n                y00 = r0 * sin(a00),\n                oc; // Restrict the corner radius according to the sector angle.\n\n            if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n              var ax = x01 - oc[0],\n                  ay = y01 - oc[1],\n                  bx = x11 - oc[0],\n                  by = y11 - oc[1],\n                  kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n                  lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n              rc0 = min(rc, (r0 - lc) / (kc - 1));\n              rc1 = min(rc, (r1 - lc) / (kc + 1));\n            }\n          } // Is the sector collapsed to a line?\n\n\n          if (!(da1 > epsilon)) context.moveTo(x01, y01); // Does the sectors outer ring have rounded corners?\n          else if (rc1 > epsilon) {\n              t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n              t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n              context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01); // Have the corners merged?\n\n              if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw); // Otherwise, draw the two corners and the ring.\n              else {\n                  context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n                  context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n                  context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n                }\n            } // Or is the outer ring just a circular arc?\n            else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw); // Is there no inner ring, and its a circular sector?\n          // Or perhaps its an annular sector collapsed due to padding?\n\n          if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10); // Does the sectors inner ring (or point) have rounded corners?\n          else if (rc0 > epsilon) {\n              t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n              t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n              context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01); // Have the corners merged?\n\n              if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw); // Otherwise, draw the two corners and the ring.\n              else {\n                  context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n                  context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n                  context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n                }\n            } // Or is the inner ring just a circular arc?\n            else context.arc(0, 0, r0, a10, a00, cw);\n        }\n    context.closePath();\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function () {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function (_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function (_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function (_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function (_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function (_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, arc) : context;\n  };\n\n  return arc;\n}","import 'd3-transition';\n\nimport { interpolate } from 'd3-interpolate';\nimport { scaleOrdinal } from 'd3-scale';\nimport {\n  select,\n  Selection,\n} from 'd3-selection';\nimport {\n  arc,\n  Arc,\n  pie,\n  PieArcDatum,\n} from 'd3-shape';\nimport cloneDeep from 'lodash/cloneDeep';\nimport merge from 'lodash/merge';\n\nimport colorScheme from './colors';\nimport {\n  IBarChartDataSet,\n  IChartAdaptor,\n} from './Histogram';\nimport {\n  IPieChartProps,\n  IPieDataItem,\n} from './PieChart';\nimport tips, { makeTip } from './tip';\nimport { onMouseOut } from './utils/mouseOver';\nimport { DeepPartial } from './utils/types';\n\ninterface IPieDataset {\n  count: number;\n  groupLabel: string;\n  label: string;\n}\n\n\n// Function to calculate pie chart paths from data\nconst thisPie = pie()\n  .sort(null)\n  .value((d: any) => d.count);\n\n\nconst outerRadius = (props, setIndex = 0) => {\n  const { donutWidth = 0, width, height } = props;\n\n  const radius = Math.min(Number(width), height) / 2;\n  return donutWidth === 0\n    ? radius - 10\n    : radius - 10 - (setIndex * (donutWidth + 10));\n};\n\nconst innerRadius = (props, setIndex = 0) => {\n  const { donutWidth = 0, width, height } = props;\n  const radius = Math.min(Number(width), height) / 2;\n  return donutWidth === 0\n    ? 0\n    : radius - 10 - donutWidth - (setIndex * (donutWidth + 10));\n};\n\nconst getArc = (props, i: number) => {\n  return arc()\n    .outerRadius(outerRadius(props, i))\n    .innerRadius(innerRadius(props, i));\n}\n\nexport const pieChartD3 = ((): IChartAdaptor<IPieChartProps> => {\n\n  let tipContainer;\n  let tipContent;\n\n  const props: IPieChartProps = {\n    backgroundColor: '#ddd',\n    className: 'piechart-d3',\n    colorScheme,\n    data: {\n      bins: [],\n      counts: [],\n    },\n    donutWidth: 0,\n    height: 200,\n    hover: {\n      lighten: 0.1,\n    },\n    labels: {\n      display: true,\n      displayFn: (d) => d.value,\n    },\n    margin: {\n      bottom: 0,\n      left: 10,\n      right: 0,\n      top: 10,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (bins: string[], i: number, d: number, groupLabel): string => {\n      return groupLabel + ': ' + bins[i] + '<br />' + d;\n    },\n    visible: {},\n    width: 200,\n  };\n\n  let containers: any[];\n  let svg: Selection<any, any, any, any>;\n  let dataSets: IPieDataset[][];\n  let previousData: any;\n  let storedWidth: number;\n  let storedHeight: number;\n\n  const PieChartD3 = {\n\n    create(el: Element, newProps: DeepPartial<IPieChartProps> = {}) {\n      merge(props, newProps);\n      previousData = props.data.counts.map((set: IBarChartDataSet, setIndex: number) => {\n        return set.data\n          .map((count, i) => ({\n            count,\n            groupLabel: set.label,\n            label: props.data.bins[i],\n          }));\n      });\n      this._makeSvg(el);\n      containers = [];\n      previousData.forEach((dataSet, i) => {\n        this.drawChartBg(i);\n      });\n\n      this.update(props);\n    },\n\n    _makeSvg(el: Element) {\n      if (svg) {\n        svg.selectAll('svg > *').remove();\n        svg.remove();\n        const childNodes = el.getElementsByTagName('svg');\n        if (childNodes.length > 0) {\n          el.removeChild(childNodes[0]);\n        }\n      }\n      const { margin, width, height, className } = props;\n\n      // Reference to svg element containing chart\n      svg = select(el).append('svg')\n        .attr('class', className)\n        .attr('width', width)\n        .attr('height', height)\n        .attr('viewBox', `0 0 ${width} ${height}`)\n        .append('g')\n        .attr('transform',\n          'translate(' + margin.left + ',' + margin.top + ')');\n\n      const r = makeTip(props.tipContainer, tipContainer);\n      tipContent = r.tipContent;\n      tipContainer = r.tipContainer;\n    },\n\n    update(newProps: DeepPartial<IPieChartProps>) {\n      if (!props.data) {\n        return;\n      }\n      merge(props, newProps);\n      if (newProps.data) {\n        props.data = cloneDeep(newProps.data) as IPieChartProps['data'];\n      }\n      if (props.colorScheme) {\n        props.colorScheme = props.colorScheme;\n      }\n      if (!props.data.bins) {\n        return;\n      }\n\n      this.drawCharts();\n    },\n\n    drawCharts() {\n      const { data, visible } = props;\n      dataSets = data.counts.map((set: IBarChartDataSet) => {\n        return set.data\n          .map((count, i) => ({\n            count: visible[data.bins[i]] !== false ? count : 0,\n            groupLabel: set.label,\n            label: data.bins[i],\n          }));\n      });\n\n      dataSets.forEach((dataSet, i) => {\n        const theme = data.counts[i]?.colors ?? props.colorScheme;\n        this.drawChart(dataSet, i, data.bins, theme);\n        this.drawLabels(dataSet, i, data.bins, theme);\n      });\n      previousData = dataSets;\n    },\n\n    drawChartBg(i: number) {\n      const { backgroundColor, width, height } = props;\n      const tau = 2 * Math.PI; // http://tauday.com/tau-manifesto\n      const bgArc = arc()\n        .innerRadius(innerRadius(props, i))\n        .outerRadius(outerRadius(props, i))\n        .startAngle(0)\n        .endAngle(tau);\n      const container = svg\n        .append('g')\n        .attr('class', 'pie-bg');\n      const background = container.append('path')\n        .attr('class', 'pie-background')\n        .style('fill', backgroundColor);\n      background.enter()\n        .attr('transform', 'translate(' + Number(width) / 2 + ',' + height / 2 + ')')\n        .attr('d', bgArc);\n\n      background.merge(background);\n\n      if (!containers[i]) {\n        svg\n          .append('g')\n          .attr('class', 'pie-container')\n\n        svg\n          .append('g')\n          .attr('class', 'pie-labels')\n        containers[i] = svg;\n      }\n    },\n\n    drawChart(data, i: number, bins: string[], theme: string[]) {\n      const { width, height, tip, tipContentFn, hover } = props;\n\n      // Formatted pie chart arcs based on previous current data.\n      // If data has changed length (i.e. swapping the entire dataset) use the new data.\n      const prev = previousData[i].length === data.length\n        ? previousData[i]\n        : data;\n      const arcs = thisPie(prev);\n      const colors = scaleOrdinal(theme);\n      // Set the domain to get consistent colours\n      colors.domain(Array.from(new Array(data.length).keys()).map(s => s.toString()));\n\n      // Stack multiple charts in concentric circles\n      const thisArc = getArc(props, i);\n\n      const path = containers[i].select('.pie-container').selectAll('path')\n        .data(thisPie(data));\n\n      path.enter()\n        .append('path')\n        .attr('transform', (d) => {\n          return 'translate(' + Number(width) / 2 + ',' + height / 2 + ')';\n        })\n        .attr('stroke', '#FFF')\n        .attr('fill', (_, j) => colors(j))\n        .on('mouseover', (d: PieArcDatum<IPieDataItem>, ix: number, nodes: any[]) => {\n          if (hover) {\n            select(nodes[ix])\n              .attr('fill-opacity', 1)\n              .transition('easeIn')\n              .attr('fill-opacity', 0.7);\n          }\n          tipContent.html(() => tipContentFn(bins, ix, d.data.count, d.data.groupLabel));\n          tip.fx.in(tipContainer);\n        })\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n        .attr('d', thisArc)\n        .style('opacity', 0)\n        .transition()\n        .duration(500)\n        .style('opacity', 1);\n\n      // Fade in when adding (merge)\n      path\n        .merge(path)\n        .on('mouseover', (d: PieArcDatum<IPieDataItem>, ix: number, nodes: any[]) => {\n          if (hover) {\n            select(nodes[ix])\n              .attr('fill-opacity', 1)\n              .transition('easeIn')\n              .attr('fill-opacity', 0.7);\n          }\n          tipContent.html(() => tipContentFn(bins, ix, d.data.count, d.data.groupLabel));\n          tip.fx.in(tipContainer);\n        })\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n        .transition()\n        .delay(400)\n        .duration(500)\n        .attrTween('d', arcTween(thisArc));\n\n      path.exit().transition()\n        .attrTween('d', arcTween(thisArc))\n        .duration(500)\n        .style('opacity', 0).remove();\n    },\n\n    drawLabels(data, i: number, bins: string[], theme: string[]) {\n      const { labels, width, height } = props;\n      const thisArc = getArc(props, i);\n      const path2 = containers[i].select('.pie-labels').selectAll('text.label')\n        .data(thisPie(data));\n      path2.enter().append('text')\n        .attr('class', 'label')\n        .each(() => {\n          // Store initial offset incase we change chart heights.\n          storedHeight = height;\n          storedWidth = Number(width);\n        })\n        .style('opacity', 0)\n        .text((d, ix: number) => d.value === 0 ? '' : labels.displayFn(d, ix))\n        .attr('transform', (d) => {\n          const centroid = thisArc.centroid(d);\n          const x = centroid[0] + (storedWidth / 2);\n          const y = centroid[1] + (storedHeight / 2);\n          return 'translate(' + x + ',' + y + ')';\n        })\n        .transition()\n        .duration(500)\n        .style('opacity', (d) => labels.display === false || d.value === 0 ? 0 : 1);\n\n      path2\n        .merge(path2)\n        .transition()\n        .duration(500)\n        .style('opacity', 0)\n        .transition()\n        .attr('transform', (d) => {\n          const centroid = thisArc.centroid(d);\n          const x = centroid[0] + (storedWidth / 2);\n          const y = centroid[1] + (storedHeight / 2);\n          return 'translate(' + x + ',' + y + ')';\n        })\n        .text((d, ix: number) => d.value === 0 ? '' : labels.displayFn(d, ix))\n        .transition()\n        .duration(500)\n        .style('opacity', (d) => {\n          // Only show if the new value is not 0 and labels are set to be displayed\n          return labels.display === false || d.value === 0 ? 0 : 1;\n        });\n\n      path2.exit().transition()\n        .duration(500)\n        .style('opacity', 0);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n\n  return PieChartD3;\n});\n\n// Returns a tween for a transitions \"d\" attribute, transitioning any selected\n// arcs from their current angle to the specified new angle.\nfunction arcTween(this: any, thisArc: Arc<any, any>) {\n  return function (this: any, d) {\n    const i = interpolate(this._current, d);\n    this._current = i(0);\n    return function (this: any, t) {\n      return thisArc(i(t));\n    };\n  };\n}\n","import constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport { tau } from \"./math.js\";\nexport default function () {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    } // Optionally sort the arcs by previously-computed values or by data.\n\n\n    if (sortValues != null) index.sort(function (i, j) {\n      return sortValues(arcs[i], arcs[j]);\n    });else if (sort != null) index.sort(function (i, j) {\n      return sort(data[i], data[j]);\n    }); // Compute the arcs! They are stored in the original data's order.\n\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function (_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function (_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function (_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function (_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  EColorManipulations,\n  IBarChartDataSet,\n  IChartAdaptor,\n  IChartState,\n  IMargin,\n  TipContentFn,\n} from './Histogram';\nimport { pieChartD3 } from './PieChartD3';\nimport { DeepPartial } from './utils/types';\n\ninterface ILabels {\n  display: boolean;\n  displayFn: (d: any, ix: number) => string | number;\n}\n\nexport interface IPieDataItem {\n  count: number;\n  groupLabel: string;\n  label: string;\n}\n\nexport interface IPieChartProps {\n  data: {\n    bins: string[],\n    counts: IBarChartDataSet[];\n  };\n  backgroundColor: string;\n  className: string;\n  colorScheme: string[];\n  donutWidth: number;\n  height: number;\n  hover?: Partial<Record<EColorManipulations, number>>,\n  labels: ILabels;\n  margin: IMargin;\n  tip: any;\n  tipContainer: string;\n  tipContentFn: TipContentFn<string>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\n/**\n * PieChart component\n */\nclass PieChart extends Component<DeepPartial<IPieChartProps>, IChartState> {\n\n  private chart: IChartAdaptor<IPieChartProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<IPieChartProps>) {\n    super(props);\n    this.chart = pieChartD3();\n\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (el) {\n      const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n      this.setState({\n        parentWidth: width,\n      }, () => this.chart.update(this.getChartState()));\n    }\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.create(el, this.getChartState());\n      if (this.props.width === '100%') {\n        window.addEventListener('resize', (e) => this.handleResize());\n        this.handleResize();\n      }\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.update(this.getChartState());\n    }\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<IPieChartProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.destroy();\n    }\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"piechart-chart-container\"></div>);\n  }\n}\n\nexport default PieChart;\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path();\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function moveTo(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function lineTo(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function quadraticCurveTo(x1, y1, x, y) {\n    this._ += \"Q\" + +x1 + \",\" + +y1 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + +x1 + \",\" + +y1 + \",\" + +x2 + \",\" + +y2 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x1,y1).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    } // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) ; // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n      // Equivalently, is (x1,y1) coincident with (x2,y2)?\n      // Or, is the radius zero? Line to (x1,y1).\n      else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n          this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n        } // Otherwise, draw an arc!\n        else {\n            var x20 = x2 - x0,\n                y20 = y2 - y0,\n                l21_2 = x21 * x21 + y21 * y21,\n                l20_2 = x20 * x20 + y20 * y20,\n                l21 = Math.sqrt(l21_2),\n                l01 = Math.sqrt(l01_2),\n                l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n                t01 = l / l01,\n                t21 = l / l21; // If the start tangent is not coincident with (x0,y0), line to.\n\n            if (Math.abs(t01 - 1) > epsilon) {\n              this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n            }\n\n            this._ += \"A\" + r + \",\" + r + \",0,0,\" + +(y01 * x20 > x01 * y20) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n          }\n  },\n  arc: function arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x0,y0).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    } // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n        this._ += \"L\" + x0 + \",\" + y0;\n      } // Is this arc empty? Were done.\n\n\n    if (!r) return; // Does the angle go the wrong way? Flip the direction.\n\n    if (da < 0) da = da % tau + tau; // Is this a complete circle? Draw two arcs to complete the circle.\n\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    } // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n        this._ += \"A\" + r + \",\" + r + \",0,\" + +(da >= pi) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n      }\n  },\n  rect: function rect(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + +w + \"v\" + +h + \"h\" + -w + \"Z\";\n  },\n  toString: function toString() {\n    return this._;\n  }\n};\nexport default path;","import { select } from 'd3-selection';\n\nexport type TOutputType = 'png' | 'blob';\nexport interface IWatermark {\n  svg: string;\n  width: number;\n  height: number;\n}\n// Method to combine an svg specified by id with the InfoSum watermark and \n// produce a blob or png output that can be used for download\nexport const outputSvg = (\n  svgId: string,\n  width: number,\n  height: number,\n  callback: (outpuData: string | Blob | null) => void,\n  watermark: IWatermark,\n  type: TOutputType = 'blob',\n) => {\n  // Select the first svg element\n  const svg: any = select(`svg#${svgId}`);\n  const serializer = new XMLSerializer();\n  // generate IMG in new tab\n  const svgStr = serializer.serializeToString(svg.node());\n  const svgData = 'data:image/svg+xml;base64,' + window.btoa(unescape(encodeURIComponent(svgStr)));\n  // create canvas in memory(not in DOM)\n  const canvas = document.createElement('canvas');\n  // set canvas size\n  canvas.width = width + 20 + watermark.width;\n  canvas.height = height + 20;\n  // get canvas context for drawing on canvas\n  const context = canvas.getContext('2d');\n  // create images in memory(not DOM)\n  var image = new Image();\n  const watermarkImage = new Image();\n  // when watermark loaded create main image\n  watermarkImage.onload = () => {\n    // later when image loads run this\n    image.onload = () => {\n      // clear canvas\n      context!.clearRect(0, 0, canvas.width, canvas.height);\n      // draw image with SVG data to canvas\n      context!.drawImage(image, 10, 10, width, height);\n      context!.drawImage(watermarkImage, canvas.width - watermark.width - 10, 10, watermark.width, watermark.height);\n      // add a background\n      context!.globalCompositeOperation = 'destination-over'\n      context!.fillStyle = \"#FFF\";\n      context!.fillRect(0, 0, canvas.width, canvas.height);\n      // snapshot canvas as png or blob depending on type\n      if (type === 'blob') {\n        canvas.toBlob(callback);\n      } else if (type === 'png') {\n        const pngData = canvas.toDataURL('image/png');\n        callback(pngData);\n      }\n    };\n    // start loading SVG data into in memory image\n    image.src = svgData;\n  }\n  // start loading watermark SVG data into memory\n  watermarkImage.src = watermark.svg;\n};\n","/* MIT license */\nvar cssKeywords = require('color-name'); // NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\n\nvar reverseKeywords = {};\n\nfor (var key in cssKeywords) {\n  if (cssKeywords.hasOwnProperty(key)) {\n    reverseKeywords[cssKeywords[key]] = key;\n  }\n}\n\nvar convert = module.exports = {\n  rgb: {\n    channels: 3,\n    labels: 'rgb'\n  },\n  hsl: {\n    channels: 3,\n    labels: 'hsl'\n  },\n  hsv: {\n    channels: 3,\n    labels: 'hsv'\n  },\n  hwb: {\n    channels: 3,\n    labels: 'hwb'\n  },\n  cmyk: {\n    channels: 4,\n    labels: 'cmyk'\n  },\n  xyz: {\n    channels: 3,\n    labels: 'xyz'\n  },\n  lab: {\n    channels: 3,\n    labels: 'lab'\n  },\n  lch: {\n    channels: 3,\n    labels: 'lch'\n  },\n  hex: {\n    channels: 1,\n    labels: ['hex']\n  },\n  keyword: {\n    channels: 1,\n    labels: ['keyword']\n  },\n  ansi16: {\n    channels: 1,\n    labels: ['ansi16']\n  },\n  ansi256: {\n    channels: 1,\n    labels: ['ansi256']\n  },\n  hcg: {\n    channels: 3,\n    labels: ['h', 'c', 'g']\n  },\n  apple: {\n    channels: 3,\n    labels: ['r16', 'g16', 'b16']\n  },\n  gray: {\n    channels: 1,\n    labels: ['gray']\n  }\n}; // hide .channels and .labels properties\n\nfor (var model in convert) {\n  if (convert.hasOwnProperty(model)) {\n    if (!('channels' in convert[model])) {\n      throw new Error('missing channels property: ' + model);\n    }\n\n    if (!('labels' in convert[model])) {\n      throw new Error('missing channel labels property: ' + model);\n    }\n\n    if (convert[model].labels.length !== convert[model].channels) {\n      throw new Error('channel and label counts mismatch: ' + model);\n    }\n\n    var channels = convert[model].channels;\n    var labels = convert[model].labels;\n    delete convert[model].channels;\n    delete convert[model].labels;\n    Object.defineProperty(convert[model], 'channels', {\n      value: channels\n    });\n    Object.defineProperty(convert[model], 'labels', {\n      value: labels\n    });\n  }\n}\n\nconvert.rgb.hsl = function (rgb) {\n  var r = rgb[0] / 255;\n  var g = rgb[1] / 255;\n  var b = rgb[2] / 255;\n  var min = Math.min(r, g, b);\n  var max = Math.max(r, g, b);\n  var delta = max - min;\n  var h;\n  var s;\n  var l;\n\n  if (max === min) {\n    h = 0;\n  } else if (r === max) {\n    h = (g - b) / delta;\n  } else if (g === max) {\n    h = 2 + (b - r) / delta;\n  } else if (b === max) {\n    h = 4 + (r - g) / delta;\n  }\n\n  h = Math.min(h * 60, 360);\n\n  if (h < 0) {\n    h += 360;\n  }\n\n  l = (min + max) / 2;\n\n  if (max === min) {\n    s = 0;\n  } else if (l <= 0.5) {\n    s = delta / (max + min);\n  } else {\n    s = delta / (2 - max - min);\n  }\n\n  return [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n  var rdif;\n  var gdif;\n  var bdif;\n  var h;\n  var s;\n  var r = rgb[0] / 255;\n  var g = rgb[1] / 255;\n  var b = rgb[2] / 255;\n  var v = Math.max(r, g, b);\n  var diff = v - Math.min(r, g, b);\n\n  var diffc = function diffc(c) {\n    return (v - c) / 6 / diff + 1 / 2;\n  };\n\n  if (diff === 0) {\n    h = s = 0;\n  } else {\n    s = diff / v;\n    rdif = diffc(r);\n    gdif = diffc(g);\n    bdif = diffc(b);\n\n    if (r === v) {\n      h = bdif - gdif;\n    } else if (g === v) {\n      h = 1 / 3 + rdif - bdif;\n    } else if (b === v) {\n      h = 2 / 3 + gdif - rdif;\n    }\n\n    if (h < 0) {\n      h += 1;\n    } else if (h > 1) {\n      h -= 1;\n    }\n  }\n\n  return [h * 360, s * 100, v * 100];\n};\n\nconvert.rgb.hwb = function (rgb) {\n  var r = rgb[0];\n  var g = rgb[1];\n  var b = rgb[2];\n  var h = convert.rgb.hsl(rgb)[0];\n  var w = 1 / 255 * Math.min(r, Math.min(g, b));\n  b = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n  return [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n  var r = rgb[0] / 255;\n  var g = rgb[1] / 255;\n  var b = rgb[2] / 255;\n  var c;\n  var m;\n  var y;\n  var k;\n  k = Math.min(1 - r, 1 - g, 1 - b);\n  c = (1 - r - k) / (1 - k) || 0;\n  m = (1 - g - k) / (1 - k) || 0;\n  y = (1 - b - k) / (1 - k) || 0;\n  return [c * 100, m * 100, y * 100, k * 100];\n};\n/**\n * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n * */\n\n\nfunction comparativeDistance(x, y) {\n  return Math.pow(x[0] - y[0], 2) + Math.pow(x[1] - y[1], 2) + Math.pow(x[2] - y[2], 2);\n}\n\nconvert.rgb.keyword = function (rgb) {\n  var reversed = reverseKeywords[rgb];\n\n  if (reversed) {\n    return reversed;\n  }\n\n  var currentClosestDistance = Infinity;\n  var currentClosestKeyword;\n\n  for (var keyword in cssKeywords) {\n    if (cssKeywords.hasOwnProperty(keyword)) {\n      var value = cssKeywords[keyword]; // Compute comparative distance\n\n      var distance = comparativeDistance(rgb, value); // Check if its less, if so set as closest\n\n      if (distance < currentClosestDistance) {\n        currentClosestDistance = distance;\n        currentClosestKeyword = keyword;\n      }\n    }\n  }\n\n  return currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n  return cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n  var r = rgb[0] / 255;\n  var g = rgb[1] / 255;\n  var b = rgb[2] / 255; // assume sRGB\n\n  r = r > 0.04045 ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;\n  g = g > 0.04045 ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;\n  b = b > 0.04045 ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;\n  var x = r * 0.4124 + g * 0.3576 + b * 0.1805;\n  var y = r * 0.2126 + g * 0.7152 + b * 0.0722;\n  var z = r * 0.0193 + g * 0.1192 + b * 0.9505;\n  return [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n  var xyz = convert.rgb.xyz(rgb);\n  var x = xyz[0];\n  var y = xyz[1];\n  var z = xyz[2];\n  var l;\n  var a;\n  var b;\n  x /= 95.047;\n  y /= 100;\n  z /= 108.883;\n  x = x > 0.008856 ? Math.pow(x, 1 / 3) : 7.787 * x + 16 / 116;\n  y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\n  z = z > 0.008856 ? Math.pow(z, 1 / 3) : 7.787 * z + 16 / 116;\n  l = 116 * y - 16;\n  a = 500 * (x - y);\n  b = 200 * (y - z);\n  return [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n  var h = hsl[0] / 360;\n  var s = hsl[1] / 100;\n  var l = hsl[2] / 100;\n  var t1;\n  var t2;\n  var t3;\n  var rgb;\n  var val;\n\n  if (s === 0) {\n    val = l * 255;\n    return [val, val, val];\n  }\n\n  if (l < 0.5) {\n    t2 = l * (1 + s);\n  } else {\n    t2 = l + s - l * s;\n  }\n\n  t1 = 2 * l - t2;\n  rgb = [0, 0, 0];\n\n  for (var i = 0; i < 3; i++) {\n    t3 = h + 1 / 3 * -(i - 1);\n\n    if (t3 < 0) {\n      t3++;\n    }\n\n    if (t3 > 1) {\n      t3--;\n    }\n\n    if (6 * t3 < 1) {\n      val = t1 + (t2 - t1) * 6 * t3;\n    } else if (2 * t3 < 1) {\n      val = t2;\n    } else if (3 * t3 < 2) {\n      val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n    } else {\n      val = t1;\n    }\n\n    rgb[i] = val * 255;\n  }\n\n  return rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n  var h = hsl[0];\n  var s = hsl[1] / 100;\n  var l = hsl[2] / 100;\n  var smin = s;\n  var lmin = Math.max(l, 0.01);\n  var sv;\n  var v;\n  l *= 2;\n  s *= l <= 1 ? l : 2 - l;\n  smin *= lmin <= 1 ? lmin : 2 - lmin;\n  v = (l + s) / 2;\n  sv = l === 0 ? 2 * smin / (lmin + smin) : 2 * s / (l + s);\n  return [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n  var h = hsv[0] / 60;\n  var s = hsv[1] / 100;\n  var v = hsv[2] / 100;\n  var hi = Math.floor(h) % 6;\n  var f = h - Math.floor(h);\n  var p = 255 * v * (1 - s);\n  var q = 255 * v * (1 - s * f);\n  var t = 255 * v * (1 - s * (1 - f));\n  v *= 255;\n\n  switch (hi) {\n    case 0:\n      return [v, t, p];\n\n    case 1:\n      return [q, v, p];\n\n    case 2:\n      return [p, v, t];\n\n    case 3:\n      return [p, q, v];\n\n    case 4:\n      return [t, p, v];\n\n    case 5:\n      return [v, p, q];\n  }\n};\n\nconvert.hsv.hsl = function (hsv) {\n  var h = hsv[0];\n  var s = hsv[1] / 100;\n  var v = hsv[2] / 100;\n  var vmin = Math.max(v, 0.01);\n  var lmin;\n  var sl;\n  var l;\n  l = (2 - s) * v;\n  lmin = (2 - s) * vmin;\n  sl = s * vmin;\n  sl /= lmin <= 1 ? lmin : 2 - lmin;\n  sl = sl || 0;\n  l /= 2;\n  return [h, sl * 100, l * 100];\n}; // http://dev.w3.org/csswg/css-color/#hwb-to-rgb\n\n\nconvert.hwb.rgb = function (hwb) {\n  var h = hwb[0] / 360;\n  var wh = hwb[1] / 100;\n  var bl = hwb[2] / 100;\n  var ratio = wh + bl;\n  var i;\n  var v;\n  var f;\n  var n; // wh + bl cant be > 1\n\n  if (ratio > 1) {\n    wh /= ratio;\n    bl /= ratio;\n  }\n\n  i = Math.floor(6 * h);\n  v = 1 - bl;\n  f = 6 * h - i;\n\n  if ((i & 0x01) !== 0) {\n    f = 1 - f;\n  }\n\n  n = wh + f * (v - wh); // linear interpolation\n\n  var r;\n  var g;\n  var b;\n\n  switch (i) {\n    default:\n    case 6:\n    case 0:\n      r = v;\n      g = n;\n      b = wh;\n      break;\n\n    case 1:\n      r = n;\n      g = v;\n      b = wh;\n      break;\n\n    case 2:\n      r = wh;\n      g = v;\n      b = n;\n      break;\n\n    case 3:\n      r = wh;\n      g = n;\n      b = v;\n      break;\n\n    case 4:\n      r = n;\n      g = wh;\n      b = v;\n      break;\n\n    case 5:\n      r = v;\n      g = wh;\n      b = n;\n      break;\n  }\n\n  return [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n  var c = cmyk[0] / 100;\n  var m = cmyk[1] / 100;\n  var y = cmyk[2] / 100;\n  var k = cmyk[3] / 100;\n  var r;\n  var g;\n  var b;\n  r = 1 - Math.min(1, c * (1 - k) + k);\n  g = 1 - Math.min(1, m * (1 - k) + k);\n  b = 1 - Math.min(1, y * (1 - k) + k);\n  return [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n  var x = xyz[0] / 100;\n  var y = xyz[1] / 100;\n  var z = xyz[2] / 100;\n  var r;\n  var g;\n  var b;\n  r = x * 3.2406 + y * -1.5372 + z * -0.4986;\n  g = x * -0.9689 + y * 1.8758 + z * 0.0415;\n  b = x * 0.0557 + y * -0.2040 + z * 1.0570; // assume sRGB\n\n  r = r > 0.0031308 ? 1.055 * Math.pow(r, 1.0 / 2.4) - 0.055 : r * 12.92;\n  g = g > 0.0031308 ? 1.055 * Math.pow(g, 1.0 / 2.4) - 0.055 : g * 12.92;\n  b = b > 0.0031308 ? 1.055 * Math.pow(b, 1.0 / 2.4) - 0.055 : b * 12.92;\n  r = Math.min(Math.max(0, r), 1);\n  g = Math.min(Math.max(0, g), 1);\n  b = Math.min(Math.max(0, b), 1);\n  return [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n  var x = xyz[0];\n  var y = xyz[1];\n  var z = xyz[2];\n  var l;\n  var a;\n  var b;\n  x /= 95.047;\n  y /= 100;\n  z /= 108.883;\n  x = x > 0.008856 ? Math.pow(x, 1 / 3) : 7.787 * x + 16 / 116;\n  y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\n  z = z > 0.008856 ? Math.pow(z, 1 / 3) : 7.787 * z + 16 / 116;\n  l = 116 * y - 16;\n  a = 500 * (x - y);\n  b = 200 * (y - z);\n  return [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n  var l = lab[0];\n  var a = lab[1];\n  var b = lab[2];\n  var x;\n  var y;\n  var z;\n  y = (l + 16) / 116;\n  x = a / 500 + y;\n  z = y - b / 200;\n  var y2 = Math.pow(y, 3);\n  var x2 = Math.pow(x, 3);\n  var z2 = Math.pow(z, 3);\n  y = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n  x = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n  z = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n  x *= 95.047;\n  y *= 100;\n  z *= 108.883;\n  return [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n  var l = lab[0];\n  var a = lab[1];\n  var b = lab[2];\n  var hr;\n  var h;\n  var c;\n  hr = Math.atan2(b, a);\n  h = hr * 360 / 2 / Math.PI;\n\n  if (h < 0) {\n    h += 360;\n  }\n\n  c = Math.sqrt(a * a + b * b);\n  return [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n  var l = lch[0];\n  var c = lch[1];\n  var h = lch[2];\n  var a;\n  var b;\n  var hr;\n  hr = h / 360 * 2 * Math.PI;\n  a = c * Math.cos(hr);\n  b = c * Math.sin(hr);\n  return [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args) {\n  var r = args[0];\n  var g = args[1];\n  var b = args[2];\n  var value = 1 in arguments ? arguments[1] : convert.rgb.hsv(args)[2]; // hsv -> ansi16 optimization\n\n  value = Math.round(value / 50);\n\n  if (value === 0) {\n    return 30;\n  }\n\n  var ansi = 30 + (Math.round(b / 255) << 2 | Math.round(g / 255) << 1 | Math.round(r / 255));\n\n  if (value === 2) {\n    ansi += 60;\n  }\n\n  return ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n  // optimization here; we already know the value and don't need to get\n  // it converted for us.\n  return convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n  var r = args[0];\n  var g = args[1];\n  var b = args[2]; // we use the extended greyscale palette here, with the exception of\n  // black and white. normal palette only has 4 greyscale shades.\n\n  if (r === g && g === b) {\n    if (r < 8) {\n      return 16;\n    }\n\n    if (r > 248) {\n      return 231;\n    }\n\n    return Math.round((r - 8) / 247 * 24) + 232;\n  }\n\n  var ansi = 16 + 36 * Math.round(r / 255 * 5) + 6 * Math.round(g / 255 * 5) + Math.round(b / 255 * 5);\n  return ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n  var color = args % 10; // handle greyscale\n\n  if (color === 0 || color === 7) {\n    if (args > 50) {\n      color += 3.5;\n    }\n\n    color = color / 10.5 * 255;\n    return [color, color, color];\n  }\n\n  var mult = (~~(args > 50) + 1) * 0.5;\n  var r = (color & 1) * mult * 255;\n  var g = (color >> 1 & 1) * mult * 255;\n  var b = (color >> 2 & 1) * mult * 255;\n  return [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n  // handle greyscale\n  if (args >= 232) {\n    var c = (args - 232) * 10 + 8;\n    return [c, c, c];\n  }\n\n  args -= 16;\n  var rem;\n  var r = Math.floor(args / 36) / 5 * 255;\n  var g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n  var b = rem % 6 / 5 * 255;\n  return [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n  var integer = ((Math.round(args[0]) & 0xFF) << 16) + ((Math.round(args[1]) & 0xFF) << 8) + (Math.round(args[2]) & 0xFF);\n  var string = integer.toString(16).toUpperCase();\n  return '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n  var match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\n  if (!match) {\n    return [0, 0, 0];\n  }\n\n  var colorString = match[0];\n\n  if (match[0].length === 3) {\n    colorString = colorString.split('').map(function (char) {\n      return char + char;\n    }).join('');\n  }\n\n  var integer = parseInt(colorString, 16);\n  var r = integer >> 16 & 0xFF;\n  var g = integer >> 8 & 0xFF;\n  var b = integer & 0xFF;\n  return [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n  var r = rgb[0] / 255;\n  var g = rgb[1] / 255;\n  var b = rgb[2] / 255;\n  var max = Math.max(Math.max(r, g), b);\n  var min = Math.min(Math.min(r, g), b);\n  var chroma = max - min;\n  var grayscale;\n  var hue;\n\n  if (chroma < 1) {\n    grayscale = min / (1 - chroma);\n  } else {\n    grayscale = 0;\n  }\n\n  if (chroma <= 0) {\n    hue = 0;\n  } else if (max === r) {\n    hue = (g - b) / chroma % 6;\n  } else if (max === g) {\n    hue = 2 + (b - r) / chroma;\n  } else {\n    hue = 4 + (r - g) / chroma + 4;\n  }\n\n  hue /= 6;\n  hue %= 1;\n  return [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n  var s = hsl[1] / 100;\n  var l = hsl[2] / 100;\n  var c = 1;\n  var f = 0;\n\n  if (l < 0.5) {\n    c = 2.0 * s * l;\n  } else {\n    c = 2.0 * s * (1.0 - l);\n  }\n\n  if (c < 1.0) {\n    f = (l - 0.5 * c) / (1.0 - c);\n  }\n\n  return [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n  var s = hsv[1] / 100;\n  var v = hsv[2] / 100;\n  var c = s * v;\n  var f = 0;\n\n  if (c < 1.0) {\n    f = (v - c) / (1 - c);\n  }\n\n  return [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n  var h = hcg[0] / 360;\n  var c = hcg[1] / 100;\n  var g = hcg[2] / 100;\n\n  if (c === 0.0) {\n    return [g * 255, g * 255, g * 255];\n  }\n\n  var pure = [0, 0, 0];\n  var hi = h % 1 * 6;\n  var v = hi % 1;\n  var w = 1 - v;\n  var mg = 0;\n\n  switch (Math.floor(hi)) {\n    case 0:\n      pure[0] = 1;\n      pure[1] = v;\n      pure[2] = 0;\n      break;\n\n    case 1:\n      pure[0] = w;\n      pure[1] = 1;\n      pure[2] = 0;\n      break;\n\n    case 2:\n      pure[0] = 0;\n      pure[1] = 1;\n      pure[2] = v;\n      break;\n\n    case 3:\n      pure[0] = 0;\n      pure[1] = w;\n      pure[2] = 1;\n      break;\n\n    case 4:\n      pure[0] = v;\n      pure[1] = 0;\n      pure[2] = 1;\n      break;\n\n    default:\n      pure[0] = 1;\n      pure[1] = 0;\n      pure[2] = w;\n  }\n\n  mg = (1.0 - c) * g;\n  return [(c * pure[0] + mg) * 255, (c * pure[1] + mg) * 255, (c * pure[2] + mg) * 255];\n};\n\nconvert.hcg.hsv = function (hcg) {\n  var c = hcg[1] / 100;\n  var g = hcg[2] / 100;\n  var v = c + g * (1.0 - c);\n  var f = 0;\n\n  if (v > 0.0) {\n    f = c / v;\n  }\n\n  return [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n  var c = hcg[1] / 100;\n  var g = hcg[2] / 100;\n  var l = g * (1.0 - c) + 0.5 * c;\n  var s = 0;\n\n  if (l > 0.0 && l < 0.5) {\n    s = c / (2 * l);\n  } else if (l >= 0.5 && l < 1.0) {\n    s = c / (2 * (1 - l));\n  }\n\n  return [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n  var c = hcg[1] / 100;\n  var g = hcg[2] / 100;\n  var v = c + g * (1.0 - c);\n  return [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n  var w = hwb[1] / 100;\n  var b = hwb[2] / 100;\n  var v = 1 - b;\n  var c = v - w;\n  var g = 0;\n\n  if (c < 1) {\n    g = (v - c) / (1 - c);\n  }\n\n  return [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n  return [apple[0] / 65535 * 255, apple[1] / 65535 * 255, apple[2] / 65535 * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n  return [rgb[0] / 255 * 65535, rgb[1] / 255 * 65535, rgb[2] / 255 * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n  return [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = convert.gray.hsv = function (args) {\n  return [0, 0, args[0]];\n};\n\nconvert.gray.hwb = function (gray) {\n  return [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n  return [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n  return [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n  var val = Math.round(gray[0] / 100 * 255) & 0xFF;\n  var integer = (val << 16) + (val << 8) + val;\n  var string = integer.toString(16).toUpperCase();\n  return '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n  var val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n  return [val / 255 * 100];\n};","var conversions = require('./conversions');\n/*\n\tthis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\n\nfunction buildGraph() {\n  var graph = {}; // https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\n  var models = Object.keys(conversions);\n\n  for (var len = models.length, i = 0; i < len; i++) {\n    graph[models[i]] = {\n      // http://jsperf.com/1-vs-infinity\n      // micro-opt, but this is simple.\n      distance: -1,\n      parent: null\n    };\n  }\n\n  return graph;\n} // https://en.wikipedia.org/wiki/Breadth-first_search\n\n\nfunction deriveBFS(fromModel) {\n  var graph = buildGraph();\n  var queue = [fromModel]; // unshift -> queue -> pop\n\n  graph[fromModel].distance = 0;\n\n  while (queue.length) {\n    var current = queue.pop();\n    var adjacents = Object.keys(conversions[current]);\n\n    for (var len = adjacents.length, i = 0; i < len; i++) {\n      var adjacent = adjacents[i];\n      var node = graph[adjacent];\n\n      if (node.distance === -1) {\n        node.distance = graph[current].distance + 1;\n        node.parent = current;\n        queue.unshift(adjacent);\n      }\n    }\n  }\n\n  return graph;\n}\n\nfunction link(from, to) {\n  return function (args) {\n    return to(from(args));\n  };\n}\n\nfunction wrapConversion(toModel, graph) {\n  var path = [graph[toModel].parent, toModel];\n  var fn = conversions[graph[toModel].parent][toModel];\n  var cur = graph[toModel].parent;\n\n  while (graph[cur].parent) {\n    path.unshift(graph[cur].parent);\n    fn = link(conversions[graph[cur].parent][cur], fn);\n    cur = graph[cur].parent;\n  }\n\n  fn.conversion = path;\n  return fn;\n}\n\nmodule.exports = function (fromModel) {\n  var graph = deriveBFS(fromModel);\n  var conversion = {};\n  var models = Object.keys(graph);\n\n  for (var len = models.length, i = 0; i < len; i++) {\n    var toModel = models[i];\n    var node = graph[toModel];\n\n    if (node.parent === null) {\n      // no possible conversion, or this node is the source model.\n      continue;\n    }\n\n    conversion[toModel] = wrapConversion(toModel, graph);\n  }\n\n  return conversion;\n};","export default function (x) {\n  return function constant() {\n    return x;\n  };\n}","'use strict';\n\nmodule.exports = {\n  \"aliceblue\": [240, 248, 255],\n  \"antiquewhite\": [250, 235, 215],\n  \"aqua\": [0, 255, 255],\n  \"aquamarine\": [127, 255, 212],\n  \"azure\": [240, 255, 255],\n  \"beige\": [245, 245, 220],\n  \"bisque\": [255, 228, 196],\n  \"black\": [0, 0, 0],\n  \"blanchedalmond\": [255, 235, 205],\n  \"blue\": [0, 0, 255],\n  \"blueviolet\": [138, 43, 226],\n  \"brown\": [165, 42, 42],\n  \"burlywood\": [222, 184, 135],\n  \"cadetblue\": [95, 158, 160],\n  \"chartreuse\": [127, 255, 0],\n  \"chocolate\": [210, 105, 30],\n  \"coral\": [255, 127, 80],\n  \"cornflowerblue\": [100, 149, 237],\n  \"cornsilk\": [255, 248, 220],\n  \"crimson\": [220, 20, 60],\n  \"cyan\": [0, 255, 255],\n  \"darkblue\": [0, 0, 139],\n  \"darkcyan\": [0, 139, 139],\n  \"darkgoldenrod\": [184, 134, 11],\n  \"darkgray\": [169, 169, 169],\n  \"darkgreen\": [0, 100, 0],\n  \"darkgrey\": [169, 169, 169],\n  \"darkkhaki\": [189, 183, 107],\n  \"darkmagenta\": [139, 0, 139],\n  \"darkolivegreen\": [85, 107, 47],\n  \"darkorange\": [255, 140, 0],\n  \"darkorchid\": [153, 50, 204],\n  \"darkred\": [139, 0, 0],\n  \"darksalmon\": [233, 150, 122],\n  \"darkseagreen\": [143, 188, 143],\n  \"darkslateblue\": [72, 61, 139],\n  \"darkslategray\": [47, 79, 79],\n  \"darkslategrey\": [47, 79, 79],\n  \"darkturquoise\": [0, 206, 209],\n  \"darkviolet\": [148, 0, 211],\n  \"deeppink\": [255, 20, 147],\n  \"deepskyblue\": [0, 191, 255],\n  \"dimgray\": [105, 105, 105],\n  \"dimgrey\": [105, 105, 105],\n  \"dodgerblue\": [30, 144, 255],\n  \"firebrick\": [178, 34, 34],\n  \"floralwhite\": [255, 250, 240],\n  \"forestgreen\": [34, 139, 34],\n  \"fuchsia\": [255, 0, 255],\n  \"gainsboro\": [220, 220, 220],\n  \"ghostwhite\": [248, 248, 255],\n  \"gold\": [255, 215, 0],\n  \"goldenrod\": [218, 165, 32],\n  \"gray\": [128, 128, 128],\n  \"green\": [0, 128, 0],\n  \"greenyellow\": [173, 255, 47],\n  \"grey\": [128, 128, 128],\n  \"honeydew\": [240, 255, 240],\n  \"hotpink\": [255, 105, 180],\n  \"indianred\": [205, 92, 92],\n  \"indigo\": [75, 0, 130],\n  \"ivory\": [255, 255, 240],\n  \"khaki\": [240, 230, 140],\n  \"lavender\": [230, 230, 250],\n  \"lavenderblush\": [255, 240, 245],\n  \"lawngreen\": [124, 252, 0],\n  \"lemonchiffon\": [255, 250, 205],\n  \"lightblue\": [173, 216, 230],\n  \"lightcoral\": [240, 128, 128],\n  \"lightcyan\": [224, 255, 255],\n  \"lightgoldenrodyellow\": [250, 250, 210],\n  \"lightgray\": [211, 211, 211],\n  \"lightgreen\": [144, 238, 144],\n  \"lightgrey\": [211, 211, 211],\n  \"lightpink\": [255, 182, 193],\n  \"lightsalmon\": [255, 160, 122],\n  \"lightseagreen\": [32, 178, 170],\n  \"lightskyblue\": [135, 206, 250],\n  \"lightslategray\": [119, 136, 153],\n  \"lightslategrey\": [119, 136, 153],\n  \"lightsteelblue\": [176, 196, 222],\n  \"lightyellow\": [255, 255, 224],\n  \"lime\": [0, 255, 0],\n  \"limegreen\": [50, 205, 50],\n  \"linen\": [250, 240, 230],\n  \"magenta\": [255, 0, 255],\n  \"maroon\": [128, 0, 0],\n  \"mediumaquamarine\": [102, 205, 170],\n  \"mediumblue\": [0, 0, 205],\n  \"mediumorchid\": [186, 85, 211],\n  \"mediumpurple\": [147, 112, 219],\n  \"mediumseagreen\": [60, 179, 113],\n  \"mediumslateblue\": [123, 104, 238],\n  \"mediumspringgreen\": [0, 250, 154],\n  \"mediumturquoise\": [72, 209, 204],\n  \"mediumvioletred\": [199, 21, 133],\n  \"midnightblue\": [25, 25, 112],\n  \"mintcream\": [245, 255, 250],\n  \"mistyrose\": [255, 228, 225],\n  \"moccasin\": [255, 228, 181],\n  \"navajowhite\": [255, 222, 173],\n  \"navy\": [0, 0, 128],\n  \"oldlace\": [253, 245, 230],\n  \"olive\": [128, 128, 0],\n  \"olivedrab\": [107, 142, 35],\n  \"orange\": [255, 165, 0],\n  \"orangered\": [255, 69, 0],\n  \"orchid\": [218, 112, 214],\n  \"palegoldenrod\": [238, 232, 170],\n  \"palegreen\": [152, 251, 152],\n  \"paleturquoise\": [175, 238, 238],\n  \"palevioletred\": [219, 112, 147],\n  \"papayawhip\": [255, 239, 213],\n  \"peachpuff\": [255, 218, 185],\n  \"peru\": [205, 133, 63],\n  \"pink\": [255, 192, 203],\n  \"plum\": [221, 160, 221],\n  \"powderblue\": [176, 224, 230],\n  \"purple\": [128, 0, 128],\n  \"rebeccapurple\": [102, 51, 153],\n  \"red\": [255, 0, 0],\n  \"rosybrown\": [188, 143, 143],\n  \"royalblue\": [65, 105, 225],\n  \"saddlebrown\": [139, 69, 19],\n  \"salmon\": [250, 128, 114],\n  \"sandybrown\": [244, 164, 96],\n  \"seagreen\": [46, 139, 87],\n  \"seashell\": [255, 245, 238],\n  \"sienna\": [160, 82, 45],\n  \"silver\": [192, 192, 192],\n  \"skyblue\": [135, 206, 235],\n  \"slateblue\": [106, 90, 205],\n  \"slategray\": [112, 128, 144],\n  \"slategrey\": [112, 128, 144],\n  \"snow\": [255, 250, 250],\n  \"springgreen\": [0, 255, 127],\n  \"steelblue\": [70, 130, 180],\n  \"tan\": [210, 180, 140],\n  \"teal\": [0, 128, 128],\n  \"thistle\": [216, 191, 216],\n  \"tomato\": [255, 99, 71],\n  \"turquoise\": [64, 224, 208],\n  \"violet\": [238, 130, 238],\n  \"wheat\": [245, 222, 179],\n  \"white\": [255, 255, 255],\n  \"whitesmoke\": [245, 245, 245],\n  \"yellow\": [255, 255, 0],\n  \"yellowgreen\": [154, 205, 50]\n};","import { scaleOrdinal } from 'd3-scale';\nimport React, { FC } from 'react';\n\nimport colorScheme from './colors';\nimport { IBarChartDataSet } from './Histogram';\n\ninterface IProps {\n  className?: string;\n  theme?: string[];\n  data: {\n    bins: string[],\n    counts: IBarChartDataSet[];\n  };\n  onSelect: (label: string) => void;\n  visible: { [key: string]: boolean };\n}\n\nconst legendIconStyle = {\n  cursor: 'pointer',\n  display: 'inline-block',\n  height: '1rem',\n  margin: '0.25rem 0.5rem',\n  width: '1rem',\n};\n\nconst listStyle = {\n  listStyle: 'none',\n  padding: 0,\n  margin: 0,\n};\n\nconst liStyle = {\n  display: 'flex',\n  alignItems: 'center',\n}\n\nconst Legend: FC<IProps> = ({\n  className,\n  theme = colorScheme,\n  data,\n  onSelect,\n  visible,\n}) => {\n  const scheme: any = scaleOrdinal(theme);\n  const labels = data.bins;\n  return (\n    <div className={className}>\n      <ul style={listStyle}>\n        {\n          labels.map((label) => {\n            const active = (visible.hasOwnProperty(label) && visible[label]) || !visible.hasOwnProperty(label);\n            return (\n              <li key={label}\n                style={liStyle}>\n                <div style={{\n                  ...legendIconStyle,\n                  backgroundColor: active ? scheme(label) : '#FFF',\n                  border: '2px solid ' + scheme(label),\n                }}\n                  onClick={() => onSelect(label)}>\n                </div>\n                <div>\n                  {label}\n                </div>\n              </li>\n            );\n          })\n        }\n      </ul>\n    </div>\n  );\n};\n\nexport default Legend;\n","/* MIT license */\nvar colorNames = require('color-name');\n\nvar swizzle = require('simple-swizzle');\n\nvar reverseNames = {}; // create a list of reverse color names\n\nfor (var name in colorNames) {\n  if (colorNames.hasOwnProperty(name)) {\n    reverseNames[colorNames[name]] = name;\n  }\n}\n\nvar cs = module.exports = {\n  to: {},\n  get: {}\n};\n\ncs.get = function (string) {\n  var prefix = string.substring(0, 3).toLowerCase();\n  var val;\n  var model;\n\n  switch (prefix) {\n    case 'hsl':\n      val = cs.get.hsl(string);\n      model = 'hsl';\n      break;\n\n    case 'hwb':\n      val = cs.get.hwb(string);\n      model = 'hwb';\n      break;\n\n    default:\n      val = cs.get.rgb(string);\n      model = 'rgb';\n      break;\n  }\n\n  if (!val) {\n    return null;\n  }\n\n  return {\n    model: model,\n    value: val\n  };\n};\n\ncs.get.rgb = function (string) {\n  if (!string) {\n    return null;\n  }\n\n  var abbr = /^#([a-f0-9]{3,4})$/i;\n  var hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n  var rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n  var per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n  var keyword = /(\\D+)/;\n  var rgb = [0, 0, 0, 1];\n  var match;\n  var i;\n  var hexAlpha;\n\n  if (match = string.match(hex)) {\n    hexAlpha = match[2];\n    match = match[1];\n\n    for (i = 0; i < 3; i++) {\n      // https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n      var i2 = i * 2;\n      rgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n    }\n\n    if (hexAlpha) {\n      rgb[3] = Math.round(parseInt(hexAlpha, 16) / 255 * 100) / 100;\n    }\n  } else if (match = string.match(abbr)) {\n    match = match[1];\n    hexAlpha = match[3];\n\n    for (i = 0; i < 3; i++) {\n      rgb[i] = parseInt(match[i] + match[i], 16);\n    }\n\n    if (hexAlpha) {\n      rgb[3] = Math.round(parseInt(hexAlpha + hexAlpha, 16) / 255 * 100) / 100;\n    }\n  } else if (match = string.match(rgba)) {\n    for (i = 0; i < 3; i++) {\n      rgb[i] = parseInt(match[i + 1], 0);\n    }\n\n    if (match[4]) {\n      rgb[3] = parseFloat(match[4]);\n    }\n  } else if (match = string.match(per)) {\n    for (i = 0; i < 3; i++) {\n      rgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n    }\n\n    if (match[4]) {\n      rgb[3] = parseFloat(match[4]);\n    }\n  } else if (match = string.match(keyword)) {\n    if (match[1] === 'transparent') {\n      return [0, 0, 0, 0];\n    }\n\n    rgb = colorNames[match[1]];\n\n    if (!rgb) {\n      return null;\n    }\n\n    rgb[3] = 1;\n    return rgb;\n  } else {\n    return null;\n  }\n\n  for (i = 0; i < 3; i++) {\n    rgb[i] = clamp(rgb[i], 0, 255);\n  }\n\n  rgb[3] = clamp(rgb[3], 0, 1);\n  return rgb;\n};\n\ncs.get.hsl = function (string) {\n  if (!string) {\n    return null;\n  }\n\n  var hsl = /^hsla?\\(\\s*([+-]?(?:\\d*\\.)?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n  var match = string.match(hsl);\n\n  if (match) {\n    var alpha = parseFloat(match[4]);\n    var h = (parseFloat(match[1]) + 360) % 360;\n    var s = clamp(parseFloat(match[2]), 0, 100);\n    var l = clamp(parseFloat(match[3]), 0, 100);\n    var a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n    return [h, s, l, a];\n  }\n\n  return null;\n};\n\ncs.get.hwb = function (string) {\n  if (!string) {\n    return null;\n  }\n\n  var hwb = /^hwb\\(\\s*([+-]?\\d*[\\.]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n  var match = string.match(hwb);\n\n  if (match) {\n    var alpha = parseFloat(match[4]);\n    var h = (parseFloat(match[1]) % 360 + 360) % 360;\n    var w = clamp(parseFloat(match[2]), 0, 100);\n    var b = clamp(parseFloat(match[3]), 0, 100);\n    var a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n    return [h, w, b, a];\n  }\n\n  return null;\n};\n\ncs.to.hex = function () {\n  var rgba = swizzle(arguments);\n  return '#' + hexDouble(rgba[0]) + hexDouble(rgba[1]) + hexDouble(rgba[2]) + (rgba[3] < 1 ? hexDouble(Math.round(rgba[3] * 255)) : '');\n};\n\ncs.to.rgb = function () {\n  var rgba = swizzle(arguments);\n  return rgba.length < 4 || rgba[3] === 1 ? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')' : 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n  var rgba = swizzle(arguments);\n  var r = Math.round(rgba[0] / 255 * 100);\n  var g = Math.round(rgba[1] / 255 * 100);\n  var b = Math.round(rgba[2] / 255 * 100);\n  return rgba.length < 4 || rgba[3] === 1 ? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)' : 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n  var hsla = swizzle(arguments);\n  return hsla.length < 4 || hsla[3] === 1 ? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)' : 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n}; // hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\n\n\ncs.to.hwb = function () {\n  var hwba = swizzle(arguments);\n  var a = '';\n\n  if (hwba.length >= 4 && hwba[3] !== 1) {\n    a = ', ' + hwba[3];\n  }\n\n  return 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n  return reverseNames[rgb.slice(0, 3)];\n}; // helpers\n\n\nfunction clamp(num, min, max) {\n  return Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n  var str = num.toString(16).toUpperCase();\n  return str.length < 2 ? '0' + str : str;\n}","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate) {\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  }\n\n  ;\n\n  var debounced = function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function () {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  debounced.flush = function () {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n}\n\n; // Adds compatibility for ES modules\n\ndebounce.debounce = debounce;\nmodule.exports = debounce;","import Color from 'color';\n\nexport default (colors) => {\n  return colors.filter((value) => {\n    try {\n      const c = Color(value);\n      const hsl = c.hsl().array();\n      if (hsl.length > 3) {\n        // remove alpha colours\n        return false;\n      }\n      const luminosity = c.luminosity();\n      return ((luminosity < 0.8 && luminosity > 0.1) && (hsl[2] < 200 && hsl[2] > 20)) // not too light\n        ; // not too dark\n    } catch (e) {\n      return false;\n    }\n  })\n    .filter((v, index, self) => self.indexOf(v) === index)\n    .sort(() => Math.random() - 0.5);\n};\n"],"sourceRoot":""}