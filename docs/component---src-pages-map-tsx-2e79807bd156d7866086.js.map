{"version":3,"sources":["webpack:///../node_modules/d3-collection/src/map.js","webpack:///../node_modules/d3-collection/src/set.js","webpack:///../node_modules/d3-request/src/request.js","webpack:///../node_modules/d3-request/src/type.js","webpack:///../node_modules/d3-request/src/json.js","webpack:///../node_modules/d3-request/src/html.js","webpack:///../node_modules/d3-dsv/src/dsv.js","webpack:///../node_modules/d3-request/src/text.js","webpack:///../node_modules/d3-request/src/xml.js","webpack:///../node_modules/d3-dsv/src/csv.js","webpack:///../node_modules/d3-dsv/src/tsv.js","webpack:///../node_modules/d3-request/src/dsv.js","webpack:///../node_modules/d3-request/src/csv.js","webpack:///../node_modules/d3-request/src/tsv.js","webpack:///../node_modules/d3-geo/src/math.js","webpack:///../node_modules/d3-geo/src/compose.js","webpack:///../node_modules/d3-geo/src/rotation.js","webpack:///../node_modules/d3-geo/src/noop.js","webpack:///../node_modules/d3-geo/src/clip/buffer.js","webpack:///../node_modules/d3-geo/src/pointEqual.js","webpack:///../node_modules/d3-geo/src/clip/rejoin.js","webpack:///../node_modules/d3-geo/src/adder.js","webpack:///../node_modules/d3-geo/src/cartesian.js","webpack:///../node_modules/d3-geo/src/polygonContains.js","webpack:///../node_modules/d3-geo/node_modules/d3-array/src/ascending.js","webpack:///../node_modules/d3-geo/node_modules/d3-array/src/bisect.js","webpack:///../node_modules/d3-geo/node_modules/d3-array/src/bisector.js","webpack:///../node_modules/d3-geo/node_modules/d3-array/src/cross.js","webpack:///../node_modules/d3-geo/node_modules/d3-array/src/array.js","webpack:///../node_modules/d3-geo/node_modules/d3-array/src/ticks.js","webpack:///../node_modules/d3-geo/node_modules/d3-array/src/threshold/sturges.js","webpack:///../node_modules/d3-geo/node_modules/d3-array/src/merge.js","webpack:///../node_modules/d3-geo/node_modules/d3-array/src/zip.js","webpack:///../node_modules/d3-geo/src/clip/index.js","webpack:///../node_modules/d3-geo/src/clip/antimeridian.js","webpack:///../node_modules/d3-geo/src/circle.js","webpack:///../node_modules/d3-geo/src/clip/circle.js","webpack:///../node_modules/d3-geo/src/clip/rectangle.js","webpack:///../node_modules/d3-geo/src/clip/line.js","webpack:///../node_modules/d3-geo/src/identity.js","webpack:///../node_modules/d3-geo/src/transform.js","webpack:///../node_modules/d3-geo/src/stream.js","webpack:///../node_modules/d3-geo/src/path/bounds.js","webpack:///../node_modules/d3-geo/src/projection/fit.js","webpack:///../node_modules/d3-geo/src/projection/resample.js","webpack:///../node_modules/d3-geo/src/projection/index.js","webpack:///../node_modules/d3-geo/src/projection/mercator.js","webpack:///../node_modules/d3-geo/src/path/area.js","webpack:///../node_modules/d3-geo/src/path/centroid.js","webpack:///../node_modules/d3-geo/src/path/context.js","webpack:///../node_modules/d3-geo/src/path/measure.js","webpack:///../node_modules/d3-geo/src/path/string.js","webpack:///../node_modules/d3-geo/src/path/index.js","webpack:///../src/legacy/MapD3.ts","webpack:///../src/legacy/Map.tsx","webpack:///./src/pages/map.tsx","webpack:///./src/data.ts"],"names":["map","object","f","each","value","key","set","Array","isArray","o","i","n","length","prototype","constructor","has","this","get","remove","property","clear","keys","push","slice","values","entries","size","empty","Set","proto","add","request","_mimeType","_response","_responseType","event","headers","xhr","XMLHttpRequest","_user","_password","_timeout","respond","result","status","type","responseType","response","responseText","hasResponse","call","e","XDomainRequest","test","url","onload","onerror","ontimeout","onreadystatechange","readyState","onprogress","header","name","toLowerCase","arguments","mimeType","timeout","user","password","data","callback","send","post","method","open","setRequestHeader","overrideMimeType","error","fixCallback","on","abort","apply","Error","r","defaultMimeType","document","createRange","createContextualFragment","JSON","parse","EOL","xml","responseXML","EOF","objectConverter","columns","Function","stringify","join","reFormat","RegExp","delimiter","DELIMITER","charCodeAt","parseRows","text","t","rows","N","I","eof","eol","token","c","j","replace","row","formatRow","formatValue","convert","customConverter","format","columnSet","Object","create","forEach","column","inferColumns","concat","formatRows","csv","dsv","csvParse","tsv","tsvParse","_","responseOf","epsilon","pi","Math","PI","halfPi","quarterPi","tau","degrees","radians","abs","atan","atan2","cos","exp","ceil","log","floor","sin","pow","sign","x","sqrt","tan","asin","compose","y","a","b","invert","rotationIdentity","lambda","phi","round","rotateRadians","deltaLambda","deltaPhi","deltaGamma","rotationLambda","rotationPhiGamma","forwardRotationLambda","rotation","cosDeltaPhi","sinDeltaPhi","cosDeltaGamma","sinDeltaGamma","cosPhi","z","k","noop","line","lines","point","m","lineStart","lineEnd","rejoin","pop","shift","Intersection","points","other","entry","v","p","subject","clip","segments","segment","p0","p1","pointEqual","stream","sort","compareIntersection","startInside","start","current","isSubject","interpolate","array","Adder","reset","s","_add","temp","valueOf","adder","bv","av","cartesian","spherical","cartesianDot","cartesianCross","cartesianAddInPlace","cartesianScale","vector","cartesianNormalizeInPlace","d","l","longitude","NaN","ascending","compare","merged","arrays","sink","polygon","ring","clipLine","ringBuffer","ringSink","polygonStarted","polygonStart","pointRing","ringStart","ringEnd","polygonEnd","merge","sinPhi","normal","angle","winding","point0","lambda0","phi0","sinPhi0","cosPhi0","lambda1","sinPhi1","cosPhi1","point1","phi1","delta","absDelta","antimeridian","arc","intersection","phiArc","polygonContains","sphere","pointVisible","pointLine","clean","ringSegments","filter","validSegment","_clean","sign0","sign1","sinLambda0Lambda1","clipAntimeridianIntersect","from","to","direction","circleStream","radius","t0","t1","cosRadius","sinRadius","step","circleRadius","acos","cr","smallRadius","notHemisphere","visible","intersect","two","n1","n2","n2n2","n1n2","determinant","c1","c2","n1xn2","A","u","w","uu","t2","q","polar","q1","code","c0","v0","v00","point2","clipRectangle","x0","y0","x1","y1","a1","corner","comparePoint","ca","cb","x__","y__","v__","x_","y_","v_","first","activeStream","bufferStream","clipStream","linePoint","a0","b0","b1","polygonInside","cleanInside","max","min","ax","ay","dx","dy","transformer","methods","TransformStream","streamGeometry","geometry","streamGeometryType","hasOwnProperty","streamObjectType","Feature","FeatureCollection","features","Sphere","Point","coordinates","MultiPoint","LineString","streamLine","MultiLineString","Polygon","streamPolygon","MultiPolygon","GeometryCollection","geometries","closed","coordinate","Infinity","bounds","fit","projection","fitBounds","clipExtent","scale","translate","fitExtent","extent","h","cosMinDistance","delta2","project","resampleLineTo","depth","d2","phi2","lambda2","x2","y2","dx2","dy2","dz","lambda00","x00","y00","a00","b00","c00","resampleStream","ringPoint","resampleNone","transformRadians","scaleTranslate","sx","sy","transform","scaleTranslateRotate","alpha","cosAlpha","sinAlpha","ai","bi","ci","fi","projectAt","rotate","projectResample","projectTransform","projectRotateTransform","cache","cacheStream","theta","preclip","postclip","recenter","center","resample","transformRotate","undefined","clipAngle","reflectX","reflectY","precision","fitSize","fitWidth","width","fitHeight","height","projectionMutator","mercatorRaw","reclip","forward","mercatorProjection","areaSum","areaRingSum","areaStream","areaRingStart","areaRingEnd","area","areaPointFirst","areaPoint","X0","Y0","Z0","X1","Y1","Z1","X2","Y2","Z2","centroidStream","centroidPoint","centroidLineStart","centroidLineEnd","centroidRingStart","centroidRingEnd","centroid","centroidPointFirstLine","centroidPointLine","centroidPointFirstRing","centroidPointRing","PathContext","context","_context","_radius","pointRadius","_line","_point","closePath","moveTo","lineTo","lengthRing","lengthSum","lengthStream","lengthPointFirst","lengthPoint","PathString","_string","_circle","mapD3","svg","container","props","className","geojson","el","newProps","mergeProps","_makeSvg","append","attr","update","selectAll","childNodes","getElementsByTagName","removeChild","select","updateChart","geoMercator","Number","geoGenerator","projectionStream","contextStream","path","measure","geoPath","enter","destroy","Map","ref","chart","state","parentWidth","handleResize","getDOMNode","offsetWidth","setState","getChartState","componentDidMount","window","addEventListener","componentDidUpdate","rest","children","componentWillUnmount","removeEventListener","node","ReactDOM","findDOMNode","Text","render","Component","MapExample","useState","loading","setLoading","setGeoJson","useEffect","json","collection","title","description","grid","style","lineStyle","ticks","smallData","bins","counts","label","smallDataContinuous","analyticsAxis","numberFormat","labelOrientation","ELabelOrientation","HORIZONTAL","data2","borderColors","theme","filterRange"],"mappings":"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","file":"component---src-pages-map-tsx-2e79807bd156d7866086.js","sourcesContent":["export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function has(key) {\n    return prefix + key in this;\n  },\n  get: function get(key) {\n    return this[prefix + key];\n  },\n  set: function set(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function remove(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function clear() {\n    for (var property in this) {\n      if (property[0] === prefix) delete this[property];\n    }\n  },\n  keys: function keys() {\n    var keys = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) keys.push(property.slice(1));\n    }\n\n    return keys;\n  },\n  values: function values() {\n    var values = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) values.push(this[property]);\n    }\n\n    return values;\n  },\n  entries: function entries() {\n    var entries = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) entries.push({\n        key: property.slice(1),\n        value: this[property]\n      });\n    }\n\n    return entries;\n  },\n  size: function size() {\n    var size = 0;\n\n    for (var property in this) {\n      if (property[0] === prefix) ++size;\n    }\n\n    return size;\n  },\n  empty: function empty() {\n    for (var property in this) {\n      if (property[0] === prefix) return false;\n    }\n\n    return true;\n  },\n  each: function each(f) {\n    for (var property in this) {\n      if (property[0] === prefix) f(this[property], property.slice(1), this);\n    }\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map(); // Copy constructor.\n\n  if (object instanceof Map) object.each(function (value, key) {\n    map.set(key, value);\n  }); // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n      if (f == null) while (++i < n) {\n        map.set(i, object[i]);\n      } else while (++i < n) {\n        map.set(f(o = object[i], i, object), o);\n      }\n    } // Convert object to map.\n    else if (object) for (var key in object) {\n        map.set(key, object[key]);\n      }\n  return map;\n}\n\nexport default map;","import { default as map, prefix } from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function add(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set(); // Copy constructor.\n\n  if (object instanceof Set) object.each(function (value) {\n    set.add(value);\n  }); // Otherwise, assume its an array.\n  else if (object) {\n      var i = -1,\n          n = object.length;\n      if (f == null) while (++i < n) {\n        set.add(object[i]);\n      } else while (++i < n) {\n        set.add(f(object[i], i, object));\n      }\n    }\n  return set;\n}\n\nexport default set;","import { map } from \"d3-collection\";\nimport { dispatch } from \"d3-dispatch\";\nexport default function (url, callback) {\n  var request,\n      event = dispatch(\"beforesend\", \"progress\", \"load\", \"error\"),\n      _mimeType,\n      headers = map(),\n      xhr = new XMLHttpRequest(),\n      _user = null,\n      _password = null,\n      _response,\n      _responseType,\n      _timeout = 0; // If IE does not support CORS, use XDomainRequest.\n\n\n  if (typeof XDomainRequest !== \"undefined\" && !(\"withCredentials\" in xhr) && /^(http(s)?:)?\\/\\//.test(url)) xhr = new XDomainRequest();\n  \"onload\" in xhr ? xhr.onload = xhr.onerror = xhr.ontimeout = respond : xhr.onreadystatechange = function (o) {\n    xhr.readyState > 3 && respond(o);\n  };\n\n  function respond(o) {\n    var status = xhr.status,\n        result;\n\n    if (!status && hasResponse(xhr) || status >= 200 && status < 300 || status === 304) {\n      if (_response) {\n        try {\n          result = _response.call(request, xhr);\n        } catch (e) {\n          event.call(\"error\", request, e);\n          return;\n        }\n      } else {\n        result = xhr;\n      }\n\n      event.call(\"load\", request, result);\n    } else {\n      event.call(\"error\", request, o);\n    }\n  }\n\n  xhr.onprogress = function (e) {\n    event.call(\"progress\", request, e);\n  };\n\n  request = {\n    header: function header(name, value) {\n      name = (name + \"\").toLowerCase();\n      if (arguments.length < 2) return headers.get(name);\n      if (value == null) headers.remove(name);else headers.set(name, value + \"\");\n      return request;\n    },\n    // If mimeType is non-null and no Accept header is set, a default is used.\n    mimeType: function mimeType(value) {\n      if (!arguments.length) return _mimeType;\n      _mimeType = value == null ? null : value + \"\";\n      return request;\n    },\n    // Specifies what type the response value should take;\n    // for instance, arraybuffer, blob, document, or text.\n    responseType: function responseType(value) {\n      if (!arguments.length) return _responseType;\n      _responseType = value;\n      return request;\n    },\n    timeout: function timeout(value) {\n      if (!arguments.length) return _timeout;\n      _timeout = +value;\n      return request;\n    },\n    user: function user(value) {\n      return arguments.length < 1 ? _user : (_user = value == null ? null : value + \"\", request);\n    },\n    password: function password(value) {\n      return arguments.length < 1 ? _password : (_password = value == null ? null : value + \"\", request);\n    },\n    // Specify how to convert the response content to a specific type;\n    // changes the callback value on \"load\" events.\n    response: function response(value) {\n      _response = value;\n      return request;\n    },\n    // Alias for send(\"GET\", ).\n    get: function get(data, callback) {\n      return request.send(\"GET\", data, callback);\n    },\n    // Alias for send(\"POST\", ).\n    post: function post(data, callback) {\n      return request.send(\"POST\", data, callback);\n    },\n    // If callback is non-null, it will be used for error and load events.\n    send: function send(method, data, callback) {\n      xhr.open(method, url, true, _user, _password);\n      if (_mimeType != null && !headers.has(\"accept\")) headers.set(\"accept\", _mimeType + \",*/*\");\n      if (xhr.setRequestHeader) headers.each(function (value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n      if (_mimeType != null && xhr.overrideMimeType) xhr.overrideMimeType(_mimeType);\n      if (_responseType != null) xhr.responseType = _responseType;\n      if (_timeout > 0) xhr.timeout = _timeout;\n      if (callback == null && typeof data === \"function\") callback = data, data = null;\n      if (callback != null && callback.length === 1) callback = fixCallback(callback);\n      if (callback != null) request.on(\"error\", callback).on(\"load\", function (xhr) {\n        callback(null, xhr);\n      });\n      event.call(\"beforesend\", request, xhr);\n      xhr.send(data == null ? null : data);\n      return request;\n    },\n    abort: function abort() {\n      xhr.abort();\n      return request;\n    },\n    on: function on() {\n      var value = event.on.apply(event, arguments);\n      return value === event ? request : value;\n    }\n  };\n\n  if (callback != null) {\n    if (typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    return request.get(callback);\n  }\n\n  return request;\n}\n\nfunction fixCallback(callback) {\n  return function (error, xhr) {\n    callback(error == null ? xhr : null);\n  };\n}\n\nfunction hasResponse(xhr) {\n  var type = xhr.responseType;\n  return type && type !== \"text\" ? xhr.response // null on error\n  : xhr.responseText; // \"\" on error\n}","import request from \"./request\";\nexport default function (defaultMimeType, response) {\n  return function (url, callback) {\n    var r = request(url).mimeType(defaultMimeType).response(response);\n\n    if (callback != null) {\n      if (typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n      return r.get(callback);\n    }\n\n    return r;\n  };\n}","import type from \"./type\";\nexport default type(\"application/json\", function (xhr) {\n  return JSON.parse(xhr.responseText);\n});","import type from \"./type\";\nexport default type(\"text/html\", function (xhr) {\n  return document.createRange().createContextualFragment(xhr.responseText);\n});","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function (name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"]\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function (row, i) {\n    return f(object(row), i, columns);\n  };\n} // Compute unique columns in order of discovery.\n\n\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n  rows.forEach(function (row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n  return columns;\n}\n\nexport default function (delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert,\n        columns,\n        rows = parseRows(text, function (row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [],\n        // output rows\n    N = text.length,\n        I = 0,\n        // current character index\n    n = 0,\n        // current line number\n    t,\n        // current token\n    eof = N <= 0,\n        // current token followed by EOF?\n    eol = false; // current token followed by EOL?\n    // Strip the trailing newline.\n\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL; // Unescape quotes.\n\n      var i,\n          j = I,\n          c;\n\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE) {\n          ;\n        }\n\n        if ((i = I) >= N) eof = true;else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;else if (c === RETURN) {\n          eol = true;\n          if (text.charCodeAt(I) === NEWLINE) ++I;\n        }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      } // Find next delimiter or newline.\n\n\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;else if (c === RETURN) {\n          eol = true;\n          if (text.charCodeAt(I) === NEWLINE) ++I;\n        } else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      } // Return last token before EOF.\n\n\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n\n      while (t !== EOL && t !== EOF) {\n        row.push(t), t = token();\n      }\n\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(rows.map(function (row) {\n      return columns.map(function (column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    })).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return text == null ? \"\" : reFormat.test(text += \"\") ? \"\\\"\" + text.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\" : text;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatRows: formatRows\n  };\n}","import type from \"./type\";\nexport default type(\"text/plain\", function (xhr) {\n  return xhr.responseText;\n});","import type from \"./type\";\nexport default type(\"application/xml\", function (xhr) {\n  var xml = xhr.responseXML;\n  if (!xml) throw new Error(\"parse error\");\n  return xml;\n});","import dsv from \"./dsv\";\nvar csv = dsv(\",\");\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatRows = csv.formatRows;","import dsv from \"./dsv\";\nvar tsv = dsv(\"\\t\");\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatRows = tsv.formatRows;","import request from \"./request\";\nexport default function (defaultMimeType, parse) {\n  return function (url, row, callback) {\n    if (arguments.length < 3) callback = row, row = null;\n    var r = request(url).mimeType(defaultMimeType);\n\n    r.row = function (_) {\n      return arguments.length ? r.response(responseOf(parse, row = _)) : row;\n    };\n\n    r.row(row);\n    return callback ? r.get(callback) : r;\n  };\n}\n\nfunction responseOf(parse, row) {\n  return function (request) {\n    return parse(request.responseText, row);\n  };\n}","import { csvParse } from \"d3-dsv\";\nimport dsv from \"./dsv\";\nexport default dsv(\"text/csv\", csvParse);","import { tsvParse } from \"d3-dsv\";\nimport dsv from \"./dsv\";\nexport default dsv(\"text/tab-separated-values\", tsvParse);","export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function (x) {\n  return x > 0 ? 1 : x < 0 ? -1 : 0;\n};\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}","export default function (a, b) {\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function (x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n  return compose;\n}","import compose from \"./compose.js\";\nimport { abs, asin, atan2, cos, degrees, pi, radians, sin, tau } from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  return [abs(lambda) > pi ? lambda + Math.round(-lambda / tau) * tau : lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma)) : rotationLambda(deltaLambda) : deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma) : rotationIdentity;\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function (lambda, phi) {\n    return lambda += deltaLambda, [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi), asin(k * cosDeltaGamma + y * sinDeltaGamma)];\n  }\n\n  rotation.invert = function (lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi), asin(k * cosDeltaPhi - x * sinDeltaPhi)];\n  };\n\n  return rotation;\n}\n\nexport default function (rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function (coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}","export default function noop() {}","import noop from \"../noop.js\";\nexport default function () {\n  var lines = [],\n      line;\n  return {\n    point: function point(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function lineStart() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function rejoin() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function result() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}","import { abs, epsilon } from \"./math.js\";\nexport default function (a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}","import pointEqual from \"../pointEqual.js\";\nimport { epsilon } from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n\n  this.e = entry; // is an entry?\n\n  this.v = false; // visited\n\n  this.n = this.p = null; // next & previous\n} // A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\n\n\nexport default function (segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n  segments.forEach(function (segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n,\n        p0 = segment[0],\n        p1 = segment[n],\n        x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n\n        for (i = 0; i < n; ++i) {\n          stream.point((p0 = segment[i])[0], p0[1]);\n        }\n\n        stream.lineEnd();\n        return;\n      } // handle degenerate cases by moving the point\n\n\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n  if (!subject.length) return;\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n\n    while (current.v) {\n      if ((current = current.n) === start) return;\n    }\n\n    points = current.z;\n    stream.lineStart();\n\n    do {\n      current.v = current.o.v = true;\n\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) {\n            stream.point((point = points[i])[0], point[1]);\n          }\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n\n          for (i = points.length - 1; i >= 0; --i) {\n            stream.point((point = points[i])[0], point[1]);\n          }\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n\n        current = current.p;\n      }\n\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n\n  a.n = b = array[0];\n  b.p = a;\n}","// Adds floating point numbers with twice the normal precision.\n// Reference: J. R. Shewchuk, Adaptive Precision Floating-Point Arithmetic and\n// Fast Robust Geometric Predicates, Discrete & Computational Geometry 18(3)\n// 305363 (1997).\n// Code adapted from GeographicLib by Charles F. F. Karney,\n// http://geographiclib.sourceforge.net/\nexport default function () {\n  return new Adder();\n}\n\nfunction Adder() {\n  this.reset();\n}\n\nAdder.prototype = {\n  constructor: Adder,\n  reset: function reset() {\n    this.s = // rounded value\n    this.t = 0; // exact error\n  },\n  add: function add(y) {\n    _add(temp, y, this.t);\n\n    _add(this, temp.s, this.s);\n\n    if (this.s) this.t += temp.t;else this.s = temp.t;\n  },\n  valueOf: function valueOf() {\n    return this.s;\n  }\n};\nvar temp = new Adder();\n\nfunction _add(adder, a, b) {\n  var x = adder.s = a + b,\n      bv = x - a,\n      av = x - bv;\n  adder.t = a - av + (b - bv);\n}","import { asin, atan2, cos, sin, sqrt } from \"./math.js\";\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\nexport function cartesian(spherical) {\n  var lambda = spherical[0],\n      phi = spherical[1],\n      cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n} // TODO return a\n\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n} // TODO return d\n\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}","import adder from \"./adder.js\";\nimport { cartesian, cartesianCross, cartesianNormalizeInPlace } from \"./cartesian.js\";\nimport { abs, asin, atan2, cos, epsilon, halfPi, pi, quarterPi, sign, sin, tau } from \"./math.js\";\nvar sum = adder();\n\nfunction longitude(point) {\n  if (abs(point[0]) <= pi) return point[0];else return sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function (polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n  sum.reset();\n  if (sinPhi === 1) phi = halfPi + epsilon;else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta; // Are the longitudes either side of the points meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  } // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon) ^ winding & 1;\n}","export default function (a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;","import ascending from \"./ascending\";\nexport default function (compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function left(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n      }\n\n      return lo;\n    },\n    right: function right(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;\n      }\n\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function (d, x) {\n    return ascending(f(d), x);\n  };\n}","import { pair } from \"./pairs\";\nexport default function (values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}","var array = Array.prototype;\nexport var slice = array.slice;\nexport var map = array.map;","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\nexport default function (start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n\n    while (++i < n) {\n      ticks[i] = (start + i) * step;\n    }\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n\n    while (++i < n) {\n      ticks[i] = (start - i) / step;\n    }\n  }\n\n  if (reverse) ticks.reverse();\n  return ticks;\n}\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;else if (error >= e5) step1 *= 5;else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}","export default function (values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}","export default function (arrays) {\n  var n = arrays.length,\n      m,\n      i = -1,\n      j = 0,\n      merged,\n      array;\n\n  while (++i < n) {\n    j += arrays[i].length;\n  }\n\n  merged = new Array(j);\n\n  while (--n >= 0) {\n    array = arrays[n];\n    m = array.length;\n\n    while (--m >= 0) {\n      merged[--j] = array[m];\n    }\n  }\n\n  return merged;\n}","import transpose from \"./transpose\";\nexport default function () {\n  return transpose(arguments);\n}","import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport { epsilon, halfPi } from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport { merge } from \"d3-array\";\nexport default function (pointVisible, clipLine, interpolate, start) {\n  return function (sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function polygonStart() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function polygonEnd() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function sphere() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i,\n          n = ringSegments.length,\n          m,\n          segment,\n          point;\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n      if (!n) return; // No intersections.\n\n      if (clean & 1) {\n        segment = ringSegments[0];\n\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n\n          for (i = 0; i < m; ++i) {\n            sink.point((point = segment[i])[0], point[1]);\n          }\n\n          sink.lineEnd();\n        }\n\n        return;\n      } // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n\n\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n} // Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\n\n\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1]) - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}","import clip from \"./index.js\";\nimport { abs, atan, cos, epsilon, halfPi, pi, sin } from \"../math.js\";\nexport default clip(function () {\n  return true;\n}, clipAntimeridianLine, clipAntimeridianInterpolate, [-pi, -halfPi]); // Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\n\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      _clean; // no intersections\n\n\n  return {\n    lineStart: function lineStart() {\n      stream.lineStart();\n      _clean = 1;\n    },\n    point: function point(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n\n      if (abs(delta - pi) < epsilon) {\n        // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        _clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) {\n        // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        _clean = 0;\n      }\n\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function lineEnd() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function clean() {\n      return 2 - _clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1) - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0)) / (cosPhi0 * cosPhi1 * sinLambda0Lambda1)) : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}","import { cartesian, cartesianNormalizeInPlace, spherical } from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport { acos, cos, degrees, epsilon, radians, sin, tau } from \"./math.js\";\nimport { rotateRadians } from \"./rotation.js\"; // Generates a circle centered at [0, 0], with a given radius and precision.\n\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n} // Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\n\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function () {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(6),\n      ring,\n      rotate,\n      stream = {\n    point: point\n  };\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {\n      type: \"Polygon\",\n      coordinates: [ring]\n    };\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function (_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function (_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function (_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}","import { cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical } from \"../cartesian.js\";\nimport { circleStream } from \"../circle.js\";\nimport { abs, cos, epsilon, pi, radians, sqrt } from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\nexport default function (radius) {\n  var cr = cos(radius),\n      delta = 6 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  } // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n\n\n  function clipLine(stream) {\n    var point0, // previous point\n    c0, // code for previous point\n    v0, // visibility of previous point\n    v00, // visibility of first point\n    _clean; // no intersections\n\n\n    return {\n      lineStart: function lineStart() {\n        v00 = v0 = false;\n        _clean = 1;\n      },\n      point: function point(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius ? v ? 0 : code(lambda, phi) : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2)) point1[2] = 1;\n        }\n\n        if (v !== v0) {\n          _clean = 0;\n\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t; // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            _clean = 0;\n\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function lineEnd() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function clean() {\n        return _clean | (v00 && v0) << 1;\n      }\n    };\n  } // Intersects the great circle between a and b with the clip circle.\n\n\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b); // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1  n2).\n\n    var n1 = [1, 0, 0],\n        // normal\n    n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0],\n        // cartesianDot(n1, n2),\n    determinant = n2n2 - n1n2 * n1n2; // Two polar points.\n\n    if (!determinant) return !two && a;\n    var c1 = cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B); // Solve |p(t)|^2 = 1.\n\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n    if (t2 < 0) return;\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n    if (!two) return q; // Two intersection points.\n\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z; // Check that the first point is between a and b.\n\n    if (meridian ? polar ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1) : phi0 <= q[1] && q[1] <= phi1 : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  } // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n\n\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}","import { abs, epsilon } from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport { merge } from \"d3-array\";\nvar clipMax = 1e9,\n    clipMin = -clipMax; // TODO Use d3-polygons polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0,\n        a1 = 0;\n\n    if (from == null || (a = corner(from, direction)) !== (a1 = corner(to, direction)) || comparePoint(from, to) < 0 ^ direction > 0) {\n      do {\n        stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      } while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3 : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1 : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0 : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb : ca === 0 ? b[1] - a[1] : ca === 1 ? a[0] - b[0] : ca === 2 ? a[1] - b[1] : b[0] - a[0];\n  }\n\n  return function (stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__,\n        y__,\n        v__,\n        // first point\n    x_,\n        y_,\n        v_,\n        // previous point\n    first,\n        clean;\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n\n          if (a1 <= y1) {\n            if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding;\n          } else {\n            if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding;\n          }\n        }\n      }\n\n      return winding;\n    } // Buffer geometry within a polygon and then clip it en masse.\n\n\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n\n      if (cleanInside || visible) {\n        stream.polygonStart();\n\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n\n        stream.polygonEnd();\n      }\n\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    } // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n\n\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}","export default function (a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}","export default function (x) {\n  return x;\n}","export default function (methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\nexport function transformer(methods) {\n  return function (stream) {\n    var s = new TransformStream();\n\n    for (var key in methods) {\n      s[key] = methods[key];\n    }\n\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function point(x, y) {\n    this.stream.point(x, y);\n  },\n  sphere: function sphere() {\n    this.stream.sphere();\n  },\n  lineStart: function lineStart() {\n    this.stream.lineStart();\n  },\n  lineEnd: function lineEnd() {\n    this.stream.lineEnd();\n  },\n  polygonStart: function polygonStart() {\n    this.stream.polygonStart();\n  },\n  polygonEnd: function polygonEnd() {\n    this.stream.polygonEnd();\n  }\n};","function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function Feature(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function FeatureCollection(object, stream) {\n    var features = object.features,\n        i = -1,\n        n = features.length;\n\n    while (++i < n) {\n      streamGeometry(features[i].geometry, stream);\n    }\n  }\n};\nvar streamGeometryType = {\n  Sphere: function Sphere(object, stream) {\n    stream.sphere();\n  },\n  Point: function Point(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function MultiPoint(object, stream) {\n    var coordinates = object.coordinates,\n        i = -1,\n        n = coordinates.length;\n\n    while (++i < n) {\n      object = coordinates[i], stream.point(object[0], object[1], object[2]);\n    }\n  },\n  LineString: function LineString(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function MultiLineString(object, stream) {\n    var coordinates = object.coordinates,\n        i = -1,\n        n = coordinates.length;\n\n    while (++i < n) {\n      streamLine(coordinates[i], stream, 0);\n    }\n  },\n  Polygon: function Polygon(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function MultiPolygon(object, stream) {\n    var coordinates = object.coordinates,\n        i = -1,\n        n = coordinates.length;\n\n    while (++i < n) {\n      streamPolygon(coordinates[i], stream);\n    }\n  },\n  GeometryCollection: function GeometryCollection(object, stream) {\n    var geometries = object.geometries,\n        i = -1,\n        n = geometries.length;\n\n    while (++i < n) {\n      streamGeometry(geometries[i], stream);\n    }\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1,\n      n = coordinates.length - closed,\n      coordinate;\n  stream.lineStart();\n\n  while (++i < n) {\n    coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  }\n\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1,\n      n = coordinates.length;\n  stream.polygonStart();\n\n  while (++i < n) {\n    streamLine(coordinates[i], stream, 1);\n  }\n\n  stream.polygonEnd();\n}\n\nexport default function (object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}","import noop from \"../noop.js\";\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function result() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;","import { default as geoStream } from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function (b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function (b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function (b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}","import { cartesian } from \"../cartesian.js\";\nimport { abs, asin, atan2, cos, epsilon, radians, sqrt } from \"../math.js\";\nimport { transformer } from \"../transform.js\";\nvar maxDepth = 16,\n    // maximum depth of subdivision\ncosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function (project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function point(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n      || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n      || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) {\n        // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n\n  return function (stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n    lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function polygonStart() {\n        stream.polygonStart();\n        resampleStream.lineStart = ringStart;\n      },\n      polygonEnd: function polygonEnd() {\n        stream.polygonEnd();\n        resampleStream.lineStart = lineStart;\n      }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]),\n          p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}","import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport { cos, degrees, radians, sin, sqrt } from \"../math.js\";\nimport { rotateRadians } from \"../rotation.js\";\nimport { transformer } from \"../transform.js\";\nimport { fitExtent, fitSize, fitWidth, fitHeight } from \"./fit.js\";\nimport resample from \"./resample.js\";\nvar transformRadians = transformer({\n  point: function point(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function point(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx;\n    y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n\n  transform.invert = function (x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n\n  function transform(x, y) {\n    x *= sx;\n    y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n\n  transform.invert = function (x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function () {\n    return project;\n  })();\n}\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150,\n      // scale\n  x = 480,\n      y = 250,\n      // translate\n  lambda = 0,\n      phi = 0,\n      // center\n  deltaLambda = 0,\n      deltaPhi = 0,\n      deltaGamma = 0,\n      rotate,\n      // pre-rotate\n  alpha = 0,\n      // post-rotate angle\n  sx = 1,\n      // reflectX\n  sy = 1,\n      // reflectX\n  theta = null,\n      preclip = clipAntimeridian,\n      // pre-clip angle\n  x0 = null,\n      y0,\n      x1,\n      y1,\n      postclip = identity,\n      // post-clip extent\n  delta2 = 0.5,\n      // precision\n  projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function (stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function (_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function (_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function (_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function (_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function (_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function (_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function (_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function (_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function (_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function (_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function (_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function (_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function (extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function (size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function (width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function (height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = (alpha ? scaleTranslateRotate : scaleTranslate)(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function () {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}","import { atan, exp, halfPi, log, pi, tan, tau } from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function (x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function () {\n  return mercatorProjection(mercatorRaw).scale(961 / tau);\n}\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null,\n      y0,\n      x1,\n      y1; // clip extent\n\n  m.scale = function (_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function (_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function (_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function (_) {\n    return arguments.length ? (_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]] : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}","import adder from \"../adder.js\";\nimport { abs } from \"../math.js\";\nimport noop from \"../noop.js\";\nvar areaSum = adder(),\n    areaRingSum = adder(),\n    x00,\n    y00,\n    x0,\n    y0;\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function polygonStart() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function polygonEnd() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum.reset();\n  },\n  result: function result() {\n    var area = areaSum / 2;\n    areaSum.reset();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;","import { sqrt } from \"../math.js\"; // TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function polygonStart() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function polygonEnd() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function result() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2] : Z1 ? [X1 / Z1, Y1 / Z1] : Z0 ? [X0 / Z0, Y0 / Z0] : [NaN, NaN];\n    X0 = Y0 = Z0 = X1 = Y1 = Z1 = X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;","import { tau } from \"../math.js\";\nimport noop from \"../noop.js\";\nexport default function PathContext(context) {\n  this._context = context;\n}\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function pointRadius(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function polygonStart() {\n    this._line = 0;\n  },\n  polygonEnd: function polygonEnd() {\n    this._line = NaN;\n  },\n  lineStart: function lineStart() {\n    this._point = 0;\n  },\n  lineEnd: function lineEnd() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function point(x, y) {\n    switch (this._point) {\n      case 0:\n        {\n          this._context.moveTo(x, y);\n\n          this._point = 1;\n          break;\n        }\n\n      case 1:\n        {\n          this._context.lineTo(x, y);\n\n          break;\n        }\n\n      default:\n        {\n          this._context.moveTo(x + this._radius, y);\n\n          this._context.arc(x, y, this._radius, 0, tau);\n\n          break;\n        }\n    }\n  },\n  result: noop\n};","import adder from \"../adder.js\";\nimport { sqrt } from \"../math.js\";\nimport noop from \"../noop.js\";\nvar lengthSum = adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\nvar lengthStream = {\n  point: noop,\n  lineStart: function lineStart() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function lineEnd() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function polygonStart() {\n    lengthRing = true;\n  },\n  polygonEnd: function polygonEnd() {\n    lengthRing = null;\n  },\n  result: function result() {\n    var length = +lengthSum;\n    lengthSum.reset();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;","export default function PathString() {\n  this._string = [];\n}\nPathString.prototype = {\n  _radius: 4.5,\n  _circle: circle(4.5),\n  pointRadius: function pointRadius(_) {\n    if ((_ = +_) !== this._radius) this._radius = _, this._circle = null;\n    return this;\n  },\n  polygonStart: function polygonStart() {\n    this._line = 0;\n  },\n  polygonEnd: function polygonEnd() {\n    this._line = NaN;\n  },\n  lineStart: function lineStart() {\n    this._point = 0;\n  },\n  lineEnd: function lineEnd() {\n    if (this._line === 0) this._string.push(\"Z\");\n    this._point = NaN;\n  },\n  point: function point(x, y) {\n    switch (this._point) {\n      case 0:\n        {\n          this._string.push(\"M\", x, \",\", y);\n\n          this._point = 1;\n          break;\n        }\n\n      case 1:\n        {\n          this._string.push(\"L\", x, \",\", y);\n\n          break;\n        }\n\n      default:\n        {\n          if (this._circle == null) this._circle = circle(this._radius);\n\n          this._string.push(\"M\", x, \",\", y, this._circle);\n\n          break;\n        }\n    }\n  },\n  result: function result() {\n    if (this._string.length) {\n      var result = this._string.join(\"\");\n\n      this._string = [];\n      return result;\n    } else {\n      return null;\n    }\n  }\n};\n\nfunction circle(radius) {\n  return \"m0,\" + radius + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius + \"z\";\n}","import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\nexport default function (projection, context) {\n  var pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n\n    return contextStream.result();\n  }\n\n  path.area = function (object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function (object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function (object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function (object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function (_) {\n    return arguments.length ? (projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream, path) : projection;\n  };\n\n  path.context = function (_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString()) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function (_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  return path.projection(projection).context(context);\n}","import {\n  geoMercator,\n  geoPath,\n} from 'd3-geo';\nimport {\n  select,\n  Selection,\n} from 'd3-selection';\nimport { FeatureCollection } from 'geojson';\nimport merge from 'lodash/merge';\n\nimport { DeepPartial } from '../utils/types';\nimport { IMapProps } from './Map';\nimport { IChartAdaptor } from './types';\n\nexport const mapD3 = ((): IChartAdaptor<IMapProps> => {\n\n  const props: IMapProps = {\n    className: 'map-d3',\n    data: [],\n    geojson: {\n      features: [],\n      type: 'FeatureCollection',\n    },\n    height: 200,\n    width: 200,\n  };\n\n  let svg: Selection<any, any, any, any>;\n  let container: Selection<SVGElement, any, any, any>;\n\n  const MapD3 = {\n    /**\n     * Initialization\n     */\n    create(el: Element, newProps: DeepPartial<IMapProps> = {}) {\n      this.mergeProps(newProps);\n      this._makeSvg(el);\n      container = svg\n        .append<SVGElement>('g')\n        .attr('class', 'histogram-container');\n\n      this.update(props);\n    },\n\n    mergeProps(newProps: DeepPartial<IMapProps>) {\n      merge(props, newProps);\n      props.data = newProps.data;\n    },\n\n    /**\n     * Make the SVG container element\n     * Recreate if it previously existed\n     */\n    _makeSvg(el: Element) {\n      if (svg) {\n        svg.selectAll('svg > *').remove();\n        svg.remove();\n        const childNodes = el.getElementsByTagName('svg');\n        if (childNodes.length > 0) {\n          el.removeChild(childNodes[0]);\n        }\n      }\n      const { width, height, className } = props;\n\n      // Reference to svg element containing chart\n      svg = select(el).append('svg')\n        .attr('class', className)\n        .attr('width', width)\n        .attr('height', height)\n        .attr('viewBox', `0 0 ${width} ${height}`)\n        .append('g');\n    },\n\n    /**\n     * Draw a single data set into the chart\n     */\n    updateChart(\n      data: any,\n      geojson: FeatureCollection<any, any>,\n    ) {\n\n      const { width, height } = props;\n      const zoom = 3;\n      const projection = geoMercator()\n        .scale((Number(width) / 2 / Math.PI) * zoom)\n        .translate([(Number(width) / 2), (height / 2)]);\n\n      const geoGenerator = geoPath()\n        .projection(projection);\n\n      // const g = this.container\n      // .selectAll('g')\n      // .data(groupData);\n\n      // Join the FeatureCollection's features array to path elements\n      const u = container\n        .selectAll('path')\n        .data(geojson.features);\n\n      // Create path elements and update the d attribute using the geo generator\n      u.enter()\n        .append('path')\n        .attr('d', geoGenerator);\n    },\n\n    /**\n     * Update chart\n     */\n    update(newProps: DeepPartial<IMapProps>) {\n      if (!props.data) {\n        return;\n      }\n      this.mergeProps(newProps);\n      const { data, geojson } = props;\n      this.updateChart(data, geojson);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n  return MapD3;\n});\n","import { FeatureCollection } from 'geojson';\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { DeepPartial } from '../utils/types';\nimport { mapD3 } from './MapD3';\nimport { IChartAdaptor } from './types';\n\ninterface IChartState {\n  parentWidth?: number;\n}\n\nexport interface IMapProps {\n  className: string;\n  data: any;\n  geojson: FeatureCollection<any, any>;\n  height: number;\n  width: number | string;\n}\n\n/**\n * Map component\n */\nclass Map extends Component<DeepPartial<IMapProps>, IChartState> {\n\n  private chart: IChartAdaptor<IMapProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<IMapProps>) {\n    super(props);\n    this.chart = mapD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.chart.create(el, this.getChartState()));\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<IMapProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    this.chart.destroy();\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"map-chart-container\"></div>);\n  }\n}\n\nexport default Map;\n","import { json } from 'd3-request';\nimport { FeatureCollection } from 'geojson';\nimport React, {\n  useEffect,\n  useState,\n} from 'react';\n\nimport Map from '../../../src/legacy/Map';\nimport Layout from '../components/layout';\nimport SEO from '../components/seo';\nimport { data } from '../data';\n\nconst MapExample = () => {\n  const [loading, setLoading] = useState(true);\n\n  const [geojson, setGeoJson] = useState<FeatureCollection<any, any>>(null);\n  useEffect(() => {\n    const url = 'https://opendata.arcgis.com/datasets/8d3a9e6e7bd445e2bdcc26cdf007eac7_3.geojson';\n    json(url, (error, collection) => {\n      if (error) { throw error; }\n      setGeoJson(collection);\n      setLoading(false);\n    });\n  }, []);\n  if (loading) {\n    return <div>loading</div>;\n  }\n  return (\n    <Layout>\n      <SEO title=\"Histogram\" description=\"\" />\n      <h1>Map</h1>\n      <div>\n        <Map\n          data={data as any}\n          geojson={geojson}\n          height={400}\n          width={400} />\n      </div>\n    </Layout>\n  );\n};\n\nexport default MapExample;\n\n","import {\n  IAxes,\n  IBarChartData,\n} from '../../src';\nimport filterRange from '../../src/colors/filterRange';\nimport { ELabelOrientation } from '../../src/components/YAxis';\nimport {\n  IGrid,\n  IHistogramData,\n} from '../../src/Histogram';\nimport { lineStyle } from '../../src/utils/defaults';\nimport { DeepPartial } from '../../src/utils/types';\n\nexport const grid: IGrid = {\n  x: {\n    height: 100,\n    visible: true,\n    style: {\n      ...lineStyle,\n      'stroke': '#ccc',\n      'stroke-opacity': 0.4,\n    },\n    ticks: 5,\n  },\n  y: {\n    visible: true,\n    style: {\n      ...lineStyle,\n      'stroke': '#ccc',\n      'stroke-opacity': 0.4,\n    },\n    ticks: 6,\n  },\n};\n\nexport const smallData: IBarChartData = {\n  bins: ['Female long label test', 'Male', 'Other'],\n  counts: [\n    {\n      data: [79200, 52400, 13300],\n      label: 'Baseline',\n    },\n    {\n      data: [60000, 34230, 10000],\n      label: 'Filtered',\n    },\n  ]\n}\n\nexport const smallData2: IBarChartData = {\n  bins: ['Female', 'Male', 'Other'],\n  counts: [\n    {\n      data: [89200, 12400, 33300],\n      label: 'Baseline',\n    },\n    {\n      data: [70000, 24230, 40000],\n      label: 'Filtered',\n    },\n  ]\n}\n\nexport const smallDataContinuous: IHistogramData = {\n  bins: [[0, 50], [50, 150], [150, 300]],\n  counts: [\n    {\n      data: [500, 2000, 1500],\n      label: 'Baseline',\n    },\n  ]\n}\n\nexport const data: IBarChartData = {\n  bins: ['Female', 'Male', 'Other', 'sdfdfg', 'dagdsg', 'sfsd', 'ds34fsdf', 'dfsfsd', 'sdfs34dfs', 'ghf34hfg', 'fd33gag', 'jg343hj', 'a343wes', 'ye343ye', 'fd343gjs', 'sdfd343fg', '34', 'sfsd', '433', '45245', '745'],\n  counts: [\n    {\n      data: [58483, 52400, 13300, 79200, 52400, 13300, 79200, 52400, 13300, 79200, 52400, 13300, 79200, 52400, 13300, 79200, 52400, 13300, 79200, 52400, 13300],\n      label: 'Baseline',\n    },\n    {\n      data: [54932, 34230, 10000, 60000, 34230, 10000, 60000, 34230, 10000, 60000, 34230, 10000, 60000, 34230, 10000, 60000, 34230, 10000, 60000, 34230, 10000],\n      label: 'Filtered',\n    },\n  ]\n}\n\n\nexport const analyticsAxis: DeepPartial<IAxes> = {\n  x: {\n    scale: 'linear',\n    numberFormat: '.2s',\n    labelOrientation: ELabelOrientation.HORIZONTAL,\n  },\n  y: {\n    numberFormat: '.2s',\n    labelOrientation: ELabelOrientation.HORIZONTAL,\n  },\n};\n\nexport const verticalXAxis: DeepPartial<IAxes> = {\n  x: {\n    scale: 'linear',\n  },\n  y: {\n  },\n}\n\nexport const axis: DeepPartial<IAxes> = {\n  x: {\n    dateFormat: '%d-%b-%y',\n    scale: 'time',\n  },\n  y: {\n  },\n};\n\nexport const data2 = {\n  bins: ['bin 1', 'bin 2', 'bin 3 with a long name', 'bin 4', 'bin 5', 'bin 6', 'bin 7'],\n  counts: [\n    {\n      borderColors: ['red'],\n      data: [1, 2, 3, 4, 5, 6, 7],\n      label: 'Data 1',\n    },\n  ],\n  title: 'Plot 1',\n};\n\nexport const data3 = {\n  bins: ['bin 1', 'bin 2', 'bin 3'],\n  counts: [\n    {\n      borderColors: ['red'],\n      colors: ['red'],\n      data: [100, 50, 40],\n      label: 'Data 1',\n    },\n    {\n      borderColors: ['red'],\n      colors: ['blue'],\n      data: [32, 1, 5, 0],\n      label: 'Data 2',\n    },\n  ],\n};\n\nexport const theme = filterRange(['rgba(255, 113, 1, 0.5)', '#fff6ef', 'rgba(0, 169, 123, 0.5)', '#f6fffd',\n  '#D7263D', 'rgba(215, 38, 61, 0.05)',\n  '#0f2629', '#ededed', 'rgba(86, 180, 191, 0.5)', '#f5fbfb', '#000000', '#0f2629', '#D7263D', '#FBD7D9',\n  '#ffebec', '#963540', '#22545a', '#56b4bf', '#56b4bf', '#56b4bf', '#FF7101', '#449098', '#77c3cb', '#d4eef8',\n  '#ff7101', '#FF7101', '#cc5a00', '#ff8d33', '#fef9e5', '#7d5d2e', '#00a97b', '#008762', '#33ba95', '#dbf1d6',\n  '#227839', '#0f5e7b', '#d4eef8', '#0f5e7b', '#F9C80E', '#007656', '#c5e5e9', '#f9c80e', '#a9a9a9',\n  '#dbdbdb', '#cccccc', '#e6e6e6', '#56b4bf', '#449098', '#77c3cb', '#22545a', '#ff7101', '#cdcdcd', '#ffffff',\n  '#d7263d', '#00a97b', '#888888', '#e6e6e6', '#f2f2f2', '#f4f4f4']);\n"],"sourceRoot":""}