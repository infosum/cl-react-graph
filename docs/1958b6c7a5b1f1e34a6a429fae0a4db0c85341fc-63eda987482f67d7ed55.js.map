{"version":3,"sources":["webpack:///../node_modules/d3-time/src/hour.js","webpack:///(webpack)/buildin/harmony-module.js","webpack:///../node_modules/d3-collection/src/map.js","webpack:///../node_modules/d3-collection/src/set.js","webpack:///../node_modules/simple-swizzle/index.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","webpack:///../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/element.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/global.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/process.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/scheduler.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObservation.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserver.js","webpack:///../src/utils/useWidth.ts","webpack:///../node_modules/d3-timer/src/timer.js","webpack:///../src/utils/useMakeLine.ts","webpack:///../node_modules/d3-scale/src/nice.js","webpack:///../node_modules/d3-scale/src/log.js","webpack:///../src/utils/scales.ts","webpack:///../node_modules/d3-time/src/millisecond.js","webpack:///../node_modules/d3-shape/src/curve/linear.js","webpack:///../node_modules/d3-time/src/minute.js","webpack:///../node_modules/lodash/merge.js","webpack:///../node_modules/d3-shape/src/area.js","webpack:///../node_modules/d3-dsv/src/dsv.js","webpack:///../node_modules/d3-dsv/src/csv.js","webpack:///../node_modules/d3-dsv/src/tsv.js","webpack:///../node_modules/d3-shape/src/line.js","webpack:///../node_modules/color/index.js","webpack:///../node_modules/d3-shape/src/point.js","webpack:///../src/TornadoD3.ts","webpack:///../src/Tornado.tsx","webpack:///../node_modules/is-arrayish/index.js","webpack:///../node_modules/color-convert/index.js","webpack:///../node_modules/d3-scale/src/time.js","webpack:///../node_modules/d3-dispatch/src/dispatch.js","webpack:///../src/v3/Histogram.tsx","webpack:///../src/components/AreaFill.tsx","webpack:///../src/components/Points.tsx","webpack:///../src/v3/LineChart.tsx","webpack:///../src/lineChartD3.ts","webpack:///../src/LineChart.tsx","webpack:///../src/ScatterPlot.tsx","webpack:///../src/ScatterPlotD3.ts","webpack:///../src/HorizontalHistogramD3.ts","webpack:///../src/HorizontalHistogram.tsx","webpack:///../node_modules/d3/node_modules/d3-array/src/ascending.js","webpack:///../node_modules/d3/node_modules/d3-array/src/bisector.js","webpack:///../node_modules/d3/node_modules/d3-array/src/bisect.js","webpack:///../node_modules/d3/node_modules/d3-array/src/cross.js","webpack:///../node_modules/d3/node_modules/d3-array/src/extent.js","webpack:///../node_modules/d3/node_modules/d3-array/src/array.js","webpack:///../node_modules/d3/node_modules/d3-array/src/ticks.js","webpack:///../node_modules/d3-brush/src/brush.js","webpack:///../node_modules/d3-contour/node_modules/d3-array/src/ascending.js","webpack:///../node_modules/d3-contour/node_modules/d3-array/src/bisect.js","webpack:///../node_modules/d3-contour/node_modules/d3-array/src/bisector.js","webpack:///../node_modules/d3-contour/node_modules/d3-array/src/cross.js","webpack:///../node_modules/d3-contour/node_modules/d3-array/src/array.js","webpack:///../node_modules/d3-contour/node_modules/d3-array/src/ticks.js","webpack:///../node_modules/d3-contour/src/array.js","webpack:///../node_modules/d3-quadtree/src/add.js","webpack:///../node_modules/d3-quadtree/src/cover.js","webpack:///../node_modules/d3-quadtree/src/quad.js","webpack:///../node_modules/d3-quadtree/src/x.js","webpack:///../node_modules/d3-quadtree/src/y.js","webpack:///../node_modules/d3-quadtree/src/quadtree.js","webpack:///../node_modules/d3-quadtree/src/data.js","webpack:///../node_modules/d3-quadtree/src/extent.js","webpack:///../node_modules/d3-quadtree/src/find.js","webpack:///../node_modules/d3-quadtree/src/remove.js","webpack:///../node_modules/d3-quadtree/src/root.js","webpack:///../node_modules/d3-quadtree/src/size.js","webpack:///../node_modules/d3-quadtree/src/visit.js","webpack:///../node_modules/d3-quadtree/src/visitAfter.js","webpack:///../node_modules/d3-force/src/simulation.js","webpack:///../node_modules/d3-random/src/defaultSource.js","webpack:///../node_modules/d3-random/src/normal.js","webpack:///../node_modules/d3-random/src/uniform.js","webpack:///../node_modules/d3-random/src/irwinHall.js","webpack:///../node_modules/d3-random/src/logNormal.js","webpack:///../node_modules/d3-random/src/bates.js","webpack:///../node_modules/d3-random/src/exponential.js","webpack:///../node_modules/d3/node_modules/d3-scale/src/array.js","webpack:///../node_modules/d3/node_modules/d3-scale/src/time.js","webpack:///../node_modules/d3-time/src/utcMonth.js","webpack:///../node_modules/d3-time/src/utcHour.js","webpack:///../node_modules/d3-time/src/utcMinute.js","webpack:///../node_modules/d3-voronoi/src/RedBlackTree.js","webpack:///../node_modules/d3-voronoi/src/Edge.js","webpack:///../node_modules/d3-voronoi/src/Cell.js","webpack:///../node_modules/d3-voronoi/src/Circle.js","webpack:///../node_modules/d3-voronoi/src/Beach.js","webpack:///../node_modules/d3-voronoi/src/Diagram.js","webpack:///../node_modules/d3-zoom/src/transform.js","webpack:///../node_modules/d3-zoom/src/zoom.js","webpack:///../src/components/Bars/HistogramBars.tsx","webpack:///../src/components/Bars/histogramHelper.ts","webpack:///../node_modules/d3-time/src/month.js","webpack:///../src/components/Line.tsx","webpack:///../node_modules/react-use-measure/dist/web.js","webpack:///../node_modules/d3-shape/src/descending.js","webpack:///../node_modules/d3-shape/src/identity.js","webpack:///../src/PieChartD3.ts","webpack:///../node_modules/d3-shape/src/pie.js","webpack:///../src/PieChart.tsx","webpack:///../node_modules/d3-timer/src/timeout.js","webpack:///../node_modules/d3-transition/src/transition/schedule.js","webpack:///../node_modules/d3-transition/src/interrupt.js","webpack:///../node_modules/d3-transition/src/transition/tween.js","webpack:///../node_modules/d3-transition/src/transition/interpolate.js","webpack:///../node_modules/d3-transition/src/transition/attr.js","webpack:///../node_modules/d3-transition/src/transition/attrTween.js","webpack:///../node_modules/d3-transition/src/transition/delay.js","webpack:///../node_modules/d3-transition/src/transition/duration.js","webpack:///../node_modules/d3-transition/src/transition/ease.js","webpack:///../node_modules/d3-transition/src/transition/on.js","webpack:///../node_modules/d3-transition/src/transition/remove.js","webpack:///../node_modules/d3-transition/src/transition/selection.js","webpack:///../node_modules/d3-transition/src/transition/style.js","webpack:///../node_modules/d3-transition/src/transition/styleTween.js","webpack:///../node_modules/d3-transition/src/transition/textTween.js","webpack:///../node_modules/d3-transition/src/transition/index.js","webpack:///../node_modules/d3-transition/src/transition/select.js","webpack:///../node_modules/d3-transition/src/transition/selectAll.js","webpack:///../node_modules/d3-transition/src/transition/filter.js","webpack:///../node_modules/d3-transition/src/transition/merge.js","webpack:///../node_modules/d3-transition/src/transition/transition.js","webpack:///../node_modules/d3-transition/src/transition/text.js","webpack:///../node_modules/d3-transition/src/transition/end.js","webpack:///../node_modules/d3-transition/src/selection/transition.js","webpack:///../node_modules/d3-ease/src/cubic.js","webpack:///../node_modules/d3-transition/src/selection/index.js","webpack:///../node_modules/d3-transition/src/selection/interrupt.js","webpack:///../src/utils/outputSvg.ts","webpack:///../node_modules/d3-time/src/second.js","webpack:///../node_modules/color-convert/conversions.js","webpack:///../node_modules/color-convert/route.js","webpack:///../node_modules/color-name/index.js","webpack:///../src/Legend.tsx","webpack:///../node_modules/color-string/index.js","webpack:///../node_modules/debounce/index.js","webpack:///../src/colors/filterRange.ts"],"names":["hour","date","setTime","getMilliseconds","getSeconds","getMinutes","step","start","end","getHours","range","module","exports","originalModule","webpackPolyfill","Object","create","children","defineProperty","enumerable","get","l","i","Map","map","object","f","each","value","key","set","Array","isArray","o","n","length","prototype","constructor","has","this","remove","property","clear","keys","push","slice","values","entries","size","empty","Set","proto","add","isArrayish","concat","swizzle","args","results","len","arg","call","wrap","fn","arguments","ResizeObserverBoxOptions","resizeObservers","msg","trigger","DOMRectReadOnly","x","y","width","height","top","left","bottom","right","freeze","toJSON","_a","fromRect","rectangle","isSVG","target","SVGElement","isHidden","getBBox","_b","offsetWidth","offsetHeight","getClientRects","isElement","obj","scope","ownerDocument","defaultView","Element","global","window","cache","WeakMap","scrollRegexp","verticalRegexp","IE","test","navigator","userAgent","parseDimension","pixel","parseFloat","inlineSize","blockSize","switchSizes","zeroBoxes","devicePixelContentBoxSize","borderBoxSize","contentBoxSize","contentRect","forceRecalculation","cs","getComputedStyle","svg","ownerSVGElement","removePadding","boxSizing","writingMode","canScrollVertically","overflowY","canScrollHorizontally","overflowX","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","horizontalPadding","verticalPadding","horizontalBorderArea","borderLeftWidth","verticalBorderArea","horizontalScrollbarThickness","clientHeight","verticalScrollbarThickness","clientWidth","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","Math","round","devicePixelRatio","observedBox","DEVICE_PIXEL_CONTENT_BOX","BORDER_BOX","node","Infinity","depth","parent","parentNode","shallowestDepth","callbacks","forEach","ro","activeTargets","ot","entry","targetDepth","lastReportedSize","callback","observer","splice","_i","callbacks_1","skippedTargets","observationTargets","isActive","event","some","ErrorEvent","message","document","createEvent","initEvent","dispatchEvent","queueMicroTask","toggle_1","el_1","createTextNode","MutationObserver","cb","observe","characterData","textContent","watching","observerConfig","attributes","childList","subtree","events","time","timeout","Date","now","scheduled","scheduler","Scheduler","_this","stopped","listener","schedule","run","until","elementsHaveResized","requestAnimationFrame","stop","body","addEventListener","name","disconnect","removeEventListener","updateCount","ResizeObservation","CONTENT_BOX","tagName","type","isReplacedElement","display","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","ResizeObserverController","connect","detail","options","firstObservation","box","unobserve","index","lastObservation","indexOf","ResizeObserver","TypeError","toString","useWidth","origWidth","useMeasure","debounce","polyfill","ref","useState","r","setR","useEffect","w","includes","parseInt","taskHead","taskTail","frame","interval","clockLast","clockNow","clockSkew","clock","performance","setFrame","bind","setTimeout","clearNow","Timer","_call","_time","_next","timer","delay","t","restart","wake","e","timerFlush","t0","t2","t1","sleep","nap","poke","clearTimeout","clearInterval","setInterval","useScales","data","axis","xScale","yScale","scales","setScales","buildScales","ys","xs","d","parsedY","scale","parsedX","yDomain","rangeAffordance","extent","xDomain","domain","rangeRound","useMakeLine","props","current","setCurrent","previous","setPrevious","line","curveType","curveCatmullRom","next","String","curve","useMakeArea","area","y0","y1","thisArea","i0","i1","x0","x1","floor","ceil","transformLog","log","transformExp","exp","transformLogn","transformExpn","pow10","isFinite","reflect","loggish","transform","logs","pows","base","rescale","E","log10","log2","logp","pow","powp","_","ticks","count","u","v","p","k","j","z","min","reverse","tickFormat","specifier","max","nice","copy","init","apply","scaleLog","clamp","scaleTime","scaleLinear","millisecond","every","Linear","context","_context","areaStart","_line","areaEnd","NaN","lineStart","_point","lineEnd","closePath","point","lineTo","moveTo","minute","baseMerge","merge","createAssigner","source","srcIndex","defined","output","buffer","defined0","x0z","y0z","arealine","lineX0","lineY0","lineY1","lineX1","EOL","EOF","objectConverter","columns","Function","JSON","stringify","join","reFormat","RegExp","delimiter","DELIMITER","charCodeAt","parseRows","text","rows","N","I","eof","eol","token","c","replace","row","formatRow","formatValue","parse","convert","customConverter","format","columnSet","column","inferColumns","formatRows","csv","dsv","csvParse","tsv","tsvParse","colorString","_slice","skippedModels","hashedModelKeys","model","labels","sort","limiters","Color","Error","channels","color","valpha","result","newArr","zeroArray","alpha","hashedKeys","limit","getset","channel","modifier","m","val","maxfn","assertArray","arr","string","places","self","to","rgb","percentString","percent","array","unitArray","unitObject","g","b","num","Number","toFixed","roundTo","roundToPlace","red","green","blue","hue","saturationl","lightness","saturationv","chroma","gray","white","wblack","cyan","magenta","yellow","black","a","keyword","hex","rgbNumber","luminosity","lum","chan","contrast","color2","lum1","lum2","level","contrastRatio","isDark","isLight","negate","lighten","ratio","hsl","darken","saturate","desaturate","whiten","hwb","blacken","grayscale","fade","opaquer","rotate","degrees","mix","mixinColor","weight","color1","undefined","w1","w2","newAlpha","raw","TornadoD3","scaleBand","innerScaleBand","dataSets","cloneDeep","defaultAxis","bar","grouped","paddingInner","paddingOuter","overlayMargin","className","colorScheme","center","bins","counts","duration","grid","defaultGrid","groupLayout","EGroupedBarLayout","GROUPED","margin","showBinPercentages","splitBins","stroke","dasharray","linecap","tip","tips","tipContainer","tipContentFn","visible","el","newProps","mergeProps","makeSvg","sizeSVG","makeTip","tipContent","makeGrid","gridX","gridY","xAxisContainer2","append","attr","container","makeScales","xAxisContainer","yAxisContainer","xAxisLabel","yAxisLabel","update","drawAxes","valuesCount","reduce","gridWidth","h","gridHeight","dataLabels","label","groupedPaddingInner","groupedBarsUseSameXAxisValue","bandwidth","xAxis","axisBottom","shouldFormatTick","timeFormat","dateFormat","isNaN","numberFormat","tickSize","axisLength","axisConfig","limitByValues","calculateDomain","x2","scalePoint","xGroupAxis","tickPadding","yAxis","axisLeft","xAxisY","xAxisHeight","yAxisWidth","attrs","selectAll","style","leftValues","prev","rightValues","applyDomainAffordance","updateChart","groupData","percentData","totals","datum","side","groupLabel","total","calculatePercents","colors","scaleOrdinal","gWidth","bars","enter","yd","on","onClick","onMouseOver","hover","fx","move","onMouseOut","OVERLAID","getBarWidth","transition","stackIndex","abs","percents","exit","yText","xText","mergeWith","objValue","srcValue","stack","genderIndex","aValue","rowIndex","colorRef","destroy","Tornado","chart","state","parentWidth","handleResize","getDOMNode","setState","getChartState","componentDidMount","componentDidUpdate","rest","componentWillUnmount","ReactDOM","findDOMNode","Text","render","Component","getOwnPropertyDescriptor","conversions","route","fromModel","routes","toModel","wrappedFn","conversion","wrapRounded","wrapRaw","number","calendar","year","month","week","day","second","invert","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","tickIntervals","durationSecond","durationMinute","durationHour","durationDay","tickInterval","from","noop","dispatch","Dispatch","parseTypenames","typenames","types","trim","split","hasOwnProperty","typename","T","that","Histogram","animation","axisLabelFormat","schemeSet3","direction","EChartDirection","VERTICAL","hoverColorScheme","LabelComponent","showLabels","xAxisLabelOrientation","ELabelOrientation","HORIZONTAL","continuousDomain","svgProps","lines","vertical","horizontal","config","labelFormat","labelOrientation","AreaFill","spring","useSpring","reset","getInterpolator","interpolate","interpolator","useRef","useLayoutEffect","path","fill","Points","radius","yValue","xValue","cy","cx","LineChart","useLineDomain","Base","Grid","item","Line","show","YAxis","XAxis","lineChartD3","xParseTime","xFormatTime","lineContainer","lineProps","strokeDashArray","strokeDashOffset","pointProps","lineStyle","info","datumProps","getYAxisWidth","_drawDataPointSet","pointContainer","points","dx","html","in","out","xOffset","_drawLines","oldData","find","newD","select","dataset","selector","selection","drawAreas","timeParse","assign","drawGrid","React","ScatterPlot","domainByTrait","choices","distModels","legendWidth","padding","_makeSvg","childNodes","getElementsByTagName","removeChild","_drawScales","xSize","ySize","_drawLegend","legend","cell","_drawPoints","traits","nx","cross","plotCell","findIndex","filter","trait","scatterPlotD3","componentWillReceiveProps","defaultProps","HorizontalHistogramD3","yAnnotations","yAnnotationAxisContainer","annotations","annotationTextSize","stacked","maxValueCount","annotationsEnabled","groupedPaddingOuter","axisYAnnotationAllowance","axisLabelTipContentFn","onMouseOverAxis","annotationAxis","annotationAxisDefaults","appendDomainRange","isStacked","formatTick","stackedOffset","oSet","gData","isItStacked","offset","calculateYPosition","overlaidYPos","finalYPos","currentHeight","barWidth","group","percentage","overlaidOffset","BaseHistogramD3","HorizontalHistogram","histogram","compare","ascending","lo","hi","mid","ascendingBisect","bisector","valueof","sqrt","number1","number2","tree","xm","ym","xp","yp","_root","leaf","_x0","_y0","_x1","_y1","_x","_y","quadtree","nodes","Quadtree","addAll","leaf_copy","treeProto","child","pop","cover","xz","yz","visit","y2","q","x3","y3","quads","dy","d2","retainer","removeAll","root","visitAfter","PI","random","randomUniform","sourceRandomUniform","defaultSource","randomNormal","mu","sigma","sourceRandomNormal","randomLogNormal","normal","sourceRandomLogNormal","randomIrwinHall","sum","sourceRandomIrwinHall","randomBates","irwinHall","sourceRandomBates","randomExponential","lambda","sourceRandomExponential","utcMonth","setUTCDate","setUTCHours","setUTCMonth","getUTCMonth","getUTCFullYear","utcHour","setUTCMinutes","getUTCHours","utcMinute","setUTCSeconds","getUTCMinutes","RedBlackTree","RedBlackNode","U","C","L","R","P","RedBlackRotateLeft","RedBlackRotateRight","RedBlackFirst","insert","after","grandpa","uncle","sibling","createEdge","v0","v1","edge","setEdgeEnd","cells","halfedges","createBorderEdge","vertex","clipEdge","ax","ay","connectEdge","fm","fb","lx","ly","rx","ry","fy","cellHalfedgeAngle","site","va","vb","atan2","cellHalfedgeStart","cellHalfedgeEnd","firstCircle","circlePool","Circle","arc","attachCircle","lArc","rArc","lSite","cSite","rSite","bx","by","epsilon2","ha","hc","circle","before","circles","detachCircle","beachPool","Beach","createBeach","beach","detachBeach","beaches","removeBeach","disappearing","epsilon","unshift","iArc","nArcs","addBeach","dxl","dxr","directrix","leftBreakPoint","rightBreakPoint","createCell","newArc","hb","rfocx","rfocy","pby2","lfocx","lfocy","plby2","hl","aby2","lexicographic","Diagram","sites","sortCellHalfedges","clipEdges","iCell","iHalfedge","nHalfedges","startX","startY","endX","endY","nCells","dc","v00","v01","v11","v10","clipCells","edges","polygons","polygon","triangles","s0","e1","s1","links","_found","vx","vy","v2","Transform","translate","applyX","applyY","location","invertX","invertY","rescaleX","rescaleY","binWidth","bin","HistogramBars","brighter","binLabels","datasetIndex","totalArea","binIndex","scaleDomain","numericScale","continuousScale","setHover","springs","useSprings","bandPosition","startValue","itemWidth","itemHeight","hoverFill","buildHistogramSprings","refs","createRef","rect","onMouseEnter","onMouseLeave","Labels","items","ToolTips","setDate","setHours","setMonth","getMonth","getFullYear","strokeDashoffset","strokeDasharray","animate","_ref","scroll","debounce$1","_useState","_useState2","bounds","element","scrollContainers","lastBounds","scrollDebounce","resizeDebounce","resize","_useMemo","_state$current$elemen","getBoundingClientRect","areBoundsEqual","_useMemo2","forceRefresh","resizeChange","scrollChange","removeListeners","addListeners","scrollContainer","capture","passive","findScrollContainers","useOnWindowScroll","Boolean","useOnWindowResize","onWindowResize","onScroll","enabled","_window$getComputedSt","overflow","prop","parentElement","writable","thisPie","identity","sortValues","descending","startAngle","constant","endAngle","padAngle","pie","a1","arcs","a0","da","pa","outerRadius","setIndex","donutWidth","innerRadius","getArc","arcTween","thisArc","_current","PieChart","containers","previousData","storedWidth","storedHeight","backgroundColor","displayFn","dataSet","drawChartBg","drawCharts","theme","drawChart","drawLabels","tau","bgArc","background","s","ix","attrTween","path2","centroid","pieChartD3","elapsed","emptyOn","emptyTween","schedules","__transition","id","tween","__data__","tick","ease","timing","active","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","space","local","attrConstant","value1","string00","interpolate0","string1","string0","getAttribute","attrConstantNS","getAttributeNS","attrFunction","string10","attrFunctionNS","attrInterpolate","setAttribute","attrInterpolateNS","setAttributeNS","attrTweenNS","_value","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","Selection","styleRemove","removeProperty","styleInterpolate","priority","setProperty","styleTween","textInterpolate","textTween","Transition","groups","parents","_groups","_parents","_name","newId","selection_prototype","subgroups","subnode","subgroup","selectorAll","inherit","match","matcher","groups0","groups1","m0","m1","merges","group0","group1","id0","id1","namespace","styleNull","styleFunction","listener0","styleMaybeRemove","styleConstant","textFunction","textConstant","Promise","resolve","reject","cancel","interrupt","defaultTiming","outputSvg","svgId","watermark","svgStr","XMLSerializer","serializeToString","svgData","btoa","unescape","encodeURIComponent","canvas","createElement","getContext","image","Image","watermarkImage","onload","clearRect","drawImage","globalCompositeOperation","fillStyle","fillRect","toBlob","pngData","toDataURL","src","getUTCSeconds","cssKeywords","reverseKeywords","hsv","cmyk","xyz","lab","lch","ansi16","ansi256","hcg","apple","delta","rdif","gdif","bdif","diff","diffc","reversed","currentClosestKeyword","currentClosestDistance","distance","t3","smin","lmin","sl","vmin","wh","bl","z2","hr","cos","sin","ansi","mult","rem","toUpperCase","substring","char","integer","mg","pure","deriveBFS","graph","models","buildGraph","queue","adjacents","adjacent","link","wrapConversion","cur","legendIconStyle","cursor","listStyle","liStyle","alignItems","Legend","onSelect","scheme","border","colorNames","reverseNames","hexDouble","str","toLowerCase","hexAlpha","i2","rgba","hsla","hwba","func","wait","immediate","timestamp","later","last","debounced","callNow","flush"],"mappings":"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","file":"1958b6c7a5b1f1e34a6a429fae0a4db0c85341fc-63eda987482f67d7ed55.js","sourcesContent":["import interval from \"./interval.js\";\nimport { durationHour, durationMinute, durationSecond } from \"./duration.js\";\nvar hour = interval(function (date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function (date, step) {\n  date.setTime(+date + step * durationHour);\n}, function (start, end) {\n  return (end - start) / durationHour;\n}, function (date) {\n  return date.getHours();\n});\nexport default hour;\nexport var hours = hour.range;","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function has(key) {\n    return prefix + key in this;\n  },\n  get: function get(key) {\n    return this[prefix + key];\n  },\n  set: function set(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function remove(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function clear() {\n    for (var property in this) {\n      if (property[0] === prefix) delete this[property];\n    }\n  },\n  keys: function keys() {\n    var keys = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) keys.push(property.slice(1));\n    }\n\n    return keys;\n  },\n  values: function values() {\n    var values = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) values.push(this[property]);\n    }\n\n    return values;\n  },\n  entries: function entries() {\n    var entries = [];\n\n    for (var property in this) {\n      if (property[0] === prefix) entries.push({\n        key: property.slice(1),\n        value: this[property]\n      });\n    }\n\n    return entries;\n  },\n  size: function size() {\n    var size = 0;\n\n    for (var property in this) {\n      if (property[0] === prefix) ++size;\n    }\n\n    return size;\n  },\n  empty: function empty() {\n    for (var property in this) {\n      if (property[0] === prefix) return false;\n    }\n\n    return true;\n  },\n  each: function each(f) {\n    for (var property in this) {\n      if (property[0] === prefix) f(this[property], property.slice(1), this);\n    }\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map(); // Copy constructor.\n\n  if (object instanceof Map) object.each(function (value, key) {\n    map.set(key, value);\n  }); // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n      if (f == null) while (++i < n) {\n        map.set(i, object[i]);\n      } else while (++i < n) {\n        map.set(f(o = object[i], i, object), o);\n      }\n    } // Convert object to map.\n    else if (object) for (var key in object) {\n        map.set(key, object[key]);\n      }\n  return map;\n}\n\nexport default map;","import { default as map, prefix } from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function add(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set(); // Copy constructor.\n\n  if (object instanceof Set) object.each(function (value) {\n    set.add(value);\n  }); // Otherwise, assume its an array.\n  else if (object) {\n      var i = -1,\n          n = object.length;\n      if (f == null) while (++i < n) {\n        set.add(object[i]);\n      } else while (++i < n) {\n        set.add(f(object[i], i, object));\n      }\n    }\n  return set;\n}\n\nexport default set;","'use strict';\n\nvar isArrayish = require('is-arrayish');\n\nvar concat = Array.prototype.concat;\nvar slice = Array.prototype.slice;\n\nvar swizzle = module.exports = function swizzle(args) {\n  var results = [];\n\n  for (var i = 0, len = args.length; i < len; i++) {\n    var arg = args[i];\n\n    if (isArrayish(arg)) {\n      // http://jsperf.com/javascript-array-concat-vs-push/98\n      results = concat.call(results, slice.call(arg));\n    } else {\n      results.push(arg);\n    }\n  }\n\n  return results;\n};\n\nswizzle.wrap = function (fn) {\n  return function () {\n    return fn(swizzle(arguments));\n  };\n};","var ResizeObserverBoxOptions;\n\n(function (ResizeObserverBoxOptions) {\n  ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n  ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n  ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\n\nexport { ResizeObserverBoxOptions };","var resizeObservers = [];\nexport { resizeObservers };","var msg = 'ResizeObserver loop completed with undelivered notifications.';\n\nvar deliverResizeLoopError = function deliverResizeLoopError() {\n  var event;\n\n  if (typeof ErrorEvent === 'function') {\n    event = new ErrorEvent('error', {\n      message: msg\n    });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent('error', false, false);\n    event.message = msg;\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport { deliverResizeLoopError };","var DOMRectReadOnly = function () {\n  function DOMRectReadOnly(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.top = this.y;\n    this.left = this.x;\n    this.bottom = this.top + this.height;\n    this.right = this.left + this.width;\n    return Object.freeze(this);\n  }\n\n  DOMRectReadOnly.prototype.toJSON = function () {\n    var _a = this,\n        x = _a.x,\n        y = _a.y,\n        top = _a.top,\n        right = _a.right,\n        bottom = _a.bottom,\n        left = _a.left,\n        width = _a.width,\n        height = _a.height;\n\n    return {\n      x: x,\n      y: y,\n      top: top,\n      right: right,\n      bottom: bottom,\n      left: left,\n      width: width,\n      height: height\n    };\n  };\n\n  DOMRectReadOnly.fromRect = function (rectangle) {\n    return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n  };\n\n  return DOMRectReadOnly;\n}();\n\nexport { DOMRectReadOnly };","var trigger;\nvar callbacks = [];\n\nvar notify = function notify() {\n  return callbacks.splice(0).forEach(function (cb) {\n    return cb();\n  });\n};\n\nvar queueMicroTask = function queueMicroTask(callback) {\n  if (!trigger) {\n    var toggle_1 = 0;\n    var el_1 = document.createTextNode('');\n    var config = {\n      characterData: true\n    };\n    new MutationObserver(function () {\n      return notify();\n    }).observe(el_1, config);\n\n    trigger = function trigger() {\n      el_1.textContent = \"\" + (toggle_1 ? toggle_1-- : toggle_1++);\n    };\n  }\n\n  callbacks.push(callback);\n  trigger();\n};\n\nexport { queueMicroTask };","var isSVG = function isSVG(target) {\n  return target instanceof SVGElement && 'getBBox' in target;\n};\n\nvar isHidden = function isHidden(target) {\n  if (isSVG(target)) {\n    var _a = target.getBBox(),\n        width = _a.width,\n        height = _a.height;\n\n    return !width && !height;\n  }\n\n  var _b = target,\n      offsetWidth = _b.offsetWidth,\n      offsetHeight = _b.offsetHeight;\n  return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\n\nvar isElement = function isElement(obj) {\n  var _a, _b;\n\n  var scope = (_b = (_a = obj) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView;\n  return !!(scope && obj instanceof scope.Element);\n};\n\nvar isReplacedElement = function isReplacedElement(target) {\n  switch (target.tagName) {\n    case 'INPUT':\n      if (target.type !== 'image') {\n        break;\n      }\n\n    case 'VIDEO':\n    case 'AUDIO':\n    case 'EMBED':\n    case 'OBJECT':\n    case 'CANVAS':\n    case 'IFRAME':\n    case 'IMG':\n      return true;\n  }\n\n  return false;\n};\n\nexport { isSVG, isHidden, isElement, isReplacedElement };","export var global = typeof window !== 'undefined' ? window : {};","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = /msie|trident/i.test(global.navigator && global.navigator.userAgent);\n\nvar parseDimension = function parseDimension(pixel) {\n  return parseFloat(pixel || '0');\n};\n\nvar size = function size(inlineSize, blockSize, switchSizes) {\n  if (inlineSize === void 0) {\n    inlineSize = 0;\n  }\n\n  if (blockSize === void 0) {\n    blockSize = 0;\n  }\n\n  if (switchSizes === void 0) {\n    switchSizes = false;\n  }\n\n  return Object.freeze({\n    inlineSize: (switchSizes ? blockSize : inlineSize) || 0,\n    blockSize: (switchSizes ? inlineSize : blockSize) || 0\n  });\n};\n\nvar zeroBoxes = Object.freeze({\n  devicePixelContentBoxSize: size(),\n  borderBoxSize: size(),\n  contentBoxSize: size(),\n  contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\n\nvar calculateBoxSizes = function calculateBoxSizes(target, forceRecalculation) {\n  if (forceRecalculation === void 0) {\n    forceRecalculation = false;\n  }\n\n  if (cache.has(target) && !forceRecalculation) {\n    return cache.get(target);\n  }\n\n  if (isHidden(target)) {\n    cache.set(target, zeroBoxes);\n    return zeroBoxes;\n  }\n\n  var cs = getComputedStyle(target);\n  var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n  var removePadding = !IE && cs.boxSizing === 'border-box';\n  var switchSizes = verticalRegexp.test(cs.writingMode || '');\n  var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n  var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n  var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n  var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n  var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n  var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n  var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n  var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n  var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n  var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n  var horizontalPadding = paddingLeft + paddingRight;\n  var verticalPadding = paddingTop + paddingBottom;\n  var horizontalBorderArea = borderLeft + borderRight;\n  var verticalBorderArea = borderTop + borderBottom;\n  var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n  var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n  var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n  var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n  var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n  var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n  var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n  var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n  var boxes = Object.freeze({\n    devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n    borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n    contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n    contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n  });\n  cache.set(target, boxes);\n  return boxes;\n};\n\nvar calculateBoxSize = function calculateBoxSize(target, observedBox, forceRecalculation) {\n  var _a = calculateBoxSizes(target, forceRecalculation),\n      borderBoxSize = _a.borderBoxSize,\n      contentBoxSize = _a.contentBoxSize,\n      devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n\n  switch (observedBox) {\n    case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n      return devicePixelContentBoxSize;\n\n    case ResizeObserverBoxOptions.BORDER_BOX:\n      return borderBoxSize;\n\n    default:\n      return contentBoxSize;\n  }\n};\n\nexport { calculateBoxSize, calculateBoxSizes };","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\n\nvar ResizeObserverEntry = function () {\n  function ResizeObserverEntry(target) {\n    var boxes = calculateBoxSizes(target);\n    this.target = target;\n    this.contentRect = boxes.contentRect;\n    this.borderBoxSize = [boxes.borderBoxSize];\n    this.contentBoxSize = [boxes.contentBoxSize];\n    this.devicePixelContentBoxSize = [boxes.devicePixelContentBoxSize];\n  }\n\n  return ResizeObserverEntry;\n}();\n\nexport { ResizeObserverEntry };","import { isHidden } from '../utils/element';\n\nvar calculateDepthForNode = function calculateDepthForNode(node) {\n  if (isHidden(node)) {\n    return Infinity;\n  }\n\n  var depth = 0;\n  var parent = node.parentNode;\n\n  while (parent) {\n    depth += 1;\n    parent = parent.parentNode;\n  }\n\n  return depth;\n};\n\nexport { calculateDepthForNode };","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\n\nvar broadcastActiveObservations = function broadcastActiveObservations() {\n  var shallowestDepth = Infinity;\n  var callbacks = [];\n  resizeObservers.forEach(function processObserver(ro) {\n    if (ro.activeTargets.length === 0) {\n      return;\n    }\n\n    var entries = [];\n    ro.activeTargets.forEach(function processTarget(ot) {\n      var entry = new ResizeObserverEntry(ot.target);\n      var targetDepth = calculateDepthForNode(ot.target);\n      entries.push(entry);\n      ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n\n      if (targetDepth < shallowestDepth) {\n        shallowestDepth = targetDepth;\n      }\n    });\n    callbacks.push(function resizeObserverCallback() {\n      ro.callback.call(ro.observer, entries, ro.observer);\n    });\n    ro.activeTargets.splice(0, ro.activeTargets.length);\n  });\n\n  for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n    var callback = callbacks_1[_i];\n    callback();\n  }\n\n  return shallowestDepth;\n};\n\nexport { broadcastActiveObservations };","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\n\nvar gatherActiveObservationsAtDepth = function gatherActiveObservationsAtDepth(depth) {\n  resizeObservers.forEach(function processObserver(ro) {\n    ro.activeTargets.splice(0, ro.activeTargets.length);\n    ro.skippedTargets.splice(0, ro.skippedTargets.length);\n    ro.observationTargets.forEach(function processTarget(ot) {\n      if (ot.isActive()) {\n        if (calculateDepthForNode(ot.target) > depth) {\n          ro.activeTargets.push(ot);\n        } else {\n          ro.skippedTargets.push(ot);\n        }\n      }\n    });\n  });\n};\n\nexport { gatherActiveObservationsAtDepth };","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\n\nvar process = function process() {\n  var depth = 0;\n  gatherActiveObservationsAtDepth(depth);\n\n  while (hasActiveObservations()) {\n    depth = broadcastActiveObservations();\n    gatherActiveObservationsAtDepth(depth);\n  }\n\n  if (hasSkippedObservations()) {\n    deliverResizeLoopError();\n  }\n\n  return depth > 0;\n};\n\nexport { process };","import { resizeObservers } from '../utils/resizeObservers';\n\nvar hasActiveObservations = function hasActiveObservations() {\n  return resizeObservers.some(function (ro) {\n    return ro.activeTargets.length > 0;\n  });\n};\n\nexport { hasActiveObservations };","import { resizeObservers } from '../utils/resizeObservers';\n\nvar hasSkippedObservations = function hasSkippedObservations() {\n  return resizeObservers.some(function (ro) {\n    return ro.skippedTargets.length > 0;\n  });\n};\n\nexport { hasSkippedObservations };","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\n\nvar isWatching = function isWatching() {\n  return !!watching;\n};\n\nvar CATCH_PERIOD = 250;\nvar observerConfig = {\n  attributes: true,\n  characterData: true,\n  childList: true,\n  subtree: true\n};\nvar events = ['resize', 'load', 'transitionend', 'animationend', 'animationstart', 'animationiteration', 'keyup', 'keydown', 'mouseup', 'mousedown', 'mouseover', 'mouseout', 'blur', 'focus'];\n\nvar time = function time(timeout) {\n  if (timeout === void 0) {\n    timeout = 0;\n  }\n\n  return Date.now() + timeout;\n};\n\nvar scheduled = false;\n\nvar Scheduler = function () {\n  function Scheduler() {\n    var _this = this;\n\n    this.stopped = true;\n\n    this.listener = function () {\n      return _this.schedule();\n    };\n  }\n\n  Scheduler.prototype.run = function (timeout) {\n    var _this = this;\n\n    if (timeout === void 0) {\n      timeout = CATCH_PERIOD;\n    }\n\n    if (scheduled) {\n      return;\n    }\n\n    scheduled = true;\n    var until = time(timeout);\n    queueResizeObserver(function () {\n      var elementsHaveResized = false;\n\n      try {\n        elementsHaveResized = process();\n      } finally {\n        scheduled = false;\n        timeout = until - time();\n\n        if (!isWatching()) {\n          return;\n        }\n\n        if (elementsHaveResized) {\n          _this.run(1000);\n        } else if (timeout > 0) {\n          _this.run(timeout);\n        } else {\n          _this.start();\n        }\n      }\n    });\n  };\n\n  Scheduler.prototype.schedule = function () {\n    this.stop();\n    this.run();\n  };\n\n  Scheduler.prototype.observe = function () {\n    var _this = this;\n\n    var cb = function cb() {\n      return _this.observer && _this.observer.observe(document.body, observerConfig);\n    };\n\n    document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n  };\n\n  Scheduler.prototype.start = function () {\n    var _this = this;\n\n    if (this.stopped) {\n      this.stopped = false;\n      this.observer = new MutationObserver(this.listener);\n      this.observe();\n      events.forEach(function (name) {\n        return global.addEventListener(name, _this.listener, true);\n      });\n    }\n  };\n\n  Scheduler.prototype.stop = function () {\n    var _this = this;\n\n    if (!this.stopped) {\n      this.observer && this.observer.disconnect();\n      events.forEach(function (name) {\n        return global.removeEventListener(name, _this.listener, true);\n      });\n      this.stopped = true;\n    }\n  };\n\n  return Scheduler;\n}();\n\nvar scheduler = new Scheduler();\n\nvar updateCount = function updateCount(n) {\n  !watching && n > 0 && scheduler.start();\n  watching += n;\n  !watching && scheduler.stop();\n};\n\nexport { scheduler, updateCount };","import { queueMicroTask } from './queueMicroTask';\n\nvar queueResizeObserver = function queueResizeObserver(cb) {\n  queueMicroTask(function ResizeObserver() {\n    requestAnimationFrame(cb);\n  });\n};\n\nexport { queueResizeObserver };","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\n\nvar skipNotifyOnElement = function skipNotifyOnElement(target) {\n  return !isSVG(target) && !isReplacedElement(target) && getComputedStyle(target).display === 'inline';\n};\n\nvar ResizeObservation = function () {\n  function ResizeObservation(target, observedBox) {\n    this.target = target;\n    this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n    this.lastReportedSize = {\n      inlineSize: 0,\n      blockSize: 0\n    };\n  }\n\n  ResizeObservation.prototype.isActive = function () {\n    var size = calculateBoxSize(this.target, this.observedBox, true);\n\n    if (skipNotifyOnElement(this.target)) {\n      this.lastReportedSize = size;\n    }\n\n    if (this.lastReportedSize.inlineSize !== size.inlineSize || this.lastReportedSize.blockSize !== size.blockSize) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return ResizeObservation;\n}();\n\nexport { ResizeObservation };","var ResizeObserverDetail = function () {\n  function ResizeObserverDetail(resizeObserver, callback) {\n    this.activeTargets = [];\n    this.skippedTargets = [];\n    this.observationTargets = [];\n    this.observer = resizeObserver;\n    this.callback = callback;\n  }\n\n  return ResizeObserverDetail;\n}();\n\nexport { ResizeObserverDetail };","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\n\nvar getObservationIndex = function getObservationIndex(observationTargets, target) {\n  for (var i = 0; i < observationTargets.length; i += 1) {\n    if (observationTargets[i].target === target) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar ResizeObserverController = function () {\n  function ResizeObserverController() {}\n\n  ResizeObserverController.connect = function (resizeObserver, callback) {\n    var detail = new ResizeObserverDetail(resizeObserver, callback);\n    observerMap.set(resizeObserver, detail);\n  };\n\n  ResizeObserverController.observe = function (resizeObserver, target, options) {\n    var detail = observerMap.get(resizeObserver);\n    var firstObservation = detail.observationTargets.length === 0;\n\n    if (getObservationIndex(detail.observationTargets, target) < 0) {\n      firstObservation && resizeObservers.push(detail);\n      detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n      updateCount(1);\n      scheduler.schedule();\n    }\n  };\n\n  ResizeObserverController.unobserve = function (resizeObserver, target) {\n    var detail = observerMap.get(resizeObserver);\n    var index = getObservationIndex(detail.observationTargets, target);\n    var lastObservation = detail.observationTargets.length === 1;\n\n    if (index >= 0) {\n      lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n      detail.observationTargets.splice(index, 1);\n      updateCount(-1);\n    }\n  };\n\n  ResizeObserverController.disconnect = function (resizeObserver) {\n    var _this = this;\n\n    var detail = observerMap.get(resizeObserver);\n    detail.observationTargets.slice().forEach(function (ot) {\n      return _this.unobserve(resizeObserver, ot.target);\n    });\n    detail.activeTargets.splice(0, detail.activeTargets.length);\n  };\n\n  return ResizeObserverController;\n}();\n\nexport { ResizeObserverController };","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\n\nvar ResizeObserver = function () {\n  function ResizeObserver(callback) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (typeof callback !== 'function') {\n      throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n    }\n\n    ResizeObserverController.connect(this, callback);\n  }\n\n  ResizeObserver.prototype.observe = function (target, options) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (!isElement(target)) {\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    }\n\n    ResizeObserverController.observe(this, target, options);\n  };\n\n  ResizeObserver.prototype.unobserve = function (target) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (!isElement(target)) {\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    }\n\n    ResizeObserverController.unobserve(this, target);\n  };\n\n  ResizeObserver.prototype.disconnect = function () {\n    ResizeObserverController.disconnect(this);\n  };\n\n  ResizeObserver.toString = function () {\n    return 'function ResizeObserver () { [polyfill code] }';\n  };\n\n  return ResizeObserver;\n}();\n\nexport { ResizeObserver };","import {\n  useEffect,\n  useState,\n} from 'react';\nimport useMeasure from 'react-use-measure';\n\nimport { ResizeObserver } from '@juggle/resize-observer';\n\n// Helper hook to monitor container ref width and calculate pixel value from percent or number.\nexport const useWidth = (origWidth: string | number) => {\n  const [ref, { width }] = useMeasure({\n    debounce: 20,\n    polyfill: ResizeObserver,\n  });\n  const [r, setR] = useState<any>(width);\n  useEffect(() => {\n    const w = typeof origWidth === 'number'\n      ? origWidth\n      : origWidth.includes('%')\n        ? width * (parseInt(origWidth, 10) / 100)\n        : parseInt(origWidth, 10);\n    setR(w);\n  }, [origWidth, width]);\n  return [ref, r];\n}\n","var frame = 0,\n    // is an animation frame pending?\ntimeout = 0,\n    // is a timeout pending?\ninterval = 0,\n    // are any timers active?\npokeDelay = 1000,\n    // how frequently we check for clock skew\ntaskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {\n  setTimeout(f, 17);\n};\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call = this._time = this._next = null;\n}\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function restart(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;else taskHead = this;\n      taskTail = this;\n    }\n\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function stop() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\nexport function timer(callback, delay, time) {\n  var t = new Timer();\n  t.restart(callback, delay, time);\n  return t;\n}\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n\n  ++frame; // Pretend weve set an alarm, if we havent already.\n\n  var t = taskHead,\n      e;\n\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(),\n      delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0,\n      t1 = taskHead,\n      t2,\n      time = Infinity;\n\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}","import { extent } from 'd3-array';\nimport {\n  area,\n  curveCatmullRom,\n  CurveFactory,\n  CurveFactoryLineOnly,\n  line,\n} from 'd3-shape';\nimport {\n  useEffect,\n  useState,\n} from 'react';\n\nimport { IAxes } from '../Histogram';\nimport {\n  IChartPoint,\n  IChartPointValue,\n  ILineProps,\n} from '../LineChart';\nimport { rangeAffordance } from './domain';\nimport {\n  AnyScale,\n  buildScales,\n} from './scales';\n\nconst ZERO_SUBSTITUTE: number = 1e-6;\n\nexport interface IProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  data: T[];\n  axis: IAxes;\n  line: ILineProps;\n  curveType?: CurveFactory | CurveFactoryLineOnly;\n  width: number;\n  left?: number;\n  height: number;\n}\n\nexport const useScales: (props: Omit<IProps, 'line'>) => { xScale: any, yScale: any } = ({\n  data,\n  width,\n  height,\n  axis,\n  left = 0,\n}) => {\n  const [scales, setScales] = useState<{ xScale: any, yScale: any }>({ xScale: null, yScale: null });\n  useEffect(() => {\n    const [xScale, yScale] = buildScales(axis);\n\n    const ys: any[] = [];\n    const xs: any[] = [];\n    data.forEach((d) => {\n      let parsedY = axis.y.scale === 'LOG' && d.y === 0 ? ZERO_SUBSTITUTE : d.y;\n      let parsedX = axis.x.scale === 'LOG' && d.x === 0 ? ZERO_SUBSTITUTE : d.x;\n      ys.push(parsedY);\n      xs.push(parsedX);\n    });\n\n    const yDomain = rangeAffordance(extent(ys), axis.y);\n    const xDomain = rangeAffordance(extent(xs), axis.x);\n    (xScale as any)\n      .domain(xDomain)\n      .rangeRound([left, width + left]);\n    (yScale as any).domain(yDomain)\n      .range([height, 0]);\n    setScales({ xScale, yScale })\n\n  }, [data])\n\n  return scales;\n}\n\n\nexport const useMakeLine: (props: IProps) => { previous: string, current: string } = (props) => {\n  const [current, setCurrent] = useState('');\n  const [previous, setPrevious] = useState('');\n  const { xScale, yScale } = useScales(props);\n  useEffect(() => {\n    const { data } = props;\n    const { curveType = curveCatmullRom } = props.line;\n    if (yScale !== null) {\n      const curve = (\n        x: AnyScale,\n        y: AnyScale,\n      ) => line()\n        .curve(curveType)\n        .x((d: any) => {\n          return x(d.x);\n        })\n        .y((d: any) => y(d.y));\n      const next = String(curve(xScale, yScale)(data as any))\n      if (next !== current) {\n        setPrevious(current);\n        setCurrent(next);\n      }\n    }\n\n  }, [xScale, yScale, props.data])\n\n  return { previous, current };\n}\n\nexport const useMakeArea: (props: IProps) => { previous: string, current: string } = (props) => {\n  const [current, setCurrent] = useState('');\n  const [previous, setPrevious] = useState('');\n  const { xScale, yScale } = useScales(props);\n  useEffect(() => {\n    const { data, height } = props;\n    const { curveType = curveCatmullRom } = props.line;\n    if (yScale !== null) {\n      const thisArea = () => area()\n        .curve(curveType as CurveFactory)\n        .x((d: any) => xScale(d.x))\n        .y0((d) => height)\n        .y1((d: any) => yScale(d.y));\n      const next = String(thisArea()(data as any));\n      if (next !== current) {\n        setPrevious(current);\n        setCurrent(next);\n      }\n    }\n  }, [xScale, yScale, props.data]);\n  return { previous, current };\n}\n","export default function (domain, interval) {\n  domain = domain.slice();\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}","import { ticks } from \"d3-array\";\nimport { format } from \"d3-format\";\nimport nice from \"./nice.js\";\nimport { copy, transformer } from \"./continuous.js\";\nimport { initRange } from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10 : base === Math.E ? Math.exp : function (x) {\n    return Math.pow(base, x);\n  };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log : base === 10 && Math.log10 || base === 2 && Math.log2 || (base = Math.log(base), function (x) {\n    return Math.log(x) / base;\n  });\n}\n\nfunction reflect(f) {\n  return function (x) {\n    return -f(-x);\n  };\n}\n\nexport function loggish(transform) {\n  var scale = transform(transformLog, transformExp),\n      domain = scale.domain,\n      base = 10,\n      logs,\n      pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n\n    return scale;\n  }\n\n  scale.base = function (_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function (_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function (count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n    if (r = v < u) i = u, u = v, v = i;\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function (count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n\n    return function (d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function () {\n    return domain(nice(domain(), {\n      floor: function floor(x) {\n        return pows(Math.floor(logs(x)));\n      },\n      ceil: function ceil(x) {\n        return pows(Math.ceil(logs(x)));\n      }\n    }));\n  };\n\n  return scale;\n}\nexport default function log() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function () {\n    return copy(scale, log()).base(scale.base());\n  };\n\n  initRange.apply(scale, arguments);\n  return scale;\n}","import {\n  ScaleBand,\n  scaleLinear,\n  ScaleLinear,\n  scaleLog,\n  ScaleLogarithmic,\n  ScalePoint,\n  scaleTime,\n  ScaleTime,\n} from 'd3-scale';\n\nimport { IAxes } from '../';\n\nexport type AnyScale = ScaleLinear<number, number>\n  | ScaleTime<any, any>\n  | ScaleLogarithmic<any, any>\n  | ScaleBand<string>\n  | ScalePoint<string>;\n\nexport const buildScales = (axis: IAxes) => {\n  let x: AnyScale;\n  let y: AnyScale;\n  switch (axis.x.scale) {\n    case 'LOG':\n      x = scaleLog().clamp(true); // clamp values below 1 to be equal to 0\n      break;\n    case 'TIME':\n      x = scaleTime();\n      break;\n    default:\n      x = scaleLinear();\n      break;\n  }\n\n  switch (axis.y.scale) {\n    case 'LOG':\n      y = scaleLog().clamp(true); // clamp values below 1 to be equal to 0\n      break;\n    case 'TIME':\n      y = scaleTime();\n      break;\n    default:\n      y = scaleLinear();\n      break;\n  }\n  return [x, y];\n};\n","import interval from \"./interval.js\";\nvar millisecond = interval(function () {// noop\n}, function (date, step) {\n  date.setTime(+date + step);\n}, function (start, end) {\n  return end - start;\n}); // An optimized implementation for this simple case.\n\nmillisecond.every = function (k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function (date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function (date, step) {\n    date.setTime(+date + step * k);\n  }, function (start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function areaStart() {\n    this._line = 0;\n  },\n  areaEnd: function areaEnd() {\n    this._line = NaN;\n  },\n  lineStart: function lineStart() {\n    this._point = 0;\n  },\n  lineEnd: function lineEnd() {\n    if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function point(x, y) {\n    x = +x, y = +y;\n\n    switch (this._point) {\n      case 0:\n        this._point = 1;\n        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);\n        break;\n\n      case 1:\n        this._point = 2;\n      // proceed\n\n      default:\n        this._context.lineTo(x, y);\n\n        break;\n    }\n  }\n};\nexport default function (context) {\n  return new Linear(context);\n}","import interval from \"./interval.js\";\nimport { durationMinute, durationSecond } from \"./duration.js\";\nvar minute = interval(function (date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function (date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function (start, end) {\n  return (end - start) / durationMinute;\n}, function (date) {\n  return date.getMinutes();\n});\nexport default minute;\nexport var minutes = minute.range;","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","import { path } from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport { x as pointX, y as pointY } from \"./point.js\";\nexport default function () {\n  var x0 = pointX,\n      x1 = null,\n      y0 = constant(0),\n      y1 = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function (_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function (_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function (_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function (_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function (_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function (_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 = area.lineY0 = function () {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function () {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function () {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function (_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function (_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function (_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}","var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function (name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"]\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function (row, i) {\n    return f(object(row), i, columns);\n  };\n} // Compute unique columns in order of discovery.\n\n\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n  rows.forEach(function (row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n  return columns;\n}\n\nexport default function (delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert,\n        columns,\n        rows = parseRows(text, function (row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [],\n        // output rows\n    N = text.length,\n        I = 0,\n        // current character index\n    n = 0,\n        // current line number\n    t,\n        // current token\n    eof = N <= 0,\n        // current token followed by EOF?\n    eol = false; // current token followed by EOL?\n    // Strip the trailing newline.\n\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL; // Unescape quotes.\n\n      var i,\n          j = I,\n          c;\n\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE) {\n          ;\n        }\n\n        if ((i = I) >= N) eof = true;else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;else if (c === RETURN) {\n          eol = true;\n          if (text.charCodeAt(I) === NEWLINE) ++I;\n        }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      } // Find next delimiter or newline.\n\n\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;else if (c === RETURN) {\n          eol = true;\n          if (text.charCodeAt(I) === NEWLINE) ++I;\n        } else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      } // Return last token before EOF.\n\n\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n\n      while (t !== EOL && t !== EOF) {\n        row.push(t), t = token();\n      }\n\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(rows.map(function (row) {\n      return columns.map(function (column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    })).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(text) {\n    return text == null ? \"\" : reFormat.test(text += \"\") ? \"\\\"\" + text.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\" : text;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatRows: formatRows\n  };\n}","import dsv from \"./dsv\";\nvar csv = dsv(\",\");\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatRows = csv.formatRows;","import dsv from \"./dsv\";\nvar tsv = dsv(\"\\t\");\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatRows = tsv.formatRows;","import { path } from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport { x as pointX, y as pointY } from \"./point.js\";\nexport default function () {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();else output.lineEnd();\n      }\n\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function (_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function (_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function (_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}","'use strict';\n\nvar colorString = require('color-string');\n\nvar convert = require('color-convert');\n\nvar _slice = [].slice;\nvar skippedModels = [// to be honest, I don't really feel like keyword belongs in color convert, but eh.\n'keyword', // gray conflicts with some method names, and has its own method defined.\n'gray', // shouldn't really be in color-convert either...\n'hex'];\nvar hashedModelKeys = {};\nObject.keys(convert).forEach(function (model) {\n  hashedModelKeys[_slice.call(convert[model].labels).sort().join('')] = model;\n});\nvar limiters = {};\n\nfunction Color(obj, model) {\n  if (!(this instanceof Color)) {\n    return new Color(obj, model);\n  }\n\n  if (model && model in skippedModels) {\n    model = null;\n  }\n\n  if (model && !(model in convert)) {\n    throw new Error('Unknown model: ' + model);\n  }\n\n  var i;\n  var channels;\n\n  if (obj == null) {\n    // eslint-disable-line no-eq-null,eqeqeq\n    this.model = 'rgb';\n    this.color = [0, 0, 0];\n    this.valpha = 1;\n  } else if (obj instanceof Color) {\n    this.model = obj.model;\n    this.color = obj.color.slice();\n    this.valpha = obj.valpha;\n  } else if (typeof obj === 'string') {\n    var result = colorString.get(obj);\n\n    if (result === null) {\n      throw new Error('Unable to parse color from string: ' + obj);\n    }\n\n    this.model = result.model;\n    channels = convert[this.model].channels;\n    this.color = result.value.slice(0, channels);\n    this.valpha = typeof result.value[channels] === 'number' ? result.value[channels] : 1;\n  } else if (obj.length) {\n    this.model = model || 'rgb';\n    channels = convert[this.model].channels;\n\n    var newArr = _slice.call(obj, 0, channels);\n\n    this.color = zeroArray(newArr, channels);\n    this.valpha = typeof obj[channels] === 'number' ? obj[channels] : 1;\n  } else if (typeof obj === 'number') {\n    // this is always RGB - can be converted later on.\n    obj &= 0xFFFFFF;\n    this.model = 'rgb';\n    this.color = [obj >> 16 & 0xFF, obj >> 8 & 0xFF, obj & 0xFF];\n    this.valpha = 1;\n  } else {\n    this.valpha = 1;\n    var keys = Object.keys(obj);\n\n    if ('alpha' in obj) {\n      keys.splice(keys.indexOf('alpha'), 1);\n      this.valpha = typeof obj.alpha === 'number' ? obj.alpha : 0;\n    }\n\n    var hashedKeys = keys.sort().join('');\n\n    if (!(hashedKeys in hashedModelKeys)) {\n      throw new Error('Unable to parse color from object: ' + JSON.stringify(obj));\n    }\n\n    this.model = hashedModelKeys[hashedKeys];\n    var labels = convert[this.model].labels;\n    var color = [];\n\n    for (i = 0; i < labels.length; i++) {\n      color.push(obj[labels[i]]);\n    }\n\n    this.color = zeroArray(color);\n  } // perform limitations (clamping, etc.)\n\n\n  if (limiters[this.model]) {\n    channels = convert[this.model].channels;\n\n    for (i = 0; i < channels; i++) {\n      var limit = limiters[this.model][i];\n\n      if (limit) {\n        this.color[i] = limit(this.color[i]);\n      }\n    }\n  }\n\n  this.valpha = Math.max(0, Math.min(1, this.valpha));\n\n  if (Object.freeze) {\n    Object.freeze(this);\n  }\n}\n\nColor.prototype = {\n  toString: function toString() {\n    return this.string();\n  },\n  toJSON: function toJSON() {\n    return this[this.model]();\n  },\n  string: function string(places) {\n    var self = this.model in colorString.to ? this : this.rgb();\n    self = self.round(typeof places === 'number' ? places : 1);\n    var args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n    return colorString.to[self.model](args);\n  },\n  percentString: function percentString(places) {\n    var self = this.rgb().round(typeof places === 'number' ? places : 1);\n    var args = self.valpha === 1 ? self.color : self.color.concat(this.valpha);\n    return colorString.to.rgb.percent(args);\n  },\n  array: function array() {\n    return this.valpha === 1 ? this.color.slice() : this.color.concat(this.valpha);\n  },\n  object: function object() {\n    var result = {};\n    var channels = convert[this.model].channels;\n    var labels = convert[this.model].labels;\n\n    for (var i = 0; i < channels; i++) {\n      result[labels[i]] = this.color[i];\n    }\n\n    if (this.valpha !== 1) {\n      result.alpha = this.valpha;\n    }\n\n    return result;\n  },\n  unitArray: function unitArray() {\n    var rgb = this.rgb().color;\n    rgb[0] /= 255;\n    rgb[1] /= 255;\n    rgb[2] /= 255;\n\n    if (this.valpha !== 1) {\n      rgb.push(this.valpha);\n    }\n\n    return rgb;\n  },\n  unitObject: function unitObject() {\n    var rgb = this.rgb().object();\n    rgb.r /= 255;\n    rgb.g /= 255;\n    rgb.b /= 255;\n\n    if (this.valpha !== 1) {\n      rgb.alpha = this.valpha;\n    }\n\n    return rgb;\n  },\n  round: function round(places) {\n    places = Math.max(places || 0, 0);\n    return new Color(this.color.map(roundToPlace(places)).concat(this.valpha), this.model);\n  },\n  alpha: function alpha(val) {\n    if (arguments.length) {\n      return new Color(this.color.concat(Math.max(0, Math.min(1, val))), this.model);\n    }\n\n    return this.valpha;\n  },\n  // rgb\n  red: getset('rgb', 0, maxfn(255)),\n  green: getset('rgb', 1, maxfn(255)),\n  blue: getset('rgb', 2, maxfn(255)),\n  hue: getset(['hsl', 'hsv', 'hsl', 'hwb', 'hcg'], 0, function (val) {\n    return (val % 360 + 360) % 360;\n  }),\n  // eslint-disable-line brace-style\n  saturationl: getset('hsl', 1, maxfn(100)),\n  lightness: getset('hsl', 2, maxfn(100)),\n  saturationv: getset('hsv', 1, maxfn(100)),\n  value: getset('hsv', 2, maxfn(100)),\n  chroma: getset('hcg', 1, maxfn(100)),\n  gray: getset('hcg', 2, maxfn(100)),\n  white: getset('hwb', 1, maxfn(100)),\n  wblack: getset('hwb', 2, maxfn(100)),\n  cyan: getset('cmyk', 0, maxfn(100)),\n  magenta: getset('cmyk', 1, maxfn(100)),\n  yellow: getset('cmyk', 2, maxfn(100)),\n  black: getset('cmyk', 3, maxfn(100)),\n  x: getset('xyz', 0, maxfn(100)),\n  y: getset('xyz', 1, maxfn(100)),\n  z: getset('xyz', 2, maxfn(100)),\n  l: getset('lab', 0, maxfn(100)),\n  a: getset('lab', 1),\n  b: getset('lab', 2),\n  keyword: function keyword(val) {\n    if (arguments.length) {\n      return new Color(val);\n    }\n\n    return convert[this.model].keyword(this.color);\n  },\n  hex: function hex(val) {\n    if (arguments.length) {\n      return new Color(val);\n    }\n\n    return colorString.to.hex(this.rgb().round().color);\n  },\n  rgbNumber: function rgbNumber() {\n    var rgb = this.rgb().color;\n    return (rgb[0] & 0xFF) << 16 | (rgb[1] & 0xFF) << 8 | rgb[2] & 0xFF;\n  },\n  luminosity: function luminosity() {\n    // http://www.w3.org/TR/WCAG20/#relativeluminancedef\n    var rgb = this.rgb().color;\n    var lum = [];\n\n    for (var i = 0; i < rgb.length; i++) {\n      var chan = rgb[i] / 255;\n      lum[i] = chan <= 0.03928 ? chan / 12.92 : Math.pow((chan + 0.055) / 1.055, 2.4);\n    }\n\n    return 0.2126 * lum[0] + 0.7152 * lum[1] + 0.0722 * lum[2];\n  },\n  contrast: function contrast(color2) {\n    // http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n    var lum1 = this.luminosity();\n    var lum2 = color2.luminosity();\n\n    if (lum1 > lum2) {\n      return (lum1 + 0.05) / (lum2 + 0.05);\n    }\n\n    return (lum2 + 0.05) / (lum1 + 0.05);\n  },\n  level: function level(color2) {\n    var contrastRatio = this.contrast(color2);\n\n    if (contrastRatio >= 7.1) {\n      return 'AAA';\n    }\n\n    return contrastRatio >= 4.5 ? 'AA' : '';\n  },\n  isDark: function isDark() {\n    // YIQ equation from http://24ways.org/2010/calculating-color-contrast\n    var rgb = this.rgb().color;\n    var yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\n    return yiq < 128;\n  },\n  isLight: function isLight() {\n    return !this.isDark();\n  },\n  negate: function negate() {\n    var rgb = this.rgb();\n\n    for (var i = 0; i < 3; i++) {\n      rgb.color[i] = 255 - rgb.color[i];\n    }\n\n    return rgb;\n  },\n  lighten: function lighten(ratio) {\n    var hsl = this.hsl();\n    hsl.color[2] += hsl.color[2] * ratio;\n    return hsl;\n  },\n  darken: function darken(ratio) {\n    var hsl = this.hsl();\n    hsl.color[2] -= hsl.color[2] * ratio;\n    return hsl;\n  },\n  saturate: function saturate(ratio) {\n    var hsl = this.hsl();\n    hsl.color[1] += hsl.color[1] * ratio;\n    return hsl;\n  },\n  desaturate: function desaturate(ratio) {\n    var hsl = this.hsl();\n    hsl.color[1] -= hsl.color[1] * ratio;\n    return hsl;\n  },\n  whiten: function whiten(ratio) {\n    var hwb = this.hwb();\n    hwb.color[1] += hwb.color[1] * ratio;\n    return hwb;\n  },\n  blacken: function blacken(ratio) {\n    var hwb = this.hwb();\n    hwb.color[2] += hwb.color[2] * ratio;\n    return hwb;\n  },\n  grayscale: function grayscale() {\n    // http://en.wikipedia.org/wiki/Grayscale#Converting_color_to_grayscale\n    var rgb = this.rgb().color;\n    var val = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n    return Color.rgb(val, val, val);\n  },\n  fade: function fade(ratio) {\n    return this.alpha(this.valpha - this.valpha * ratio);\n  },\n  opaquer: function opaquer(ratio) {\n    return this.alpha(this.valpha + this.valpha * ratio);\n  },\n  rotate: function rotate(degrees) {\n    var hsl = this.hsl();\n    var hue = hsl.color[0];\n    hue = (hue + degrees) % 360;\n    hue = hue < 0 ? 360 + hue : hue;\n    hsl.color[0] = hue;\n    return hsl;\n  },\n  mix: function mix(mixinColor, weight) {\n    // ported from sass implementation in C\n    // https://github.com/sass/libsass/blob/0e6b4a2850092356aa3ece07c6b249f0221caced/functions.cpp#L209\n    if (!mixinColor || !mixinColor.rgb) {\n      throw new Error('Argument to \"mix\" was not a Color instance, but rather an instance of ' + typeof mixinColor);\n    }\n\n    var color1 = mixinColor.rgb();\n    var color2 = this.rgb();\n    var p = weight === undefined ? 0.5 : weight;\n    var w = 2 * p - 1;\n    var a = color1.alpha() - color2.alpha();\n    var w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;\n    var w2 = 1 - w1;\n    return Color.rgb(w1 * color1.red() + w2 * color2.red(), w1 * color1.green() + w2 * color2.green(), w1 * color1.blue() + w2 * color2.blue(), color1.alpha() * p + color2.alpha() * (1 - p));\n  }\n}; // model conversion methods and static constructors\n\nObject.keys(convert).forEach(function (model) {\n  if (skippedModels.indexOf(model) !== -1) {\n    return;\n  }\n\n  var channels = convert[model].channels; // conversion methods\n\n  Color.prototype[model] = function () {\n    if (this.model === model) {\n      return new Color(this);\n    }\n\n    if (arguments.length) {\n      return new Color(arguments, model);\n    }\n\n    var newAlpha = typeof arguments[channels] === 'number' ? channels : this.valpha;\n    return new Color(assertArray(convert[this.model][model].raw(this.color)).concat(newAlpha), model);\n  }; // 'static' construction methods\n\n\n  Color[model] = function (color) {\n    if (typeof color === 'number') {\n      color = zeroArray(_slice.call(arguments), channels);\n    }\n\n    return new Color(color, model);\n  };\n});\n\nfunction roundTo(num, places) {\n  return Number(num.toFixed(places));\n}\n\nfunction roundToPlace(places) {\n  return function (num) {\n    return roundTo(num, places);\n  };\n}\n\nfunction getset(model, channel, modifier) {\n  model = Array.isArray(model) ? model : [model];\n  model.forEach(function (m) {\n    (limiters[m] || (limiters[m] = []))[channel] = modifier;\n  });\n  model = model[0];\n  return function (val) {\n    var result;\n\n    if (arguments.length) {\n      if (modifier) {\n        val = modifier(val);\n      }\n\n      result = this[model]();\n      result.color[channel] = val;\n      return result;\n    }\n\n    result = this[model]().color[channel];\n\n    if (modifier) {\n      result = modifier(result);\n    }\n\n    return result;\n  };\n}\n\nfunction maxfn(max) {\n  return function (v) {\n    return Math.max(0, Math.min(max, v));\n  };\n}\n\nfunction assertArray(val) {\n  return Array.isArray(val) ? val : [val];\n}\n\nfunction zeroArray(arr, length) {\n  for (var i = 0; i < length; i++) {\n    if (typeof arr[i] !== 'number') {\n      arr[i] = 0;\n    }\n  }\n\n  return arr;\n}\n\nmodule.exports = Color;","export function x(p) {\n  return p[0];\n}\nexport function y(p) {\n  return p[1];\n}","import {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport { format } from 'd3-format';\nimport {\n  scaleBand,\n  scaleLinear,\n  scaleOrdinal,\n  scalePoint,\n} from 'd3-scale';\nimport { Selection } from 'd3-selection';\nimport { timeFormat } from 'd3-time-format';\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nimport {\n  IGroupData,\n  IGroupDataItem,\n} from './BaseHistogramD3';\nimport colorScheme from './colors';\nimport attrs from './d3/attrs';\nimport {\n  gridHeight,\n  gridWidth,\n  xAxisHeight,\n  yAxisWidth,\n} from './grid';\nimport {\n  EGroupedBarLayout,\n  IChartAdaptor,\n} from './Histogram';\nimport tips, { makeTip } from './tip';\nimport {\n  ITornadoDataSet,\n  ITornadoProps,\n} from './Tornado';\nimport {\n  getBarWidth,\n  groupedBarsUseSameXAxisValue,\n  groupedPaddingInner,\n  paddingInner,\n} from './utils/bars';\nimport {\n  axis as defaultAxis,\n  grid as defaultGrid,\n} from './utils/defaults';\nimport {\n  applyDomainAffordance,\n  shouldFormatTick,\n  ticks,\n  tickSize,\n} from './utils/domain';\nimport {\n  onClick,\n  onMouseOut,\n  onMouseOver,\n} from './utils/mouseOver';\nimport {\n  makeGrid,\n  makeScales,\n  makeSvg,\n  sizeSVG,\n  TSelection,\n} from './utils/svg';\nimport { DeepPartial } from './utils/types';\n\nexport const maxValueCount = (counts: ITornadoDataSet[]): number => {\n  return counts.reduce((a: number, b: ITornadoDataSet): number => {\n    return b.data.length > a ? b.data.length : a;\n  }, 0);\n};\n\n// The height for the x axis labels showing the left/right labels.\nconst SPLIT_AXIS_HEIGHT = 20;\n\nconst calculatePercents = (groupData: IGroupData) => {\n  const totals = groupData.reduce((prev, next) => {\n\n    next.forEach((datum, i) => {\n      const side = datum.side!;\n      const groupLabel = datum.groupLabel!;\n      if (!prev[groupLabel]) {\n        prev[groupLabel] = { left: 0, right: 0 };\n      }\n      prev[groupLabel][side] = prev[groupLabel][side] + datum.value;\n    })\n    return prev;\n  }, {} as Record<string, { left: number, right: number }>);\n\n\n  return groupData.map((data, i) => {\n    return data.map((datum) => {\n      const side = datum.side!;\n      const groupLabel = datum.groupLabel!;\n      const total = totals[groupLabel][side];\n      return {\n        ...datum,\n        percent: total === 0 ? 0 : Math.round(datum.value / total * 100),\n      }\n    })\n\n  });\n}\n\nexport class TornadoD3 {\n  svg: undefined | Selection<any, any, any, any>;;\n  tipContainer;\n  tipContent;\n  x = scaleLinear();\n  y = scaleBand();\n  innerScaleBand = scaleBand();\n  container: undefined | Selection<SVGElement, any, any, any>;\n  dataSets: IGroupData = [[]];\n  gridX: undefined | TSelection;\n  gridY: undefined | TSelection;\n  yAxisContainer: undefined | TSelection;\n  xAxisContainer: undefined | TSelection;\n  xAxisContainer2: undefined | TSelection;\n  yAxisLabel: undefined | TSelection;\n  xAxisLabel: undefined | TSelection;\n  domain: [number, number] = [0, 0];\n\n  props: ITornadoProps = {\n    axis: cloneDeep(defaultAxis),\n    bar: {\n      grouped: {\n        paddingInner: 0.1,\n        paddingOuter: 0,\n      },\n      paddingInner: 0.1,\n      paddingOuter: 0,\n      overlayMargin: 5,\n    },\n    className: 'torando-d3',\n    colorScheme,\n    center: true,\n    data: {\n      bins: [],\n      colorScheme: [],\n      counts: [],\n    },\n    delay: 0,\n    domain: {\n      max: null,\n      min: null,\n    },\n    duration: 400,\n    grid: defaultGrid,\n    groupLayout: EGroupedBarLayout.GROUPED,\n    height: 200,\n    margin: {\n      bottom: 0,\n      left: 5,\n      right: 0,\n      top: 5,\n    },\n    showBinPercentages: false,\n    splitBins: ['Left', 'Right'],\n    stroke: {\n      color: '#005870',\n      dasharray: '',\n      linecap: 'butt',\n      width: 0,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (bins: string[], i: number, d: number): string =>\n      bins[i] + '<br />' + d,\n    visible: {},\n    width: 200,\n  };\n\n  /**\n   * Initialization\n   */\n  create(el: Element, newProps: DeepPartial<ITornadoProps> = {}) {\n    const { props } = this;\n    this.mergeProps(newProps);\n    this.svg = makeSvg(el, undefined);\n    const { margin, width, height, className } = props;\n    sizeSVG(this.svg, { margin, width, height, className });\n    const r = makeTip(props.tipContainer, this.tipContainer);\n    this.tipContent = r.tipContent;\n    this.tipContainer = r.tipContainer;\n    [this.gridX, this.gridY] = makeGrid(this.svg);\n\n    // Used to display the 2 split bin labels\n    this.xAxisContainer2 = this.svg.append('g').attr('class', 'xAxisContainer2');\n    this.container = this.svg\n      .append<SVGElement>('g')\n      .attr('class', 'histogram-container');\n\n    // Render Axis above bars so that we can see the y axis overlaid\n    [this.xAxisContainer, this.yAxisContainer, this.xAxisLabel, this.yAxisLabel] = makeScales(this.svg);\n\n    this.update(props);\n  }\n\n  /**\n   * Draw Axes\n   */\n  drawAxes() {\n    const { props, svg, x, y, innerScaleBand, yAxisContainer, domain, xAxisContainer, xAxisContainer2 } = this;\n    const { bar, data, groupLayout, margin, width, height, axis } = props;\n    const valuesCount = maxValueCount(data.counts);\n    const w = gridWidth(props);\n    const h = gridHeight(props) - SPLIT_AXIS_HEIGHT;\n    const dataLabels = data.counts.map((c) => c.label);\n\n    y.domain(data.bins)\n      .rangeRound([h, 0])\n      .paddingInner(groupedPaddingInner(bar));\n\n    innerScaleBand\n      .domain(groupedBarsUseSameXAxisValue({ groupLayout }) ? ['main'] : dataLabels)\n      .rangeRound([0, y.bandwidth()])\n      .paddingInner(paddingInner(props.bar));\n\n    const xAxis = axisBottom<number>(x)\n      .tickFormat((v) => {\n        const n = v.toString().replace('-', '');\n\n        if (shouldFormatTick(axis.x)) {\n          if (axis.x.scale === 'TIME') {\n            return timeFormat(axis.x.dateFormat)(new Date(n));\n          }\n          return isNaN(Number(v)) ? n : format(axis.x.numberFormat)(Number(n))\n        }\n        return n;\n      });\n\n    tickSize({\n      axis: xAxis,\n      axisLength: w,\n      scaleBand: x,\n      axisConfig: axis.x,\n      limitByValues: false,\n      valuesCount: 10,\n    });\n\n    this.calculateDomain();\n\n    const x2 = scalePoint<any>();\n\n    const xGroupAxis = axisBottom(x2).tickPadding(SPLIT_AXIS_HEIGHT)\n      .tickSize(0)\n\n    x2.range([Number(width) / 4, Number(width) * (3 / 4) - (margin.top * 2) - axis.y.width])\n      .domain(props.splitBins);\n\n    /** Y-Axis (label axis) set up */\n    const yAxis = axisLeft<string>(y);\n    ticks({\n      axis: yAxis,\n      valuesCount,\n      axisLength: h,\n      axisConfig: axis.y,\n      scaleBand: y,\n      limitByValues: true,\n    });\n\n\n    // @TODO - Stacked? (was using appendDomainRange())\n    x.range([0, Number(width) - (margin.top * 2) - axis.y.width])\n      .domain(this.domain)\n      .nice();\n\n    const xAxisY = height - xAxisHeight(props.axis) - margin.top - SPLIT_AXIS_HEIGHT;\n    xAxisContainer\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        xAxisY + ')')\n      .call(xAxis);\n\n    xAxisContainer2\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        (xAxisY) + ')')\n      .call(xGroupAxis);\n\n\n    // Move the y axis ticks to the left of the chart (need to go after the x axis range set up)\n    yAxis.tickPadding(x(0) + 10)\n    yAxisContainer\n      // Place the y axis in the middle of the chart\n      ?.attr('transform', 'translate(' + (yAxisWidth(axis) + x(0)) + ', ' + margin.top + ' )')\n      .call(yAxis);\n    attrs(svg?.selectAll('.y-axis .domain, .y-axis .tick line'), axis.y.style);\n    attrs(svg?.selectAll('.y-axis .tick text'), axis.y.text.style as any);\n\n    attrs(svg?.selectAll('.x-axis .domain, .x-axis .tick line'), axis.x.style);\n    attrs(svg?.selectAll('.x-axis .tick text'), axis.x.text.style as any);\n  }\n\n  calculateDomain() {\n    const { props } = this;\n    const { data, center } = props;\n    const leftValues = data.counts.reduce((prev, next) => prev.concat(next.data[0]), [] as number[]);\n    const rightValues = data.counts.reduce((prev, next) => prev.concat(next.data[1]), [] as number[]);\n\n    // Use applyDomainAffordance to allow space for percentage labels\n    this.domain = [\n      applyDomainAffordance(-Math.max(...leftValues)),\n      applyDomainAffordance(Math.max(...rightValues)),\n    ];\n\n    // Center the 0 axis value in the middle of the chart\n    if (center) {\n      const max = Math.max(Math.max(...leftValues), this.domain[1]);\n      this.domain = [\n        applyDomainAffordance(-max),\n        applyDomainAffordance(max)];\n    }\n    return this.domain;\n  }\n\n  /**\n   * Draw a single data set into the chart\n   */\n  updateChart(\n    bins: string[],\n    groupData: IGroupData,\n  ) {\n    const { props, container, tipContainer, yAxisLabel, x, innerScaleBand, tipContent, y } = this;\n    const { axis, height, margin, delay, duration, tip, showBinPercentages } = props;\n\n    const percentData = calculatePercents(groupData);\n\n    const stackedOffset = (d: IGroupDataItem, stackIndex: number) => {\n      const w = d.side === 'left' ? -d.value : d.value;\n      return x(Math.min(0, w));\n    }\n\n    const colors = scaleOrdinal(props.colorScheme);\n    const gWidth = gridWidth(props);\n\n    const g = container\n      ?.selectAll<SVGElement, {}>('g')\n      .data(percentData);\n\n    const bars = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const xX = yAxisWidth(axis) + axis.x.style['stroke-width'];\n        return `translate(${xX}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('rect')\n      .data((d) => d);\n\n    bars\n      ?.enter()\n      .append<SVGElement>('rect')\n      .attr('width', 0)\n      .attr('x', (d) => x(0))\n      .attr('class', (d) => `bar ${d.side}`)\n      .on('click', onClick(props.onClick))\n      .on('mouseover', onMouseOver({ bins, hover: props.bar.hover, colors, tipContentFn: props.tipContentFn, tipContent, tip, tipContainer }))\n      .on('mousemove', () => tip.fx.move(tipContainer))\n      .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n      .merge(bars)\n      .attr('y', (d: IGroupDataItem, i: number) => {\n        const overlay = (props.groupLayout === EGroupedBarLayout.OVERLAID)\n          ? Math.floor(i / 2) * props.bar.overlayMargin\n          : Number(innerScaleBand(String(d.groupLabel)));\n        return overlay;\n      })\n      .attr('height', (d, i) => getBarWidth(Math.floor(i / 2), props.groupLayout, props.bar, innerScaleBand))\n      .attr('fill', (d, i) => colors(String(d.groupLabel)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', stackedOffset)\n      .attr('width', (d: IGroupDataItem): number => {\n        const w = d.side === 'left' ? -d.value : d.value;\n        return Math.abs(x(w) - x(0));\n      });\n\n    const percents = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const xX = yAxisWidth(axis) + axis.x.style['stroke-width'];\n        return `translate(${xX}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('text')\n      .data((d) => d);\n\n    percents\n      ?.enter()\n      .append<SVGElement>('text')\n      .attr('width', 0)\n      .attr('x', (d) => {\n        const w = d.side === 'left' ? -40 : 40;\n        return x(0) + w;\n      })\n      .attr('class', 'percentage-label')\n      .style('text-anchor', 'middle')\n      .style('font-size', '0.675rem')\n      .merge(percents)\n      .text((d, i) => {\n        return showBinPercentages ? `${d.percent}%` : '';\n      })\n      .attr('y', (d: IGroupDataItem, i: number) => {\n        const h = getBarWidth(0, props.groupLayout, props.bar, innerScaleBand);\n        const offset = h / 2;\n\n        // Ensure that percentage labels don't overlap\n        const verticalOffset = i < 2 ? 0 : 14;\n        return offset + verticalOffset;\n      })\n      .attr('fill', (d, i) => colors(String(d.groupLabel)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', (d) => {\n        const w = d.side === 'left' ? - 20 : 20;\n        const v = d.side === 'left' ? -d.value : d.value;\n        return x(v) + w;\n      })\n      .attr('width', (d: IGroupDataItem): number => {\n        const w = d.side === 'left' ? -d.value : d.value;\n        return Math.abs(x(w) - x(0));\n      });\n\n    percents?.exit().remove();\n\n    bars?.exit().remove();\n    g?.exit().remove();\n\n    const yText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.y.label]);\n\n    yText?.enter().append('text')\n      .attr('class', 'y-axis-label')\n      .merge(yText)\n      .attr('transform',\n        'translate(' + 0 + ' ,' +\n        ((height - yAxisWidth(props.axis) - (margin.left * 2)) + axis.x.margin) + ')')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n\n    const xText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.x.label]);\n\n    xText?.enter().append('text')\n      .attr('class', 'x-axis-label')\n      .merge(xText)\n      .attr('transform', 'rotate(-90)')\n      .attr('y', 0)\n      .attr('x', 0 - (gWidth / 2 - (margin.top * 2)))\n      .attr('dy', '1em')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n  }\n\n  mergeProps(newProps: DeepPartial<ITornadoProps>) {\n    const { props } = this;\n\n    const customerizer = (objValue, srcValue, key, object, source, stack) => {\n      if (['data'].includes(key)) {\n        return srcValue;\n      }\n    }\n    mergeWith(props, newProps, customerizer);\n  }\n\n  /**\n   * Update chart\n   */\n  update(newProps: DeepPartial<ITornadoProps>) {\n    const { props } = this;\n    if (!props.data) {\n      return;\n    }\n    if (!props.data.bins) {\n      return;\n    }\n    this.mergeProps(newProps);\n    const { margin, width, height, className, data, visible } = props;\n    sizeSVG(this.svg, { margin, width, height, className });\n    this.dataSets = [];\n\n    data.counts.forEach((count) => {\n      count.data.forEach((value, genderIndex) => {\n        value.forEach((aValue, rowIndex) => {\n          if (!this.dataSets[rowIndex]) {\n            this.dataSets[rowIndex] = [];\n          }\n          this.dataSets[rowIndex].push({\n            side: genderIndex === 0 ? 'left' : 'right',\n            groupLabel: count.label,\n            colorRef: count.label,\n            label: data.bins[rowIndex],\n            value: visible[data.bins[rowIndex]] !== false && visible[count.label] !== false ? aValue : 0,\n          });\n        })\n\n      });\n    });\n    this.drawAxes();\n    // @TODO add back in,\n    // drawHorizontalGrid<any>({ x, y, gridX, gridY, props, ticks: maxValueCount(data.counts) });\n    this.updateChart(data.bins, this.dataSets);\n  }\n\n  /**\n   * Any necessary clean up\n   */\n  destroy() {\n    this.svg?.selectAll('svg > *').remove();\n  }\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { IGroupDataItem } from './BaseHistogramD3';\nimport {\n  EGroupedBarLayout,\n  IAxes,\n  IChartAdaptor,\n  IChartState,\n  IDomain,\n  IGrid,\n  IHistogramBar,\n  IMargin,\n  IStroke,\n  TipContentFn,\n} from './Histogram';\nimport { TornadoD3 } from './TornadoD3';\nimport { DeepPartial } from './utils/types';\n\nexport interface ITornadoDataSet {\n  borderColors?: string[];\n  colors?: string[];\n  label: string;\n  data: [number[], number[]];\n}\n\nexport interface ITornadoData {\n  bins: string[];\n  counts: ITornadoDataSet[];\n  colorScheme?: string[];\n  title?: string;\n}\n\nexport interface ITornadoProps {\n  axis: IAxes;\n  bar: IHistogramBar;\n  center: boolean;\n  className: string;\n  data: ITornadoData;\n  delay: number;\n  duration: number;\n  colorScheme: string[];\n  domain: IDomain;\n  grid: IGrid;\n  height: number;\n  margin: IMargin;\n  groupLayout: EGroupedBarLayout;\n  onClick?: (bar: IGroupDataItem) => void;\n  showBinPercentages: boolean;\n  splitBins: [string, string];\n  stroke: IStroke;\n  tip: any;\n  tipContainer: string;\n  tipContentFn: TipContentFn<string>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\n/**\n * Tornado component\n */\nclass Tornado extends Component<DeepPartial<ITornadoProps>, IChartState> {\n\n  private chart: IChartAdaptor<ITornadoProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<ITornadoProps>) {\n    super(props);\n    this.chart = new TornadoD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.chart.update(this.getChartState()));\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<ITornadoProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    this.chart.destroy();\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"tornado-chart-container\"></div>);\n  }\n}\n\nexport default Tornado;\n","module.exports = function isArrayish(obj) {\n  if (!obj || typeof obj === 'string') {\n    return false;\n  }\n\n  return obj instanceof Array || Array.isArray(obj) || obj.length >= 0 && (obj.splice instanceof Function || Object.getOwnPropertyDescriptor(obj, obj.length - 1) && obj.constructor.name !== 'String');\n};","var conversions = require('./conversions');\n\nvar route = require('./route');\n\nvar convert = {};\nvar models = Object.keys(conversions);\n\nfunction wrapRaw(fn) {\n  var wrappedFn = function wrappedFn(args) {\n    if (args === undefined || args === null) {\n      return args;\n    }\n\n    if (arguments.length > 1) {\n      args = Array.prototype.slice.call(arguments);\n    }\n\n    return fn(args);\n  }; // preserve .conversion property if there is one\n\n\n  if ('conversion' in fn) {\n    wrappedFn.conversion = fn.conversion;\n  }\n\n  return wrappedFn;\n}\n\nfunction wrapRounded(fn) {\n  var wrappedFn = function wrappedFn(args) {\n    if (args === undefined || args === null) {\n      return args;\n    }\n\n    if (arguments.length > 1) {\n      args = Array.prototype.slice.call(arguments);\n    }\n\n    var result = fn(args); // we're assuming the result is an array here.\n    // see notice in conversions.js; don't use box types\n    // in conversion functions.\n\n    if (typeof result === 'object') {\n      for (var len = result.length, i = 0; i < len; i++) {\n        result[i] = Math.round(result[i]);\n      }\n    }\n\n    return result;\n  }; // preserve .conversion property if there is one\n\n\n  if ('conversion' in fn) {\n    wrappedFn.conversion = fn.conversion;\n  }\n\n  return wrappedFn;\n}\n\nmodels.forEach(function (fromModel) {\n  convert[fromModel] = {};\n  Object.defineProperty(convert[fromModel], 'channels', {\n    value: conversions[fromModel].channels\n  });\n  Object.defineProperty(convert[fromModel], 'labels', {\n    value: conversions[fromModel].labels\n  });\n  var routes = route(fromModel);\n  var routeModels = Object.keys(routes);\n  routeModels.forEach(function (toModel) {\n    var fn = routes[toModel];\n    convert[fromModel][toModel] = wrapRounded(fn);\n    convert[fromModel][toModel].raw = wrapRaw(fn);\n  });\n});\nmodule.exports = convert;","import { bisector, tickStep } from \"d3-array\";\nimport { timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond } from \"d3-time\";\nimport { timeFormat } from \"d3-time-format\";\nimport continuous, { copy } from \"./continuous.js\";\nimport { initRange } from \"./init.js\";\nimport nice from \"./nice.js\";\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n  var tickIntervals = [[second, 1, durationSecond], [second, 5, 5 * durationSecond], [second, 15, 15 * durationSecond], [second, 30, 30 * durationSecond], [minute, 1, durationMinute], [minute, 5, 5 * durationMinute], [minute, 15, 15 * durationMinute], [minute, 30, 30 * durationMinute], [hour, 1, durationHour], [hour, 3, 3 * durationHour], [hour, 6, 6 * durationHour], [hour, 12, 12 * durationHour], [day, 1, durationDay], [day, 2, 2 * durationDay], [week, 1, durationWeek], [month, 1, durationMonth], [month, 3, 3 * durationMonth], [year, 1, durationYear]];\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond : minute(date) < date ? formatSecond : hour(date) < date ? formatMinute : day(date) < date ? formatHour : month(date) < date ? week(date) < date ? formatDay : formatWeek : year(date) < date ? formatMonth : formatYear)(date);\n  }\n\n  function tickInterval(interval, start, stop) {\n    if (interval == null) interval = 10; // If a desired tick count is specified, pick a reasonable tick interval\n    // based on the extent of the domain and a rough estimate of tick size.\n    // Otherwise, assume interval is already a time interval and use it.\n\n    if (typeof interval === \"number\") {\n      var target = Math.abs(stop - start) / interval,\n          i = bisector(function (i) {\n        return i[2];\n      }).right(tickIntervals, target),\n          step;\n\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, interval);\n        interval = year;\n      } else if (i) {\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n        step = i[1];\n        interval = i[0];\n      } else {\n        step = Math.max(tickStep(start, stop, interval), 1);\n        interval = millisecond;\n      }\n\n      return interval.every(step);\n    }\n\n    return interval;\n  }\n\n  scale.invert = function (y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function (_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function (interval) {\n    var d = domain(),\n        t0 = d[0],\n        t1 = d[d.length - 1],\n        r = t1 < t0,\n        t;\n    if (r) t = t0, t0 = t1, t1 = t;\n    t = tickInterval(interval, t0, t1);\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n\n    return r ? t.reverse() : t;\n  };\n\n  scale.tickFormat = function (count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function (interval) {\n    var d = domain();\n    return (interval = tickInterval(interval, d[0], d[d.length - 1])) ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function () {\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n  };\n\n  return scale;\n}\nexport default function () {\n  return initRange.apply(calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}","var noop = {\n  value: function value() {}\n};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || t in _) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function (t) {\n    var name = \"\",\n        i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {\n      type: t,\n      name: name\n    };\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function on(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length; // If no callback was specified, return the callback of the given type and name.\n\n    if (arguments.length < 2) {\n      while (++i < n) {\n        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      }\n\n      return;\n    } // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n\n\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);else if (callback == null) for (t in _) {\n        _[t] = set(_[t], typename.name, null);\n      }\n    }\n\n    return this;\n  },\n  copy: function copy() {\n    var copy = {},\n        _ = this._;\n\n    for (var t in _) {\n      copy[t] = _[t].slice();\n    }\n\n    return new Dispatch(copy);\n  },\n  call: function call(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) {\n      args[i] = arguments[i + 2];\n    }\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  },\n  apply: function apply(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n\n  if (callback != null) type.push({\n    name: name,\n    value: callback\n  });\n  return type;\n}\n\nexport default dispatch;","import { extent } from 'd3-array';\nimport { schemeSet3 } from 'd3-scale-chromatic';\nimport React, { FC } from 'react';\nimport { SpringConfig } from 'react-spring';\n\nimport HistogramBars from '../components/Bars/HistogramBars';\nimport Base from '../components/Base';\nimport Grid from '../components/Grid';\nimport { TLabelComponent } from '../components/Label';\nimport { TTipFunc } from '../components/ToolTip';\nimport XAxis from '../components/XAxis';\nimport YAxis, {\n  ELabelOrientation,\n  TAxisLabelFormat,\n} from '../components/YAxis';\nimport {\n  IGrid,\n  IHistogramData,\n} from '../Histogram';\nimport { EChartDirection } from './BarChart';\n\nexport interface IHistogramProps {\n  animation?: SpringConfig;\n  axisLabelFormat?: TAxisLabelFormat;\n  colorScheme?: string[];\n  data: IHistogramData;\n  direction?: EChartDirection;\n  grid?: IGrid;\n  height: number;\n  LabelComponent?: TLabelComponent;\n  hoverColorScheme?: string[];\n  showLabels?: boolean[];\n  tip?: TTipFunc;\n  visible?: Record<string, boolean>;\n  width: number;\n  xAxisHeight?: number;\n  xAxisLabelOrientation?: ELabelOrientation;\n  yAxisWidth?: number;\n}\n\n/**\n * A Histogram renders continuous data and thus use a ScaleLinear x & y axis \n */\nconst Histogram: FC<IHistogramProps> = ({\n  animation,\n  axisLabelFormat,\n  colorScheme = schemeSet3,\n  data,\n  direction = EChartDirection.VERTICAL,\n  grid,\n  height,\n  hoverColorScheme,\n  LabelComponent,\n  showLabels = [],\n  tip,\n  visible,\n  width,\n  xAxisHeight,\n  xAxisLabelOrientation = ELabelOrientation.HORIZONTAL,\n  yAxisWidth,\n}) => {\n  if (!yAxisWidth) {\n    yAxisWidth = direction === EChartDirection.VERTICAL ? 40 : 100;\n  }\n  if (!xAxisHeight) {\n    xAxisHeight = direction === EChartDirection.VERTICAL ? 100 : 40;\n  }\n\n  if (width === 0) {\n    return null;\n  }\n\n  const bins = data.bins.reduce((p, n) => p.concat(Array.isArray(n) ? n : [n]), [] as number[]);\n  const continuousDomain = extent(bins) as [number, number];\n  const domain = extent(data.counts.reduce((p, n) => p.concat(n.data), [] as number[])) as [number, number];\n\n  return (\n    <Base\n      width={width + 30} // @TODO work out why without this the bars exceed the chart\n      height={height}>\n\n      {\n        grid && <Grid\n          left={yAxisWidth}\n          height={height - xAxisHeight}\n          svgProps={{ ...grid.x.style }}\n          lines={{\n            vertical: grid.y.ticks,\n            horizontal: grid.x.ticks,\n          }}\n          width={width - yAxisWidth} />\n      }\n\n      <HistogramBars\n        colorScheme={colorScheme}\n        hoverColorScheme={hoverColorScheme}\n        left={yAxisWidth}\n        height={height - xAxisHeight}\n        width={width - yAxisWidth}\n        values={data.counts}\n        config={animation}\n        bins={data.bins}\n        showLabels={showLabels}\n        direction={direction}\n        LabelComponent={LabelComponent}\n        domain={domain}\n        continuousDomain={continuousDomain}\n        tip={tip}\n        visible={visible}\n      />\n\n      <YAxis\n        width={yAxisWidth}\n        height={height - xAxisHeight}\n        labelFormat={axisLabelFormat}\n        scale=\"linear\"\n        domain={direction === EChartDirection.HORIZONTAL ? continuousDomain : domain}\n        values={direction === EChartDirection.HORIZONTAL\n          ? [\n            continuousDomain[0],\n            ((continuousDomain[1] - continuousDomain[0]) * 1) / 3,\n            ((continuousDomain[1] - continuousDomain[0]) * 2) / 3,\n            continuousDomain[1],\n          ]\n          : domain\n        }\n      />\n\n      <XAxis\n        width={width - yAxisWidth}\n        height={xAxisHeight}\n        top={height - xAxisHeight}\n        left={yAxisWidth}\n        labelFormat={axisLabelFormat}\n        labelOrientation={xAxisLabelOrientation}\n        scale=\"linear\"\n        domain={direction === EChartDirection.HORIZONTAL ? domain : continuousDomain}\n        values={direction === EChartDirection.HORIZONTAL\n          ? domain\n          : [\n            continuousDomain[0],\n            ((continuousDomain[1] - continuousDomain[0]) * 1) / 3,\n            ((continuousDomain[1] - continuousDomain[0]) * 2) / 3,\n            continuousDomain[1],\n          ]}\n      />\n\n    </Base>\n  )\n\n}\n\nexport default Histogram;\n","import { interpolate } from 'd3-interpolate';\nimport React, {\n  FC,\n  useLayoutEffect,\n  useRef,\n} from 'react';\nimport {\n  animated,\n  useSpring,\n} from 'react-spring';\n\nimport { IAxes } from '../Histogram';\nimport {\n  IChartPoint,\n  IChartPointValue,\n  ILineProps,\n} from '../LineChart';\nimport { useMakeArea } from '../utils/useMakeLine';\n\ninterface IProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  label?: string;\n  line: ILineProps;\n  width: number;\n  left: number;\n  height: number;\n  axis: IAxes;\n  data: T[];\n}\n\nconst AreaFill: FC<IProps> = (props) => {\n  const { label = '', line } = props;\n  const className = `area-${label.replace(/[^a-z]/gi, '')}`;\n  const { previous, current } = useMakeArea(props);\n\n  const spring = useSpring<any>({\n    from: { t: 0 },\n    to: { t: 1 },\n    reset: true,\n    delay: 0\n  });\n\n  const getInterpolator = () => interpolate(previous, current);\n\n  const interpolator = useRef(getInterpolator());\n  useLayoutEffect(() => {\n    interpolator.current = getInterpolator();\n  });\n\n  return (\n    <>\n      <animated.path\n        className={className}\n        fill={line.fill.fill}\n        d={spring.t.interpolate((t) => interpolator.current(t))}\n      />\n    </>\n  )\n}\n\nexport default AreaFill;\n","import React, { FC } from 'react';\n\nimport {\n  IProps,\n  useScales,\n} from '../utils/useMakeLine';\n\nconst Points: FC<Omit<IProps, 'line'> & {\n  radius?: number;\n  fill?: string;\n  stroke?: string;\n}> = (props) => {\n  const { data, radius = 5, fill = '#000', stroke = '#000' } = props;\n  const { xScale, yScale } = useScales(props);\n\n  if (yScale === null) {\n    return null;\n  }\n\n  return <>\n    {\n      data.map((d) => {\n        const { x, y, ...rest } = d;\n        const yValue = yScale(y);\n        const xValue = xScale(x);\n        return <circle\n          key={`point-${xValue}-${yValue}`}\n          className={`point-${xValue}-${yValue}`}\n          r={radius}\n          cy={yValue}\n          cx={xValue}\n          fill={fill}\n          stroke={stroke}\n          {...rest}\n        />\n      })\n    }\n  </>\n}\n\nexport default Points;\n","import React, { FC } from 'react';\n\nimport AreaFill from '../components/AreaFill';\nimport Base from '../components/Base';\nimport Grid from '../components/Grid';\nimport Line from '../components/Line';\nimport Points from '../components/Points';\nimport XAxis from '../components/XAxis';\nimport YAxis from '../components/YAxis';\nimport {\n  IAxes,\n  IGrid,\n} from '../Histogram';\nimport {\n  IChartPoint,\n  IChartPointValue,\n  ILineChartDataSet,\n} from '../LineChart';\nimport { useLineDomain } from '../utils/useDomain';\n\ninterface IProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  axis: IAxes;\n  data: ILineChartDataSet<T>[];\n  grid: IGrid;\n  height: number;\n  width: number;\n  xAxisHeight?: number;\n  yAxisWidth?: number;\n}\nconst LineChart: FC<IProps> = ({\n  axis,\n  data,\n  grid,\n  height,\n  width,\n  xAxisHeight = 60,\n  yAxisWidth = 100,\n}) => {\n  const domain = useLineDomain({\n    values: data,\n  });\n  return (\n    <Base\n      width={width}\n      height={height}>\n\n      <Grid\n        left={yAxisWidth}\n        height={height - xAxisHeight}\n        svgProps={{ ...grid.x.style }}\n        lines={{\n          vertical: grid.y.ticks,\n          horizontal: grid.x.ticks,\n        }}\n        width={width - yAxisWidth} />\n      {\n        data.map((item) => <> <Line\n          axis={axis}\n          key={item.label}\n          label={item.label}\n          line={item.line}\n          width={width - yAxisWidth}\n          left={yAxisWidth}\n          height={height - xAxisHeight}\n          data={item.data} />\n          {\n\n            item.point.show &&\n            <Points\n              axis={axis}\n              key={item.label}\n              width={width - yAxisWidth}\n              left={yAxisWidth}\n              height={height - xAxisHeight}\n              radius={item.point.radius}\n              fill={item.point.fill}\n              stroke={item.point.stroke}\n              data={item.data} />\n          }\n\n          {\n            item.line.fill.show && <AreaFill\n              axis={axis}\n              key={item.label}\n              width={width - yAxisWidth}\n              left={yAxisWidth}\n              height={height - xAxisHeight}\n              line={item.line}\n              data={item.data} />\n          }\n        </>)}\n\n      <YAxis\n        width={yAxisWidth}\n        height={height - xAxisHeight}\n        // values={[0, 1000, 2000]}\n        scale=\"linear\"\n        domain={domain}\n      />\n\n      <XAxis\n        width={width - yAxisWidth}\n        height={xAxisHeight}\n        top={height - xAxisHeight}\n        left={yAxisWidth} />\n\n    </Base>\n  )\n}\n\nexport default LineChart;\n","import { extent } from 'd3-array';\nimport {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport { Selection } from 'd3-selection';\nimport {\n  area,\n  curveCatmullRom,\n  CurveFactory,\n  line,\n} from 'd3-shape';\nimport {\n  timeFormat,\n  timeParse,\n} from 'd3-time-format';\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nimport attrs from './d3/attrs';\nimport {\n  drawGrid,\n  gridHeight,\n  gridWidth,\n  yAxisWidth as getYAxisWidth,\n} from './grid';\nimport { IChartAdaptor } from './Histogram';\nimport {\n  IChartPoint,\n  ILineChartDataSet,\n  ILineChartProps,\n  ILineProps,\n  ISVGPoint,\n} from './LineChart';\nimport tips, { makeTip } from './tip';\nimport {\n  axis as defaultAxis,\n  grid as defaultGrid,\n  lineStyle,\n} from './utils/defaults';\nimport {\n  rangeAffordance,\n  ticks,\n} from './utils/domain';\nimport { buildScales } from './utils/scales';\nimport {\n  makeGrid,\n  makeScales,\n  makeSvg,\n  sizeSVG,\n  TSelection,\n} from './utils/svg';\nimport { DeepPartial } from './utils/types';\n\nconst ZERO_SUBSTITUTE: number = 1e-6;\n\nexport const lineChartD3 = ((): IChartAdaptor<ILineChartProps> => {\n  let svg: TSelection;\n  let tipContainer: any;\n  let xParseTime: (x: string) => Date | null;\n  let xFormatTime: (v: any) => string;\n  let tipContent: {\n    html: (fn: any) => string,\n  };\n\n  const lineProps: ILineProps = {\n    curveType: curveCatmullRom,\n    fill: {\n      fill: '#eee',\n      show: false,\n    },\n    show: true,\n    stroke: '#005870',\n    strokeDashArray: '5 5',\n    strokeDashOffset: 0,\n  };\n\n  const pointProps: ISVGPoint = {\n    ...lineStyle,\n    fill: 'rgba(255, 255, 255, 0)',\n    radius: 4,\n    show: true,\n    stroke: '#005870',\n  };\n\n  const props: ILineChartProps = {\n    axis: cloneDeep(defaultAxis),\n    className: 'line-chart-d3',\n    data: [],\n    grid: defaultGrid,\n    height: 250,\n    margin: {\n      bottom: 0,\n      left: 5,\n      right: 0,\n      top: 5,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (info, i, d) => {\n      switch (typeof info[i].x) {\n        case 'object': // date\n          return xFormatTime(info[i].x) + ', ' + info[i].y;\n        default:\n          return Number(info[i].x).toFixed(3) + ', ' + info[i].y;\n      }\n    },\n    visible: {},\n    width: 200,\n  };\n\n  const datumProps = {\n    line: lineProps,\n    point: pointProps,\n  };\n\n  const curve = (\n    dataset: ILineChartDataSet<any>,\n    x: (x: number) => number,\n    y: (y: number) => number,\n  ) => line()\n    .curve(dataset.line.curveType)\n    .x((d: any) => x(d.x))\n    .y((d: any) => y(d.y));\n\n  let container: Selection<SVGElement, any, any, any>;\n  let lineContainer: TSelection;\n  let gridX: TSelection;\n  let gridY: TSelection;\n  let xScale: any; // AnyScale;\n  let yScale: any; // AnyScale;\n  let xAxisContainer: TSelection;\n  let yAxisContainer: TSelection;\n  let xAxisLabel: TSelection;\n  let yAxisLabel: TSelection;\n\n  const xOffset = (d: ILineChartDataSet<any>) => {\n    return d.point.show ? d.point.radius / 2 : 0;\n  };\n\n  const LineChartD3 = {\n    /**\n     * Initialization\n     */\n    create(el: Element, newProps: DeepPartial<ILineChartProps> = {}) {\n      this.mergeProps(newProps);\n      svg = makeSvg(el, svg);\n      const { margin, width, height, className } = props;\n      sizeSVG(svg, { margin, width, height, className });\n      const r = makeTip(props.tipContainer, tipContainer);\n      tipContent = r.tipContent;\n      tipContainer = r.tipContainer;\n      [xScale, yScale] = buildScales(props.axis);\n      [xAxisContainer, yAxisContainer, xAxisLabel, yAxisLabel] = makeScales(svg);\n      [gridX, gridY] = makeGrid(svg);\n      const yAxisWidth = getYAxisWidth(props.axis);\n      container = svg\n        .append<SVGElement>('g')\n        .attr('class', 'linechart-container')\n        .attr('transform', `translate(${yAxisWidth}, 0)`)\n\n      lineContainer = container\n        .append<SVGElement>('g')\n        .attr('class', 'line-container');\n      this.update(props);\n    },\n\n    mergeProps(newProps: DeepPartial<ILineChartProps>) {\n      const customerizer = (objValue, srcValue, key, object, source, stack) => {\n        if (key === 'data') {\n          return srcValue;\n        }\n      }\n      mergeWith(props, newProps, customerizer);\n    },\n\n    /**\n     * Iterate over the dataset drawing points for sets marked as\n     * requiring points.\n     */\n    _drawDataPointSet(data: ILineChartProps['data']) {\n      const { tip, tipContentFn } = props;\n\n      const pointContainer = container.selectAll<SVGElement, {}>('g').data(data);\n\n      // Don't ask why but we must reference tipContentFn as props.tipContentFn otherwise\n      // it doesn't update with props changes\n      const onMouseOver = (d: any) => {\n        tipContent.html(() => tipContentFn([d as any], 0, 0, ''));\n        tip.fx.in(tipContainer);\n      };\n      const onMouseMove = () => tip.fx.move(tipContainer);\n      const onMouseOut = () => tip.fx.out(tipContainer);\n\n      const points = pointContainer.enter()\n        .append<SVGElement>('g')\n        .attr('class', (d, i: number) => 'point-container' + i)\n        .merge(pointContainer)\n        .selectAll<SVGElement, {}>('circle')\n        .data((d: ILineChartDataSet<any>) => {\n          return d.data.map((dx) => ({\n            ...dx,\n            point: d.point,\n          }));\n        });\n\n      // UPDATE - Update old elements as needed.\n      points.attr('class', 'update');\n\n      // ENTER + UPDATE\n      // After merging the entered elements with the update selection,\n      // apply operations to both.\n      points.enter().append<SVGElement>('circle')\n        .attr('class', 'enter')\n        .on('mouseover', onMouseOver)\n        .on('mousemove', onMouseMove)\n        .on('mouseout', onMouseOut)\n        .merge(points)\n        .attr('class', 'point')\n        .attr('cy', (d) => yScale(d.y))\n        .attr('r', (d, i: number) => 0)\n        .attr('fill', (d) => d.point.fill)\n        .attr('stroke', (d) => d.point.stroke)\n        .attr('cx', (d) => {\n          return xScale(d.x);\n        })\n        .transition()\n        .duration(400)\n        .attr('r', (d: ILineChartDataSet<any>) => xOffset(d) * 2)\n        .delay(650);\n\n      // EXIT - Remove old elements as needed.\n      pointContainer.exit().remove();\n      points.exit().remove();\n    },\n\n    /**\n     * Draw the chart axes\n     */\n    drawAxes() {\n      const { axis, data } = props;\n      const valuesCount = data.reduce((a: number, b): number => {\n        return b.data.length > a ? b.data.length : a;\n      }, 0)\n      const w = gridWidth(props);\n      const h = gridHeight(props);\n      const ys: any[] = [];\n      const xs: any[] = [];\n\n      const yAxis = axisLeft<number>(yScale);\n      const xAxis = axisBottom<number | string>(xScale);\n\n      ticks({\n        axis: xAxis,\n        valuesCount,\n        axisLength: w,\n        axisConfig: axis.x,\n        scaleBand: xScale,\n        limitByValues: true,\n      });\n\n      ticks({\n        axis: yAxis,\n        valuesCount,\n        axisLength: h,\n        axisConfig: axis.y,\n        scaleBand: yScale,\n        limitByValues: true,\n      });\n\n      const yAxisWidth = getYAxisWidth(axis);\n\n      data.forEach((datum) => {\n        datum.data.forEach((d) => {\n          let parsedY = d.y;\n          let parsedX = d.x;\n          if (axis.y.scale === 'LOG' && d.y === 0) {\n            parsedY = ZERO_SUBSTITUTE;\n          }\n          if (axis.x.scale === 'LOG' && d.x === 0) {\n            parsedX = ZERO_SUBSTITUTE;\n          }\n          ys.push(parsedY);\n          xs.push(parsedX);\n        });\n      });\n      const yDomain = rangeAffordance(extent(ys), axis.y);\n      const xDomain = rangeAffordance(extent(xs), axis.x);\n\n      xScale\n        .domain(xDomain)\n        .rangeRound([0, w]);\n      yScale.domain(yDomain)\n        .range([h, 0]);\n\n      yAxisContainer\n        .attr('transform', `translate(${yAxisWidth}, 0)`)\n        .transition()\n        .call(yAxis);\n\n      xAxisContainer\n        .attr('transform', `translate(${yAxisWidth + axis.y.style['stroke-width']},${h})`)\n        .call(xAxis);\n\n      attrs(svg.selectAll('.y-axis .domain, .y-axis .tick line'), axis.y.style);\n      attrs(svg.selectAll('.y-axis .tick text'), axis.y.text.style as any);\n\n      attrs(svg.selectAll('.x-axis .domain, .x-axis .tick line'), axis.x.style);\n      attrs(svg.selectAll('.x-axis .tick text'), axis.x.text.style as any);\n    },\n\n    /**\n     * Iterate over data and update lines\n     */\n    _drawLines(data: ILineChartDataSet<any>[], oldData: ILineChartDataSet<any>[]) {\n\n      // Remove old lines\n      oldData.forEach((d, i) => {\n        const keep = data.find(((newD) => newD.label === d.label));\n        if (keep === undefined) {\n          const l = d.label.replace(/[^a-z]/gi, '');\n          lineContainer.select(`.line-${l}`)\n            .remove();\n        }\n      })\n\n      // change the line\n      data.forEach((d, i) => {\n        const selector = `line-${d.label.replace(/[^a-z]/gi, '')}`;\n        let selection = lineContainer.select(`.${selector}`)\n        if (selection.empty()) {\n          lineContainer.append('path')\n            .attr('class', selector);\n          selection = lineContainer.select(`.${selector}`)\n        }\n        selection\n          .attr('fill', 'none')\n          .attr('stroke-dashoffset', d.line.strokeDashOffset)\n          .attr('stroke-dasharray', d.line.strokeDashOffset)\n          .attr('stroke', d.line.stroke)\n          .transition()\n          .duration(500)\n          .attr('d', curve(d, xScale, yScale)(d.data as any) as any)\n          .delay(50);\n      });\n    },\n\n    /**\n     * Iterates ove data and updates area fills\n     */\n    drawAreas(data: ILineChartDataSet<any>[], oldData: ILineChartDataSet<any>[]) {\n      const h = gridHeight(props);\n      const thisArea = (dataset: ILineChartDataSet<any>) => area()\n        .curve(dataset.line.curveType as CurveFactory)\n        .x((d: any) => xScale(d.x))\n        .y0((d) => h)\n        .y1((d: any) => yScale(d.y));\n\n      // Remove old lines\n      oldData.forEach((d, i) => {\n        const keep = data.find(((newD) => newD.label === d.label));\n        if (keep === undefined) {\n          const l = d.label.replace(/[^a-z]/gi, '');\n          lineContainer.select(`.fill-${l}`).remove();\n        }\n      })\n\n      // change the line\n      data\n        .forEach((d, i) => {\n          const selector = `fill-${d.label.replace(/[^a-z]/gi, '')}`;\n          let selection = lineContainer.select(`.${selector}`);\n          if (selection.empty()) {\n            lineContainer.append('path')\n              .attr('class', selector);\n            selection = lineContainer.select(`.${selector}`)\n\n          }\n          selection\n            .attr('fill', d.line.fill.fill)\n            .style('opacity', d.line.show && d.line.fill.show ? 1 : 0)\n            .transition()\n            .duration(500)\n            .delay(50)\n            .attr('d', thisArea(d)(d.data) as any);\n        });\n    },\n\n    /**\n     * Get a max count of values in each data set\n     */\n    valuesCount(data: ILineChartProps['data']): number {\n      return data.reduce((a: number, b): number => {\n        return b.data.length > a ? b.data.length : a;\n      }, 0);\n    },\n\n    /**\n     * Update chart\n     */\n    update(newProps: DeepPartial<ILineChartProps>) {\n      if (!newProps.data) {\n        return;\n      }\n      const oldData = [...props.data];\n      this.mergeProps(newProps);\n      const { margin, width, height, className } = props;\n      sizeSVG(svg, { margin, width, height, className });\n      [xScale, yScale] = buildScales(props.axis);\n      let data = [...props.data];\n\n      xParseTime = timeParse(props.axis.x.dateFormat);\n      xFormatTime = timeFormat(props.axis.x.dateFormat);\n      data = data.map((datum) => {\n        if (props.axis.x.scale === 'TIME') {\n          datum.data = datum.data.map((d) => {\n            const newd: IChartPoint<any> = {\n              ...d,\n              x: typeof d.x === 'object'\n                ? d.x\n                : xParseTime(d.x.toString()),\n            };\n            return newd;\n          });\n        }\n        // Assign in default line & point styles\n        return Object.assign({}, datumProps, datum);\n      });\n      this.drawAxes();\n      this._drawLines(data, oldData);\n      this.drawAreas(data, oldData);\n      drawGrid(xScale, yScale, gridX, gridY, props, this.valuesCount(data));\n      this._drawDataPointSet(data);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n  return LineChartD3;\n});\n","import {\n  CurveFactory,\n  CurveFactoryLineOnly,\n} from 'd3-shape';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  IAxes,\n  IChartAdaptor,\n  IGrid,\n  IMargin,\n  ISVGLineStyle,\n  TipContentFn,\n} from './Histogram';\nimport { lineChartD3 } from './lineChartD3';\nimport { DeepPartial } from './utils/types';\n\ninterface IState {\n  parentWidth?: number;\n}\n\nexport type IChartPointValue = number | string | Date | object;\nexport interface IChartPoint<X extends IChartPointValue = Date | number | string, Y extends IChartPointValue = number> {\n  x: X;\n  y: Y;\n}\nexport interface ILineProps {\n  show: boolean;\n  fill: {\n    show: boolean;\n    fill: string;\n  };\n  curveType: CurveFactory | CurveFactoryLineOnly;\n  stroke: string;\n  strokeDashOffset: number;\n  strokeDashArray: string;\n}\n\nexport interface ILineChartDataSet<T> {\n  label: string;\n  point: {\n    radius: number;\n    stroke: string;\n    fill: string;\n    show: boolean;\n  };\n  line: ILineProps;\n  data: T[];\n}\n\nexport interface ISVGPoint extends ISVGLineStyle {\n  radius?: 4;\n  show: boolean;\n}\n\nexport interface ILineChartProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  axis: IAxes;\n  className: string;\n  data: ILineChartDataSet<T>[];\n  grid: IGrid;\n  height: number | string;\n  margin: IMargin;\n  tip: any;\n  tipContainer?: string;\n  tipContentFn: TipContentFn<{ x: string | number, y: string | number }>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\nclass LineChart extends React.Component<DeepPartial<ILineChartProps>, IState> {\n\n  private chart: IChartAdaptor<ILineChartProps>;\n  private ref: HTMLDivElement | null = null;\n\n  constructor(props: DeepPartial<ILineChartProps>) {\n    super(props);\n    this.chart = lineChartD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.chart.update(this.getChartState()));\n\n  }\n\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state. If a histogram has been assigned\n   * to the props, then render this data. Otherwise generate\n   * a random normal dist\n   */\n  public getChartState(): DeepPartial<ILineChartProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  public componentWillUnmount() {\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.destroy();\n  }\n\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  public render(): JSX.Element {\n    return <div ref={(ref) => this.ref = ref} className=\"chart-container\"></div>;\n  }\n}\n\nexport default LineChart;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  IChartAdaptor,\n  IChartState,\n} from './Histogram';\nimport { scatterPlotD3 } from './ScatterPlotD3';\nimport { DeepPartial } from './utils/types';\n\nexport interface IScatterPlotProps {\n  choices: string[];\n  className: string;\n  data: {\n    keys: string[],\n    values: any[];\n  };\n  delay: number;\n  distModels: string[];\n  duration: number;\n  height: number;\n  legendWidth: number;\n  colorScheme: string[];\n  padding: number;\n  radius: number;\n  split: string;\n  width: string | number;\n}\nclass ScatterPlot extends Component<DeepPartial<IScatterPlotProps>, IChartState> {\n\n  private chart: IChartAdaptor<IScatterPlotProps>;\n  private ref: HTMLDivElement | null = null;\n\n  public static defaultProps = {\n    height: 400,\n    width: '100%',\n  };\n\n  constructor(props: IScatterPlotProps) {\n    super(props);\n    this.chart = scatterPlotD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (el) {\n      const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n      this.setState({\n        parentWidth: width,\n      }, () => this.chart.update(this.getChartState()));\n    }\n  }\n\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    const { width } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  private getChartState(): DeepPartial<IScatterPlotProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  public componentWillReceiveProps(props: DeepPartial<IScatterPlotProps>) {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  public componentWillUnmount() {\n    const { width } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    this.chart.destroy();\n  }\n\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  public render() {\n    return <div ref={(ref) => this.ref = ref} className=\"scatterplot-chart-container\"></div>;\n  }\n}\n\nexport default ScatterPlot;\n","import { extent } from 'd3-array';\nimport {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport {\n  scaleLinear,\n  scaleOrdinal,\n} from 'd3-scale';\nimport {\n  select,\n  Selection,\n} from 'd3-selection';\nimport merge from 'lodash/merge';\n\nimport colorScheme from './colors';\nimport { IChartAdaptor } from './Histogram';\nimport { IChartPoint } from './LineChart';\nimport { IScatterPlotProps } from './ScatterPlot';\nimport { DeepPartial } from './utils/types';\n\nexport const scatterPlotD3 = ((): IChartAdaptor<IScatterPlotProps> => {\n  let svg: Selection<any, any, any, any>;\n  const yScale = scaleLinear();\n  const xScale = scaleLinear();\n  const domainByTrait = {};\n  let xAxis;\n  let color;\n  let yAxis;\n\n  const props: IScatterPlotProps = {\n    choices: [],\n    className: 'scatter-plot-d3',\n    colorScheme,\n    data: {\n      keys: [],\n      values: []\n    },\n    delay: 0,\n    distModels: [],\n    duration: 400,\n    height: 300,\n    legendWidth: 100,\n    padding: 20,\n    radius: 4,\n    split: '',\n    width: '100%',\n  };\n\n  const GenerateChart = {\n\n    /**\n     * Initialization\n     */\n    create(el: Element, newProps: DeepPartial<IScatterPlotProps> = props) {\n      merge(props, newProps);\n      this._makeSvg(el, props.data);\n      this.update(newProps);\n    },\n\n    /**\n     * Make the SVG container element\n     * Recreate if it previously existed\n     */\n    _makeSvg(el: Element, data: IScatterPlotProps['data']) {\n      if (svg) {\n        svg.selectAll('svg > *').remove();\n        svg.remove();\n        const childNodes = el.getElementsByTagName('svg');\n        if (childNodes.length > 0) {\n          el.removeChild(childNodes[0]);\n        }\n      }\n      const { width, className, height, legendWidth, padding } = props;\n\n      // Reference to svg element containing chart\n      svg = select(el).append('svg')\n        .attr('class', className)\n        .attr('width', Number(width) + padding + legendWidth)\n        .attr('height', height + padding)\n        .append('g')\n        .attr('transform', 'translate(' + padding + ',' + padding / 2 + ')');\n\n      color = scaleOrdinal(props.colorScheme);\n    },\n\n    /**\n     * Draw the chart scales\n     */\n    _drawScales(data: IScatterPlotProps['data']['keys']) {\n      const { height, padding, width } = props;\n      const xSize = Number(width) / data.length;\n      const ySize = height / data.length;\n      xScale.range([padding / 2, xSize - padding / 2]);\n      yScale.range([height - padding / 2, padding / 2]);\n\n      svg.selectAll('.x.axis')\n        .data(data)\n        .enter().append('g')\n        .attr('class', 'x axis')\n        .attr('transform', (d, i) =>\n          'translate(' + (data.length - i - 1) * xSize + ',0)')\n        .each(function (this: any, d: any) {\n          xScale.domain(domainByTrait[d]);\n          select(this).call(xAxis);\n        });\n\n      svg.selectAll('.y.axis')\n        .data(data)\n        .enter().append('g')\n        .attr('class', 'y axis')\n        .attr('transform', (d: any, i: number) => 'translate(0,' + i * ySize + ')')\n        .each(function (this: any, d: any) {\n          yScale.domain(domainByTrait[d]);\n          select(this).call(yAxis);\n        });\n    },\n\n    /**\n     * Make a legend showing spit choice options\n     */\n    _drawLegend() {\n      const { choices, padding, width, split } = props;\n      if (choices === undefined) {\n        return;\n      }\n      const legend = svg.append('g')\n        .attr('transform', 'translate(' + (Number(width) + padding / 2) +\n          ', ' + (padding + 50) + ')');\n\n      legend.append('g').append('text')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dy', '.71em')\n        .text((d) => split);\n      legend.selectAll('.legendItem')\n        .data(choices)\n        .enter().append('g')\n        .each(function (this: any, c, i: number) {\n          const cell = select(this);\n          cell.append('rect')\n            .attr('class', 'legendItem')\n            .attr('x', 0)\n            .attr('y', 20 + (i * 15))\n            .attr('fill', color(i))\n            .attr('height', 10)\n            .attr('width', 10);\n\n          cell.append('text')\n            .attr('x', 15)\n            .attr('y', 20 + (i * 15))\n            .attr('dy', '.71em')\n            .text((d) => c);\n        });\n\n      legend.exit().remove();\n    },\n\n    /**\n     * Draw scatter points\n     */\n    _drawPoints(traits, width: number, height: number) {\n      const { data, delay, duration,\n        choices, split, padding, radius } = props;\n      const n = traits.length;\n      const cell = svg.selectAll('.cell')\n        .data(cross(traits, traits))\n        .enter().append('g')\n        .attr('class', 'cell')\n        .attr('transform', (d) => 'translate(' + (n - d.i - 1) * width +\n          ',' + d.j * width + ')')\n        .each(plot);\n\n      // Titles for the diagonal.\n      cell.filter((d) => d.i === d.j).append('text')\n        .attr('x', padding)\n        .attr('y', padding)\n        .attr('dy', '.71em')\n        .text((d) => d.x);\n\n      /**\n       * Plot a point\n       */\n      function plot(this: any, p: IChartPoint) {\n        const plotCell = select(this);\n        let circle: Selection<SVGCircleElement, any, any, any>;\n        xScale.domain(domainByTrait[Number(p.x)]);\n        yScale.domain(domainByTrait[Number(p.y)]);\n\n        plotCell.append<SVGRectElement>('rect')\n          .attr('class', 'frame')\n          .attr('x', padding / 2)\n          .attr('y', padding / 2)\n          .attr('width', width - padding)\n          .attr('height', height - padding);\n\n        circle = plotCell.selectAll('circle')\n          .data(data.values)\n          .enter().append('circle')\n          .attr('r', (d) => radius)\n          .attr('cx', (d) => xScale(d[Number(p.x)]))\n          .attr('cy', (d) => yScale(d[Number(p.y)]))\n          .style('fill', (d) => {\n            if (d[split]) {\n              const i = choices.findIndex((c) => c === d[split]);\n              return color(i);\n            }\n            return '#eeaabb';\n          });\n\n        circle\n          .transition()\n          .duration(duration)\n          .delay(delay)\n          .attr('r', (d) => radius);\n      }\n\n      /**\n       * Create cross array\n       * // @TODO looks like d3 has its own cross function now...\n       */\n      function cross(a, b) {\n        const c: { x: number; i: number; y: number; j: number; }[] = [];\n        const nx = a.length;\n        const m = b.length;\n        let i: number;\n        let j: number;\n        for (i = -1; ++i < nx;) {\n          for (j = -1; ++j < m;) {\n            c.push({ x: a[i], i, y: b[j], j });\n          }\n        }\n        return c;\n      }\n    },\n\n    /**\n     * Update chart\n     */\n    update(newProps: DeepPartial<IScatterPlotProps>) {\n      merge(props, newProps);\n      if (!props.data) {\n        return;\n      }\n      const { data, distModels, height, width } = props;\n      this._drawLegend();\n      const traits = data.keys.filter((k) => distModels.indexOf(k) !== -1);\n      const xSize = Number(width) / traits.length;\n      const ySize = height / traits.length;\n      const n = traits.length;\n\n      traits.forEach((trait) => {\n        domainByTrait[trait] = extent<any>(data.values, (d) => d[trait]);\n      });\n      xAxis = axisBottom(xScale)\n        .ticks(6)\n        .tickSize(xSize * n);\n      yAxis = axisLeft(yScale)\n        .ticks(6)\n        .tickSize(-ySize * n);\n\n      this._drawScales(traits);\n      this._drawPoints(traits, xSize, ySize);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n  return GenerateChart;\n});\n","import {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport {\n  scaleBand,\n  scaleLinear,\n  scaleOrdinal,\n} from 'd3-scale';\n\nimport {\n  BaseHistogramD3,\n  IGroupData,\n  IGroupDataItem,\n} from './BaseHistogramD3';\nimport attrs from './d3/attrs';\nimport {\n  gridHeight,\n  gridWidth,\n  xAxisHeight,\n  yAxisWidth,\n} from './grid';\nimport {\n  EGroupedBarLayout,\n  IAxis,\n} from './Histogram';\nimport {\n  getBarWidth,\n  groupedBarsUseSameXAxisValue,\n  groupedPaddingInner,\n  groupedPaddingOuter,\n  paddingInner,\n  paddingOuter,\n} from './utils/bars';\nimport { annotationAxisDefaults } from './utils/defaults';\nimport {\n  appendDomainRange,\n  formatTick,\n  isStacked,\n  maxValueCount,\n  shouldFormatTick,\n  ticks,\n} from './utils/domain';\nimport {\n  onClick,\n  onMouseOut,\n  onMouseOver,\n  onMouseOverAxis,\n} from './utils/mouseOver';\n\nexport class HorizontalHistogramD3 extends BaseHistogramD3 {\n  public x = scaleLinear();\n  public y = scaleBand();\n  public yAnnotations = scaleBand();\n\n  /**\n   * Draw Axes\n   */\n  public drawAxes() {\n    const { props, dataSets, xAxisContainer, svg, innerScaleBand, tipContent,\n      y, x, yAxisContainer, tipContainer, yAnnotationAxisContainer, yAnnotations } = this;\n    const { annotations, annotationTextSize, bar, data, domain, groupLayout, stacked,\n      margin, width, height, axis, tip } = props;\n    const valuesCount = maxValueCount(data.counts);\n    const h = gridHeight(props);\n    const dataLabels = data.counts.map((c) => c.label);\n    const annotationsEnabled = annotations && annotations.length === data.bins.length;\n\n    y.domain(data.bins)\n      .rangeRound([0, h])\n      .paddingInner(paddingInner(bar))\n      .paddingOuter(paddingOuter(bar));\n\n    innerScaleBand\n      .domain(groupedBarsUseSameXAxisValue({ groupLayout, stacked }) ? ['main'] : dataLabels)\n      .rangeRound([0, y.bandwidth()])\n      .paddingInner(groupedPaddingInner(bar))\n      .paddingOuter(groupedPaddingOuter(bar));\n\n    const xAxis = axisBottom<number>(x);\n    const yAxis = axisLeft<string>(y);\n\n    /** Y-Axis (label axis) set up */\n    const axisYAnnotationAllowance: IAxis = {\n      ...axis.y,\n      style: {\n        'fill': 'none',\n        'stroke': 'none',\n        'opacity': 0,\n        'shape-rendering': 'none',\n        'stroke-opacity': 0,\n        'stroke-width': 0,\n        'visible': false,\n      },\n      tickSize: 30,\n      visible: false,\n    };\n\n    ticks({\n      axis: yAxis,\n      axisConfig: annotationsEnabled ? axisYAnnotationAllowance : axis.y,\n      axisLength: h,\n      limitByValues: true,\n      scaleBand: y,\n      valuesCount,\n    });\n    yAxisContainer\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ', ' + margin.top + ' )')\n      .call(yAxis);\n\n    // Add a tooltip to the y axis if a custom method has been sent\n    const colors = scaleOrdinal(props.colorScheme);\n    if (props.axisLabelTipContentFn) {\n      yAxisContainer\n        ?.selectAll('g.tick')\n        .select('text')\n        .on('mouseover', (onMouseOverAxis({\n          ...props.data, colors,\n          tipContentFn: props.axisLabelTipContentFn, tipContent, tip, tipContainer,\n        })))\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', () => tip.fx.out(tipContainer));\n    }\n\n    /** Y-Axis 2 (bottom axis) for annotations if annotations data sent (and match bin length) */\n    if (annotations && annotations.length === data.bins.length) {\n\n      yAxisContainer\n        ?.selectAll('line')\n        .style('opacity', 0);\n\n      yAnnotations.domain(data.bins)\n        .rangeRound([0, h])\n        .paddingInner(paddingInner(bar))\n        .paddingOuter(paddingOuter(bar));\n\n      const annotationAxis = axisLeft<string>(yAnnotations);\n\n      ticks({\n        axis: annotationAxis,\n        axisConfig: annotationAxisDefaults,\n        axisLength: h,\n        limitByValues: true,\n        scaleBand: yAnnotations,\n        valuesCount: annotations.length,\n      });\n      // Override the default axis bin labels with the custom annotations\n      annotationAxis.tickFormat((d, i) => annotations[i].value);\n      yAnnotationAxisContainer\n        ?.attr('transform', 'translate(' + Number(yAxisWidth(axis)) + ', ' + margin.top + ' )')\n        .call(annotationAxis);\n\n      // Style the annotations with their specific color\n      yAnnotationAxisContainer\n        ?.selectAll('g.tick')\n        .select('text')\n        .style('font-size', annotationTextSize ? annotationTextSize : '0.475rem')\n        .style('fill', (d, i) => annotations[i].color);\n\n      // Hide the line for the annotations axis\n      yAnnotationAxisContainer?.call((g) => g.select('.domain').remove());\n\n    }\n\n    /** X-Axis (value axis) set up */\n    appendDomainRange({\n      data: dataSets,\n      domain,\n      range: [0, Number(width) - (margin.top * 2) - axis.y.width],\n      scale: x,\n      stacked: isStacked({ groupLayout, stacked }),\n    });\n\n    const xAxisY = height - xAxisHeight(props.axis) - margin.top;\n    // Format number axis if format prop provided\n    if (shouldFormatTick(axis.x)) {\n      xAxis.tickFormat((v) => {\n        const n = v.toString().replace('-', '');\n        return String(formatTick(axis.x)(n));\n      });\n    }\n    xAxisContainer\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        xAxisY + ')')\n      .call(xAxis);\n\n    attrs(svg?.selectAll('.y-axis .domain, .y-axis .tick line'), axis.y.style);\n    attrs(svg?.selectAll('.y-axis .tick text'), axis.y.text.style as any);\n\n    attrs(svg?.selectAll('.x-axis .domain, .x-axis .tick line'), axis.x.style);\n    attrs(svg?.selectAll('.x-axis .tick text'), axis.x.text.style as any);\n  }\n\n  /**\n   * Draw a single data set into the chart\n   */\n  public updateChart(\n    bins: string[],\n    groupData: IGroupData,\n  ) {\n    const { props, innerScaleBand, container, tipContainer, tipContent, yAxisLabel } = this;\n    const { axis, height, margin, delay, duration, tip, groupLayout, showBinPercentages, stacked } = props;\n\n    const stackedOffset = (d: IGroupDataItem, stackIndex: number) => {\n      const thisGroupData = groupData.find((gData) => {\n        return gData.find((dx) => dx.label === d.label) !== undefined;\n      });\n      const oSet = (thisGroupData || [])\n        .filter((_, i) => i < stackIndex)\n        .reduce((prev, next) => prev + next.value, 0);\n      const isItStacked = isStacked({ groupLayout, stacked });\n      const offset = isItStacked && stackIndex > 0\n        ? oSet\n        : 0;\n      return isItStacked ? this.x(offset) : 0;\n    };\n\n    const calculateYPosition = (d: IGroupDataItem, stackIndex: number, offset: number, counts: number): number => {\n      const totalWidth = innerScaleBand.bandwidth();\n      const barWidth = getBarWidth(stackIndex, props.groupLayout, props.bar, innerScaleBand);\n      const overlaidYPos = (totalWidth / 2) - (barWidth / 3) + (stackIndex === 1 ? 1 : 0);\n      const finalYPos = (props.groupLayout === EGroupedBarLayout.OVERLAID || counts === 1)\n        ? overlaidYPos\n        : Number(innerScaleBand(String(d.groupLabel)));\n      return offset ? finalYPos + offset : finalYPos;\n    };\n\n    const colors = scaleOrdinal(props.colorScheme);\n    const gWidth = gridWidth(props);\n\n    const g = container\n      ?.selectAll<SVGElement, {}>('g')\n      .data(groupData);\n\n    const bars = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = this.y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const x = yAxisWidth(axis) + axis.x.style['stroke-width'];\n        return `translate(${x}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('rect')\n      .data((d) => d);\n\n    bars\n      ?.enter()\n      .append<SVGElement>('rect')\n      .attr('width', 0)\n      .attr('x', stackedOffset)\n      .attr('class', 'bar')\n      .on('click', onClick(props.onClick))\n      .on('mouseover', onMouseOver({\n        bins,\n        colors,\n        hover: props.bar.hover,\n        tip,\n        tipContainer,\n        tipContent,\n        tipContentFn: props.tipContentFn,\n      }))\n      .on('mousemove', () => tip.fx.move(tipContainer))\n      .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n      .merge(bars)\n      .attr('y', (d: IGroupDataItem, i: number) => calculateYPosition(d, i, 0, props.data.counts.length))\n      .attr('height', (d, i) => getBarWidth(i, props.groupLayout, props.bar, innerScaleBand))\n      .attr('fill', (d, i) => colors(String(i)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', stackedOffset)\n      // Hide bar's bottom border\n      .attr('stroke-dasharray',\n        (d: IGroupDataItem, i): string => {\n          const currentHeight = gWidth - (this.x(d.value));\n          const barWidth = getBarWidth(i, props.groupLayout, props.bar, innerScaleBand);\n          return `${barWidth} 0 ${currentHeight} ${barWidth}`;\n        })\n      .attr('width', (d: IGroupDataItem): number => this.x(d.value));\n\n    // We need to show the bar percentage splits if flag enabled\n    if (showBinPercentages) {\n\n      const percents = g?.enter()\n        .append<SVGElement>('g')\n        .merge(g)\n        .attr('transform', (d: any[], index: number) => {\n          let yd = this.y(d[0].label);\n          if (yd === undefined) {\n            yd = 0;\n          }\n          const x = yAxisWidth(axis) + axis.x.style['stroke-width'];\n          return `translate(${x}, ${(margin.top + yd)})`;\n        })\n\n        .selectAll<SVGElement, {}>('text')\n        .data((d) => d);\n\n      percents\n        ?.enter()\n        .append<SVGElement>('text')\n        .attr('width', 0)\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dy', 0)\n        .attr('dx', 0)\n        .attr('class', 'percentage-label')\n        .attr('x', stackedOffset)\n        .text((d, i) => {\n          // To show the correct percentage split we need to total all the other values in this count set\n          const total = groupData.reduce((prev, group) => prev + group[i].value, 0);\n          const percentage = d.value === 0 ? 0 : Math.round((d.value / total) * 100);\n          return showBinPercentages[i] ? `${percentage}%` : '';\n        })\n        .data((d) => d)\n        .style('text-anchor', 'middle')\n        .style('font-size', '0.675rem')\n        .attr('fill', (d, i) => colors(String(i)))\n        .merge(percents)\n        .attr('x', (d: IGroupDataItem): number => this.x(d.value) + 12) // 12 added to space the label away from the bar\n        .attr('y', (d: IGroupDataItem, i: number) => {\n          const barWidth = getBarWidth(i, props.groupLayout, props.bar, innerScaleBand);\n          const overlaidOffset = props.bar.overlayMargin;\n          return calculateYPosition(d, i, ((barWidth + overlaidOffset) / 2), props.data.counts.length);\n        });\n      percents?.exit().remove();\n    }\n\n    bars?.exit().remove();\n    g?.exit().remove();\n\n    const yText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.y.label]);\n\n    yText?.enter().append('text')\n      .attr('class', 'y-axis-label')\n      .merge(yText)\n      .attr('transform',\n        'translate(' + (Number(height) / 2) + ' ,' +\n        ((height - yAxisWidth(props.axis) - (margin.left * 2)) + axis.x.margin) + ')')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n\n    const xText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.x.label]);\n\n    xText?.enter().append('text')\n      .attr('class', 'x-axis-label')\n      .merge(xText)\n      .attr('transform', 'rotate(-90)')\n      .attr('y', 0)\n      .attr('x', 0 - (gWidth / 2 - (margin.top * 2)))\n      .attr('dy', '1em')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n  }\n\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  IChartAdaptor,\n  IChartState,\n  IHistogramProps,\n} from './Histogram';\nimport { HorizontalHistogramD3 } from './HorizontalHistogramD3';\nimport { DeepPartial } from './utils/types';\n\n/**\n * Horizontal Histogram component\n */\nclass HorizontalHistogram extends Component<DeepPartial<IHistogramProps>, IChartState> {\n\n  private histogram: IChartAdaptor<IHistogramProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<IHistogramProps>) {\n    super(props);\n    this.histogram = new HorizontalHistogramD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.histogram.update(this.getChartState()));\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.histogram.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.histogram.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<IHistogramProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Props received, update the chart\n   */\n  public componentWillReceiveProps() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.histogram.update(this.getChartState());\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    this.histogram.destroy();\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"histogram-chart-container\"></div>);\n  }\n}\n\nexport default HorizontalHistogram;\n","export default function (a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}","import ascending from \"./ascending\";\nexport default function (compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function left(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n      }\n\n      return lo;\n    },\n    right: function right(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;\n      }\n\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function (d, x) {\n    return ascending(f(d), x);\n  };\n}","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;","import { pair } from \"./pairs\";\nexport default function (values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}","export default function (values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = max = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = values[i]) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  } else {\n    while (++i < n) {\n      // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = max = value;\n\n        while (++i < n) {\n          // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return [min, max];\n}","var array = Array.prototype;\nexport var slice = array.slice;\nexport var map = array.map;","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\nexport default function (start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n\n    while (++i < n) {\n      ticks[i] = (start + i) * step;\n    }\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n\n    while (++i < n) {\n      ticks[i] = (start - i) / step;\n    }\n  }\n\n  if (reverse) ticks.reverse();\n  return ticks;\n}\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;else if (error >= e5) step1 *= 5;else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}","import { dispatch } from \"d3-dispatch\";\nimport { dragDisable, dragEnable } from \"d3-drag\";\nimport { interpolate } from \"d3-interpolate\";\nimport { customEvent, event, touch, mouse, select } from \"d3-selection\";\nimport { interrupt } from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport BrushEvent from \"./event.js\";\nimport noevent, { nopropagation } from \"./noevent.js\";\nvar MODE_DRAG = {\n  name: \"drag\"\n},\n    MODE_SPACE = {\n  name: \"space\"\n},\n    MODE_HANDLE = {\n  name: \"handle\"\n},\n    MODE_CENTER = {\n  name: \"center\"\n};\n\nfunction number1(e) {\n  return [+e[0], +e[1]];\n}\n\nfunction number2(e) {\n  return [number1(e[0]), number1(e[1])];\n}\n\nfunction toucher(identifier) {\n  return function (target) {\n    return touch(target, event.touches, identifier);\n  };\n}\n\nvar X = {\n  name: \"x\",\n  handles: [\"w\", \"e\"].map(type),\n  input: function input(x, e) {\n    return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]];\n  },\n  output: function output(xy) {\n    return xy && [xy[0][0], xy[1][0]];\n  }\n};\nvar Y = {\n  name: \"y\",\n  handles: [\"n\", \"s\"].map(type),\n  input: function input(y, e) {\n    return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]];\n  },\n  output: function output(xy) {\n    return xy && [xy[0][1], xy[1][1]];\n  }\n};\nvar XY = {\n  name: \"xy\",\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\n  input: function input(xy) {\n    return xy == null ? null : number2(xy);\n  },\n  output: function output(xy) {\n    return xy;\n  }\n};\nvar cursors = {\n  overlay: \"crosshair\",\n  selection: \"move\",\n  n: \"ns-resize\",\n  e: \"ew-resize\",\n  s: \"ns-resize\",\n  w: \"ew-resize\",\n  nw: \"nwse-resize\",\n  ne: \"nesw-resize\",\n  se: \"nwse-resize\",\n  sw: \"nesw-resize\"\n};\nvar flipX = {\n  e: \"w\",\n  w: \"e\",\n  nw: \"ne\",\n  ne: \"nw\",\n  se: \"sw\",\n  sw: \"se\"\n};\nvar flipY = {\n  n: \"s\",\n  s: \"n\",\n  nw: \"sw\",\n  ne: \"se\",\n  se: \"ne\",\n  sw: \"nw\"\n};\nvar signsX = {\n  overlay: +1,\n  selection: +1,\n  n: null,\n  e: +1,\n  s: null,\n  w: -1,\n  nw: -1,\n  ne: +1,\n  se: +1,\n  sw: -1\n};\nvar signsY = {\n  overlay: +1,\n  selection: +1,\n  n: -1,\n  e: null,\n  s: +1,\n  w: null,\n  nw: -1,\n  ne: -1,\n  se: +1,\n  sw: +1\n};\n\nfunction type(t) {\n  return {\n    type: t\n  };\n} // Ignore right-click, since that should open the context menu.\n\n\nfunction defaultFilter() {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var svg = this.ownerSVGElement || this;\n\n  if (svg.hasAttribute(\"viewBox\")) {\n    svg = svg.viewBox.baseVal;\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\n  }\n\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || \"ontouchstart\" in this;\n} // Like d3.local, but with the name __brush rather than auto-generated.\n\n\nfunction local(node) {\n  while (!node.__brush) {\n    if (!(node = node.parentNode)) return;\n  }\n\n  return node.__brush;\n}\n\nfunction empty(extent) {\n  return extent[0][0] === extent[1][0] || extent[0][1] === extent[1][1];\n}\n\nexport function brushSelection(node) {\n  var state = node.__brush;\n  return state ? state.dim.output(state.selection) : null;\n}\nexport function brushX() {\n  return brush(X);\n}\nexport function brushY() {\n  return brush(Y);\n}\nexport default function () {\n  return brush(XY);\n}\n\nfunction brush(dim) {\n  var extent = defaultExtent,\n      filter = defaultFilter,\n      touchable = defaultTouchable,\n      keys = true,\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\n      handleSize = 6,\n      touchending;\n\n  function brush(group) {\n    var overlay = group.property(\"__brush\", initialize).selectAll(\".overlay\").data([type(\"overlay\")]);\n    overlay.enter().append(\"rect\").attr(\"class\", \"overlay\").attr(\"pointer-events\", \"all\").attr(\"cursor\", cursors.overlay).merge(overlay).each(function () {\n      var extent = local(this).extent;\n      select(this).attr(\"x\", extent[0][0]).attr(\"y\", extent[0][1]).attr(\"width\", extent[1][0] - extent[0][0]).attr(\"height\", extent[1][1] - extent[0][1]);\n    });\n    group.selectAll(\".selection\").data([type(\"selection\")]).enter().append(\"rect\").attr(\"class\", \"selection\").attr(\"cursor\", cursors.selection).attr(\"fill\", \"#777\").attr(\"fill-opacity\", 0.3).attr(\"stroke\", \"#fff\").attr(\"shape-rendering\", \"crispEdges\");\n    var handle = group.selectAll(\".handle\").data(dim.handles, function (d) {\n      return d.type;\n    });\n    handle.exit().remove();\n    handle.enter().append(\"rect\").attr(\"class\", function (d) {\n      return \"handle handle--\" + d.type;\n    }).attr(\"cursor\", function (d) {\n      return cursors[d.type];\n    });\n    group.each(redraw).attr(\"fill\", \"none\").attr(\"pointer-events\", \"all\").on(\"mousedown.brush\", started).filter(touchable).on(\"touchstart.brush\", started).on(\"touchmove.brush\", touchmoved).on(\"touchend.brush touchcancel.brush\", touchended).style(\"touch-action\", \"none\").style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  brush.move = function (group, selection) {\n    if (group.selection) {\n      group.on(\"start.brush\", function () {\n        emitter(this, arguments).beforestart().start();\n      }).on(\"interrupt.brush end.brush\", function () {\n        emitter(this, arguments).end();\n      }).tween(\"brush\", function () {\n        var that = this,\n            state = that.__brush,\n            emit = emitter(that, arguments),\n            selection0 = state.selection,\n            selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\n            i = interpolate(selection0, selection1);\n\n        function tween(t) {\n          state.selection = t === 1 && selection1 === null ? null : i(t);\n          redraw.call(that);\n          emit.brush();\n        }\n\n        return selection0 !== null && selection1 !== null ? tween : tween(1);\n      });\n    } else {\n      group.each(function () {\n        var that = this,\n            args = arguments,\n            state = that.__brush,\n            selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\n            emit = emitter(that, args).beforestart();\n        interrupt(that);\n        state.selection = selection1 === null ? null : selection1;\n        redraw.call(that);\n        emit.start().brush().end();\n      });\n    }\n  };\n\n  brush.clear = function (group) {\n    brush.move(group, null);\n  };\n\n  function redraw() {\n    var group = select(this),\n        selection = local(this).selection;\n\n    if (selection) {\n      group.selectAll(\".selection\").style(\"display\", null).attr(\"x\", selection[0][0]).attr(\"y\", selection[0][1]).attr(\"width\", selection[1][0] - selection[0][0]).attr(\"height\", selection[1][1] - selection[0][1]);\n      group.selectAll(\".handle\").style(\"display\", null).attr(\"x\", function (d) {\n        return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2;\n      }).attr(\"y\", function (d) {\n        return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2;\n      }).attr(\"width\", function (d) {\n        return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize;\n      }).attr(\"height\", function (d) {\n        return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize;\n      });\n    } else {\n      group.selectAll(\".selection,.handle\").style(\"display\", \"none\").attr(\"x\", null).attr(\"y\", null).attr(\"width\", null).attr(\"height\", null);\n    }\n  }\n\n  function emitter(that, args, clean) {\n    return !clean && that.__brush.emitter || new Emitter(that, args);\n  }\n\n  function Emitter(that, args) {\n    this.that = that;\n    this.args = args;\n    this.state = that.__brush;\n    this.active = 0;\n  }\n\n  Emitter.prototype = {\n    beforestart: function beforestart() {\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\n      return this;\n    },\n    start: function start() {\n      if (this.starting) this.starting = false, this.emit(\"start\");else this.emit(\"brush\");\n      return this;\n    },\n    brush: function brush() {\n      this.emit(\"brush\");\n      return this;\n    },\n    end: function end() {\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\");\n      return this;\n    },\n    emit: function emit(type) {\n      customEvent(new BrushEvent(brush, type, dim.output(this.state.selection)), listeners.apply, listeners, [type, this.that, this.args]);\n    }\n  };\n\n  function started() {\n    if (touchending && !event.touches) return;\n    if (!filter.apply(this, arguments)) return;\n    var that = this,\n        type = event.target.__data__.type,\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : keys && event.altKey ? MODE_CENTER : MODE_HANDLE,\n        signX = dim === Y ? null : signsX[type],\n        signY = dim === X ? null : signsY[type],\n        state = local(that),\n        extent = state.extent,\n        selection = state.selection,\n        W = extent[0][0],\n        w0,\n        w1,\n        N = extent[0][1],\n        n0,\n        n1,\n        E = extent[1][0],\n        e0,\n        e1,\n        S = extent[1][1],\n        s0,\n        s1,\n        dx = 0,\n        dy = 0,\n        moving,\n        shifting = signX && signY && keys && event.shiftKey,\n        lockX,\n        lockY,\n        pointer = event.touches ? toucher(event.changedTouches[0].identifier) : mouse,\n        point0 = pointer(that),\n        point = point0,\n        emit = emitter(that, arguments, true).beforestart();\n\n    if (type === \"overlay\") {\n      if (selection) moving = true;\n      state.selection = selection = [[w0 = dim === Y ? W : point0[0], n0 = dim === X ? N : point0[1]], [e0 = dim === Y ? E : w0, s0 = dim === X ? S : n0]];\n    } else {\n      w0 = selection[0][0];\n      n0 = selection[0][1];\n      e0 = selection[1][0];\n      s0 = selection[1][1];\n    }\n\n    w1 = w0;\n    n1 = n0;\n    e1 = e0;\n    s1 = s0;\n    var group = select(that).attr(\"pointer-events\", \"none\");\n    var overlay = group.selectAll(\".overlay\").attr(\"cursor\", cursors[type]);\n\n    if (event.touches) {\n      emit.moved = moved;\n      emit.ended = ended;\n    } else {\n      var view = select(event.view).on(\"mousemove.brush\", moved, true).on(\"mouseup.brush\", ended, true);\n      if (keys) view.on(\"keydown.brush\", keydowned, true).on(\"keyup.brush\", keyupped, true);\n      dragDisable(event.view);\n    }\n\n    nopropagation();\n    interrupt(that);\n    redraw.call(that);\n    emit.start();\n\n    function moved() {\n      var point1 = pointer(that);\n\n      if (shifting && !lockX && !lockY) {\n        if (Math.abs(point1[0] - point[0]) > Math.abs(point1[1] - point[1])) lockY = true;else lockX = true;\n      }\n\n      point = point1;\n      moving = true;\n      noevent();\n      move();\n    }\n\n    function move() {\n      var t;\n      dx = point[0] - point0[0];\n      dy = point[1] - point0[1];\n\n      switch (mode) {\n        case MODE_SPACE:\n        case MODE_DRAG:\n          {\n            if (signX) dx = Math.max(W - w0, Math.min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\n            if (signY) dy = Math.max(N - n0, Math.min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\n            break;\n          }\n\n        case MODE_HANDLE:\n          {\n            if (signX < 0) dx = Math.max(W - w0, Math.min(E - w0, dx)), w1 = w0 + dx, e1 = e0;else if (signX > 0) dx = Math.max(W - e0, Math.min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\n            if (signY < 0) dy = Math.max(N - n0, Math.min(S - n0, dy)), n1 = n0 + dy, s1 = s0;else if (signY > 0) dy = Math.max(N - s0, Math.min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\n            break;\n          }\n\n        case MODE_CENTER:\n          {\n            if (signX) w1 = Math.max(W, Math.min(E, w0 - dx * signX)), e1 = Math.max(W, Math.min(E, e0 + dx * signX));\n            if (signY) n1 = Math.max(N, Math.min(S, n0 - dy * signY)), s1 = Math.max(N, Math.min(S, s0 + dy * signY));\n            break;\n          }\n      }\n\n      if (e1 < w1) {\n        signX *= -1;\n        t = w0, w0 = e0, e0 = t;\n        t = w1, w1 = e1, e1 = t;\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\n      }\n\n      if (s1 < n1) {\n        signY *= -1;\n        t = n0, n0 = s0, s0 = t;\n        t = n1, n1 = s1, s1 = t;\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\n      }\n\n      if (state.selection) selection = state.selection; // May be set by brush.move!\n\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\n\n      if (selection[0][0] !== w1 || selection[0][1] !== n1 || selection[1][0] !== e1 || selection[1][1] !== s1) {\n        state.selection = [[w1, n1], [e1, s1]];\n        redraw.call(that);\n        emit.brush();\n      }\n    }\n\n    function ended() {\n      nopropagation();\n\n      if (event.touches) {\n        if (event.touches.length) return;\n        if (touchending) clearTimeout(touchending);\n        touchending = setTimeout(function () {\n          touchending = null;\n        }, 500); // Ghost clicks are delayed!\n      } else {\n        dragEnable(event.view, moving);\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\n      }\n\n      group.attr(\"pointer-events\", \"all\");\n      overlay.attr(\"cursor\", cursors.overlay);\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\n\n      if (empty(selection)) state.selection = null, redraw.call(that);\n      emit.end();\n    }\n\n    function keydowned() {\n      switch (event.keyCode) {\n        case 16:\n          {\n            // SHIFT\n            shifting = signX && signY;\n            break;\n          }\n\n        case 18:\n          {\n            // ALT\n            if (mode === MODE_HANDLE) {\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n              mode = MODE_CENTER;\n              move();\n            }\n\n            break;\n          }\n\n        case 32:\n          {\n            // SPACE; takes priority over ALT\n            if (mode === MODE_HANDLE || mode === MODE_CENTER) {\n              if (signX < 0) e0 = e1 - dx;else if (signX > 0) w0 = w1 - dx;\n              if (signY < 0) s0 = s1 - dy;else if (signY > 0) n0 = n1 - dy;\n              mode = MODE_SPACE;\n              overlay.attr(\"cursor\", cursors.selection);\n              move();\n            }\n\n            break;\n          }\n\n        default:\n          return;\n      }\n\n      noevent();\n    }\n\n    function keyupped() {\n      switch (event.keyCode) {\n        case 16:\n          {\n            // SHIFT\n            if (shifting) {\n              lockX = lockY = shifting = false;\n              move();\n            }\n\n            break;\n          }\n\n        case 18:\n          {\n            // ALT\n            if (mode === MODE_CENTER) {\n              if (signX < 0) e0 = e1;else if (signX > 0) w0 = w1;\n              if (signY < 0) s0 = s1;else if (signY > 0) n0 = n1;\n              mode = MODE_HANDLE;\n              move();\n            }\n\n            break;\n          }\n\n        case 32:\n          {\n            // SPACE\n            if (mode === MODE_SPACE) {\n              if (event.altKey) {\n                if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\n                if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\n                mode = MODE_CENTER;\n              } else {\n                if (signX < 0) e0 = e1;else if (signX > 0) w0 = w1;\n                if (signY < 0) s0 = s1;else if (signY > 0) n0 = n1;\n                mode = MODE_HANDLE;\n              }\n\n              overlay.attr(\"cursor\", cursors[type]);\n              move();\n            }\n\n            break;\n          }\n\n        default:\n          return;\n      }\n\n      noevent();\n    }\n  }\n\n  function touchmoved() {\n    emitter(this, arguments).moved();\n  }\n\n  function touchended() {\n    emitter(this, arguments).ended();\n  }\n\n  function initialize() {\n    var state = this.__brush || {\n      selection: null\n    };\n    state.extent = number2(extent.apply(this, arguments));\n    state.dim = dim;\n    return state;\n  }\n\n  brush.extent = function (_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\n  };\n\n  brush.filter = function (_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\n  };\n\n  brush.touchable = function (_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\n  };\n\n  brush.handleSize = function (_) {\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\n  };\n\n  brush.keyModifiers = function (_) {\n    return arguments.length ? (keys = !!_, brush) : keys;\n  };\n\n  brush.on = function () {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? brush : value;\n  };\n\n  return brush;\n}","export default function (a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;","import ascending from \"./ascending\";\nexport default function (compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function left(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n      }\n\n      return lo;\n    },\n    right: function right(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;\n      }\n\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function (d, x) {\n    return ascending(f(d), x);\n  };\n}","import { pair } from \"./pairs\";\nexport default function (values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}","var array = Array.prototype;\nexport var slice = array.slice;\nexport var map = array.map;","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\nexport default function (start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n\n    while (++i < n) {\n      ticks[i] = (start + i) * step;\n    }\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n\n    while (++i < n) {\n      ticks[i] = (start - i) / step;\n    }\n  }\n\n  if (reverse) ticks.reverse();\n  return ticks;\n}\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;else if (error >= e5) step1 *= 5;else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}","var array = Array.prototype;\nexport var slice = array.slice;","export default function (d) {\n  var x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {\n    data: d\n  },\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return tree._root = leaf, tree; // Find the existing leaf for the new point, or add it.\n\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  } // Is the new point is exactly coincident with the existing point?\n\n\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree; // Otherwise, split the leaf node until the old and new point are separated.\n\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | xp >= xm));\n\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d,\n      i,\n      n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity; // Compute the points and their extent.\n\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  } // If there were no (valid) points, abort.\n\n\n  if (x0 > x1 || y0 > y1) return this; // Expand the tree to cover the new points.\n\n  this.cover(x0, y0).cover(x1, y1); // Add the new points.\n\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}","export default function (x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1; // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  } // Otherwise, double repeatedly to cover.\n  else {\n      var z = x1 - x0,\n          node = this._root,\n          parent,\n          i;\n\n      while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n        i = (y < y0) << 1 | x < x0;\n        parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n\n        switch (i) {\n          case 0:\n            x1 = x0 + z, y1 = y0 + z;\n            break;\n\n          case 1:\n            x0 = x1 - z, y1 = y0 + z;\n            break;\n\n          case 2:\n            x1 = x0 + z, y0 = y1 - z;\n            break;\n\n          case 3:\n            x0 = x1 - z, y0 = y1 - z;\n            break;\n        }\n      }\n\n      if (this._root && this._root.length) this._root = node;\n    }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}","export default function (node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}","export function defaultX(d) {\n  return d[0];\n}\nexport default function (_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}","export function defaultY(d) {\n  return d[1];\n}\nexport default function (_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}","import tree_add, { addAll as tree_addAll } from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, { removeAll as tree_removeAll } from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, { defaultX } from \"./x.js\";\nimport tree_y, { defaultY } from \"./y.js\";\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {\n    data: leaf.data\n  },\n      next = copy;\n\n  while (leaf = leaf.next) {\n    next = next.next = {\n      data: leaf.data\n    };\n  }\n\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function () {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n  if (!node) return copy;\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n  nodes = [{\n    source: node,\n    target: copy._root = new Array(4)\n  }];\n\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({\n          source: child,\n          target: node.target[i] = new Array(4)\n        });else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;","export default function () {\n  var data = [];\n  this.visit(function (node) {\n    if (!node.length) do {\n      data.push(node.data);\n    } while (node = node.next);\n  });\n  return data;\n}","export default function (_) {\n  return arguments.length ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1]) : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}","import Quad from \"./quad.js\";\nexport default function (x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node) || (x1 = q.x0) > x3 || (y1 = q.y0) > y3 || (x2 = q.x1) < x0 || (y2 = q.y1) < y0) continue; // Bisect the current quadrant.\n\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n      quads.push(new Quad(node[3], xm, ym, x2, y2), new Quad(node[2], x1, ym, xm, y2), new Quad(node[1], xm, y1, x2, ym), new Quad(node[0], x1, y1, xm, ym)); // Visit the closest quadrant first.\n\n      if (i = (y >= ym) << 1 | x >= xm) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    } // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n        var dx = x - +this._x.call(null, node.data),\n            dy = y - +this._y.call(null, node.data),\n            d2 = dx * dx + dy * dy;\n\n        if (d2 < radius) {\n          var d = Math.sqrt(radius = d2);\n          x0 = x - d, y0 = y - d;\n          x3 = x + d, y3 = y + d;\n          data = node.data;\n        }\n      }\n  }\n\n  return data;\n}","export default function (d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j; // If the tree is empty, initialize the root as a leaf.\n\n  if (!node) return this; // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm;else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym;else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[i + 1 & 3] || parent[i + 2 & 3] || parent[i + 3 & 3]) retainer = parent, j = i;\n  } // Find the point to remove.\n\n  while (node.data !== d) {\n    if (!(previous = node, node = node.next)) return this;\n  }\n\n  if (next = node.next) delete node.next; // If there are multiple coincident points, remove just the point.\n\n  if (previous) return next ? previous.next = next : delete previous.next, this; // If this is the root point, remove it.\n\n  if (!parent) return this._root = next, this; // Remove this leaf.\n\n  next ? parent[i] = next : delete parent[i]; // If the parent now contains exactly one leaf, collapse superfluous parents.\n\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3]) && node === (parent[3] || parent[2] || parent[1] || parent[0]) && !node.length) {\n    if (retainer) retainer[j] = node;else this._root = node;\n  }\n\n  return this;\n}\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) {\n    this.remove(data[i]);\n  }\n\n  return this;\n}","export default function () {\n  return this._root;\n}","export default function () {\n  var size = 0;\n  this.visit(function (node) {\n    if (!node.length) do {\n      ++size;\n    } while (node = node.next);\n  });\n  return size;\n}","import Quad from \"./quad.js\";\nexport default function (callback) {\n  var quads = [],\n      q,\n      node = this._root,\n      child,\n      x0,\n      y0,\n      x1,\n      y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2,\n          ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n\n  return this;\n}","import Quad from \"./quad.js\";\nexport default function (callback) {\n  var quads = [],\n      next = [],\n      q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n\n  while (q = quads.pop()) {\n    var node = q.node;\n\n    if (node.length) {\n      var child,\n          x0 = q.x0,\n          y0 = q.y0,\n          x1 = q.x1,\n          y1 = q.y1,\n          xm = (x0 + x1) / 2,\n          ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n\n    next.push(q);\n  }\n\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n\n  return this;\n}","import { dispatch } from \"d3-dispatch\";\nimport { map } from \"d3-collection\";\nimport { timer } from \"d3-timer\";\nexport function x(d) {\n  return d.x;\n}\nexport function y(d) {\n  return d.y;\n}\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\nexport default function (_nodes) {\n  var simulation,\n      _alpha = 1,\n      _alphaMin = 0.001,\n      _alphaDecay = 1 - Math.pow(_alphaMin, 1 / 300),\n      _alphaTarget = 0,\n      _velocityDecay = 0.6,\n      forces = map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\");\n\n  if (_nodes == null) _nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n\n    if (_alpha < _alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i,\n        n = _nodes.length,\n        node;\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      _alpha += (_alphaTarget - _alpha) * _alphaDecay;\n      forces.each(function (force) {\n        force(_alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = _nodes[i];\n        if (node.fx == null) node.x += node.vx *= _velocityDecay;else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= _velocityDecay;else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = _nodes.length, node; i < n; ++i) {\n      node = _nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(i),\n            angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(_nodes);\n    return force;\n  }\n\n  initializeNodes();\n  return simulation = {\n    tick: tick,\n    restart: function restart() {\n      return stepper.restart(step), simulation;\n    },\n    stop: function stop() {\n      return stepper.stop(), simulation;\n    },\n    nodes: function nodes(_) {\n      return arguments.length ? (_nodes = _, initializeNodes(), forces.each(initializeForce), simulation) : _nodes;\n    },\n    alpha: function alpha(_) {\n      return arguments.length ? (_alpha = +_, simulation) : _alpha;\n    },\n    alphaMin: function alphaMin(_) {\n      return arguments.length ? (_alphaMin = +_, simulation) : _alphaMin;\n    },\n    alphaDecay: function alphaDecay(_) {\n      return arguments.length ? (_alphaDecay = +_, simulation) : +_alphaDecay;\n    },\n    alphaTarget: function alphaTarget(_) {\n      return arguments.length ? (_alphaTarget = +_, simulation) : _alphaTarget;\n    },\n    velocityDecay: function velocityDecay(_) {\n      return arguments.length ? (_velocityDecay = 1 - _, simulation) : 1 - _velocityDecay;\n    },\n    force: function force(name, _) {\n      return arguments.length > 1 ? (_ == null ? forces.remove(name) : forces.set(name, initializeForce(_)), simulation) : forces.get(name);\n    },\n    find: function find(x, y, radius) {\n      var i = 0,\n          n = _nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n      if (radius == null) radius = Infinity;else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = _nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n    on: function on(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}","export default function () {\n  return Math.random();\n}","import defaultSource from \"./defaultSource\";\nexport default (function sourceRandomNormal(source) {\n  function randomNormal(mu, sigma) {\n    var x, r;\n    mu = mu == null ? 0 : +mu;\n    sigma = sigma == null ? 1 : +sigma;\n    return function () {\n      var y; // If available, use the second previously-generated uniform random.\n\n      if (x != null) y = x, x = null; // Otherwise, generate a new x and y.\n      else do {\n          x = source() * 2 - 1;\n          y = source() * 2 - 1;\n          r = x * x + y * y;\n        } while (!r || r > 1);\n      return mu + sigma * y * Math.sqrt(-2 * Math.log(r) / r);\n    };\n  }\n\n  randomNormal.source = sourceRandomNormal;\n  return randomNormal;\n})(defaultSource);","import defaultSource from \"./defaultSource\";\nexport default (function sourceRandomUniform(source) {\n  function randomUniform(min, max) {\n    min = min == null ? 0 : +min;\n    max = max == null ? 1 : +max;\n    if (arguments.length === 1) max = min, min = 0;else max -= min;\n    return function () {\n      return source() * max + min;\n    };\n  }\n\n  randomUniform.source = sourceRandomUniform;\n  return randomUniform;\n})(defaultSource);","import defaultSource from \"./defaultSource\";\nexport default (function sourceRandomIrwinHall(source) {\n  function randomIrwinHall(n) {\n    return function () {\n      for (var sum = 0, i = 0; i < n; ++i) {\n        sum += source();\n      }\n\n      return sum;\n    };\n  }\n\n  randomIrwinHall.source = sourceRandomIrwinHall;\n  return randomIrwinHall;\n})(defaultSource);","import defaultSource from \"./defaultSource\";\nimport normal from \"./normal\";\nexport default (function sourceRandomLogNormal(source) {\n  function randomLogNormal() {\n    var randomNormal = normal.source(source).apply(this, arguments);\n    return function () {\n      return Math.exp(randomNormal());\n    };\n  }\n\n  randomLogNormal.source = sourceRandomLogNormal;\n  return randomLogNormal;\n})(defaultSource);","import defaultSource from \"./defaultSource\";\nimport irwinHall from \"./irwinHall\";\nexport default (function sourceRandomBates(source) {\n  function randomBates(n) {\n    var randomIrwinHall = irwinHall.source(source)(n);\n    return function () {\n      return randomIrwinHall() / n;\n    };\n  }\n\n  randomBates.source = sourceRandomBates;\n  return randomBates;\n})(defaultSource);","import defaultSource from \"./defaultSource\";\nexport default (function sourceRandomExponential(source) {\n  function randomExponential(lambda) {\n    return function () {\n      return -Math.log(1 - source()) / lambda;\n    };\n  }\n\n  randomExponential.source = sourceRandomExponential;\n  return randomExponential;\n})(defaultSource);","var array = Array.prototype;\nexport var map = array.map;\nexport var slice = array.slice;","import { bisector, tickStep } from \"d3-array\";\nimport { timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond } from \"d3-time\";\nimport { timeFormat } from \"d3-time-format\";\nimport { map } from \"./array\";\nimport continuous, { copy, identity } from \"./continuous\";\nimport { initRange } from \"./init\";\nimport nice from \"./nice\";\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n  var scale = continuous(identity, identity),\n      invert = scale.invert,\n      domain = scale.domain;\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n  var tickIntervals = [[second, 1, durationSecond], [second, 5, 5 * durationSecond], [second, 15, 15 * durationSecond], [second, 30, 30 * durationSecond], [minute, 1, durationMinute], [minute, 5, 5 * durationMinute], [minute, 15, 15 * durationMinute], [minute, 30, 30 * durationMinute], [hour, 1, durationHour], [hour, 3, 3 * durationHour], [hour, 6, 6 * durationHour], [hour, 12, 12 * durationHour], [day, 1, durationDay], [day, 2, 2 * durationDay], [week, 1, durationWeek], [month, 1, durationMonth], [month, 3, 3 * durationMonth], [year, 1, durationYear]];\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond : minute(date) < date ? formatSecond : hour(date) < date ? formatMinute : day(date) < date ? formatHour : month(date) < date ? week(date) < date ? formatDay : formatWeek : year(date) < date ? formatMonth : formatYear)(date);\n  }\n\n  function tickInterval(interval, start, stop, step) {\n    if (interval == null) interval = 10; // If a desired tick count is specified, pick a reasonable tick interval\n    // based on the extent of the domain and a rough estimate of tick size.\n    // Otherwise, assume interval is already a time interval and use it.\n\n    if (typeof interval === \"number\") {\n      var target = Math.abs(stop - start) / interval,\n          i = bisector(function (i) {\n        return i[2];\n      }).right(tickIntervals, target);\n\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, interval);\n        interval = year;\n      } else if (i) {\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n        step = i[1];\n        interval = i[0];\n      } else {\n        step = Math.max(tickStep(start, stop, interval), 1);\n        interval = millisecond;\n      }\n    }\n\n    return step == null ? interval : interval.every(step);\n  }\n\n  scale.invert = function (y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function (_) {\n    return arguments.length ? domain(map.call(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function (interval, step) {\n    var d = domain(),\n        t0 = d[0],\n        t1 = d[d.length - 1],\n        r = t1 < t0,\n        t;\n    if (r) t = t0, t0 = t1, t1 = t;\n    t = tickInterval(interval, t0, t1, step);\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n\n    return r ? t.reverse() : t;\n  };\n\n  scale.tickFormat = function (count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function (interval, step) {\n    var d = domain();\n    return (interval = tickInterval(interval, d[0], d[d.length - 1], step)) ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function () {\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n  };\n\n  return scale;\n}\nexport default function () {\n  return initRange.apply(calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}","import interval from \"./interval.js\";\nvar utcMonth = interval(function (date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function (date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function (start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function (date) {\n  return date.getUTCMonth();\n});\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;","import interval from \"./interval.js\";\nimport { durationHour } from \"./duration.js\";\nvar utcHour = interval(function (date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function (date, step) {\n  date.setTime(+date + step * durationHour);\n}, function (start, end) {\n  return (end - start) / durationHour;\n}, function (date) {\n  return date.getUTCHours();\n});\nexport default utcHour;\nexport var utcHours = utcHour.range;","import interval from \"./interval.js\";\nimport { durationMinute } from \"./duration.js\";\nvar utcMinute = interval(function (date) {\n  date.setUTCSeconds(0, 0);\n}, function (date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function (start, end) {\n  return (end - start) / durationMinute;\n}, function (date) {\n  return date.getUTCMinutes();\n});\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;","function RedBlackTree() {\n  this._ = null; // root node\n}\n\nexport function RedBlackNode(node) {\n  node.U = // parent node\n  node.C = // color - true for red, false for black\n  node.L = // left node\n  node.R = // right node\n  node.P = // previous node\n  node.N = null; // next node\n}\nRedBlackTree.prototype = {\n  constructor: RedBlackTree,\n  insert: function insert(after, node) {\n    var parent, grandpa, uncle;\n\n    if (after) {\n      node.P = after;\n      node.N = after.N;\n      if (after.N) after.N.P = node;\n      after.N = node;\n\n      if (after.R) {\n        after = after.R;\n\n        while (after.L) {\n          after = after.L;\n        }\n\n        after.L = node;\n      } else {\n        after.R = node;\n      }\n\n      parent = after;\n    } else if (this._) {\n      after = RedBlackFirst(this._);\n      node.P = null;\n      node.N = after;\n      after.P = after.L = node;\n      parent = after;\n    } else {\n      node.P = node.N = null;\n      this._ = node;\n      parent = null;\n    }\n\n    node.L = node.R = null;\n    node.U = parent;\n    node.C = true;\n    after = node;\n\n    while (parent && parent.C) {\n      grandpa = parent.U;\n\n      if (parent === grandpa.L) {\n        uncle = grandpa.R;\n\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.R) {\n            RedBlackRotateLeft(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateRight(this, grandpa);\n        }\n      } else {\n        uncle = grandpa.L;\n\n        if (uncle && uncle.C) {\n          parent.C = uncle.C = false;\n          grandpa.C = true;\n          after = grandpa;\n        } else {\n          if (after === parent.L) {\n            RedBlackRotateRight(this, parent);\n            after = parent;\n            parent = after.U;\n          }\n\n          parent.C = false;\n          grandpa.C = true;\n          RedBlackRotateLeft(this, grandpa);\n        }\n      }\n\n      parent = after.U;\n    }\n\n    this._.C = false;\n  },\n  remove: function remove(node) {\n    if (node.N) node.N.P = node.P;\n    if (node.P) node.P.N = node.N;\n    node.N = node.P = null;\n    var parent = node.U,\n        sibling,\n        left = node.L,\n        right = node.R,\n        next,\n        red;\n    if (!left) next = right;else if (!right) next = left;else next = RedBlackFirst(right);\n\n    if (parent) {\n      if (parent.L === node) parent.L = next;else parent.R = next;\n    } else {\n      this._ = next;\n    }\n\n    if (left && right) {\n      red = next.C;\n      next.C = node.C;\n      next.L = left;\n      left.U = next;\n\n      if (next !== right) {\n        parent = next.U;\n        next.U = node.U;\n        node = next.R;\n        parent.L = node;\n        next.R = right;\n        right.U = next;\n      } else {\n        next.U = parent;\n        parent = next;\n        node = next.R;\n      }\n    } else {\n      red = node.C;\n      node = next;\n    }\n\n    if (node) node.U = parent;\n    if (red) return;\n\n    if (node && node.C) {\n      node.C = false;\n      return;\n    }\n\n    do {\n      if (node === this._) break;\n\n      if (node === parent.L) {\n        sibling = parent.R;\n\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateLeft(this, parent);\n          sibling = parent.R;\n        }\n\n        if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {\n          if (!sibling.R || !sibling.R.C) {\n            sibling.L.C = false;\n            sibling.C = true;\n            RedBlackRotateRight(this, sibling);\n            sibling = parent.R;\n          }\n\n          sibling.C = parent.C;\n          parent.C = sibling.R.C = false;\n          RedBlackRotateLeft(this, parent);\n          node = this._;\n          break;\n        }\n      } else {\n        sibling = parent.L;\n\n        if (sibling.C) {\n          sibling.C = false;\n          parent.C = true;\n          RedBlackRotateRight(this, parent);\n          sibling = parent.L;\n        }\n\n        if (sibling.L && sibling.L.C || sibling.R && sibling.R.C) {\n          if (!sibling.L || !sibling.L.C) {\n            sibling.R.C = false;\n            sibling.C = true;\n            RedBlackRotateLeft(this, sibling);\n            sibling = parent.L;\n          }\n\n          sibling.C = parent.C;\n          parent.C = sibling.L.C = false;\n          RedBlackRotateRight(this, parent);\n          node = this._;\n          break;\n        }\n      }\n\n      sibling.C = true;\n      node = parent;\n      parent = parent.U;\n    } while (!node.C);\n\n    if (node) node.C = false;\n  }\n};\n\nfunction RedBlackRotateLeft(tree, node) {\n  var p = node,\n      q = node.R,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.R = q.L;\n  if (p.R) p.R.U = p;\n  q.L = p;\n}\n\nfunction RedBlackRotateRight(tree, node) {\n  var p = node,\n      q = node.L,\n      parent = p.U;\n\n  if (parent) {\n    if (parent.L === p) parent.L = q;else parent.R = q;\n  } else {\n    tree._ = q;\n  }\n\n  q.U = parent;\n  p.U = q;\n  p.L = q.R;\n  if (p.L) p.L.U = p;\n  q.R = p;\n}\n\nfunction RedBlackFirst(node) {\n  while (node.L) {\n    node = node.L;\n  }\n\n  return node;\n}\n\nexport default RedBlackTree;","import { cells, edges, epsilon } from \"./Diagram\";\nexport function createEdge(left, right, v0, v1) {\n  var edge = [null, null],\n      index = edges.push(edge) - 1;\n  edge.left = left;\n  edge.right = right;\n  if (v0) setEdgeEnd(edge, left, right, v0);\n  if (v1) setEdgeEnd(edge, right, left, v1);\n  cells[left.index].halfedges.push(index);\n  cells[right.index].halfedges.push(index);\n  return edge;\n}\nexport function createBorderEdge(left, v0, v1) {\n  var edge = [v0, v1];\n  edge.left = left;\n  return edge;\n}\nexport function setEdgeEnd(edge, left, right, vertex) {\n  if (!edge[0] && !edge[1]) {\n    edge[0] = vertex;\n    edge.left = left;\n    edge.right = right;\n  } else if (edge.left === right) {\n    edge[1] = vertex;\n  } else {\n    edge[0] = vertex;\n  }\n} // LiangBarsky line clipping.\n\nfunction clipEdge(edge, x0, y0, x1, y1) {\n  var a = edge[0],\n      b = edge[1],\n      ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (!(t0 > 0) && !(t1 < 1)) return true; // TODO Better check?\n\n  if (t0 > 0) edge[0] = [ax + t0 * dx, ay + t0 * dy];\n  if (t1 < 1) edge[1] = [ax + t1 * dx, ay + t1 * dy];\n  return true;\n}\n\nfunction connectEdge(edge, x0, y0, x1, y1) {\n  var v1 = edge[1];\n  if (v1) return true;\n  var v0 = edge[0],\n      left = edge.left,\n      right = edge.right,\n      lx = left[0],\n      ly = left[1],\n      rx = right[0],\n      ry = right[1],\n      fx = (lx + rx) / 2,\n      fy = (ly + ry) / 2,\n      fm,\n      fb;\n\n  if (ry === ly) {\n    if (fx < x0 || fx >= x1) return;\n\n    if (lx > rx) {\n      if (!v0) v0 = [fx, y0];else if (v0[1] >= y1) return;\n      v1 = [fx, y1];\n    } else {\n      if (!v0) v0 = [fx, y1];else if (v0[1] < y0) return;\n      v1 = [fx, y0];\n    }\n  } else {\n    fm = (lx - rx) / (ry - ly);\n    fb = fy - fm * fx;\n\n    if (fm < -1 || fm > 1) {\n      if (lx > rx) {\n        if (!v0) v0 = [(y0 - fb) / fm, y0];else if (v0[1] >= y1) return;\n        v1 = [(y1 - fb) / fm, y1];\n      } else {\n        if (!v0) v0 = [(y1 - fb) / fm, y1];else if (v0[1] < y0) return;\n        v1 = [(y0 - fb) / fm, y0];\n      }\n    } else {\n      if (ly < ry) {\n        if (!v0) v0 = [x0, fm * x0 + fb];else if (v0[0] >= x1) return;\n        v1 = [x1, fm * x1 + fb];\n      } else {\n        if (!v0) v0 = [x1, fm * x1 + fb];else if (v0[0] < x0) return;\n        v1 = [x0, fm * x0 + fb];\n      }\n    }\n  }\n\n  edge[0] = v0;\n  edge[1] = v1;\n  return true;\n}\n\nexport function clipEdges(x0, y0, x1, y1) {\n  var i = edges.length,\n      edge;\n\n  while (i--) {\n    if (!connectEdge(edge = edges[i], x0, y0, x1, y1) || !clipEdge(edge, x0, y0, x1, y1) || !(Math.abs(edge[0][0] - edge[1][0]) > epsilon || Math.abs(edge[0][1] - edge[1][1]) > epsilon)) {\n      delete edges[i];\n    }\n  }\n}","import { createBorderEdge } from \"./Edge\";\nimport { cells, edges, epsilon } from \"./Diagram\";\nexport function createCell(site) {\n  return cells[site.index] = {\n    site: site,\n    halfedges: []\n  };\n}\n\nfunction cellHalfedgeAngle(cell, edge) {\n  var site = cell.site,\n      va = edge.left,\n      vb = edge.right;\n  if (site === vb) vb = va, va = site;\n  if (vb) return Math.atan2(vb[1] - va[1], vb[0] - va[0]);\n  if (site === va) va = edge[1], vb = edge[0];else va = edge[0], vb = edge[1];\n  return Math.atan2(va[0] - vb[0], vb[1] - va[1]);\n}\n\nexport function cellHalfedgeStart(cell, edge) {\n  return edge[+(edge.left !== cell.site)];\n}\nexport function cellHalfedgeEnd(cell, edge) {\n  return edge[+(edge.left === cell.site)];\n}\nexport function sortCellHalfedges() {\n  for (var i = 0, n = cells.length, cell, halfedges, j, m; i < n; ++i) {\n    if ((cell = cells[i]) && (m = (halfedges = cell.halfedges).length)) {\n      var index = new Array(m),\n          array = new Array(m);\n\n      for (j = 0; j < m; ++j) {\n        index[j] = j, array[j] = cellHalfedgeAngle(cell, edges[halfedges[j]]);\n      }\n\n      index.sort(function (i, j) {\n        return array[j] - array[i];\n      });\n\n      for (j = 0; j < m; ++j) {\n        array[j] = halfedges[index[j]];\n      }\n\n      for (j = 0; j < m; ++j) {\n        halfedges[j] = array[j];\n      }\n    }\n  }\n}\nexport function clipCells(x0, y0, x1, y1) {\n  var nCells = cells.length,\n      iCell,\n      cell,\n      site,\n      iHalfedge,\n      halfedges,\n      nHalfedges,\n      start,\n      startX,\n      startY,\n      end,\n      endX,\n      endY,\n      cover = true;\n\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      site = cell.site;\n      halfedges = cell.halfedges;\n      iHalfedge = halfedges.length; // Remove any dangling clipped edges.\n\n      while (iHalfedge--) {\n        if (!edges[halfedges[iHalfedge]]) {\n          halfedges.splice(iHalfedge, 1);\n        }\n      } // Insert any border edges as necessary.\n\n\n      iHalfedge = 0, nHalfedges = halfedges.length;\n\n      while (iHalfedge < nHalfedges) {\n        end = cellHalfedgeEnd(cell, edges[halfedges[iHalfedge]]), endX = end[0], endY = end[1];\n        start = cellHalfedgeStart(cell, edges[halfedges[++iHalfedge % nHalfedges]]), startX = start[0], startY = start[1];\n\n        if (Math.abs(endX - startX) > epsilon || Math.abs(endY - startY) > epsilon) {\n          halfedges.splice(iHalfedge, 0, edges.push(createBorderEdge(site, end, Math.abs(endX - x0) < epsilon && y1 - endY > epsilon ? [x0, Math.abs(startX - x0) < epsilon ? startY : y1] : Math.abs(endY - y1) < epsilon && x1 - endX > epsilon ? [Math.abs(startY - y1) < epsilon ? startX : x1, y1] : Math.abs(endX - x1) < epsilon && endY - y0 > epsilon ? [x1, Math.abs(startX - x1) < epsilon ? startY : y0] : Math.abs(endY - y0) < epsilon && endX - x0 > epsilon ? [Math.abs(startY - y0) < epsilon ? startX : x0, y0] : null)) - 1);\n          ++nHalfedges;\n        }\n      }\n\n      if (nHalfedges) cover = false;\n    }\n  } // If there werent any edges, have the closest site cover the extent.\n  // It doesnt matter which corner of the extent we measure!\n\n\n  if (cover) {\n    var dx,\n        dy,\n        d2,\n        dc = Infinity;\n\n    for (iCell = 0, cover = null; iCell < nCells; ++iCell) {\n      if (cell = cells[iCell]) {\n        site = cell.site;\n        dx = site[0] - x0;\n        dy = site[1] - y0;\n        d2 = dx * dx + dy * dy;\n        if (d2 < dc) dc = d2, cover = cell;\n      }\n    }\n\n    if (cover) {\n      var v00 = [x0, y0],\n          v01 = [x0, y1],\n          v11 = [x1, y1],\n          v10 = [x1, y0];\n      cover.halfedges.push(edges.push(createBorderEdge(site = cover.site, v00, v01)) - 1, edges.push(createBorderEdge(site, v01, v11)) - 1, edges.push(createBorderEdge(site, v11, v10)) - 1, edges.push(createBorderEdge(site, v10, v00)) - 1);\n    }\n  } // Lastly delete any cells with no edges; these were entirely clipped.\n\n\n  for (iCell = 0; iCell < nCells; ++iCell) {\n    if (cell = cells[iCell]) {\n      if (!cell.halfedges.length) {\n        delete cells[iCell];\n      }\n    }\n  }\n}","import { RedBlackNode } from \"./RedBlackTree\";\nimport { circles, epsilon2 } from \"./Diagram\";\nvar circlePool = [];\nexport var firstCircle;\n\nfunction Circle() {\n  RedBlackNode(this);\n  this.x = this.y = this.arc = this.site = this.cy = null;\n}\n\nexport function attachCircle(arc) {\n  var lArc = arc.P,\n      rArc = arc.N;\n  if (!lArc || !rArc) return;\n  var lSite = lArc.site,\n      cSite = arc.site,\n      rSite = rArc.site;\n  if (lSite === rSite) return;\n  var bx = cSite[0],\n      by = cSite[1],\n      ax = lSite[0] - bx,\n      ay = lSite[1] - by,\n      cx = rSite[0] - bx,\n      cy = rSite[1] - by;\n  var d = 2 * (ax * cy - ay * cx);\n  if (d >= -epsilon2) return;\n  var ha = ax * ax + ay * ay,\n      hc = cx * cx + cy * cy,\n      x = (cy * ha - ay * hc) / d,\n      y = (ax * hc - cx * ha) / d;\n  var circle = circlePool.pop() || new Circle();\n  circle.arc = arc;\n  circle.site = cSite;\n  circle.x = x + bx;\n  circle.y = (circle.cy = y + by) + Math.sqrt(x * x + y * y); // y bottom\n\n  arc.circle = circle;\n  var before = null,\n      node = circles._;\n\n  while (node) {\n    if (circle.y < node.y || circle.y === node.y && circle.x <= node.x) {\n      if (node.L) node = node.L;else {\n        before = node.P;\n        break;\n      }\n    } else {\n      if (node.R) node = node.R;else {\n        before = node;\n        break;\n      }\n    }\n  }\n\n  circles.insert(before, circle);\n  if (!before) firstCircle = circle;\n}\nexport function detachCircle(arc) {\n  var circle = arc.circle;\n\n  if (circle) {\n    if (!circle.P) firstCircle = circle.N;\n    circles.remove(circle);\n    circlePool.push(circle);\n    RedBlackNode(circle);\n    arc.circle = null;\n  }\n}","import { RedBlackNode } from \"./RedBlackTree\";\nimport { createCell } from \"./Cell\";\nimport { attachCircle, detachCircle } from \"./Circle\";\nimport { createEdge, setEdgeEnd } from \"./Edge\";\nimport { beaches, epsilon } from \"./Diagram\";\nvar beachPool = [];\n\nfunction Beach() {\n  RedBlackNode(this);\n  this.edge = this.site = this.circle = null;\n}\n\nfunction createBeach(site) {\n  var beach = beachPool.pop() || new Beach();\n  beach.site = site;\n  return beach;\n}\n\nfunction detachBeach(beach) {\n  detachCircle(beach);\n  beaches.remove(beach);\n  beachPool.push(beach);\n  RedBlackNode(beach);\n}\n\nexport function removeBeach(beach) {\n  var circle = beach.circle,\n      x = circle.x,\n      y = circle.cy,\n      vertex = [x, y],\n      previous = beach.P,\n      next = beach.N,\n      disappearing = [beach];\n  detachBeach(beach);\n  var lArc = previous;\n\n  while (lArc.circle && Math.abs(x - lArc.circle.x) < epsilon && Math.abs(y - lArc.circle.cy) < epsilon) {\n    previous = lArc.P;\n    disappearing.unshift(lArc);\n    detachBeach(lArc);\n    lArc = previous;\n  }\n\n  disappearing.unshift(lArc);\n  detachCircle(lArc);\n  var rArc = next;\n\n  while (rArc.circle && Math.abs(x - rArc.circle.x) < epsilon && Math.abs(y - rArc.circle.cy) < epsilon) {\n    next = rArc.N;\n    disappearing.push(rArc);\n    detachBeach(rArc);\n    rArc = next;\n  }\n\n  disappearing.push(rArc);\n  detachCircle(rArc);\n  var nArcs = disappearing.length,\n      iArc;\n\n  for (iArc = 1; iArc < nArcs; ++iArc) {\n    rArc = disappearing[iArc];\n    lArc = disappearing[iArc - 1];\n    setEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);\n  }\n\n  lArc = disappearing[0];\n  rArc = disappearing[nArcs - 1];\n  rArc.edge = createEdge(lArc.site, rArc.site, null, vertex);\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\nexport function addBeach(site) {\n  var x = site[0],\n      directrix = site[1],\n      lArc,\n      rArc,\n      dxl,\n      dxr,\n      node = beaches._;\n\n  while (node) {\n    dxl = leftBreakPoint(node, directrix) - x;\n    if (dxl > epsilon) node = node.L;else {\n      dxr = x - rightBreakPoint(node, directrix);\n\n      if (dxr > epsilon) {\n        if (!node.R) {\n          lArc = node;\n          break;\n        }\n\n        node = node.R;\n      } else {\n        if (dxl > -epsilon) {\n          lArc = node.P;\n          rArc = node;\n        } else if (dxr > -epsilon) {\n          lArc = node;\n          rArc = node.N;\n        } else {\n          lArc = rArc = node;\n        }\n\n        break;\n      }\n    }\n  }\n\n  createCell(site);\n  var newArc = createBeach(site);\n  beaches.insert(lArc, newArc);\n  if (!lArc && !rArc) return;\n\n  if (lArc === rArc) {\n    detachCircle(lArc);\n    rArc = createBeach(lArc.site);\n    beaches.insert(newArc, rArc);\n    newArc.edge = rArc.edge = createEdge(lArc.site, newArc.site);\n    attachCircle(lArc);\n    attachCircle(rArc);\n    return;\n  }\n\n  if (!rArc) {\n    // && lArc\n    newArc.edge = createEdge(lArc.site, newArc.site);\n    return;\n  } // else lArc !== rArc\n\n\n  detachCircle(lArc);\n  detachCircle(rArc);\n  var lSite = lArc.site,\n      ax = lSite[0],\n      ay = lSite[1],\n      bx = site[0] - ax,\n      by = site[1] - ay,\n      rSite = rArc.site,\n      cx = rSite[0] - ax,\n      cy = rSite[1] - ay,\n      d = 2 * (bx * cy - by * cx),\n      hb = bx * bx + by * by,\n      hc = cx * cx + cy * cy,\n      vertex = [(cy * hb - by * hc) / d + ax, (bx * hc - cx * hb) / d + ay];\n  setEdgeEnd(rArc.edge, lSite, rSite, vertex);\n  newArc.edge = createEdge(lSite, site, null, vertex);\n  rArc.edge = createEdge(site, rSite, null, vertex);\n  attachCircle(lArc);\n  attachCircle(rArc);\n}\n\nfunction leftBreakPoint(arc, directrix) {\n  var site = arc.site,\n      rfocx = site[0],\n      rfocy = site[1],\n      pby2 = rfocy - directrix;\n  if (!pby2) return rfocx;\n  var lArc = arc.P;\n  if (!lArc) return -Infinity;\n  site = lArc.site;\n  var lfocx = site[0],\n      lfocy = site[1],\n      plby2 = lfocy - directrix;\n  if (!plby2) return lfocx;\n  var hl = lfocx - rfocx,\n      aby2 = 1 / pby2 - 1 / plby2,\n      b = hl / plby2;\n  if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;\n  return (rfocx + lfocx) / 2;\n}\n\nfunction rightBreakPoint(arc, directrix) {\n  var rArc = arc.N;\n  if (rArc) return leftBreakPoint(rArc, directrix);\n  var site = arc.site;\n  return site[1] === directrix ? site[0] : Infinity;\n}","import { addBeach, removeBeach } from \"./Beach\";\nimport { sortCellHalfedges, cellHalfedgeStart, clipCells } from \"./Cell\";\nimport { firstCircle } from \"./Circle\";\nimport { clipEdges } from \"./Edge\";\nimport RedBlackTree from \"./RedBlackTree\";\nexport var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var beaches;\nexport var cells;\nexport var circles;\nexport var edges;\n\nfunction triangleArea(a, b, c) {\n  return (a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]);\n}\n\nfunction lexicographic(a, b) {\n  return b[1] - a[1] || b[0] - a[0];\n}\n\nexport default function Diagram(sites, extent) {\n  var site = sites.sort(lexicographic).pop(),\n      x,\n      y,\n      circle;\n  edges = [];\n  cells = new Array(sites.length);\n  beaches = new RedBlackTree();\n  circles = new RedBlackTree();\n\n  while (true) {\n    circle = firstCircle;\n\n    if (site && (!circle || site[1] < circle.y || site[1] === circle.y && site[0] < circle.x)) {\n      if (site[0] !== x || site[1] !== y) {\n        addBeach(site);\n        x = site[0], y = site[1];\n      }\n\n      site = sites.pop();\n    } else if (circle) {\n      removeBeach(circle.arc);\n    } else {\n      break;\n    }\n  }\n\n  sortCellHalfedges();\n\n  if (extent) {\n    var x0 = +extent[0][0],\n        y0 = +extent[0][1],\n        x1 = +extent[1][0],\n        y1 = +extent[1][1];\n    clipEdges(x0, y0, x1, y1);\n    clipCells(x0, y0, x1, y1);\n  }\n\n  this.edges = edges;\n  this.cells = cells;\n  beaches = circles = edges = cells = null;\n}\nDiagram.prototype = {\n  constructor: Diagram,\n  polygons: function polygons() {\n    var edges = this.edges;\n    return this.cells.map(function (cell) {\n      var polygon = cell.halfedges.map(function (i) {\n        return cellHalfedgeStart(cell, edges[i]);\n      });\n      polygon.data = cell.site.data;\n      return polygon;\n    });\n  },\n  triangles: function triangles() {\n    var triangles = [],\n        edges = this.edges;\n    this.cells.forEach(function (cell, i) {\n      if (!(m = (halfedges = cell.halfedges).length)) return;\n      var site = cell.site,\n          halfedges,\n          j = -1,\n          m,\n          s0,\n          e1 = edges[halfedges[m - 1]],\n          s1 = e1.left === site ? e1.right : e1.left;\n\n      while (++j < m) {\n        s0 = s1;\n        e1 = edges[halfedges[j]];\n        s1 = e1.left === site ? e1.right : e1.left;\n\n        if (s0 && s1 && i < s0.index && i < s1.index && triangleArea(site, s0, s1) < 0) {\n          triangles.push([site.data, s0.data, s1.data]);\n        }\n      }\n    });\n    return triangles;\n  },\n  links: function links() {\n    return this.edges.filter(function (edge) {\n      return edge.right;\n    }).map(function (edge) {\n      return {\n        source: edge.left.data,\n        target: edge.right.data\n      };\n    });\n  },\n  find: function find(x, y, radius) {\n    var that = this,\n        i0,\n        i1 = that._found || 0,\n        n = that.cells.length,\n        cell; // Use the previously-found cell, or start with an arbitrary one.\n\n    while (!(cell = that.cells[i1])) {\n      if (++i1 >= n) return null;\n    }\n\n    var dx = x - cell.site[0],\n        dy = y - cell.site[1],\n        d2 = dx * dx + dy * dy; // Traverse the half-edges to find a closer cell, if any.\n\n    do {\n      cell = that.cells[i0 = i1], i1 = null;\n      cell.halfedges.forEach(function (e) {\n        var edge = that.edges[e],\n            v = edge.left;\n        if ((v === cell.site || !v) && !(v = edge.right)) return;\n        var vx = x - v[0],\n            vy = y - v[1],\n            v2 = vx * vx + vy * vy;\n        if (v2 < d2) d2 = v2, i1 = v.index;\n      });\n    } while (i1 !== null);\n\n    that._found = i0;\n    return radius == null || d2 <= radius * radius ? cell.site : null;\n  }\n};","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\nTransform.prototype = {\n  constructor: Transform,\n  scale: function scale(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function translate(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function apply(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function applyX(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function applyY(y) {\n    return y * this.k + this.y;\n  },\n  invert: function invert(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function invertX(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function invertY(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function rescaleX(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function rescaleY(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function toString() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\nexport var identity = new Transform(1, 0, 0);\ntransform.prototype = Transform.prototype;\nexport default function transform(node) {\n  while (!node.__zoom) {\n    if (!(node = node.parentNode)) return identity;\n  }\n\n  return node.__zoom;\n}","import { dispatch } from \"d3-dispatch\";\nimport { dragDisable, dragEnable } from \"d3-drag\";\nimport { interpolateZoom } from \"d3-interpolate\";\nimport { event, customEvent, select, mouse, touch } from \"d3-selection\";\nimport { interrupt } from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport { Transform, identity } from \"./transform.js\";\nimport noevent, { nopropagation } from \"./noevent.js\"; // Ignore right-click, since that should open the context menu.\n\nfunction defaultFilter() {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta() {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || \"ontouchstart\" in this;\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1), dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1));\n}\n\nexport default function () {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0;\n\n  function zoom(selection) {\n    selection.property(\"__zoom\", defaultTransform).on(\"wheel.zoom\", wheeled).on(\"mousedown.zoom\", mousedowned).on(\"dblclick.zoom\", dblclicked).filter(touchable).on(\"touchstart.zoom\", touchstarted).on(\"touchmove.zoom\", touchmoved).on(\"touchend.zoom touchcancel.zoom\", touchended).style(\"touch-action\", \"none\").style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function (collection, transform, point) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n\n    if (collection !== selection) {\n      schedule(collection, transform, point);\n    } else {\n      selection.interrupt().each(function () {\n        gesture(this, arguments).start().zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform).end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function (selection, k, p) {\n    zoom.scaleTo(selection, function () {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p);\n  };\n\n  zoom.scaleTo = function (selection, k, p) {\n    zoom.transform(selection, function () {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p);\n  };\n\n  zoom.translateBy = function (selection, x, y) {\n    zoom.transform(selection, function () {\n      return constrain(this.__zoom.translate(typeof x === \"function\" ? x.apply(this, arguments) : x, typeof y === \"function\" ? y.apply(this, arguments) : y), extent.apply(this, arguments), translateExtent);\n    });\n  };\n\n  zoom.translateTo = function (selection, x, y, p) {\n    zoom.transform(selection, function () {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(typeof x === \"function\" ? -x.apply(this, arguments) : -x, typeof y === \"function\" ? -y.apply(this, arguments) : -y), e, translateExtent);\n    }, p);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k,\n        y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point) {\n    transition.on(\"start.zoom\", function () {\n      gesture(this, arguments).start();\n    }).on(\"interrupt.zoom end.zoom\", function () {\n      gesture(this, arguments).end();\n    }).tween(\"zoom\", function () {\n      var that = this,\n          args = arguments,\n          g = gesture(that, args),\n          e = extent.apply(that, args),\n          p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n          w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n          a = that.__zoom,\n          b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n          i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n      return function (t) {\n        if (t === 1) t = b; // Avoid rounding error on end.\n        else {\n            var l = i(t),\n                k = w / l[2];\n            t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k);\n          }\n        g.zoom(null, t);\n      };\n    });\n  }\n\n  function gesture(that, args, clean) {\n    return !clean && that.__zooming || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    start: function start() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n\n      return this;\n    },\n    zoom: function zoom(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function end() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n\n      return this;\n    },\n    emit: function emit(type) {\n      customEvent(new ZoomEvent(zoom, type, this.that.__zoom), listeners.apply, listeners, [type, this.that, this.args]);\n    }\n  };\n\n  function wheeled() {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, arguments),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = mouse(this); // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n\n      clearTimeout(g.wheel);\n    } // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return; // Otherwise, capture the mouse point and location at the start.\n      else {\n          g.mouse = [p, t.invert(p)];\n          interrupt(this);\n          g.start();\n        }\n\n    noevent();\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned() {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var g = gesture(this, arguments, true),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = mouse(this),\n        x0 = event.clientX,\n        y0 = event.clientY;\n    dragDisable(event.view);\n    nopropagation();\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved() {\n      noevent();\n\n      if (!g.moved) {\n        var dx = event.clientX - x0,\n            dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n\n      g.zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = mouse(g.that), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped() {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent();\n      g.end();\n    }\n  }\n\n  function dblclicked() {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = mouse(this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, arguments), translateExtent);\n    noevent();\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0);else select(this).call(zoom.transform, t1);\n  }\n\n  function touchstarted() {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, arguments, event.changedTouches.length === n),\n        started,\n        i,\n        t,\n        p;\n    nopropagation();\n\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = touch(this, touches, t.identifier);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchstarting = setTimeout(function () {\n        touchstarting = null;\n      }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved() {\n    if (!this.__zooming) return;\n    var g = gesture(this, arguments),\n        touches = event.changedTouches,\n        n = touches.length,\n        i,\n        t,\n        p,\n        l;\n    noevent();\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n    g.taps = 0;\n\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = touch(this, touches, t.identifier);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n\n    t = g.that.__zoom;\n\n    if (g.touch1) {\n      var p0 = g.touch0[0],\n          l0 = g.touch0[1],\n          p1 = g.touch1[0],\n          l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    } else if (g.touch0) p = g.touch0[0], l = g.touch0[1];else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended() {\n    if (!this.__zooming) return;\n    var g = gesture(this, arguments),\n        touches = event.changedTouches,\n        n = touches.length,\n        i,\n        t;\n    nopropagation();\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function () {\n      touchending = null;\n    }, touchDelay);\n\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);else {\n      g.end(); // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n\n      if (g.taps === 2) {\n        var p = select(this).on(\"dblclick.zoom\");\n        if (p) p.apply(this, arguments);\n      }\n    }\n  }\n\n  zoom.wheelDelta = function (_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function (_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function (_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function (_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function (_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function (_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function (_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function (_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function (_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function () {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function (_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  return zoom;\n}","import { extent } from 'd3';\nimport { color } from 'd3-color';\nimport { scaleLinear } from 'd3-scale';\nimport React, {\n  FC,\n  RefObject,\n  useState,\n} from 'react';\nimport {\n  animated,\n  SpringConfig,\n  useSprings,\n} from 'react-spring';\n\nimport { IBarChartDataSet } from '../../Histogram';\nimport { EChartDirection } from '../../v3/BarChart';\nimport { TLabelComponent } from '../Label';\nimport { Labels } from '../Labels';\nimport { TTipFunc } from '../ToolTip';\nimport { ToolTips } from '../ToolTips';\nimport { ExtendedGroupItem } from './Bars';\nimport { buildHistogramSprings } from './histogramHelper';\n\nconst binWidth = (bin: [number, number]) => bin[1] - bin[0];\n\ninterface IProps {\n  bins: [number, number][];\n  config?: SpringConfig;\n  colorScheme?: readonly string[],\n  continuousDomain: [number, number];\n  direction?: EChartDirection;\n  domain: [number, number];\n  height: number;\n  hoverColorScheme?: readonly string[];\n  labels?: string[];\n  left?: number;\n  showLabels?: boolean[];\n  LabelComponent?: TLabelComponent;\n  stroke?: string;\n  top?: number;\n  tip?: TTipFunc;\n  values: IBarChartDataSet[];\n  visible?: Record<string, boolean>;\n  width: number;\n}\n\nconst HistogramBars: FC<IProps> = ({\n  bins,\n  config = {\n    duration: 250,\n  },\n  colorScheme = ['#a9a9a9', '#2a5379'],\n  continuousDomain,\n  direction = EChartDirection.HORIZONTAL,\n  domain,\n  height,\n  hoverColorScheme,\n  LabelComponent,\n  labels,\n  left = 0,\n  showLabels = [],\n  stroke = \"#FFF\",\n  top = 0,\n  tip,\n  values,\n  visible = {},\n  width,\n}) => {\n  if (width === 0) {\n    return null;\n  }\n\n  if (!hoverColorScheme) {\n    hoverColorScheme = colorScheme.map((c) => color(c)?.brighter(0.1).toString()) as readonly string[];\n  }\n  const dataSets: ExtendedGroupItem[] = [];\n  const binLabels = bins.reduce((p, n) => p.concat(Array.isArray(n) ? n : [n]), [] as (number | string)[]);\n\n  values.forEach((count, datasetIndex) => {\n\n    const totalArea = count.data.reduce((p, n, i) => p + n * binWidth(bins[i]), 0);\n    count.data.forEach((value, i) => {\n      dataSets.push({\n        groupLabel: count.label,\n        datasetIndex,\n        label: String(binLabels[i]),\n        binIndex: i,\n        percentage: totalArea === 0 ? '0' : (((value * binWidth(bins[i])) / totalArea) * 100).toFixed(2),\n        value: visible[binLabels[i]] !== false && visible[count.label] !== false ? value : 0,\n      });\n    });\n  });\n\n  // Numeric scale should try to start at 0 otherwise bar heights are incorrect when domain = [x, x]\n  const scaleDomain = extent([0, ...domain]) as [number, number];\n  const numericScale = scaleLinear()\n    .domain(scaleDomain)\n    .rangeRound([0, direction === EChartDirection.HORIZONTAL ? width : height]);\n\n  // Distribute the bin values across the x axis\n  const continuousScale = scaleLinear()\n    .domain(continuousDomain)\n    .rangeRound([0, direction === EChartDirection.VERTICAL ? width : height]);\n\n  const transform = `(${left}, ${top})`;\n\n  const [hover, setHover] = useState(-1);\n  const springs = useSprings(dataSets.length, buildHistogramSprings({\n    bins,\n    values,\n    height,\n    width,\n    dataSets,\n    continuousScale,\n    numericScale,\n    colorScheme,\n    hoverColorScheme,\n    config,\n    direction,\n  }));\n\n  const refs: RefObject<any>[] = [];\n  return (\n    <>\n      <g className=\"bars\"\n        transform={`translate${transform}`}>\n        {\n          springs.map((props: any, i) => {\n            const item = dataSets[i];\n            refs[i] = React.createRef<any>();\n            return <animated.rect\n              ref={refs[i]}\n              stroke={stroke}\n              className=\"chart-bar\"\n              onMouseEnter={() => setHover(i)}\n              onMouseLeave={() => setHover(-1)}\n              key={`bar-${item.groupLabel}.${item.label}.${item.value}`}\n              height={props.height}\n              fill={hover == i ? props.hoverFill : props.fill}\n              width={props.width}\n              x={props.x as any}\n              y={props.y as any}\n            />\n          })\n        }\n        <Labels\n          colorScheme={colorScheme}\n          springs={springs}\n          showLabels={showLabels}\n          items={dataSets}\n          direction={direction}\n          labels={labels}\n          LabelComponent={LabelComponent} />\n      </g>\n\n      <ToolTips\n        springs={springs}\n        refs={refs}\n        bins={bins}\n        tip={tip}\n        items={dataSets} />\n\n    </>)\n}\n\n\nexport default HistogramBars;\n","import { ScaleLinear } from 'd3-scale';\nimport { SpringConfig } from 'react-spring';\n\nimport { IBarChartDataSet } from '../../Histogram';\nimport { EChartDirection } from '../../v3/BarChart';\nimport { ExtendedGroupItem } from './Bars';\n\ninterface IHistogramSpringProps {\n  bins: [number, number][];\n  values: IBarChartDataSet[];\n  height: number;\n  width: number;\n  dataSets: ExtendedGroupItem[];\n  numericScale: ScaleLinear<any, any>;\n  continuousScale: ScaleLinear<any, any>;\n  colorScheme: readonly string[];\n  hoverColorScheme?: readonly string[];\n  config: SpringConfig,\n  direction: EChartDirection;\n}\n/**\n * Build the from / to spring animation properties to animate the bars.\n */\nexport const buildHistogramSprings = (props: IHistogramSpringProps) => {\n  const { bins, direction, config, height, dataSets, numericScale, continuousScale, colorScheme, hoverColorScheme } = props;\n  const s = dataSets.map((item, index) => {\n    const bandPosition = continuousScale(bins[index][0]);\n\n    // Ensure that if we have bins that don't start at 0 our bars will still have the correct width\n    const startValue = bins[0][0];\n    const binWidth = bins[index][1] - bins[index][0];\n    const itemWidth = continuousScale(binWidth + startValue);\n\n    const itemHeight = numericScale(item.value);\n\n    if (direction === EChartDirection.HORIZONTAL) {\n      return {\n        from: {\n          width: 0,\n          fill: colorScheme[item.datasetIndex],\n          hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n          x: 0,\n          y: height - itemWidth - bandPosition,\n          height: itemWidth,\n        },\n        to: {\n          width: itemHeight,\n          fill: colorScheme[item.datasetIndex],\n          hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n          x: 0,\n          y: height - itemWidth - bandPosition,\n          height: itemWidth,\n        },\n        config,\n      }\n    }\n\n    return {\n      from: {\n        height: 0,\n        fill: colorScheme[item.datasetIndex],\n        hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n        x: bandPosition,\n        y: height,\n        width: itemWidth,\n      },\n      to: {\n        height: itemHeight,\n        fill: colorScheme[item.datasetIndex],\n        hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n        x: bandPosition,\n        y: height - itemHeight,\n        width: itemWidth,\n      },\n      config,\n    }\n  });\n  return s;\n}\n","import interval from \"./interval.js\";\nvar month = interval(function (date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function (date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function (start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function (date) {\n  return date.getMonth();\n});\nexport default month;\nexport var months = month.range;","import { interpolate } from 'd3-interpolate';\nimport React, {\n  FC,\n  useLayoutEffect,\n  useRef,\n} from 'react';\nimport {\n  animated,\n  useSpring,\n} from 'react-spring';\n\nimport {\n  IProps,\n  useMakeLine,\n} from '../utils/useMakeLine';\n\ntype Props = {\n  animate?: boolean;\n  label: string;\n\n} & IProps;\n\n// @TODO look at using https://github.com/pbeshai/d3-interpolate-path instead \nconst Line: FC<Props> = (props) => {\n  const { label = '', line } = props;\n  const className = `line-${label.replace(/[^a-z]/gi, '')}`;\n  const { previous, current } = useMakeLine(props);\n\n  const spring = useSpring<any>({\n    from: { t: 0 },\n    to: { t: 1 },\n    reset: true,\n    delay: 0\n  });\n\n  const getInterpolator = () => interpolate(previous, current);\n\n  const interpolator = useRef(getInterpolator());\n  useLayoutEffect(() => {\n    interpolator.current = getInterpolator();\n  });\n\n  return (\n    <>\n      <animated.path\n        className={className}\n        fill=\"none\"\n        strokeDashoffset={line.strokeDashOffset}\n        strokeDasharray={line.strokeDashArray}\n        stroke={line.stroke}\n        d={props.animate\n          ? spring.t.interpolate((t) => interpolator.current(Number(t)))\n          : current}\n      />\n    </>\n  )\n}\n\nexport default Line;\n","import _toConsumableArray from \"/home/rob/cl-react-graph/docs-src/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/rob/cl-react-graph/docs-src/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/rob/cl-react-graph/docs-src/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport { useState, useRef, useMemo, useEffect } from 'react';\nimport { debounce } from 'debounce';\n\nfunction useMeasure() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    debounce: 0,\n    scroll: false\n  },\n      debounce$1 = _ref.debounce,\n      scroll = _ref.scroll,\n      polyfill = _ref.polyfill;\n\n  var ResizeObserver = polyfill || (typeof window === 'undefined' ? function ResizeObserver() {\n    _classCallCheck(this, ResizeObserver);\n  } : window.ResizeObserver);\n\n  if (!ResizeObserver) {\n    throw new Error('This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills');\n  }\n\n  var _useState = useState({\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n    bottom: 0,\n    right: 0,\n    x: 0,\n    y: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      bounds = _useState2[0],\n      set = _useState2[1]; // keep all state in a ref\n\n\n  var state = useRef({\n    element: null,\n    scrollContainers: null,\n    resizeObserver: null,\n    lastBounds: bounds\n  }); // set actual debounce values early, so effects know if they should react accordingly\n\n  var scrollDebounce = debounce$1 ? typeof debounce$1 === 'number' ? debounce$1 : debounce$1.scroll : null;\n  var resizeDebounce = debounce$1 ? typeof debounce$1 === 'number' ? debounce$1 : debounce$1.resize : null; // memoize handlers, so event-listeners know when they should update\n\n  var _useMemo = useMemo(function () {\n    var callback = function callback() {\n      if (!state.current.element) return;\n\n      var _state$current$elemen = state.current.element.getBoundingClientRect(),\n          left = _state$current$elemen.left,\n          top = _state$current$elemen.top,\n          width = _state$current$elemen.width,\n          height = _state$current$elemen.height,\n          bottom = _state$current$elemen.bottom,\n          right = _state$current$elemen.right,\n          x = _state$current$elemen.x,\n          y = _state$current$elemen.y;\n\n      var size = {\n        left: left,\n        top: top,\n        width: width,\n        height: height,\n        bottom: bottom,\n        right: right,\n        x: x,\n        y: y\n      };\n      Object.freeze(size);\n      if (!areBoundsEqual(state.current.lastBounds, size)) set(state.current.lastBounds = size);\n    };\n\n    return [callback, resizeDebounce ? debounce(callback, resizeDebounce) : callback, scrollDebounce ? debounce(callback, scrollDebounce) : callback];\n  }, [set, scrollDebounce, resizeDebounce]),\n      _useMemo2 = _slicedToArray(_useMemo, 3),\n      forceRefresh = _useMemo2[0],\n      resizeChange = _useMemo2[1],\n      scrollChange = _useMemo2[2]; // cleanup current scroll-listeners / observers\n\n\n  function removeListeners() {\n    if (state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(function (element) {\n        return element.removeEventListener('scroll', scrollChange, true);\n      });\n      state.current.scrollContainers = null;\n    }\n\n    if (state.current.resizeObserver) {\n      state.current.resizeObserver.disconnect();\n      state.current.resizeObserver = null;\n    }\n  } // add scroll-listeners / observers\n\n\n  function addListeners() {\n    if (!state.current.element) return;\n    state.current.resizeObserver = new ResizeObserver(scrollChange);\n    state.current.resizeObserver.observe(state.current.element);\n\n    if (scroll && state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(function (scrollContainer) {\n        return scrollContainer.addEventListener('scroll', scrollChange, {\n          capture: true,\n          passive: true\n        });\n      });\n    }\n  } // the ref we expose to the user\n\n\n  var ref = function ref(node) {\n    if (!node || node === state.current.element) return;\n    removeListeners();\n    state.current.element = node;\n    state.current.scrollContainers = findScrollContainers(node);\n    addListeners();\n  }; // add general event listeners\n\n\n  useOnWindowScroll(scrollChange, Boolean(scroll));\n  useOnWindowResize(resizeChange); // respond to changes that are relevant for the listeners\n\n  useEffect(function () {\n    removeListeners();\n    addListeners();\n  }, [scroll, scrollChange, resizeChange]); // remove all listeners when the components unmounts\n\n  useEffect(function () {\n    return removeListeners;\n  }, []);\n  return [ref, bounds, forceRefresh];\n} // Adds native resize listener to window\n\n\nfunction useOnWindowResize(onWindowResize) {\n  useEffect(function () {\n    var cb = onWindowResize;\n    window.addEventListener('resize', cb);\n    return function () {\n      return void window.removeEventListener('resize', cb);\n    };\n  }, [onWindowResize]);\n}\n\nfunction useOnWindowScroll(onScroll, enabled) {\n  useEffect(function () {\n    if (enabled) {\n      var cb = onScroll;\n      window.addEventListener('scroll', cb, {\n        capture: true,\n        passive: true\n      });\n      return function () {\n        return void window.removeEventListener('scroll', cb, true);\n      };\n    }\n  }, [onScroll, enabled]);\n} // Returns a list of scroll offsets\n\n\nfunction findScrollContainers(element) {\n  var result = [];\n  if (!element || element === document.body) return result;\n\n  var _window$getComputedSt = window.getComputedStyle(element),\n      overflow = _window$getComputedSt.overflow,\n      overflowX = _window$getComputedSt.overflowX,\n      overflowY = _window$getComputedSt.overflowY;\n\n  if ([overflow, overflowX, overflowY].some(function (prop) {\n    return prop === 'auto' || prop === 'scroll';\n  })) result.push(element);\n  return [].concat(result, _toConsumableArray(findScrollContainers(element.parentElement)));\n} // Checks if element boundaries are equal\n\n\nvar keys = ['x', 'y', 'top', 'bottom', 'left', 'right', 'width', 'height'];\n\nvar areBoundsEqual = function areBoundsEqual(a, b) {\n  return keys.every(function (key) {\n    return a[key] === b[key];\n  });\n};\n\nif (typeof module !== 'undefined' && Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(module, 'exports').writable) {\n  module.exports = useMeasure;\n}\n\nexport default useMeasure;","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}","export default function (d) {\n  return d;\n}","import 'd3-transition';\n\nimport { interpolate } from 'd3-interpolate';\nimport { scaleOrdinal } from 'd3-scale';\nimport {\n  select,\n  Selection,\n} from 'd3-selection';\nimport {\n  arc,\n  Arc,\n  pie,\n  PieArcDatum,\n} from 'd3-shape';\nimport cloneDeep from 'lodash/cloneDeep';\nimport merge from 'lodash/merge';\n\nimport colorScheme from './colors';\nimport {\n  IBarChartDataSet,\n  IChartAdaptor,\n} from './Histogram';\nimport {\n  IPieChartProps,\n  IPieDataItem,\n} from './PieChart';\nimport tips, { makeTip } from './tip';\nimport { onMouseOut } from './utils/mouseOver';\nimport { DeepPartial } from './utils/types';\n\ninterface IPieDataset {\n  count: number;\n  groupLabel: string;\n  label: string;\n}\n\n\n// Function to calculate pie chart paths from data\nconst thisPie = pie()\n  .sort(null)\n  .value((d: any) => d.count);\n\n\nconst outerRadius = (props, setIndex = 0) => {\n  const { donutWidth = 0, width, height } = props;\n\n  const radius = Math.min(Number(width), height) / 2;\n  return donutWidth === 0\n    ? radius - 10\n    : radius - 10 - (setIndex * (donutWidth + 10));\n};\n\nconst innerRadius = (props, setIndex = 0) => {\n  const { donutWidth = 0, width, height } = props;\n  const radius = Math.min(Number(width), height) / 2;\n  return donutWidth === 0\n    ? 0\n    : radius - 10 - donutWidth - (setIndex * (donutWidth + 10));\n};\n\nconst getArc = (props, i: number) => {\n  return arc()\n    .outerRadius(outerRadius(props, i))\n    .innerRadius(innerRadius(props, i));\n}\n\nexport const pieChartD3 = ((): IChartAdaptor<IPieChartProps> => {\n\n  let tipContainer;\n  let tipContent;\n\n  const props: IPieChartProps = {\n    backgroundColor: '#ddd',\n    className: 'piechart-d3',\n    colorScheme,\n    data: {\n      bins: [],\n      counts: [],\n    },\n    donutWidth: 0,\n    height: 200,\n    hover: {\n      lighten: 0.1,\n    },\n    labels: {\n      display: true,\n      displayFn: (d) => d.value,\n    },\n    margin: {\n      bottom: 0,\n      left: 10,\n      right: 0,\n      top: 10,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (bins: string[], i: number, d: number, groupLabel): string => {\n      return groupLabel + ': ' + bins[i] + '<br />' + d;\n    },\n    visible: {},\n    width: 200,\n  };\n\n  let containers: any[];\n  let svg: Selection<any, any, any, any>;\n  let dataSets: IPieDataset[][];\n  let previousData: any;\n  let storedWidth: number;\n  let storedHeight: number;\n\n  const PieChartD3 = {\n\n    create(el: Element, newProps: DeepPartial<IPieChartProps> = {}) {\n      merge(props, newProps);\n      previousData = props.data.counts.map((set: IBarChartDataSet, setIndex: number) => {\n        return set.data\n          .map((count, i) => ({\n            count,\n            groupLabel: set.label,\n            label: props.data.bins[i],\n          }));\n      });\n      this._makeSvg(el);\n      containers = [];\n      previousData.forEach((dataSet, i) => {\n        this.drawChartBg(i);\n      });\n\n      this.update(props);\n    },\n\n    _makeSvg(el: Element) {\n      if (svg) {\n        svg.selectAll('svg > *').remove();\n        svg.remove();\n        const childNodes = el.getElementsByTagName('svg');\n        if (childNodes.length > 0) {\n          el.removeChild(childNodes[0]);\n        }\n      }\n      const { margin, width, height, className } = props;\n\n      // Reference to svg element containing chart\n      svg = select(el).append('svg')\n        .attr('class', className)\n        .attr('width', width)\n        .attr('height', height)\n        .attr('viewBox', `0 0 ${width} ${height}`)\n        .append('g')\n        .attr('transform',\n          'translate(' + margin.left + ',' + margin.top + ')');\n\n      const r = makeTip(props.tipContainer, tipContainer);\n      tipContent = r.tipContent;\n      tipContainer = r.tipContainer;\n    },\n\n    update(newProps: DeepPartial<IPieChartProps>) {\n      if (!props.data) {\n        return;\n      }\n      merge(props, newProps);\n      if (newProps.data) {\n        props.data = cloneDeep(newProps.data) as IPieChartProps['data'];\n      }\n      if (props.colorScheme) {\n        props.colorScheme = props.colorScheme;\n      }\n      if (!props.data.bins) {\n        return;\n      }\n\n      this.drawCharts();\n    },\n\n    drawCharts() {\n      const { data, visible } = props;\n      dataSets = data.counts.map((set: IBarChartDataSet) => {\n        return set.data\n          .map((count, i) => ({\n            count: visible[data.bins[i]] !== false ? count : 0,\n            groupLabel: set.label,\n            label: data.bins[i],\n          }));\n      });\n\n      dataSets.forEach((dataSet, i) => {\n        const theme = data.counts[i]?.colors ?? props.colorScheme;\n        this.drawChart(dataSet, i, data.bins, theme);\n        this.drawLabels(dataSet, i, data.bins, theme);\n      });\n      previousData = dataSets;\n    },\n\n    drawChartBg(i: number) {\n      const { backgroundColor, width, height } = props;\n      const tau = 2 * Math.PI; // http://tauday.com/tau-manifesto\n      const bgArc = arc()\n        .innerRadius(innerRadius(props, i))\n        .outerRadius(outerRadius(props, i))\n        .startAngle(0)\n        .endAngle(tau);\n      const container = svg\n        .append('g')\n        .attr('class', 'pie-bg');\n      const background = container.append('path')\n        .attr('class', 'pie-background')\n        .style('fill', backgroundColor);\n      background.enter()\n        .attr('transform', 'translate(' + Number(width) / 2 + ',' + height / 2 + ')')\n        .attr('d', bgArc);\n\n      background.merge(background);\n\n      if (!containers[i]) {\n        svg\n          .append('g')\n          .attr('class', 'pie-container')\n\n        svg\n          .append('g')\n          .attr('class', 'pie-labels')\n        containers[i] = svg;\n      }\n    },\n\n    drawChart(data, i: number, bins: string[], theme: string[]) {\n      const { width, height, tip, tipContentFn, hover } = props;\n\n      // Formatted pie chart arcs based on previous current data.\n      // If data has changed length (i.e. swapping the entire dataset) use the new data.\n      const prev = previousData[i].length === data.length\n        ? previousData[i]\n        : data;\n      const arcs = thisPie(prev);\n      const colors = scaleOrdinal(theme);\n      // Set the domain to get consistent colours\n      colors.domain(Array.from(new Array(data.length).keys()).map(s => s.toString()));\n\n      // Stack multiple charts in concentric circles\n      const thisArc = getArc(props, i);\n\n      const path = containers[i].select('.pie-container').selectAll('path')\n        .data(thisPie(data));\n\n      path.enter()\n        .append('path')\n        .attr('transform', (d) => {\n          return 'translate(' + Number(width) / 2 + ',' + height / 2 + ')';\n        })\n        .attr('stroke', '#FFF')\n        .attr('fill', (_, j) => colors(j))\n        .on('mouseover', (d: PieArcDatum<IPieDataItem>, ix: number, nodes: any[]) => {\n          if (hover) {\n            select(nodes[ix])\n              .attr('fill-opacity', 1)\n              .transition('easeIn')\n              .attr('fill-opacity', 0.7);\n          }\n          tipContent.html(() => tipContentFn(bins, ix, d.data.count, d.data.groupLabel));\n          tip.fx.in(tipContainer);\n        })\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n        .attr('d', thisArc)\n        .style('opacity', 0)\n        .transition()\n        .duration(500)\n        .style('opacity', 1);\n\n      // Fade in when adding (merge)\n      path\n        .merge(path)\n        .on('mouseover', (d: PieArcDatum<IPieDataItem>, ix: number, nodes: any[]) => {\n          if (hover) {\n            select(nodes[ix])\n              .attr('fill-opacity', 1)\n              .transition('easeIn')\n              .attr('fill-opacity', 0.7);\n          }\n          tipContent.html(() => tipContentFn(bins, ix, d.data.count, d.data.groupLabel));\n          tip.fx.in(tipContainer);\n        })\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n        .transition()\n        .delay(400)\n        .duration(500)\n        .attrTween('d', arcTween(thisArc));\n\n      path.exit().transition()\n        .attrTween('d', arcTween(thisArc))\n        .duration(500)\n        .style('opacity', 0).remove();\n    },\n\n    drawLabels(data, i: number, bins: string[], theme: string[]) {\n      const { labels, width, height } = props;\n      const thisArc = getArc(props, i);\n      const path2 = containers[i].select('.pie-labels').selectAll('text.label')\n        .data(thisPie(data));\n      path2.enter().append('text')\n        .attr('class', 'label')\n        .each(() => {\n          // Store initial offset incase we change chart heights.\n          storedHeight = height;\n          storedWidth = Number(width);\n        })\n        .style('opacity', 0)\n        .text((d, ix: number) => d.value === 0 ? '' : labels.displayFn(d, ix))\n        .attr('transform', (d) => {\n          const centroid = thisArc.centroid(d);\n          const x = centroid[0] + (storedWidth / 2);\n          const y = centroid[1] + (storedHeight / 2);\n          return 'translate(' + x + ',' + y + ')';\n        })\n        .transition()\n        .duration(500)\n        .style('opacity', (d) => labels.display === false || d.value === 0 ? 0 : 1);\n\n      path2\n        .merge(path2)\n        .transition()\n        .duration(500)\n        .style('opacity', 0)\n        .transition()\n        .attr('transform', (d) => {\n          const centroid = thisArc.centroid(d);\n          const x = centroid[0] + (storedWidth / 2);\n          const y = centroid[1] + (storedHeight / 2);\n          return 'translate(' + x + ',' + y + ')';\n        })\n        .text((d, ix: number) => d.value === 0 ? '' : labels.displayFn(d, ix))\n        .transition()\n        .duration(500)\n        .style('opacity', (d) => {\n          // Only show if the new value is not 0 and labels are set to be displayed\n          return labels.display === false || d.value === 0 ? 0 : 1;\n        });\n\n      path2.exit().transition()\n        .duration(500)\n        .style('opacity', 0);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n\n  return PieChartD3;\n});\n\n// Returns a tween for a transitions \"d\" attribute, transitioning any selected\n// arcs from their current angle to the specified new angle.\nfunction arcTween(this: any, thisArc: Arc<any, any>) {\n  return function (this: any, d) {\n    const i = interpolate(this._current, d);\n    this._current = i(0);\n    return function (this: any, t) {\n      return thisArc(i(t));\n    };\n  };\n}\n","import constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport { tau } from \"./math.js\";\nexport default function () {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    } // Optionally sort the arcs by previously-computed values or by data.\n\n\n    if (sortValues != null) index.sort(function (i, j) {\n      return sortValues(arcs[i], arcs[j]);\n    });else if (sort != null) index.sort(function (i, j) {\n      return sort(data[i], data[j]);\n    }); // Compute the arcs! They are stored in the original data's order.\n\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function (_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function (_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function (_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function (_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  EColorManipulations,\n  IBarChartDataSet,\n  IChartAdaptor,\n  IChartState,\n  IMargin,\n  TipContentFn,\n} from './Histogram';\nimport { pieChartD3 } from './PieChartD3';\nimport { DeepPartial } from './utils/types';\n\ninterface ILabels {\n  display: boolean;\n  displayFn: (d: any, ix: number) => string | number;\n}\n\nexport interface IPieDataItem {\n  count: number;\n  groupLabel: string;\n  label: string;\n}\n\nexport interface IPieChartProps {\n  data: {\n    bins: string[],\n    counts: IBarChartDataSet[];\n  };\n  backgroundColor: string;\n  className: string;\n  colorScheme: string[];\n  donutWidth: number;\n  height: number;\n  hover?: Partial<Record<EColorManipulations, number>>,\n  labels: ILabels;\n  margin: IMargin;\n  tip: any;\n  tipContainer: string;\n  tipContentFn: TipContentFn<string>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\n/**\n * PieChart component\n */\nclass PieChart extends Component<DeepPartial<IPieChartProps>, IChartState> {\n\n  private chart: IChartAdaptor<IPieChartProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<IPieChartProps>) {\n    super(props);\n    this.chart = pieChartD3();\n\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (el) {\n      const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n      this.setState({\n        parentWidth: width,\n      }, () => this.chart.update(this.getChartState()));\n    }\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.create(el, this.getChartState());\n      if (this.props.width === '100%') {\n        window.addEventListener('resize', (e) => this.handleResize());\n        this.handleResize();\n      }\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.update(this.getChartState());\n    }\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<IPieChartProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.destroy();\n    }\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"piechart-chart-container\"></div>);\n  }\n}\n\nexport default PieChart;\n","import { Timer } from \"./timer.js\";\nexport default function (callback, delay, time) {\n  var t = new Timer();\n  delay = delay == null ? 0 : +delay;\n  t.restart(function (elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}","import { dispatch } from \"d3-dispatch\";\nimport { timer, timeout } from \"d3-timer\";\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\nexport default function (node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index,\n    // For context during callback.\n    group: group,\n    // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween; // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time); // If the elapsed delay is less than our first sleep, start immediately.\n\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o; // If the state is not SCHEDULED, then we previously errored on start.\n\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue; // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n\n      if (o.state === STARTED) return timeout(start); // Interrupt the active transition, if any.\n\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      } // Cancel any pre-empted transitions.\n      else if (+i < id) {\n          o.state = ENDED;\n          o.timer.stop();\n          o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n          delete schedules[i];\n        }\n    } // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n\n\n    timeout(function () {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    }); // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n\n    self.state = STARTED; // Initialize the tween, deleting null tween.\n\n    tween = new Array(n = self.tween.length);\n\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    } // Dispatch the end event.\n\n\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n\n    for (var i in schedules) {\n      return;\n    } // eslint-disable-line no-unused-vars\n\n\n    delete node.__transition;\n  }\n}","import { STARTING, ENDING, ENDED } from \"./transition/schedule.js\";\nexport default function (node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n  if (!schedules) return;\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) {\n      empty = false;\n      continue;\n    }\n\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}","import { get, set } from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function () {\n    var schedule = set(this, id),\n        tween = schedule.tween; // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error();\n  return function () {\n    var schedule = set(this, id),\n        tween = schedule.tween; // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n\n      for (var t = {\n        name: name,\n        value: value\n      }, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function (name, value) {\n  var id = this._id;\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n  transition.each(function () {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n  return function (node) {\n    return get(node, id).value[name];\n  };\n}","import { color } from \"d3-color\";\nimport { interpolateNumber, interpolateRgb, interpolateString } from \"d3-interpolate\";\nexport default function (a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber : b instanceof color ? interpolateRgb : (c = color(b)) ? (b = c, interpolateRgb) : interpolateString)(a, b);\n}","import { interpolateTransformSvg as interpolateTransform } from \"d3-interpolate\";\nimport { namespace } from \"d3-selection\";\nimport { tweenValue } from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function () {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function () {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0,\n        value1 = value(this),\n        string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0,\n        value1 = value(this),\n        string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function (name, value) {\n  var fullname = namespace(name),\n      i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\" ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value)) : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname) : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}","import { namespace } from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function (t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function (t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}","import { get, init } from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function () {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function () {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? delayFunction : delayConstant)(id, value)) : get(this.node(), id).delay;\n}","import { get, set } from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function () {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function () {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? durationFunction : durationConstant)(id, value)) : get(this.node(), id).duration;\n}","import { get, set } from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error();\n  return function () {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each(easeConstant(id, value)) : get(this.node(), id).ease;\n}","import { get, set, init } from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function (t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0,\n      on1,\n      sit = start(name) ? init : set;\n  return function () {\n    var schedule = sit(this, id),\n        on = schedule.on; // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n    schedule.on = on1;\n  };\n}\n\nexport default function (name, listener) {\n  var id = this._id;\n  return arguments.length < 2 ? get(this.node(), id).on.on(name) : this.each(onFunction(id, name, listener));\n}","function removeFunction(id) {\n  return function () {\n    var parent = this.parentNode;\n\n    for (var i in this.__transition) {\n      if (+i !== id) return;\n    }\n\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function () {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}","import { selection } from \"d3-selection\";\nvar Selection = selection.prototype.constructor;\nexport default function () {\n  return new Selection(this._groups, this._parents);\n}","import { interpolateTransformCss as interpolateTransform } from \"d3-interpolate\";\nimport { style } from \"d3-selection\";\nimport { set } from \"./schedule.js\";\nimport { tweenValue } from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function () {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = style(this, name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0,\n      on1,\n      listener0,\n      key = \"style.\" + name,\n      event = \"end.\" + key,\n      remove;\n  return function () {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined; // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n    schedule.on = on1;\n  };\n}\n\nexport default function (name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this.styleTween(name, styleNull(name, i)).on(\"end.style.\" + name, styleRemove(name)) : typeof value === \"function\" ? this.styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value))).each(styleMaybeRemove(this._id, name)) : this.styleTween(name, styleConstant(name, i, value), priority).on(\"end.style.\" + name, null);\n}","function styleInterpolate(name, i, priority) {\n  return function (t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}","function textInterpolate(i) {\n  return function (t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  return this.tween(key, textTween(value));\n}","import { selection } from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\nvar id = 0;\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\nexport default function transition(name) {\n  return selection().transition(name);\n}\nexport function newId() {\n  return ++id;\n}\nvar selection_prototype = selection.prototype;\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  end: transition_end\n};","import { selector } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function (select) {\n  var name = this._name,\n      id = this._id;\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}","import { selectorAll } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function (select) {\n  var name = this._name,\n      id = this._id;\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}","import { matcher } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nexport default function (match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}","import { Transition } from \"./index.js\";\nexport default function (transition) {\n  if (transition._id !== this._id) throw new Error();\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}","import { Transition, newId } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function () {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}","import { tweenValue } from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function () {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function () {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function (value) {\n  return this.tween(\"text\", typeof value === \"function\" ? textFunction(tweenValue(this, \"text\", value)) : textConstant(value == null ? \"\" : value + \"\"));\n}","import { set } from \"./schedule.js\";\nexport default function () {\n  var on0,\n      on1,\n      that = this,\n      id = that._id,\n      size = that.size();\n  return new Promise(function (resolve, reject) {\n    var cancel = {\n      value: reject\n    },\n        end = {\n      value: function value() {\n        if (--size === 0) resolve();\n      }\n    };\n    that.each(function () {\n      var schedule = set(this, id),\n          on = schedule.on; // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n\n        on1._.cancel.push(cancel);\n\n        on1._.interrupt.push(cancel);\n\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n  });\n}","import { Transition, newId } from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport { easeCubicInOut } from \"d3-ease\";\nimport { now } from \"d3-timer\";\nvar defaultTiming = {\n  time: null,\n  // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n\n  return timing;\n}\n\nexport default function (name) {\n  var id, timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}","export function cubicIn(t) {\n  return t * t * t;\n}\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}","import { selection } from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;","import interrupt from \"../interrupt.js\";\nexport default function (name) {\n  return this.each(function () {\n    interrupt(this, name);\n  });\n}","import { select } from 'd3-selection';\n\nexport type TOutputType = 'png' | 'blob';\nexport interface IWatermark {\n  svg: string;\n  width: number;\n  height: number;\n}\n// Method to combine an svg specified by id with the InfoSum watermark and \n// produce a blob or png output that can be used for download\nexport const outputSvg = (\n  svgId: string,\n  width: number,\n  height: number,\n  callback: (outputData: string | Blob | null) => void,\n  watermark: IWatermark,\n  type: TOutputType = 'blob',\n) => {\n  // Select the first svg element\n  const svg: any = select(`svg#${svgId}`);\n  const serializer = new XMLSerializer();\n  // generate IMG in new tab\n  const svgStr = serializer.serializeToString(svg.node());\n  const svgData = 'data:image/svg+xml;base64,' + window.btoa(unescape(encodeURIComponent(svgStr)));\n  // create canvas in memory(not in DOM)\n  const canvas = document.createElement('canvas');\n  // set canvas size\n  canvas.width = width + 20 + watermark.width;\n  canvas.height = height + 20;\n  // get canvas context for drawing on canvas\n  const context = canvas.getContext('2d');\n  // create images in memory(not DOM)\n  var image = new Image();\n  const watermarkImage = new Image();\n  // when watermark loaded create main image\n  watermarkImage.onload = () => {\n    // later when image loads run this\n    image.onload = () => {\n      // clear canvas\n      context!.clearRect(0, 0, canvas.width, canvas.height);\n      // draw image with SVG data to canvas\n      context!.drawImage(image, 10, 10, width, height);\n      context!.drawImage(watermarkImage, canvas.width - watermark.width - 10, 10, watermark.width, watermark.height);\n      // add a background\n      context!.globalCompositeOperation = 'destination-over'\n      context!.fillStyle = \"#FFF\";\n      context!.fillRect(0, 0, canvas.width, canvas.height);\n      // snapshot canvas as png or blob depending on type\n      if (type === 'blob') {\n        canvas.toBlob(callback);\n      } else if (type === 'png') {\n        const pngData = canvas.toDataURL('image/png');\n        callback(pngData);\n      }\n    };\n    // start loading SVG data into in memory image\n    image.src = svgData;\n  }\n  // start loading watermark SVG data into memory\n  watermarkImage.src = watermark.svg;\n};\n","import interval from \"./interval.js\";\nimport { durationSecond } from \"./duration.js\";\nvar second = interval(function (date) {\n  date.setTime(date - date.getMilliseconds());\n}, function (date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function (start, end) {\n  return (end - start) / durationSecond;\n}, function (date) {\n  return date.getUTCSeconds();\n});\nexport default second;\nexport var seconds = second.range;","/* MIT license */\nvar cssKeywords = require('color-name'); // NOTE: conversions should only return primitive values (i.e. arrays, or\n//       values that give correct `typeof` results).\n//       do not use box values types (i.e. Number(), String(), etc.)\n\n\nvar reverseKeywords = {};\n\nfor (var key in cssKeywords) {\n  if (cssKeywords.hasOwnProperty(key)) {\n    reverseKeywords[cssKeywords[key]] = key;\n  }\n}\n\nvar convert = module.exports = {\n  rgb: {\n    channels: 3,\n    labels: 'rgb'\n  },\n  hsl: {\n    channels: 3,\n    labels: 'hsl'\n  },\n  hsv: {\n    channels: 3,\n    labels: 'hsv'\n  },\n  hwb: {\n    channels: 3,\n    labels: 'hwb'\n  },\n  cmyk: {\n    channels: 4,\n    labels: 'cmyk'\n  },\n  xyz: {\n    channels: 3,\n    labels: 'xyz'\n  },\n  lab: {\n    channels: 3,\n    labels: 'lab'\n  },\n  lch: {\n    channels: 3,\n    labels: 'lch'\n  },\n  hex: {\n    channels: 1,\n    labels: ['hex']\n  },\n  keyword: {\n    channels: 1,\n    labels: ['keyword']\n  },\n  ansi16: {\n    channels: 1,\n    labels: ['ansi16']\n  },\n  ansi256: {\n    channels: 1,\n    labels: ['ansi256']\n  },\n  hcg: {\n    channels: 3,\n    labels: ['h', 'c', 'g']\n  },\n  apple: {\n    channels: 3,\n    labels: ['r16', 'g16', 'b16']\n  },\n  gray: {\n    channels: 1,\n    labels: ['gray']\n  }\n}; // hide .channels and .labels properties\n\nfor (var model in convert) {\n  if (convert.hasOwnProperty(model)) {\n    if (!('channels' in convert[model])) {\n      throw new Error('missing channels property: ' + model);\n    }\n\n    if (!('labels' in convert[model])) {\n      throw new Error('missing channel labels property: ' + model);\n    }\n\n    if (convert[model].labels.length !== convert[model].channels) {\n      throw new Error('channel and label counts mismatch: ' + model);\n    }\n\n    var channels = convert[model].channels;\n    var labels = convert[model].labels;\n    delete convert[model].channels;\n    delete convert[model].labels;\n    Object.defineProperty(convert[model], 'channels', {\n      value: channels\n    });\n    Object.defineProperty(convert[model], 'labels', {\n      value: labels\n    });\n  }\n}\n\nconvert.rgb.hsl = function (rgb) {\n  var r = rgb[0] / 255;\n  var g = rgb[1] / 255;\n  var b = rgb[2] / 255;\n  var min = Math.min(r, g, b);\n  var max = Math.max(r, g, b);\n  var delta = max - min;\n  var h;\n  var s;\n  var l;\n\n  if (max === min) {\n    h = 0;\n  } else if (r === max) {\n    h = (g - b) / delta;\n  } else if (g === max) {\n    h = 2 + (b - r) / delta;\n  } else if (b === max) {\n    h = 4 + (r - g) / delta;\n  }\n\n  h = Math.min(h * 60, 360);\n\n  if (h < 0) {\n    h += 360;\n  }\n\n  l = (min + max) / 2;\n\n  if (max === min) {\n    s = 0;\n  } else if (l <= 0.5) {\n    s = delta / (max + min);\n  } else {\n    s = delta / (2 - max - min);\n  }\n\n  return [h, s * 100, l * 100];\n};\n\nconvert.rgb.hsv = function (rgb) {\n  var rdif;\n  var gdif;\n  var bdif;\n  var h;\n  var s;\n  var r = rgb[0] / 255;\n  var g = rgb[1] / 255;\n  var b = rgb[2] / 255;\n  var v = Math.max(r, g, b);\n  var diff = v - Math.min(r, g, b);\n\n  var diffc = function diffc(c) {\n    return (v - c) / 6 / diff + 1 / 2;\n  };\n\n  if (diff === 0) {\n    h = s = 0;\n  } else {\n    s = diff / v;\n    rdif = diffc(r);\n    gdif = diffc(g);\n    bdif = diffc(b);\n\n    if (r === v) {\n      h = bdif - gdif;\n    } else if (g === v) {\n      h = 1 / 3 + rdif - bdif;\n    } else if (b === v) {\n      h = 2 / 3 + gdif - rdif;\n    }\n\n    if (h < 0) {\n      h += 1;\n    } else if (h > 1) {\n      h -= 1;\n    }\n  }\n\n  return [h * 360, s * 100, v * 100];\n};\n\nconvert.rgb.hwb = function (rgb) {\n  var r = rgb[0];\n  var g = rgb[1];\n  var b = rgb[2];\n  var h = convert.rgb.hsl(rgb)[0];\n  var w = 1 / 255 * Math.min(r, Math.min(g, b));\n  b = 1 - 1 / 255 * Math.max(r, Math.max(g, b));\n  return [h, w * 100, b * 100];\n};\n\nconvert.rgb.cmyk = function (rgb) {\n  var r = rgb[0] / 255;\n  var g = rgb[1] / 255;\n  var b = rgb[2] / 255;\n  var c;\n  var m;\n  var y;\n  var k;\n  k = Math.min(1 - r, 1 - g, 1 - b);\n  c = (1 - r - k) / (1 - k) || 0;\n  m = (1 - g - k) / (1 - k) || 0;\n  y = (1 - b - k) / (1 - k) || 0;\n  return [c * 100, m * 100, y * 100, k * 100];\n};\n/**\n * See https://en.m.wikipedia.org/wiki/Euclidean_distance#Squared_Euclidean_distance\n * */\n\n\nfunction comparativeDistance(x, y) {\n  return Math.pow(x[0] - y[0], 2) + Math.pow(x[1] - y[1], 2) + Math.pow(x[2] - y[2], 2);\n}\n\nconvert.rgb.keyword = function (rgb) {\n  var reversed = reverseKeywords[rgb];\n\n  if (reversed) {\n    return reversed;\n  }\n\n  var currentClosestDistance = Infinity;\n  var currentClosestKeyword;\n\n  for (var keyword in cssKeywords) {\n    if (cssKeywords.hasOwnProperty(keyword)) {\n      var value = cssKeywords[keyword]; // Compute comparative distance\n\n      var distance = comparativeDistance(rgb, value); // Check if its less, if so set as closest\n\n      if (distance < currentClosestDistance) {\n        currentClosestDistance = distance;\n        currentClosestKeyword = keyword;\n      }\n    }\n  }\n\n  return currentClosestKeyword;\n};\n\nconvert.keyword.rgb = function (keyword) {\n  return cssKeywords[keyword];\n};\n\nconvert.rgb.xyz = function (rgb) {\n  var r = rgb[0] / 255;\n  var g = rgb[1] / 255;\n  var b = rgb[2] / 255; // assume sRGB\n\n  r = r > 0.04045 ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;\n  g = g > 0.04045 ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;\n  b = b > 0.04045 ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;\n  var x = r * 0.4124 + g * 0.3576 + b * 0.1805;\n  var y = r * 0.2126 + g * 0.7152 + b * 0.0722;\n  var z = r * 0.0193 + g * 0.1192 + b * 0.9505;\n  return [x * 100, y * 100, z * 100];\n};\n\nconvert.rgb.lab = function (rgb) {\n  var xyz = convert.rgb.xyz(rgb);\n  var x = xyz[0];\n  var y = xyz[1];\n  var z = xyz[2];\n  var l;\n  var a;\n  var b;\n  x /= 95.047;\n  y /= 100;\n  z /= 108.883;\n  x = x > 0.008856 ? Math.pow(x, 1 / 3) : 7.787 * x + 16 / 116;\n  y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\n  z = z > 0.008856 ? Math.pow(z, 1 / 3) : 7.787 * z + 16 / 116;\n  l = 116 * y - 16;\n  a = 500 * (x - y);\n  b = 200 * (y - z);\n  return [l, a, b];\n};\n\nconvert.hsl.rgb = function (hsl) {\n  var h = hsl[0] / 360;\n  var s = hsl[1] / 100;\n  var l = hsl[2] / 100;\n  var t1;\n  var t2;\n  var t3;\n  var rgb;\n  var val;\n\n  if (s === 0) {\n    val = l * 255;\n    return [val, val, val];\n  }\n\n  if (l < 0.5) {\n    t2 = l * (1 + s);\n  } else {\n    t2 = l + s - l * s;\n  }\n\n  t1 = 2 * l - t2;\n  rgb = [0, 0, 0];\n\n  for (var i = 0; i < 3; i++) {\n    t3 = h + 1 / 3 * -(i - 1);\n\n    if (t3 < 0) {\n      t3++;\n    }\n\n    if (t3 > 1) {\n      t3--;\n    }\n\n    if (6 * t3 < 1) {\n      val = t1 + (t2 - t1) * 6 * t3;\n    } else if (2 * t3 < 1) {\n      val = t2;\n    } else if (3 * t3 < 2) {\n      val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n    } else {\n      val = t1;\n    }\n\n    rgb[i] = val * 255;\n  }\n\n  return rgb;\n};\n\nconvert.hsl.hsv = function (hsl) {\n  var h = hsl[0];\n  var s = hsl[1] / 100;\n  var l = hsl[2] / 100;\n  var smin = s;\n  var lmin = Math.max(l, 0.01);\n  var sv;\n  var v;\n  l *= 2;\n  s *= l <= 1 ? l : 2 - l;\n  smin *= lmin <= 1 ? lmin : 2 - lmin;\n  v = (l + s) / 2;\n  sv = l === 0 ? 2 * smin / (lmin + smin) : 2 * s / (l + s);\n  return [h, sv * 100, v * 100];\n};\n\nconvert.hsv.rgb = function (hsv) {\n  var h = hsv[0] / 60;\n  var s = hsv[1] / 100;\n  var v = hsv[2] / 100;\n  var hi = Math.floor(h) % 6;\n  var f = h - Math.floor(h);\n  var p = 255 * v * (1 - s);\n  var q = 255 * v * (1 - s * f);\n  var t = 255 * v * (1 - s * (1 - f));\n  v *= 255;\n\n  switch (hi) {\n    case 0:\n      return [v, t, p];\n\n    case 1:\n      return [q, v, p];\n\n    case 2:\n      return [p, v, t];\n\n    case 3:\n      return [p, q, v];\n\n    case 4:\n      return [t, p, v];\n\n    case 5:\n      return [v, p, q];\n  }\n};\n\nconvert.hsv.hsl = function (hsv) {\n  var h = hsv[0];\n  var s = hsv[1] / 100;\n  var v = hsv[2] / 100;\n  var vmin = Math.max(v, 0.01);\n  var lmin;\n  var sl;\n  var l;\n  l = (2 - s) * v;\n  lmin = (2 - s) * vmin;\n  sl = s * vmin;\n  sl /= lmin <= 1 ? lmin : 2 - lmin;\n  sl = sl || 0;\n  l /= 2;\n  return [h, sl * 100, l * 100];\n}; // http://dev.w3.org/csswg/css-color/#hwb-to-rgb\n\n\nconvert.hwb.rgb = function (hwb) {\n  var h = hwb[0] / 360;\n  var wh = hwb[1] / 100;\n  var bl = hwb[2] / 100;\n  var ratio = wh + bl;\n  var i;\n  var v;\n  var f;\n  var n; // wh + bl cant be > 1\n\n  if (ratio > 1) {\n    wh /= ratio;\n    bl /= ratio;\n  }\n\n  i = Math.floor(6 * h);\n  v = 1 - bl;\n  f = 6 * h - i;\n\n  if ((i & 0x01) !== 0) {\n    f = 1 - f;\n  }\n\n  n = wh + f * (v - wh); // linear interpolation\n\n  var r;\n  var g;\n  var b;\n\n  switch (i) {\n    default:\n    case 6:\n    case 0:\n      r = v;\n      g = n;\n      b = wh;\n      break;\n\n    case 1:\n      r = n;\n      g = v;\n      b = wh;\n      break;\n\n    case 2:\n      r = wh;\n      g = v;\n      b = n;\n      break;\n\n    case 3:\n      r = wh;\n      g = n;\n      b = v;\n      break;\n\n    case 4:\n      r = n;\n      g = wh;\n      b = v;\n      break;\n\n    case 5:\n      r = v;\n      g = wh;\n      b = n;\n      break;\n  }\n\n  return [r * 255, g * 255, b * 255];\n};\n\nconvert.cmyk.rgb = function (cmyk) {\n  var c = cmyk[0] / 100;\n  var m = cmyk[1] / 100;\n  var y = cmyk[2] / 100;\n  var k = cmyk[3] / 100;\n  var r;\n  var g;\n  var b;\n  r = 1 - Math.min(1, c * (1 - k) + k);\n  g = 1 - Math.min(1, m * (1 - k) + k);\n  b = 1 - Math.min(1, y * (1 - k) + k);\n  return [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.rgb = function (xyz) {\n  var x = xyz[0] / 100;\n  var y = xyz[1] / 100;\n  var z = xyz[2] / 100;\n  var r;\n  var g;\n  var b;\n  r = x * 3.2406 + y * -1.5372 + z * -0.4986;\n  g = x * -0.9689 + y * 1.8758 + z * 0.0415;\n  b = x * 0.0557 + y * -0.2040 + z * 1.0570; // assume sRGB\n\n  r = r > 0.0031308 ? 1.055 * Math.pow(r, 1.0 / 2.4) - 0.055 : r * 12.92;\n  g = g > 0.0031308 ? 1.055 * Math.pow(g, 1.0 / 2.4) - 0.055 : g * 12.92;\n  b = b > 0.0031308 ? 1.055 * Math.pow(b, 1.0 / 2.4) - 0.055 : b * 12.92;\n  r = Math.min(Math.max(0, r), 1);\n  g = Math.min(Math.max(0, g), 1);\n  b = Math.min(Math.max(0, b), 1);\n  return [r * 255, g * 255, b * 255];\n};\n\nconvert.xyz.lab = function (xyz) {\n  var x = xyz[0];\n  var y = xyz[1];\n  var z = xyz[2];\n  var l;\n  var a;\n  var b;\n  x /= 95.047;\n  y /= 100;\n  z /= 108.883;\n  x = x > 0.008856 ? Math.pow(x, 1 / 3) : 7.787 * x + 16 / 116;\n  y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\n  z = z > 0.008856 ? Math.pow(z, 1 / 3) : 7.787 * z + 16 / 116;\n  l = 116 * y - 16;\n  a = 500 * (x - y);\n  b = 200 * (y - z);\n  return [l, a, b];\n};\n\nconvert.lab.xyz = function (lab) {\n  var l = lab[0];\n  var a = lab[1];\n  var b = lab[2];\n  var x;\n  var y;\n  var z;\n  y = (l + 16) / 116;\n  x = a / 500 + y;\n  z = y - b / 200;\n  var y2 = Math.pow(y, 3);\n  var x2 = Math.pow(x, 3);\n  var z2 = Math.pow(z, 3);\n  y = y2 > 0.008856 ? y2 : (y - 16 / 116) / 7.787;\n  x = x2 > 0.008856 ? x2 : (x - 16 / 116) / 7.787;\n  z = z2 > 0.008856 ? z2 : (z - 16 / 116) / 7.787;\n  x *= 95.047;\n  y *= 100;\n  z *= 108.883;\n  return [x, y, z];\n};\n\nconvert.lab.lch = function (lab) {\n  var l = lab[0];\n  var a = lab[1];\n  var b = lab[2];\n  var hr;\n  var h;\n  var c;\n  hr = Math.atan2(b, a);\n  h = hr * 360 / 2 / Math.PI;\n\n  if (h < 0) {\n    h += 360;\n  }\n\n  c = Math.sqrt(a * a + b * b);\n  return [l, c, h];\n};\n\nconvert.lch.lab = function (lch) {\n  var l = lch[0];\n  var c = lch[1];\n  var h = lch[2];\n  var a;\n  var b;\n  var hr;\n  hr = h / 360 * 2 * Math.PI;\n  a = c * Math.cos(hr);\n  b = c * Math.sin(hr);\n  return [l, a, b];\n};\n\nconvert.rgb.ansi16 = function (args) {\n  var r = args[0];\n  var g = args[1];\n  var b = args[2];\n  var value = 1 in arguments ? arguments[1] : convert.rgb.hsv(args)[2]; // hsv -> ansi16 optimization\n\n  value = Math.round(value / 50);\n\n  if (value === 0) {\n    return 30;\n  }\n\n  var ansi = 30 + (Math.round(b / 255) << 2 | Math.round(g / 255) << 1 | Math.round(r / 255));\n\n  if (value === 2) {\n    ansi += 60;\n  }\n\n  return ansi;\n};\n\nconvert.hsv.ansi16 = function (args) {\n  // optimization here; we already know the value and don't need to get\n  // it converted for us.\n  return convert.rgb.ansi16(convert.hsv.rgb(args), args[2]);\n};\n\nconvert.rgb.ansi256 = function (args) {\n  var r = args[0];\n  var g = args[1];\n  var b = args[2]; // we use the extended greyscale palette here, with the exception of\n  // black and white. normal palette only has 4 greyscale shades.\n\n  if (r === g && g === b) {\n    if (r < 8) {\n      return 16;\n    }\n\n    if (r > 248) {\n      return 231;\n    }\n\n    return Math.round((r - 8) / 247 * 24) + 232;\n  }\n\n  var ansi = 16 + 36 * Math.round(r / 255 * 5) + 6 * Math.round(g / 255 * 5) + Math.round(b / 255 * 5);\n  return ansi;\n};\n\nconvert.ansi16.rgb = function (args) {\n  var color = args % 10; // handle greyscale\n\n  if (color === 0 || color === 7) {\n    if (args > 50) {\n      color += 3.5;\n    }\n\n    color = color / 10.5 * 255;\n    return [color, color, color];\n  }\n\n  var mult = (~~(args > 50) + 1) * 0.5;\n  var r = (color & 1) * mult * 255;\n  var g = (color >> 1 & 1) * mult * 255;\n  var b = (color >> 2 & 1) * mult * 255;\n  return [r, g, b];\n};\n\nconvert.ansi256.rgb = function (args) {\n  // handle greyscale\n  if (args >= 232) {\n    var c = (args - 232) * 10 + 8;\n    return [c, c, c];\n  }\n\n  args -= 16;\n  var rem;\n  var r = Math.floor(args / 36) / 5 * 255;\n  var g = Math.floor((rem = args % 36) / 6) / 5 * 255;\n  var b = rem % 6 / 5 * 255;\n  return [r, g, b];\n};\n\nconvert.rgb.hex = function (args) {\n  var integer = ((Math.round(args[0]) & 0xFF) << 16) + ((Math.round(args[1]) & 0xFF) << 8) + (Math.round(args[2]) & 0xFF);\n  var string = integer.toString(16).toUpperCase();\n  return '000000'.substring(string.length) + string;\n};\n\nconvert.hex.rgb = function (args) {\n  var match = args.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);\n\n  if (!match) {\n    return [0, 0, 0];\n  }\n\n  var colorString = match[0];\n\n  if (match[0].length === 3) {\n    colorString = colorString.split('').map(function (char) {\n      return char + char;\n    }).join('');\n  }\n\n  var integer = parseInt(colorString, 16);\n  var r = integer >> 16 & 0xFF;\n  var g = integer >> 8 & 0xFF;\n  var b = integer & 0xFF;\n  return [r, g, b];\n};\n\nconvert.rgb.hcg = function (rgb) {\n  var r = rgb[0] / 255;\n  var g = rgb[1] / 255;\n  var b = rgb[2] / 255;\n  var max = Math.max(Math.max(r, g), b);\n  var min = Math.min(Math.min(r, g), b);\n  var chroma = max - min;\n  var grayscale;\n  var hue;\n\n  if (chroma < 1) {\n    grayscale = min / (1 - chroma);\n  } else {\n    grayscale = 0;\n  }\n\n  if (chroma <= 0) {\n    hue = 0;\n  } else if (max === r) {\n    hue = (g - b) / chroma % 6;\n  } else if (max === g) {\n    hue = 2 + (b - r) / chroma;\n  } else {\n    hue = 4 + (r - g) / chroma + 4;\n  }\n\n  hue /= 6;\n  hue %= 1;\n  return [hue * 360, chroma * 100, grayscale * 100];\n};\n\nconvert.hsl.hcg = function (hsl) {\n  var s = hsl[1] / 100;\n  var l = hsl[2] / 100;\n  var c = 1;\n  var f = 0;\n\n  if (l < 0.5) {\n    c = 2.0 * s * l;\n  } else {\n    c = 2.0 * s * (1.0 - l);\n  }\n\n  if (c < 1.0) {\n    f = (l - 0.5 * c) / (1.0 - c);\n  }\n\n  return [hsl[0], c * 100, f * 100];\n};\n\nconvert.hsv.hcg = function (hsv) {\n  var s = hsv[1] / 100;\n  var v = hsv[2] / 100;\n  var c = s * v;\n  var f = 0;\n\n  if (c < 1.0) {\n    f = (v - c) / (1 - c);\n  }\n\n  return [hsv[0], c * 100, f * 100];\n};\n\nconvert.hcg.rgb = function (hcg) {\n  var h = hcg[0] / 360;\n  var c = hcg[1] / 100;\n  var g = hcg[2] / 100;\n\n  if (c === 0.0) {\n    return [g * 255, g * 255, g * 255];\n  }\n\n  var pure = [0, 0, 0];\n  var hi = h % 1 * 6;\n  var v = hi % 1;\n  var w = 1 - v;\n  var mg = 0;\n\n  switch (Math.floor(hi)) {\n    case 0:\n      pure[0] = 1;\n      pure[1] = v;\n      pure[2] = 0;\n      break;\n\n    case 1:\n      pure[0] = w;\n      pure[1] = 1;\n      pure[2] = 0;\n      break;\n\n    case 2:\n      pure[0] = 0;\n      pure[1] = 1;\n      pure[2] = v;\n      break;\n\n    case 3:\n      pure[0] = 0;\n      pure[1] = w;\n      pure[2] = 1;\n      break;\n\n    case 4:\n      pure[0] = v;\n      pure[1] = 0;\n      pure[2] = 1;\n      break;\n\n    default:\n      pure[0] = 1;\n      pure[1] = 0;\n      pure[2] = w;\n  }\n\n  mg = (1.0 - c) * g;\n  return [(c * pure[0] + mg) * 255, (c * pure[1] + mg) * 255, (c * pure[2] + mg) * 255];\n};\n\nconvert.hcg.hsv = function (hcg) {\n  var c = hcg[1] / 100;\n  var g = hcg[2] / 100;\n  var v = c + g * (1.0 - c);\n  var f = 0;\n\n  if (v > 0.0) {\n    f = c / v;\n  }\n\n  return [hcg[0], f * 100, v * 100];\n};\n\nconvert.hcg.hsl = function (hcg) {\n  var c = hcg[1] / 100;\n  var g = hcg[2] / 100;\n  var l = g * (1.0 - c) + 0.5 * c;\n  var s = 0;\n\n  if (l > 0.0 && l < 0.5) {\n    s = c / (2 * l);\n  } else if (l >= 0.5 && l < 1.0) {\n    s = c / (2 * (1 - l));\n  }\n\n  return [hcg[0], s * 100, l * 100];\n};\n\nconvert.hcg.hwb = function (hcg) {\n  var c = hcg[1] / 100;\n  var g = hcg[2] / 100;\n  var v = c + g * (1.0 - c);\n  return [hcg[0], (v - c) * 100, (1 - v) * 100];\n};\n\nconvert.hwb.hcg = function (hwb) {\n  var w = hwb[1] / 100;\n  var b = hwb[2] / 100;\n  var v = 1 - b;\n  var c = v - w;\n  var g = 0;\n\n  if (c < 1) {\n    g = (v - c) / (1 - c);\n  }\n\n  return [hwb[0], c * 100, g * 100];\n};\n\nconvert.apple.rgb = function (apple) {\n  return [apple[0] / 65535 * 255, apple[1] / 65535 * 255, apple[2] / 65535 * 255];\n};\n\nconvert.rgb.apple = function (rgb) {\n  return [rgb[0] / 255 * 65535, rgb[1] / 255 * 65535, rgb[2] / 255 * 65535];\n};\n\nconvert.gray.rgb = function (args) {\n  return [args[0] / 100 * 255, args[0] / 100 * 255, args[0] / 100 * 255];\n};\n\nconvert.gray.hsl = convert.gray.hsv = function (args) {\n  return [0, 0, args[0]];\n};\n\nconvert.gray.hwb = function (gray) {\n  return [0, 100, gray[0]];\n};\n\nconvert.gray.cmyk = function (gray) {\n  return [0, 0, 0, gray[0]];\n};\n\nconvert.gray.lab = function (gray) {\n  return [gray[0], 0, 0];\n};\n\nconvert.gray.hex = function (gray) {\n  var val = Math.round(gray[0] / 100 * 255) & 0xFF;\n  var integer = (val << 16) + (val << 8) + val;\n  var string = integer.toString(16).toUpperCase();\n  return '000000'.substring(string.length) + string;\n};\n\nconvert.rgb.gray = function (rgb) {\n  var val = (rgb[0] + rgb[1] + rgb[2]) / 3;\n  return [val / 255 * 100];\n};","var conversions = require('./conversions');\n/*\n\tthis function routes a model to all other models.\n\n\tall functions that are routed have a property `.conversion` attached\n\tto the returned synthetic function. This property is an array\n\tof strings, each with the steps in between the 'from' and 'to'\n\tcolor models (inclusive).\n\n\tconversions that are not possible simply are not included.\n*/\n\n\nfunction buildGraph() {\n  var graph = {}; // https://jsperf.com/object-keys-vs-for-in-with-closure/3\n\n  var models = Object.keys(conversions);\n\n  for (var len = models.length, i = 0; i < len; i++) {\n    graph[models[i]] = {\n      // http://jsperf.com/1-vs-infinity\n      // micro-opt, but this is simple.\n      distance: -1,\n      parent: null\n    };\n  }\n\n  return graph;\n} // https://en.wikipedia.org/wiki/Breadth-first_search\n\n\nfunction deriveBFS(fromModel) {\n  var graph = buildGraph();\n  var queue = [fromModel]; // unshift -> queue -> pop\n\n  graph[fromModel].distance = 0;\n\n  while (queue.length) {\n    var current = queue.pop();\n    var adjacents = Object.keys(conversions[current]);\n\n    for (var len = adjacents.length, i = 0; i < len; i++) {\n      var adjacent = adjacents[i];\n      var node = graph[adjacent];\n\n      if (node.distance === -1) {\n        node.distance = graph[current].distance + 1;\n        node.parent = current;\n        queue.unshift(adjacent);\n      }\n    }\n  }\n\n  return graph;\n}\n\nfunction link(from, to) {\n  return function (args) {\n    return to(from(args));\n  };\n}\n\nfunction wrapConversion(toModel, graph) {\n  var path = [graph[toModel].parent, toModel];\n  var fn = conversions[graph[toModel].parent][toModel];\n  var cur = graph[toModel].parent;\n\n  while (graph[cur].parent) {\n    path.unshift(graph[cur].parent);\n    fn = link(conversions[graph[cur].parent][cur], fn);\n    cur = graph[cur].parent;\n  }\n\n  fn.conversion = path;\n  return fn;\n}\n\nmodule.exports = function (fromModel) {\n  var graph = deriveBFS(fromModel);\n  var conversion = {};\n  var models = Object.keys(graph);\n\n  for (var len = models.length, i = 0; i < len; i++) {\n    var toModel = models[i];\n    var node = graph[toModel];\n\n    if (node.parent === null) {\n      // no possible conversion, or this node is the source model.\n      continue;\n    }\n\n    conversion[toModel] = wrapConversion(toModel, graph);\n  }\n\n  return conversion;\n};","'use strict';\n\nmodule.exports = {\n  \"aliceblue\": [240, 248, 255],\n  \"antiquewhite\": [250, 235, 215],\n  \"aqua\": [0, 255, 255],\n  \"aquamarine\": [127, 255, 212],\n  \"azure\": [240, 255, 255],\n  \"beige\": [245, 245, 220],\n  \"bisque\": [255, 228, 196],\n  \"black\": [0, 0, 0],\n  \"blanchedalmond\": [255, 235, 205],\n  \"blue\": [0, 0, 255],\n  \"blueviolet\": [138, 43, 226],\n  \"brown\": [165, 42, 42],\n  \"burlywood\": [222, 184, 135],\n  \"cadetblue\": [95, 158, 160],\n  \"chartreuse\": [127, 255, 0],\n  \"chocolate\": [210, 105, 30],\n  \"coral\": [255, 127, 80],\n  \"cornflowerblue\": [100, 149, 237],\n  \"cornsilk\": [255, 248, 220],\n  \"crimson\": [220, 20, 60],\n  \"cyan\": [0, 255, 255],\n  \"darkblue\": [0, 0, 139],\n  \"darkcyan\": [0, 139, 139],\n  \"darkgoldenrod\": [184, 134, 11],\n  \"darkgray\": [169, 169, 169],\n  \"darkgreen\": [0, 100, 0],\n  \"darkgrey\": [169, 169, 169],\n  \"darkkhaki\": [189, 183, 107],\n  \"darkmagenta\": [139, 0, 139],\n  \"darkolivegreen\": [85, 107, 47],\n  \"darkorange\": [255, 140, 0],\n  \"darkorchid\": [153, 50, 204],\n  \"darkred\": [139, 0, 0],\n  \"darksalmon\": [233, 150, 122],\n  \"darkseagreen\": [143, 188, 143],\n  \"darkslateblue\": [72, 61, 139],\n  \"darkslategray\": [47, 79, 79],\n  \"darkslategrey\": [47, 79, 79],\n  \"darkturquoise\": [0, 206, 209],\n  \"darkviolet\": [148, 0, 211],\n  \"deeppink\": [255, 20, 147],\n  \"deepskyblue\": [0, 191, 255],\n  \"dimgray\": [105, 105, 105],\n  \"dimgrey\": [105, 105, 105],\n  \"dodgerblue\": [30, 144, 255],\n  \"firebrick\": [178, 34, 34],\n  \"floralwhite\": [255, 250, 240],\n  \"forestgreen\": [34, 139, 34],\n  \"fuchsia\": [255, 0, 255],\n  \"gainsboro\": [220, 220, 220],\n  \"ghostwhite\": [248, 248, 255],\n  \"gold\": [255, 215, 0],\n  \"goldenrod\": [218, 165, 32],\n  \"gray\": [128, 128, 128],\n  \"green\": [0, 128, 0],\n  \"greenyellow\": [173, 255, 47],\n  \"grey\": [128, 128, 128],\n  \"honeydew\": [240, 255, 240],\n  \"hotpink\": [255, 105, 180],\n  \"indianred\": [205, 92, 92],\n  \"indigo\": [75, 0, 130],\n  \"ivory\": [255, 255, 240],\n  \"khaki\": [240, 230, 140],\n  \"lavender\": [230, 230, 250],\n  \"lavenderblush\": [255, 240, 245],\n  \"lawngreen\": [124, 252, 0],\n  \"lemonchiffon\": [255, 250, 205],\n  \"lightblue\": [173, 216, 230],\n  \"lightcoral\": [240, 128, 128],\n  \"lightcyan\": [224, 255, 255],\n  \"lightgoldenrodyellow\": [250, 250, 210],\n  \"lightgray\": [211, 211, 211],\n  \"lightgreen\": [144, 238, 144],\n  \"lightgrey\": [211, 211, 211],\n  \"lightpink\": [255, 182, 193],\n  \"lightsalmon\": [255, 160, 122],\n  \"lightseagreen\": [32, 178, 170],\n  \"lightskyblue\": [135, 206, 250],\n  \"lightslategray\": [119, 136, 153],\n  \"lightslategrey\": [119, 136, 153],\n  \"lightsteelblue\": [176, 196, 222],\n  \"lightyellow\": [255, 255, 224],\n  \"lime\": [0, 255, 0],\n  \"limegreen\": [50, 205, 50],\n  \"linen\": [250, 240, 230],\n  \"magenta\": [255, 0, 255],\n  \"maroon\": [128, 0, 0],\n  \"mediumaquamarine\": [102, 205, 170],\n  \"mediumblue\": [0, 0, 205],\n  \"mediumorchid\": [186, 85, 211],\n  \"mediumpurple\": [147, 112, 219],\n  \"mediumseagreen\": [60, 179, 113],\n  \"mediumslateblue\": [123, 104, 238],\n  \"mediumspringgreen\": [0, 250, 154],\n  \"mediumturquoise\": [72, 209, 204],\n  \"mediumvioletred\": [199, 21, 133],\n  \"midnightblue\": [25, 25, 112],\n  \"mintcream\": [245, 255, 250],\n  \"mistyrose\": [255, 228, 225],\n  \"moccasin\": [255, 228, 181],\n  \"navajowhite\": [255, 222, 173],\n  \"navy\": [0, 0, 128],\n  \"oldlace\": [253, 245, 230],\n  \"olive\": [128, 128, 0],\n  \"olivedrab\": [107, 142, 35],\n  \"orange\": [255, 165, 0],\n  \"orangered\": [255, 69, 0],\n  \"orchid\": [218, 112, 214],\n  \"palegoldenrod\": [238, 232, 170],\n  \"palegreen\": [152, 251, 152],\n  \"paleturquoise\": [175, 238, 238],\n  \"palevioletred\": [219, 112, 147],\n  \"papayawhip\": [255, 239, 213],\n  \"peachpuff\": [255, 218, 185],\n  \"peru\": [205, 133, 63],\n  \"pink\": [255, 192, 203],\n  \"plum\": [221, 160, 221],\n  \"powderblue\": [176, 224, 230],\n  \"purple\": [128, 0, 128],\n  \"rebeccapurple\": [102, 51, 153],\n  \"red\": [255, 0, 0],\n  \"rosybrown\": [188, 143, 143],\n  \"royalblue\": [65, 105, 225],\n  \"saddlebrown\": [139, 69, 19],\n  \"salmon\": [250, 128, 114],\n  \"sandybrown\": [244, 164, 96],\n  \"seagreen\": [46, 139, 87],\n  \"seashell\": [255, 245, 238],\n  \"sienna\": [160, 82, 45],\n  \"silver\": [192, 192, 192],\n  \"skyblue\": [135, 206, 235],\n  \"slateblue\": [106, 90, 205],\n  \"slategray\": [112, 128, 144],\n  \"slategrey\": [112, 128, 144],\n  \"snow\": [255, 250, 250],\n  \"springgreen\": [0, 255, 127],\n  \"steelblue\": [70, 130, 180],\n  \"tan\": [210, 180, 140],\n  \"teal\": [0, 128, 128],\n  \"thistle\": [216, 191, 216],\n  \"tomato\": [255, 99, 71],\n  \"turquoise\": [64, 224, 208],\n  \"violet\": [238, 130, 238],\n  \"wheat\": [245, 222, 179],\n  \"white\": [255, 255, 255],\n  \"whitesmoke\": [245, 245, 245],\n  \"yellow\": [255, 255, 0],\n  \"yellowgreen\": [154, 205, 50]\n};","import { scaleOrdinal } from 'd3-scale';\nimport React, { FC } from 'react';\n\nimport colorScheme from './colors';\nimport { IBarChartDataSet } from './Histogram';\n\ninterface IProps {\n  className?: string;\n  theme?: string[];\n  data: {\n    bins: string[],\n    counts: IBarChartDataSet[];\n  };\n  onSelect: (label: string) => void;\n  visible: { [key: string]: boolean };\n}\n\nconst legendIconStyle = {\n  cursor: 'pointer',\n  display: 'inline-block',\n  height: '1rem',\n  margin: '0.25rem 0.5rem',\n  width: '1rem',\n};\n\nconst listStyle = {\n  listStyle: 'none',\n  padding: 0,\n  margin: 0,\n};\n\nconst liStyle = {\n  display: 'flex',\n  alignItems: 'center',\n}\n\nconst Legend: FC<IProps> = ({\n  className,\n  theme = colorScheme,\n  data,\n  onSelect,\n  visible,\n}) => {\n  const scheme: any = scaleOrdinal(theme);\n  const labels = data.bins;\n  return (\n    <div className={className}>\n      <ul style={listStyle}>\n        {\n          labels.map((label) => {\n            const active = (visible.hasOwnProperty(label) && visible[label]) || !visible.hasOwnProperty(label);\n            return (\n              <li key={label}\n                style={liStyle}>\n                <div style={{\n                  ...legendIconStyle,\n                  backgroundColor: active ? scheme(label) : '#FFF',\n                  border: '2px solid ' + scheme(label),\n                }}\n                  onClick={() => onSelect(label)}>\n                </div>\n                <div>\n                  {label}\n                </div>\n              </li>\n            );\n          })\n        }\n      </ul>\n    </div>\n  );\n};\n\nexport default Legend;\n","/* MIT license */\nvar colorNames = require('color-name');\n\nvar swizzle = require('simple-swizzle');\n\nvar reverseNames = {}; // create a list of reverse color names\n\nfor (var name in colorNames) {\n  if (colorNames.hasOwnProperty(name)) {\n    reverseNames[colorNames[name]] = name;\n  }\n}\n\nvar cs = module.exports = {\n  to: {},\n  get: {}\n};\n\ncs.get = function (string) {\n  var prefix = string.substring(0, 3).toLowerCase();\n  var val;\n  var model;\n\n  switch (prefix) {\n    case 'hsl':\n      val = cs.get.hsl(string);\n      model = 'hsl';\n      break;\n\n    case 'hwb':\n      val = cs.get.hwb(string);\n      model = 'hwb';\n      break;\n\n    default:\n      val = cs.get.rgb(string);\n      model = 'rgb';\n      break;\n  }\n\n  if (!val) {\n    return null;\n  }\n\n  return {\n    model: model,\n    value: val\n  };\n};\n\ncs.get.rgb = function (string) {\n  if (!string) {\n    return null;\n  }\n\n  var abbr = /^#([a-f0-9]{3,4})$/i;\n  var hex = /^#([a-f0-9]{6})([a-f0-9]{2})?$/i;\n  var rgba = /^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n  var per = /^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n  var keyword = /(\\D+)/;\n  var rgb = [0, 0, 0, 1];\n  var match;\n  var i;\n  var hexAlpha;\n\n  if (match = string.match(hex)) {\n    hexAlpha = match[2];\n    match = match[1];\n\n    for (i = 0; i < 3; i++) {\n      // https://jsperf.com/slice-vs-substr-vs-substring-methods-long-string/19\n      var i2 = i * 2;\n      rgb[i] = parseInt(match.slice(i2, i2 + 2), 16);\n    }\n\n    if (hexAlpha) {\n      rgb[3] = Math.round(parseInt(hexAlpha, 16) / 255 * 100) / 100;\n    }\n  } else if (match = string.match(abbr)) {\n    match = match[1];\n    hexAlpha = match[3];\n\n    for (i = 0; i < 3; i++) {\n      rgb[i] = parseInt(match[i] + match[i], 16);\n    }\n\n    if (hexAlpha) {\n      rgb[3] = Math.round(parseInt(hexAlpha + hexAlpha, 16) / 255 * 100) / 100;\n    }\n  } else if (match = string.match(rgba)) {\n    for (i = 0; i < 3; i++) {\n      rgb[i] = parseInt(match[i + 1], 0);\n    }\n\n    if (match[4]) {\n      rgb[3] = parseFloat(match[4]);\n    }\n  } else if (match = string.match(per)) {\n    for (i = 0; i < 3; i++) {\n      rgb[i] = Math.round(parseFloat(match[i + 1]) * 2.55);\n    }\n\n    if (match[4]) {\n      rgb[3] = parseFloat(match[4]);\n    }\n  } else if (match = string.match(keyword)) {\n    if (match[1] === 'transparent') {\n      return [0, 0, 0, 0];\n    }\n\n    rgb = colorNames[match[1]];\n\n    if (!rgb) {\n      return null;\n    }\n\n    rgb[3] = 1;\n    return rgb;\n  } else {\n    return null;\n  }\n\n  for (i = 0; i < 3; i++) {\n    rgb[i] = clamp(rgb[i], 0, 255);\n  }\n\n  rgb[3] = clamp(rgb[3], 0, 1);\n  return rgb;\n};\n\ncs.get.hsl = function (string) {\n  if (!string) {\n    return null;\n  }\n\n  var hsl = /^hsla?\\(\\s*([+-]?(?:\\d*\\.)?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n  var match = string.match(hsl);\n\n  if (match) {\n    var alpha = parseFloat(match[4]);\n    var h = (parseFloat(match[1]) + 360) % 360;\n    var s = clamp(parseFloat(match[2]), 0, 100);\n    var l = clamp(parseFloat(match[3]), 0, 100);\n    var a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n    return [h, s, l, a];\n  }\n\n  return null;\n};\n\ncs.get.hwb = function (string) {\n  if (!string) {\n    return null;\n  }\n\n  var hwb = /^hwb\\(\\s*([+-]?\\d*[\\.]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/;\n  var match = string.match(hwb);\n\n  if (match) {\n    var alpha = parseFloat(match[4]);\n    var h = (parseFloat(match[1]) % 360 + 360) % 360;\n    var w = clamp(parseFloat(match[2]), 0, 100);\n    var b = clamp(parseFloat(match[3]), 0, 100);\n    var a = clamp(isNaN(alpha) ? 1 : alpha, 0, 1);\n    return [h, w, b, a];\n  }\n\n  return null;\n};\n\ncs.to.hex = function () {\n  var rgba = swizzle(arguments);\n  return '#' + hexDouble(rgba[0]) + hexDouble(rgba[1]) + hexDouble(rgba[2]) + (rgba[3] < 1 ? hexDouble(Math.round(rgba[3] * 255)) : '');\n};\n\ncs.to.rgb = function () {\n  var rgba = swizzle(arguments);\n  return rgba.length < 4 || rgba[3] === 1 ? 'rgb(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ')' : 'rgba(' + Math.round(rgba[0]) + ', ' + Math.round(rgba[1]) + ', ' + Math.round(rgba[2]) + ', ' + rgba[3] + ')';\n};\n\ncs.to.rgb.percent = function () {\n  var rgba = swizzle(arguments);\n  var r = Math.round(rgba[0] / 255 * 100);\n  var g = Math.round(rgba[1] / 255 * 100);\n  var b = Math.round(rgba[2] / 255 * 100);\n  return rgba.length < 4 || rgba[3] === 1 ? 'rgb(' + r + '%, ' + g + '%, ' + b + '%)' : 'rgba(' + r + '%, ' + g + '%, ' + b + '%, ' + rgba[3] + ')';\n};\n\ncs.to.hsl = function () {\n  var hsla = swizzle(arguments);\n  return hsla.length < 4 || hsla[3] === 1 ? 'hsl(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%)' : 'hsla(' + hsla[0] + ', ' + hsla[1] + '%, ' + hsla[2] + '%, ' + hsla[3] + ')';\n}; // hwb is a bit different than rgb(a) & hsl(a) since there is no alpha specific syntax\n// (hwb have alpha optional & 1 is default value)\n\n\ncs.to.hwb = function () {\n  var hwba = swizzle(arguments);\n  var a = '';\n\n  if (hwba.length >= 4 && hwba[3] !== 1) {\n    a = ', ' + hwba[3];\n  }\n\n  return 'hwb(' + hwba[0] + ', ' + hwba[1] + '%, ' + hwba[2] + '%' + a + ')';\n};\n\ncs.to.keyword = function (rgb) {\n  return reverseNames[rgb.slice(0, 3)];\n}; // helpers\n\n\nfunction clamp(num, min, max) {\n  return Math.min(Math.max(min, num), max);\n}\n\nfunction hexDouble(num) {\n  var str = num.toString(16).toUpperCase();\n  return str.length < 2 ? '0' + str : str;\n}","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate) {\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  }\n\n  ;\n\n  var debounced = function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function () {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  debounced.flush = function () {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n}\n\n; // Adds compatibility for ES modules\n\ndebounce.debounce = debounce;\nmodule.exports = debounce;","import Color from 'color';\n\nexport default (colors) => {\n  return colors.filter((value) => {\n    try {\n      const c = Color(value);\n      const hsl = c.hsl().array();\n      if (hsl.length > 3) {\n        // remove alpha colours\n        return false;\n      }\n      const luminosity = c.luminosity();\n      return ((luminosity < 0.8 && luminosity > 0.1) && (hsl[2] < 200 && hsl[2] > 20)) // not too light\n        ; // not too dark\n    } catch (e) {\n      return false;\n    }\n  })\n    .filter((v, index, self) => self.indexOf(v) === index)\n    .sort(() => Math.random() - 0.5);\n};\n"],"sourceRoot":""}