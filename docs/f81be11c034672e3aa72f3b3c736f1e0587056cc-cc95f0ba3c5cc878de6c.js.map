{"version":3,"sources":["webpack:///(webpack)/buildin/harmony-module.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverBoxOptions.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/resizeObservers.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/deliverResizeLoopError.js","webpack:///../node_modules/@juggle/resize-observer/lib/DOMRectReadOnly.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/queueMicroTask.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/element.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/global.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/calculateBoxSize.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverEntry.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/calculateDepthForNode.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/broadcastActiveObservations.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/gatherActiveObservationsAtDepth.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/process.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/hasActiveObservations.js","webpack:///../node_modules/@juggle/resize-observer/lib/algorithms/hasSkippedObservations.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/scheduler.js","webpack:///../node_modules/@juggle/resize-observer/lib/utils/queueResizeObserver.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObservation.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverDetail.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserverController.js","webpack:///../node_modules/@juggle/resize-observer/lib/ResizeObserver.js","webpack:///../src/utils/useWidth.ts","webpack:///../src/utils/useMakeLine.ts","webpack:///../node_modules/d3-scale/src/nice.js","webpack:///../node_modules/d3-scale/src/log.js","webpack:///../node_modules/d3-time/src/month.js","webpack:///../node_modules/d3-time/src/hour.js","webpack:///../node_modules/d3-time/src/minute.js","webpack:///../node_modules/d3-time/src/second.js","webpack:///../node_modules/d3-time/src/millisecond.js","webpack:///../node_modules/d3-scale/src/time.js","webpack:///../src/utils/scales.ts","webpack:///../node_modules/d3-shape/src/curve/linear.js","webpack:///../node_modules/lodash/merge.js","webpack:///../node_modules/d3-shape/src/area.js","webpack:///../node_modules/d3-shape/src/line.js","webpack:///../node_modules/d3-shape/src/point.js","webpack:///../src/TornadoD3.ts","webpack:///../src/Tornado.tsx","webpack:///../node_modules/d3-dispatch/src/dispatch.js","webpack:///../src/components/Bars/HistogramBars.tsx","webpack:///../src/components/Bars/histogramHelper.ts","webpack:///../src/v3/Histogram.tsx","webpack:///../src/components/AreaFill.tsx","webpack:///../src/components/Line.tsx","webpack:///../src/components/Points.tsx","webpack:///../src/v3/LineChart.tsx","webpack:///../src/lineChartD3.ts","webpack:///../src/LineChart.tsx","webpack:///../src/ScatterPlot.tsx","webpack:///../src/ScatterPlotD3.ts","webpack:///../src/HorizontalHistogramD3.ts","webpack:///../src/HorizontalHistogram.tsx","webpack:///../node_modules/react-use-measure/dist/web.js","webpack:///../node_modules/d3-timer/src/timer.js","webpack:///../node_modules/d3-timer/src/timeout.js","webpack:///../node_modules/d3-transition/src/transition/schedule.js","webpack:///../node_modules/d3-transition/src/interrupt.js","webpack:///../node_modules/d3-transition/src/transition/tween.js","webpack:///../node_modules/d3-transition/src/transition/interpolate.js","webpack:///../node_modules/d3-transition/src/transition/attr.js","webpack:///../node_modules/d3-transition/src/transition/attrTween.js","webpack:///../node_modules/d3-transition/src/transition/delay.js","webpack:///../node_modules/d3-transition/src/transition/duration.js","webpack:///../node_modules/d3-transition/src/transition/ease.js","webpack:///../node_modules/d3-transition/src/transition/on.js","webpack:///../node_modules/d3-transition/src/transition/remove.js","webpack:///../node_modules/d3-transition/src/transition/selection.js","webpack:///../node_modules/d3-transition/src/transition/style.js","webpack:///../node_modules/d3-transition/src/transition/styleTween.js","webpack:///../node_modules/d3-transition/src/transition/textTween.js","webpack:///../node_modules/d3-transition/src/transition/index.js","webpack:///../node_modules/d3-transition/src/transition/select.js","webpack:///../node_modules/d3-transition/src/transition/selectAll.js","webpack:///../node_modules/d3-transition/src/transition/filter.js","webpack:///../node_modules/d3-transition/src/transition/merge.js","webpack:///../node_modules/d3-transition/src/transition/transition.js","webpack:///../node_modules/d3-transition/src/transition/text.js","webpack:///../node_modules/d3-transition/src/transition/end.js","webpack:///../node_modules/d3-transition/src/selection/transition.js","webpack:///../node_modules/d3-ease/src/cubic.js","webpack:///../node_modules/d3-transition/src/selection/index.js","webpack:///../node_modules/d3-transition/src/selection/interrupt.js","webpack:///../node_modules/d3-transition/src/active.js","webpack:///../node_modules/d3-shape/src/descending.js","webpack:///../node_modules/d3-shape/src/identity.js","webpack:///../node_modules/d3-shape/src/arc.js","webpack:///../src/PieChartD3.ts","webpack:///../node_modules/d3-shape/src/pie.js","webpack:///../src/PieChart.tsx","webpack:///../node_modules/d3-path/src/path.js","webpack:///../src/utils/outputSvg.ts","webpack:///../node_modules/d3-shape/src/constant.js","webpack:///../src/Legend.tsx","webpack:///../node_modules/debounce/index.js"],"names":["module","exports","originalModule","webpackPolyfill","Object","create","children","defineProperty","enumerable","get","l","i","ResizeObserverBoxOptions","resizeObservers","msg","trigger","DOMRectReadOnly","x","y","width","height","this","top","left","bottom","right","freeze","prototype","toJSON","_a","fromRect","rectangle","isSVG","target","SVGElement","isHidden","getBBox","_b","offsetWidth","offsetHeight","getClientRects","length","isElement","obj","scope","ownerDocument","defaultView","Element","global","window","cache","WeakMap","scrollRegexp","verticalRegexp","IE","test","navigator","userAgent","parseDimension","pixel","parseFloat","inlineSize","blockSize","switchSizes","zeroBoxes","devicePixelContentBoxSize","borderBoxSize","contentBoxSize","contentRect","forceRecalculation","has","set","cs","getComputedStyle","svg","ownerSVGElement","removePadding","boxSizing","writingMode","canScrollVertically","overflowY","canScrollHorizontally","overflowX","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","horizontalPadding","verticalPadding","horizontalBorderArea","borderLeftWidth","verticalBorderArea","horizontalScrollbarThickness","clientHeight","verticalScrollbarThickness","clientWidth","widthReduction","heightReduction","contentWidth","contentHeight","borderBoxWidth","borderBoxHeight","boxes","Math","round","devicePixelRatio","observedBox","DEVICE_PIXEL_CONTENT_BOX","BORDER_BOX","node","Infinity","depth","parent","parentNode","shallowestDepth","callbacks","forEach","ro","activeTargets","entries","ot","entry","targetDepth","push","lastReportedSize","callback","call","observer","splice","_i","callbacks_1","skippedTargets","observationTargets","isActive","event","some","ErrorEvent","message","document","createEvent","initEvent","dispatchEvent","queueMicroTask","toggle_1","el_1","createTextNode","MutationObserver","cb","observe","characterData","textContent","watching","observerConfig","attributes","childList","subtree","events","time","timeout","Date","now","scheduled","scheduler","Scheduler","_this","stopped","listener","schedule","run","until","elementsHaveResized","start","requestAnimationFrame","stop","body","addEventListener","name","disconnect","removeEventListener","updateCount","n","ResizeObservation","CONTENT_BOX","size","tagName","type","isReplacedElement","display","ResizeObserverDetail","resizeObserver","observerMap","getObservationIndex","ResizeObserverController","connect","detail","options","firstObservation","box","unobserve","index","lastObservation","indexOf","slice","ResizeObserver","arguments","TypeError","toString","useWidth","origWidth","useMeasure","debounce","polyfill","ref","useState","r","setR","useEffect","w","includes","parseInt","useScales","data","axis","xScale","yScale","scales","setScales","buildScales","ys","xs","d","parsedY","scale","parsedX","yDomain","rangeAffordance","extent","xDomain","domain","rangeRound","range","useMakeLine","props","current","setCurrent","previous","setPrevious","line","curveType","curveCatmullRom","next","String","curve","useMakeArea","area","y0","y1","thisArea","t","i0","i1","x0","x1","interval","floor","ceil","transformLog","log","transformExp","exp","transformLogn","transformExpn","pow10","isFinite","reflect","f","loggish","transform","logs","pows","base","rescale","E","log10","log2","logp","pow","powp","_","ticks","count","u","v","p","k","j","z","min","map","reverse","tickFormat","specifier","max","nice","copy","init","apply","date","setDate","setHours","step","setMonth","getMonth","end","getFullYear","setTime","getMilliseconds","getSeconds","duration","getMinutes","getHours","getUTCSeconds","every","number","calendar","year","month","week","day","hour","minute","second","millisecond","format","continuous","invert","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","tickIntervals","durationSecond","durationMinute","durationHour","durationDay","tickInterval","abs","bisector","Array","from","t0","t1","scaleLog","clamp","scaleTime","scaleLinear","Linear","context","_context","areaStart","_line","areaEnd","NaN","lineStart","_point","lineEnd","closePath","point","lineTo","moveTo","baseMerge","merge","createAssigner","object","source","srcIndex","defined","output","buffer","defined0","x0z","y0z","arealine","lineX0","lineY0","lineY1","lineX1","TornadoD3","scaleBand","innerScaleBand","dataSets","cloneDeep","defaultAxis","bar","grouped","paddingInner","paddingOuter","overlayMargin","className","colorScheme","center","bins","counts","delay","grid","defaultGrid","groupLayout","EGroupedBarLayout","GROUPED","margin","showBinPercentages","splitBins","stroke","color","dasharray","linecap","tip","tips","tipContainer","tipContentFn","visible","el","newProps","mergeProps","makeSvg","undefined","sizeSVG","makeTip","tipContent","makeGrid","gridX","gridY","xAxisContainer2","append","attr","container","makeScales","xAxisContainer","yAxisContainer","xAxisLabel","yAxisLabel","update","drawAxes","valuesCount","reduce","a","b","gridWidth","h","gridHeight","dataLabels","c","label","groupedPaddingInner","groupedBarsUseSameXAxisValue","bandwidth","xAxis","axisBottom","replace","shouldFormatTick","timeFormat","dateFormat","isNaN","Number","numberFormat","tickSize","axisLength","axisConfig","limitByValues","calculateDomain","x2","scalePoint","xGroupAxis","tickPadding","yAxis","axisLeft","xAxisY","xAxisHeight","yAxisWidth","attrs","selectAll","style","text","leftValues","prev","concat","rightValues","applyDomainAffordance","updateChart","groupData","percentData","totals","datum","side","groupLabel","value","total","percent","calculatePercents","colors","scaleOrdinal","gWidth","g","bars","enter","yd","on","onClick","onMouseOver","hover","fx","move","onMouseOut","OVERLAID","getBarWidth","transition","stackIndex","percents","exit","remove","yText","xText","mergeWith","objValue","srcValue","key","stack","genderIndex","aValue","rowIndex","colorRef","destroy","Tornado","chart","state","parentWidth","handleResize","getDOMNode","setState","getChartState","componentDidMount","e","componentDidUpdate","rest","componentWillUnmount","ReactDOM","findDOMNode","Text","render","Component","noop","dispatch","Error","Dispatch","parseTypenames","typenames","types","trim","split","hasOwnProperty","constructor","typename","T","that","args","TipContent","item","bin","rx","ry","fill","xmlns","textAlign","HistogramBars","config","continuousDomain","direction","EChartDirection","horizontal","hoverColorScheme","values","brighter","binLabels","isArray","datasetIndex","binIndex","numericScale","continuousScale","vertical","setHover","springs","useSprings","bandPosition","itemWidth","itemHeight","hoverFill","to","buildHistogramSprings","ThisTip","refs","React","createRef","rect","onMouseEnter","onMouseLeave","triggerRef","Histogram","animation","axisLabelFormat","schemeSet3","xAxisLabelOrientation","ELabelOrientation","Base","Grid","svgProps","lines","YAxis","labelFormat","XAxis","labelOrientation","AreaFill","spring","useSpring","reset","getInterpolator","interpolate","interpolator","useRef","useLayoutEffect","path","Line","strokeDashoffset","strokeDashOffset","strokeDasharray","strokeDashArray","Points","radius","yValue","xValue","cy","cx","LineChart","useLineDomain","show","lineChartD3","xParseTime","xFormatTime","lineContainer","lineProps","pointProps","lineStyle","info","toFixed","datumProps","getYAxisWidth","_drawDataPointSet","pointContainer","points","dx","html","in","out","xOffset","_drawLines","oldData","find","newD","select","dataset","selector","selection","empty","drawAreas","timeParse","assign","drawGrid","ScatterPlot","domainByTrait","choices","keys","distModels","legendWidth","padding","_makeSvg","childNodes","getElementsByTagName","removeChild","_drawScales","xSize","ySize","each","_drawLegend","legend","cell","_drawPoints","traits","nx","m","cross","plotCell","findIndex","filter","trait","scatterPlotD3","componentWillReceiveProps","defaultProps","HorizontalHistogramD3","yAnnotations","yAnnotationAxisContainer","annotations","annotationTextSize","stacked","maxValueCount","annotationsEnabled","groupedPaddingOuter","axisYAnnotationAllowance","axisLabelTipContentFn","onMouseOverAxis","annotationAxis","annotationAxisDefaults","appendDomainRange","isStacked","formatTick","stackedOffset","oSet","gData","isItStacked","offset","calculateYPosition","overlaidYPos","finalYPos","currentHeight","barWidth","group","percentage","overlaidOffset","BaseHistogramD3","HorizontalHistogram","histogram","_ref","scroll","debounce$1","_useState","_useState2","bounds","element","scrollContainers","lastBounds","scrollDebounce","resizeDebounce","resize","_useMemo","_state$current$elemen","getBoundingClientRect","areBoundsEqual","_useMemo2","forceRefresh","resizeChange","scrollChange","removeListeners","addListeners","scrollContainer","capture","passive","findScrollContainers","useOnWindowScroll","Boolean","useOnWindowResize","onWindowResize","onScroll","enabled","result","_window$getComputedSt","overflow","prop","parentElement","getOwnPropertyDescriptor","writable","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","performance","setFrame","bind","setTimeout","clearNow","Timer","_call","_time","_next","timer","restart","wake","timerFlush","t2","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","emptyOn","emptyTween","schedules","__transition","id","self","tween","o","__data__","tick","ease","timing","tweenRemove","tween0","tween1","tweenFunction","tweenValue","_id","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","space","local","attrConstant","value1","string00","interpolate0","string1","string0","getAttribute","attrConstantNS","getAttributeNS","attrFunction","string10","attrFunctionNS","attrInterpolate","setAttribute","attrInterpolateNS","setAttributeNS","attrTweenNS","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","Selection","styleRemove","removeProperty","styleInterpolate","priority","setProperty","styleTween","textInterpolate","textTween","Transition","groups","parents","_groups","_parents","_name","newId","selection_prototype","subgroups","subnode","subgroup","selectorAll","child","inherit","match","matcher","groups0","groups1","m0","m1","merges","group0","group1","id0","id1","nodes","namespace","styleNull","styleFunction","listener0","styleMaybeRemove","styleConstant","textFunction","textConstant","Promise","resolve","reject","cancel","interrupt","defaultTiming","active","arcInnerRadius","innerRadius","arcOuterRadius","outerRadius","arcStartAngle","startAngle","arcEndAngle","endAngle","arcPadAngle","padAngle","intersect","y2","x3","y3","x10","y10","x32","y32","cornerTangents","r1","rc","cw","x01","y01","lo","ox","oy","x11","y11","x00","y00","dy","d2","D","cx0","cy0","cx1","cy1","dx0","dy0","dx1","dy1","cornerRadius","constant","padRadius","arc","r0","a0","a1","da","a01","a11","a00","a10","da0","da1","ap","rp","rc0","rc1","p0","p1","oc","ax","ay","bx","by","kc","lc","centroid","thisPie","identity","sortValues","descending","sort","pie","sum","arcs","pa","setIndex","donutWidth","getArc","arcTween","thisArc","_current","PieChart","containers","previousData","storedWidth","storedHeight","backgroundColor","lighten","labels","displayFn","dataSet","drawChartBg","drawCharts","theme","drawChart","drawLabels","tau","PI","bgArc","background","s","ix","path2","pieChartD3","pi","tauEpsilon","Path","_x0","_y0","_x1","_y1","quadraticCurveTo","bezierCurveTo","arcTo","x21","y21","l01_2","x20","y20","l21_2","l20_2","l21","sqrt","l01","tan","acos","t01","t21","ccw","cos","sin","outputSvg","svgId","watermark","svgStr","XMLSerializer","serializeToString","svgData","btoa","unescape","encodeURIComponent","canvas","createElement","getContext","image","Image","watermarkImage","onload","clearRect","drawImage","globalCompositeOperation","fillStyle","fillRect","toBlob","pngData","toDataURL","src","legendIconStyle","cursor","listStyle","liStyle","alignItems","Legend","onSelect","scheme","border","func","wait","immediate","timestamp","later","last","debounced","callNow","clear","flush"],"mappings":"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","file":"f81be11c034672e3aa72f3b3c736f1e0587056cc-cc95f0ba3c5cc878de6c.js","sourcesContent":["module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var ResizeObserverBoxOptions;\n\n(function (ResizeObserverBoxOptions) {\n  ResizeObserverBoxOptions[\"BORDER_BOX\"] = \"border-box\";\n  ResizeObserverBoxOptions[\"CONTENT_BOX\"] = \"content-box\";\n  ResizeObserverBoxOptions[\"DEVICE_PIXEL_CONTENT_BOX\"] = \"device-pixel-content-box\";\n})(ResizeObserverBoxOptions || (ResizeObserverBoxOptions = {}));\n\nexport { ResizeObserverBoxOptions };","var resizeObservers = [];\nexport { resizeObservers };","var msg = 'ResizeObserver loop completed with undelivered notifications.';\n\nvar deliverResizeLoopError = function deliverResizeLoopError() {\n  var event;\n\n  if (typeof ErrorEvent === 'function') {\n    event = new ErrorEvent('error', {\n      message: msg\n    });\n  } else {\n    event = document.createEvent('Event');\n    event.initEvent('error', false, false);\n    event.message = msg;\n  }\n\n  window.dispatchEvent(event);\n};\n\nexport { deliverResizeLoopError };","var DOMRectReadOnly = function () {\n  function DOMRectReadOnly(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.top = this.y;\n    this.left = this.x;\n    this.bottom = this.top + this.height;\n    this.right = this.left + this.width;\n    return Object.freeze(this);\n  }\n\n  DOMRectReadOnly.prototype.toJSON = function () {\n    var _a = this,\n        x = _a.x,\n        y = _a.y,\n        top = _a.top,\n        right = _a.right,\n        bottom = _a.bottom,\n        left = _a.left,\n        width = _a.width,\n        height = _a.height;\n\n    return {\n      x: x,\n      y: y,\n      top: top,\n      right: right,\n      bottom: bottom,\n      left: left,\n      width: width,\n      height: height\n    };\n  };\n\n  DOMRectReadOnly.fromRect = function (rectangle) {\n    return new DOMRectReadOnly(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n  };\n\n  return DOMRectReadOnly;\n}();\n\nexport { DOMRectReadOnly };","var trigger;\nvar callbacks = [];\n\nvar notify = function notify() {\n  return callbacks.splice(0).forEach(function (cb) {\n    return cb();\n  });\n};\n\nvar queueMicroTask = function queueMicroTask(callback) {\n  if (!trigger) {\n    var toggle_1 = 0;\n    var el_1 = document.createTextNode('');\n    var config = {\n      characterData: true\n    };\n    new MutationObserver(function () {\n      return notify();\n    }).observe(el_1, config);\n\n    trigger = function trigger() {\n      el_1.textContent = \"\" + (toggle_1 ? toggle_1-- : toggle_1++);\n    };\n  }\n\n  callbacks.push(callback);\n  trigger();\n};\n\nexport { queueMicroTask };","var isSVG = function isSVG(target) {\n  return target instanceof SVGElement && 'getBBox' in target;\n};\n\nvar isHidden = function isHidden(target) {\n  if (isSVG(target)) {\n    var _a = target.getBBox(),\n        width = _a.width,\n        height = _a.height;\n\n    return !width && !height;\n  }\n\n  var _b = target,\n      offsetWidth = _b.offsetWidth,\n      offsetHeight = _b.offsetHeight;\n  return !(offsetWidth || offsetHeight || target.getClientRects().length);\n};\n\nvar isElement = function isElement(obj) {\n  var _a, _b;\n\n  var scope = (_b = (_a = obj) === null || _a === void 0 ? void 0 : _a.ownerDocument) === null || _b === void 0 ? void 0 : _b.defaultView;\n  return !!(scope && obj instanceof scope.Element);\n};\n\nvar isReplacedElement = function isReplacedElement(target) {\n  switch (target.tagName) {\n    case 'INPUT':\n      if (target.type !== 'image') {\n        break;\n      }\n\n    case 'VIDEO':\n    case 'AUDIO':\n    case 'EMBED':\n    case 'OBJECT':\n    case 'CANVAS':\n    case 'IFRAME':\n    case 'IMG':\n      return true;\n  }\n\n  return false;\n};\n\nexport { isSVG, isHidden, isElement, isReplacedElement };","export var global = typeof window !== 'undefined' ? window : {};","import { ResizeObserverBoxOptions } from '../ResizeObserverBoxOptions';\nimport { DOMRectReadOnly } from '../DOMRectReadOnly';\nimport { isSVG, isHidden } from '../utils/element';\nimport { global } from '../utils/global';\nvar cache = new WeakMap();\nvar scrollRegexp = /auto|scroll/;\nvar verticalRegexp = /^tb|vertical/;\nvar IE = /msie|trident/i.test(global.navigator && global.navigator.userAgent);\n\nvar parseDimension = function parseDimension(pixel) {\n  return parseFloat(pixel || '0');\n};\n\nvar size = function size(inlineSize, blockSize, switchSizes) {\n  if (inlineSize === void 0) {\n    inlineSize = 0;\n  }\n\n  if (blockSize === void 0) {\n    blockSize = 0;\n  }\n\n  if (switchSizes === void 0) {\n    switchSizes = false;\n  }\n\n  return Object.freeze({\n    inlineSize: (switchSizes ? blockSize : inlineSize) || 0,\n    blockSize: (switchSizes ? inlineSize : blockSize) || 0\n  });\n};\n\nvar zeroBoxes = Object.freeze({\n  devicePixelContentBoxSize: size(),\n  borderBoxSize: size(),\n  contentBoxSize: size(),\n  contentRect: new DOMRectReadOnly(0, 0, 0, 0)\n});\n\nvar calculateBoxSizes = function calculateBoxSizes(target, forceRecalculation) {\n  if (forceRecalculation === void 0) {\n    forceRecalculation = false;\n  }\n\n  if (cache.has(target) && !forceRecalculation) {\n    return cache.get(target);\n  }\n\n  if (isHidden(target)) {\n    cache.set(target, zeroBoxes);\n    return zeroBoxes;\n  }\n\n  var cs = getComputedStyle(target);\n  var svg = isSVG(target) && target.ownerSVGElement && target.getBBox();\n  var removePadding = !IE && cs.boxSizing === 'border-box';\n  var switchSizes = verticalRegexp.test(cs.writingMode || '');\n  var canScrollVertically = !svg && scrollRegexp.test(cs.overflowY || '');\n  var canScrollHorizontally = !svg && scrollRegexp.test(cs.overflowX || '');\n  var paddingTop = svg ? 0 : parseDimension(cs.paddingTop);\n  var paddingRight = svg ? 0 : parseDimension(cs.paddingRight);\n  var paddingBottom = svg ? 0 : parseDimension(cs.paddingBottom);\n  var paddingLeft = svg ? 0 : parseDimension(cs.paddingLeft);\n  var borderTop = svg ? 0 : parseDimension(cs.borderTopWidth);\n  var borderRight = svg ? 0 : parseDimension(cs.borderRightWidth);\n  var borderBottom = svg ? 0 : parseDimension(cs.borderBottomWidth);\n  var borderLeft = svg ? 0 : parseDimension(cs.borderLeftWidth);\n  var horizontalPadding = paddingLeft + paddingRight;\n  var verticalPadding = paddingTop + paddingBottom;\n  var horizontalBorderArea = borderLeft + borderRight;\n  var verticalBorderArea = borderTop + borderBottom;\n  var horizontalScrollbarThickness = !canScrollHorizontally ? 0 : target.offsetHeight - verticalBorderArea - target.clientHeight;\n  var verticalScrollbarThickness = !canScrollVertically ? 0 : target.offsetWidth - horizontalBorderArea - target.clientWidth;\n  var widthReduction = removePadding ? horizontalPadding + horizontalBorderArea : 0;\n  var heightReduction = removePadding ? verticalPadding + verticalBorderArea : 0;\n  var contentWidth = svg ? svg.width : parseDimension(cs.width) - widthReduction - verticalScrollbarThickness;\n  var contentHeight = svg ? svg.height : parseDimension(cs.height) - heightReduction - horizontalScrollbarThickness;\n  var borderBoxWidth = contentWidth + horizontalPadding + verticalScrollbarThickness + horizontalBorderArea;\n  var borderBoxHeight = contentHeight + verticalPadding + horizontalScrollbarThickness + verticalBorderArea;\n  var boxes = Object.freeze({\n    devicePixelContentBoxSize: size(Math.round(contentWidth * devicePixelRatio), Math.round(contentHeight * devicePixelRatio), switchSizes),\n    borderBoxSize: size(borderBoxWidth, borderBoxHeight, switchSizes),\n    contentBoxSize: size(contentWidth, contentHeight, switchSizes),\n    contentRect: new DOMRectReadOnly(paddingLeft, paddingTop, contentWidth, contentHeight)\n  });\n  cache.set(target, boxes);\n  return boxes;\n};\n\nvar calculateBoxSize = function calculateBoxSize(target, observedBox, forceRecalculation) {\n  var _a = calculateBoxSizes(target, forceRecalculation),\n      borderBoxSize = _a.borderBoxSize,\n      contentBoxSize = _a.contentBoxSize,\n      devicePixelContentBoxSize = _a.devicePixelContentBoxSize;\n\n  switch (observedBox) {\n    case ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:\n      return devicePixelContentBoxSize;\n\n    case ResizeObserverBoxOptions.BORDER_BOX:\n      return borderBoxSize;\n\n    default:\n      return contentBoxSize;\n  }\n};\n\nexport { calculateBoxSize, calculateBoxSizes };","import { calculateBoxSizes } from './algorithms/calculateBoxSize';\n\nvar ResizeObserverEntry = function () {\n  function ResizeObserverEntry(target) {\n    var boxes = calculateBoxSizes(target);\n    this.target = target;\n    this.contentRect = boxes.contentRect;\n    this.borderBoxSize = [boxes.borderBoxSize];\n    this.contentBoxSize = [boxes.contentBoxSize];\n    this.devicePixelContentBoxSize = [boxes.devicePixelContentBoxSize];\n  }\n\n  return ResizeObserverEntry;\n}();\n\nexport { ResizeObserverEntry };","import { isHidden } from '../utils/element';\n\nvar calculateDepthForNode = function calculateDepthForNode(node) {\n  if (isHidden(node)) {\n    return Infinity;\n  }\n\n  var depth = 0;\n  var parent = node.parentNode;\n\n  while (parent) {\n    depth += 1;\n    parent = parent.parentNode;\n  }\n\n  return depth;\n};\n\nexport { calculateDepthForNode };","import { resizeObservers } from '../utils/resizeObservers';\nimport { ResizeObserverEntry } from '../ResizeObserverEntry';\nimport { calculateDepthForNode } from './calculateDepthForNode';\nimport { calculateBoxSize } from './calculateBoxSize';\n\nvar broadcastActiveObservations = function broadcastActiveObservations() {\n  var shallowestDepth = Infinity;\n  var callbacks = [];\n  resizeObservers.forEach(function processObserver(ro) {\n    if (ro.activeTargets.length === 0) {\n      return;\n    }\n\n    var entries = [];\n    ro.activeTargets.forEach(function processTarget(ot) {\n      var entry = new ResizeObserverEntry(ot.target);\n      var targetDepth = calculateDepthForNode(ot.target);\n      entries.push(entry);\n      ot.lastReportedSize = calculateBoxSize(ot.target, ot.observedBox);\n\n      if (targetDepth < shallowestDepth) {\n        shallowestDepth = targetDepth;\n      }\n    });\n    callbacks.push(function resizeObserverCallback() {\n      ro.callback.call(ro.observer, entries, ro.observer);\n    });\n    ro.activeTargets.splice(0, ro.activeTargets.length);\n  });\n\n  for (var _i = 0, callbacks_1 = callbacks; _i < callbacks_1.length; _i++) {\n    var callback = callbacks_1[_i];\n    callback();\n  }\n\n  return shallowestDepth;\n};\n\nexport { broadcastActiveObservations };","import { resizeObservers } from '../utils/resizeObservers';\nimport { calculateDepthForNode } from './calculateDepthForNode';\n\nvar gatherActiveObservationsAtDepth = function gatherActiveObservationsAtDepth(depth) {\n  resizeObservers.forEach(function processObserver(ro) {\n    ro.activeTargets.splice(0, ro.activeTargets.length);\n    ro.skippedTargets.splice(0, ro.skippedTargets.length);\n    ro.observationTargets.forEach(function processTarget(ot) {\n      if (ot.isActive()) {\n        if (calculateDepthForNode(ot.target) > depth) {\n          ro.activeTargets.push(ot);\n        } else {\n          ro.skippedTargets.push(ot);\n        }\n      }\n    });\n  });\n};\n\nexport { gatherActiveObservationsAtDepth };","import { hasActiveObservations } from '../algorithms/hasActiveObservations';\nimport { hasSkippedObservations } from '../algorithms/hasSkippedObservations';\nimport { deliverResizeLoopError } from '../algorithms/deliverResizeLoopError';\nimport { broadcastActiveObservations } from '../algorithms/broadcastActiveObservations';\nimport { gatherActiveObservationsAtDepth } from '../algorithms/gatherActiveObservationsAtDepth';\n\nvar process = function process() {\n  var depth = 0;\n  gatherActiveObservationsAtDepth(depth);\n\n  while (hasActiveObservations()) {\n    depth = broadcastActiveObservations();\n    gatherActiveObservationsAtDepth(depth);\n  }\n\n  if (hasSkippedObservations()) {\n    deliverResizeLoopError();\n  }\n\n  return depth > 0;\n};\n\nexport { process };","import { resizeObservers } from '../utils/resizeObservers';\n\nvar hasActiveObservations = function hasActiveObservations() {\n  return resizeObservers.some(function (ro) {\n    return ro.activeTargets.length > 0;\n  });\n};\n\nexport { hasActiveObservations };","import { resizeObservers } from '../utils/resizeObservers';\n\nvar hasSkippedObservations = function hasSkippedObservations() {\n  return resizeObservers.some(function (ro) {\n    return ro.skippedTargets.length > 0;\n  });\n};\n\nexport { hasSkippedObservations };","import { process } from './process';\nimport { global } from './global';\nimport { queueResizeObserver } from './queueResizeObserver';\nvar watching = 0;\n\nvar isWatching = function isWatching() {\n  return !!watching;\n};\n\nvar CATCH_PERIOD = 250;\nvar observerConfig = {\n  attributes: true,\n  characterData: true,\n  childList: true,\n  subtree: true\n};\nvar events = ['resize', 'load', 'transitionend', 'animationend', 'animationstart', 'animationiteration', 'keyup', 'keydown', 'mouseup', 'mousedown', 'mouseover', 'mouseout', 'blur', 'focus'];\n\nvar time = function time(timeout) {\n  if (timeout === void 0) {\n    timeout = 0;\n  }\n\n  return Date.now() + timeout;\n};\n\nvar scheduled = false;\n\nvar Scheduler = function () {\n  function Scheduler() {\n    var _this = this;\n\n    this.stopped = true;\n\n    this.listener = function () {\n      return _this.schedule();\n    };\n  }\n\n  Scheduler.prototype.run = function (timeout) {\n    var _this = this;\n\n    if (timeout === void 0) {\n      timeout = CATCH_PERIOD;\n    }\n\n    if (scheduled) {\n      return;\n    }\n\n    scheduled = true;\n    var until = time(timeout);\n    queueResizeObserver(function () {\n      var elementsHaveResized = false;\n\n      try {\n        elementsHaveResized = process();\n      } finally {\n        scheduled = false;\n        timeout = until - time();\n\n        if (!isWatching()) {\n          return;\n        }\n\n        if (elementsHaveResized) {\n          _this.run(1000);\n        } else if (timeout > 0) {\n          _this.run(timeout);\n        } else {\n          _this.start();\n        }\n      }\n    });\n  };\n\n  Scheduler.prototype.schedule = function () {\n    this.stop();\n    this.run();\n  };\n\n  Scheduler.prototype.observe = function () {\n    var _this = this;\n\n    var cb = function cb() {\n      return _this.observer && _this.observer.observe(document.body, observerConfig);\n    };\n\n    document.body ? cb() : global.addEventListener('DOMContentLoaded', cb);\n  };\n\n  Scheduler.prototype.start = function () {\n    var _this = this;\n\n    if (this.stopped) {\n      this.stopped = false;\n      this.observer = new MutationObserver(this.listener);\n      this.observe();\n      events.forEach(function (name) {\n        return global.addEventListener(name, _this.listener, true);\n      });\n    }\n  };\n\n  Scheduler.prototype.stop = function () {\n    var _this = this;\n\n    if (!this.stopped) {\n      this.observer && this.observer.disconnect();\n      events.forEach(function (name) {\n        return global.removeEventListener(name, _this.listener, true);\n      });\n      this.stopped = true;\n    }\n  };\n\n  return Scheduler;\n}();\n\nvar scheduler = new Scheduler();\n\nvar updateCount = function updateCount(n) {\n  !watching && n > 0 && scheduler.start();\n  watching += n;\n  !watching && scheduler.stop();\n};\n\nexport { scheduler, updateCount };","import { queueMicroTask } from './queueMicroTask';\n\nvar queueResizeObserver = function queueResizeObserver(cb) {\n  queueMicroTask(function ResizeObserver() {\n    requestAnimationFrame(cb);\n  });\n};\n\nexport { queueResizeObserver };","import { ResizeObserverBoxOptions } from './ResizeObserverBoxOptions';\nimport { calculateBoxSize } from './algorithms/calculateBoxSize';\nimport { isSVG, isReplacedElement } from './utils/element';\n\nvar skipNotifyOnElement = function skipNotifyOnElement(target) {\n  return !isSVG(target) && !isReplacedElement(target) && getComputedStyle(target).display === 'inline';\n};\n\nvar ResizeObservation = function () {\n  function ResizeObservation(target, observedBox) {\n    this.target = target;\n    this.observedBox = observedBox || ResizeObserverBoxOptions.CONTENT_BOX;\n    this.lastReportedSize = {\n      inlineSize: 0,\n      blockSize: 0\n    };\n  }\n\n  ResizeObservation.prototype.isActive = function () {\n    var size = calculateBoxSize(this.target, this.observedBox, true);\n\n    if (skipNotifyOnElement(this.target)) {\n      this.lastReportedSize = size;\n    }\n\n    if (this.lastReportedSize.inlineSize !== size.inlineSize || this.lastReportedSize.blockSize !== size.blockSize) {\n      return true;\n    }\n\n    return false;\n  };\n\n  return ResizeObservation;\n}();\n\nexport { ResizeObservation };","var ResizeObserverDetail = function () {\n  function ResizeObserverDetail(resizeObserver, callback) {\n    this.activeTargets = [];\n    this.skippedTargets = [];\n    this.observationTargets = [];\n    this.observer = resizeObserver;\n    this.callback = callback;\n  }\n\n  return ResizeObserverDetail;\n}();\n\nexport { ResizeObserverDetail };","import { scheduler, updateCount } from './utils/scheduler';\nimport { ResizeObservation } from './ResizeObservation';\nimport { ResizeObserverDetail } from './ResizeObserverDetail';\nimport { resizeObservers } from './utils/resizeObservers';\nvar observerMap = new WeakMap();\n\nvar getObservationIndex = function getObservationIndex(observationTargets, target) {\n  for (var i = 0; i < observationTargets.length; i += 1) {\n    if (observationTargets[i].target === target) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\nvar ResizeObserverController = function () {\n  function ResizeObserverController() {}\n\n  ResizeObserverController.connect = function (resizeObserver, callback) {\n    var detail = new ResizeObserverDetail(resizeObserver, callback);\n    observerMap.set(resizeObserver, detail);\n  };\n\n  ResizeObserverController.observe = function (resizeObserver, target, options) {\n    var detail = observerMap.get(resizeObserver);\n    var firstObservation = detail.observationTargets.length === 0;\n\n    if (getObservationIndex(detail.observationTargets, target) < 0) {\n      firstObservation && resizeObservers.push(detail);\n      detail.observationTargets.push(new ResizeObservation(target, options && options.box));\n      updateCount(1);\n      scheduler.schedule();\n    }\n  };\n\n  ResizeObserverController.unobserve = function (resizeObserver, target) {\n    var detail = observerMap.get(resizeObserver);\n    var index = getObservationIndex(detail.observationTargets, target);\n    var lastObservation = detail.observationTargets.length === 1;\n\n    if (index >= 0) {\n      lastObservation && resizeObservers.splice(resizeObservers.indexOf(detail), 1);\n      detail.observationTargets.splice(index, 1);\n      updateCount(-1);\n    }\n  };\n\n  ResizeObserverController.disconnect = function (resizeObserver) {\n    var _this = this;\n\n    var detail = observerMap.get(resizeObserver);\n    detail.observationTargets.slice().forEach(function (ot) {\n      return _this.unobserve(resizeObserver, ot.target);\n    });\n    detail.activeTargets.splice(0, detail.activeTargets.length);\n  };\n\n  return ResizeObserverController;\n}();\n\nexport { ResizeObserverController };","import { ResizeObserverController } from './ResizeObserverController';\nimport { isElement } from './utils/element';\n\nvar ResizeObserver = function () {\n  function ResizeObserver(callback) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (typeof callback !== 'function') {\n      throw new TypeError(\"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.\");\n    }\n\n    ResizeObserverController.connect(this, callback);\n  }\n\n  ResizeObserver.prototype.observe = function (target, options) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (!isElement(target)) {\n      throw new TypeError(\"Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    }\n\n    ResizeObserverController.observe(this, target, options);\n  };\n\n  ResizeObserver.prototype.unobserve = function (target) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.\");\n    }\n\n    if (!isElement(target)) {\n      throw new TypeError(\"Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element\");\n    }\n\n    ResizeObserverController.unobserve(this, target);\n  };\n\n  ResizeObserver.prototype.disconnect = function () {\n    ResizeObserverController.disconnect(this);\n  };\n\n  ResizeObserver.toString = function () {\n    return 'function ResizeObserver () { [polyfill code] }';\n  };\n\n  return ResizeObserver;\n}();\n\nexport { ResizeObserver };","import {\n  useEffect,\n  useState,\n} from 'react';\nimport useMeasure from 'react-use-measure';\n\nimport { ResizeObserver } from '@juggle/resize-observer';\n\n// Helper hook to monitor container ref width and calculate pixel value from percent or number.\nexport const useWidth = (origWidth: string | number) => {\n  const [ref, { width }] = useMeasure({\n    debounce: 20,\n    polyfill: ResizeObserver,\n  });\n  const [r, setR] = useState<any>(width);\n  useEffect(() => {\n    const w = typeof origWidth === 'number'\n      ? origWidth\n      : origWidth.includes('%')\n        ? width * (parseInt(origWidth, 10) / 100)\n        : parseInt(origWidth, 10);\n    setR(w);\n  }, [origWidth, width]);\n  return [ref, r];\n}\n","import { extent } from 'd3-array';\nimport {\n  area,\n  curveCatmullRom,\n  CurveFactory,\n  CurveFactoryLineOnly,\n  line,\n} from 'd3-shape';\nimport {\n  useEffect,\n  useState,\n} from 'react';\n\nimport { IAxes } from '../Histogram';\nimport {\n  IChartPoint,\n  IChartPointValue,\n  ILineProps,\n} from '../LineChart';\nimport { rangeAffordance } from './domain';\nimport {\n  AnyScale,\n  buildScales,\n} from './scales';\n\nconst ZERO_SUBSTITUTE: number = 1e-6;\n\nexport interface IProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  data: T[];\n  axis: IAxes;\n  line: ILineProps;\n  curveType?: CurveFactory | CurveFactoryLineOnly;\n  width: number;\n  left?: number;\n  height: number;\n}\n\nexport const useScales: (props: Omit<IProps, 'line'>) => { xScale: any, yScale: any } = ({\n  data,\n  width,\n  height,\n  axis,\n  left = 0,\n}) => {\n  const [scales, setScales] = useState<{ xScale: any, yScale: any }>({ xScale: null, yScale: null });\n  useEffect(() => {\n    const [xScale, yScale] = buildScales(axis);\n\n    const ys: any[] = [];\n    const xs: any[] = [];\n    data.forEach((d) => {\n      let parsedY = axis.y.scale === 'LOG' && d.y === 0 ? ZERO_SUBSTITUTE : d.y;\n      let parsedX = axis.x.scale === 'LOG' && d.x === 0 ? ZERO_SUBSTITUTE : d.x;\n      ys.push(parsedY);\n      xs.push(parsedX);\n    });\n\n    const yDomain = rangeAffordance(extent(ys), axis.y);\n    const xDomain = rangeAffordance(extent(xs), axis.x);\n    (xScale as any)\n      .domain(xDomain)\n      .rangeRound([left, width + left]);\n    (yScale as any).domain(yDomain)\n      .range([height, 0]);\n    setScales({ xScale, yScale })\n\n  }, [])\n\n  return scales;\n}\n\n\nexport const useMakeLine: (props: IProps) => { previous: string, current: string } = (props) => {\n  const [current, setCurrent] = useState('');\n  const [previous, setPrevious] = useState('');\n  const { xScale, yScale } = useScales(props);\n  useEffect(() => {\n    const { data } = props;\n    const { curveType = curveCatmullRom } = props.line;\n    if (yScale !== null) {\n      const curve = (\n        x: AnyScale,\n        y: AnyScale,\n      ) => line()\n        .curve(curveType)\n        .x((d: any) => {\n          return x(d.x);\n        })\n        .y((d: any) => y(d.y));\n      const next = String(curve(xScale, yScale)(data as any))\n      if (next !== current) {\n        setPrevious(current);\n        setCurrent(next);\n      }\n    }\n\n  }, [xScale, yScale, props.data])\n\n  return { previous, current };\n}\n\nexport const useMakeArea: (props: IProps) => { previous: string, current: string } = (props) => {\n  const [current, setCurrent] = useState('');\n  const [previous, setPrevious] = useState('');\n  const { xScale, yScale } = useScales(props);\n  useEffect(() => {\n    const { data, height } = props;\n    const { curveType = curveCatmullRom } = props.line;\n    if (yScale !== null) {\n      const thisArea = () => area()\n        .curve(curveType as CurveFactory)\n        .x((d: any) => xScale(d.x))\n        .y0((d) => height)\n        .y1((d: any) => yScale(d.y));\n      const next = String(thisArea()(data as any));\n      if (next !== current) {\n        setPrevious(current);\n        setCurrent(next);\n      }\n    }\n  }, [xScale, yScale, props.data]);\n  return { previous, current };\n}\n","export default function (domain, interval) {\n  domain = domain.slice();\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}","import { ticks } from \"d3-array\";\nimport { format } from \"d3-format\";\nimport nice from \"./nice.js\";\nimport { copy, transformer } from \"./continuous.js\";\nimport { initRange } from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10 : base === Math.E ? Math.exp : function (x) {\n    return Math.pow(base, x);\n  };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log : base === 10 && Math.log10 || base === 2 && Math.log2 || (base = Math.log(base), function (x) {\n    return Math.log(x) / base;\n  });\n}\n\nfunction reflect(f) {\n  return function (x) {\n    return -f(-x);\n  };\n}\n\nexport function loggish(transform) {\n  var scale = transform(transformLog, transformExp),\n      domain = scale.domain,\n      base = 10,\n      logs,\n      pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n\n    return scale;\n  }\n\n  scale.base = function (_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function (_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function (count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n    if (r = v < u) i = u, u = v, v = i;\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function (count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n\n    return function (d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function () {\n    return domain(nice(domain(), {\n      floor: function floor(x) {\n        return pows(Math.floor(logs(x)));\n      },\n      ceil: function ceil(x) {\n        return pows(Math.ceil(logs(x)));\n      }\n    }));\n  };\n\n  return scale;\n}\nexport default function log() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function () {\n    return copy(scale, log()).base(scale.base());\n  };\n\n  initRange.apply(scale, arguments);\n  return scale;\n}","import interval from \"./interval.js\";\nvar month = interval(function (date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function (date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function (start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function (date) {\n  return date.getMonth();\n});\nexport default month;\nexport var months = month.range;","import interval from \"./interval.js\";\nimport { durationHour, durationMinute, durationSecond } from \"./duration.js\";\nvar hour = interval(function (date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function (date, step) {\n  date.setTime(+date + step * durationHour);\n}, function (start, end) {\n  return (end - start) / durationHour;\n}, function (date) {\n  return date.getHours();\n});\nexport default hour;\nexport var hours = hour.range;","import interval from \"./interval.js\";\nimport { durationMinute, durationSecond } from \"./duration.js\";\nvar minute = interval(function (date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function (date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function (start, end) {\n  return (end - start) / durationMinute;\n}, function (date) {\n  return date.getMinutes();\n});\nexport default minute;\nexport var minutes = minute.range;","import interval from \"./interval.js\";\nimport { durationSecond } from \"./duration.js\";\nvar second = interval(function (date) {\n  date.setTime(date - date.getMilliseconds());\n}, function (date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function (start, end) {\n  return (end - start) / durationSecond;\n}, function (date) {\n  return date.getUTCSeconds();\n});\nexport default second;\nexport var seconds = second.range;","import interval from \"./interval.js\";\nvar millisecond = interval(function () {// noop\n}, function (date, step) {\n  date.setTime(+date + step);\n}, function (start, end) {\n  return end - start;\n}); // An optimized implementation for this simple case.\n\nmillisecond.every = function (k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function (date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function (date, step) {\n    date.setTime(+date + step * k);\n  }, function (start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;","import { bisector, tickStep } from \"d3-array\";\nimport { timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond } from \"d3-time\";\nimport { timeFormat } from \"d3-time-format\";\nimport continuous, { copy } from \"./continuous.js\";\nimport { initRange } from \"./init.js\";\nimport nice from \"./nice.js\";\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n  var tickIntervals = [[second, 1, durationSecond], [second, 5, 5 * durationSecond], [second, 15, 15 * durationSecond], [second, 30, 30 * durationSecond], [minute, 1, durationMinute], [minute, 5, 5 * durationMinute], [minute, 15, 15 * durationMinute], [minute, 30, 30 * durationMinute], [hour, 1, durationHour], [hour, 3, 3 * durationHour], [hour, 6, 6 * durationHour], [hour, 12, 12 * durationHour], [day, 1, durationDay], [day, 2, 2 * durationDay], [week, 1, durationWeek], [month, 1, durationMonth], [month, 3, 3 * durationMonth], [year, 1, durationYear]];\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond : minute(date) < date ? formatSecond : hour(date) < date ? formatMinute : day(date) < date ? formatHour : month(date) < date ? week(date) < date ? formatDay : formatWeek : year(date) < date ? formatMonth : formatYear)(date);\n  }\n\n  function tickInterval(interval, start, stop) {\n    if (interval == null) interval = 10; // If a desired tick count is specified, pick a reasonable tick interval\n    // based on the extent of the domain and a rough estimate of tick size.\n    // Otherwise, assume interval is already a time interval and use it.\n\n    if (typeof interval === \"number\") {\n      var target = Math.abs(stop - start) / interval,\n          i = bisector(function (i) {\n        return i[2];\n      }).right(tickIntervals, target),\n          step;\n\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, interval);\n        interval = year;\n      } else if (i) {\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n        step = i[1];\n        interval = i[0];\n      } else {\n        step = Math.max(tickStep(start, stop, interval), 1);\n        interval = millisecond;\n      }\n\n      return interval.every(step);\n    }\n\n    return interval;\n  }\n\n  scale.invert = function (y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function (_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function (interval) {\n    var d = domain(),\n        t0 = d[0],\n        t1 = d[d.length - 1],\n        r = t1 < t0,\n        t;\n    if (r) t = t0, t0 = t1, t1 = t;\n    t = tickInterval(interval, t0, t1);\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n\n    return r ? t.reverse() : t;\n  };\n\n  scale.tickFormat = function (count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function (interval) {\n    var d = domain();\n    return (interval = tickInterval(interval, d[0], d[d.length - 1])) ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function () {\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n  };\n\n  return scale;\n}\nexport default function () {\n  return initRange.apply(calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}","import {\n  ScaleBand,\n  scaleLinear,\n  ScaleLinear,\n  scaleLog,\n  ScaleLogarithmic,\n  ScalePoint,\n  scaleTime,\n  ScaleTime,\n} from 'd3-scale';\n\nimport { IAxes } from '../';\n\nexport type AnyScale = ScaleLinear<number, number>\n  | ScaleTime<any, any>\n  | ScaleLogarithmic<any, any>\n  | ScaleBand<string>\n  | ScalePoint<string>;\n\nexport const buildScales = (axis: IAxes) => {\n  let x: AnyScale;\n  let y: AnyScale;\n  switch (axis.x.scale) {\n    case 'LOG':\n      x = scaleLog().clamp(true); // clamp values below 1 to be equal to 0\n      break;\n    case 'TIME':\n      x = scaleTime();\n      break;\n    default:\n      x = scaleLinear();\n      break;\n  }\n\n  switch (axis.y.scale) {\n    case 'LOG':\n      y = scaleLog().clamp(true); // clamp values below 1 to be equal to 0\n      break;\n    case 'TIME':\n      y = scaleTime();\n      break;\n    default:\n      y = scaleLinear();\n      break;\n  }\n  return [x, y];\n};\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function areaStart() {\n    this._line = 0;\n  },\n  areaEnd: function areaEnd() {\n    this._line = NaN;\n  },\n  lineStart: function lineStart() {\n    this._point = 0;\n  },\n  lineEnd: function lineEnd() {\n    if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function point(x, y) {\n    x = +x, y = +y;\n\n    switch (this._point) {\n      case 0:\n        this._point = 1;\n        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);\n        break;\n\n      case 1:\n        this._point = 2;\n      // proceed\n\n      default:\n        this._context.lineTo(x, y);\n\n        break;\n    }\n  }\n};\nexport default function (context) {\n  return new Linear(context);\n}","var baseMerge = require('./_baseMerge'),\n    createAssigner = require('./_createAssigner');\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nmodule.exports = merge;\n","import { path } from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport { x as pointX, y as pointY } from \"./point.js\";\nexport default function () {\n  var x0 = pointX,\n      x1 = null,\n      y0 = constant(0),\n      y1 = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function (_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function (_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function (_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function (_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function (_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function (_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 = area.lineY0 = function () {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function () {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function () {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function (_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function (_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function (_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}","import { path } from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport { x as pointX, y as pointY } from \"./point.js\";\nexport default function () {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();else output.lineEnd();\n      }\n\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function (_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function (_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function (_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function (_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function (_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}","export function x(p) {\n  return p[0];\n}\nexport function y(p) {\n  return p[1];\n}","import {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport { format } from 'd3-format';\nimport {\n  scaleBand,\n  scaleLinear,\n  scaleOrdinal,\n  scalePoint,\n} from 'd3-scale';\nimport { Selection } from 'd3-selection';\nimport { timeFormat } from 'd3-time-format';\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nimport {\n  IGroupData,\n  IGroupDataItem,\n} from './BaseHistogramD3';\nimport colorScheme from './colors';\nimport attrs from './d3/attrs';\nimport {\n  gridHeight,\n  gridWidth,\n  xAxisHeight,\n  yAxisWidth,\n} from './grid';\nimport {\n  EGroupedBarLayout,\n  IChartAdaptor,\n} from './Histogram';\nimport tips, { makeTip } from './tip';\nimport {\n  ITornadoDataSet,\n  ITornadoProps,\n} from './Tornado';\nimport {\n  getBarWidth,\n  groupedBarsUseSameXAxisValue,\n  groupedPaddingInner,\n  paddingInner,\n} from './utils/bars';\nimport {\n  axis as defaultAxis,\n  grid as defaultGrid,\n} from './utils/defaults';\nimport {\n  applyDomainAffordance,\n  shouldFormatTick,\n  ticks,\n  tickSize,\n} from './utils/domain';\nimport {\n  onClick,\n  onMouseOut,\n  onMouseOver,\n} from './utils/mouseOver';\nimport {\n  makeGrid,\n  makeScales,\n  makeSvg,\n  sizeSVG,\n  TSelection,\n} from './utils/svg';\nimport { DeepPartial } from './utils/types';\n\nexport const maxValueCount = (counts: ITornadoDataSet[]): number => {\n  return counts.reduce((a: number, b: ITornadoDataSet): number => {\n    return b.data.length > a ? b.data.length : a;\n  }, 0);\n};\n\n// The height for the x axis labels showing the left/right labels.\nconst SPLIT_AXIS_HEIGHT = 20;\n\nconst calculatePercents = (groupData: IGroupData) => {\n  const totals = groupData.reduce((prev, next) => {\n\n    next.forEach((datum, i) => {\n      const side = datum.side!;\n      const groupLabel = datum.groupLabel!;\n      if (!prev[groupLabel]) {\n        prev[groupLabel] = { left: 0, right: 0 };\n      }\n      prev[groupLabel][side] = prev[groupLabel][side] + datum.value;\n    })\n    return prev;\n  }, {} as Record<string, { left: number, right: number }>);\n\n\n  return groupData.map((data, i) => {\n    return data.map((datum) => {\n      const side = datum.side!;\n      const groupLabel = datum.groupLabel!;\n      const total = totals[groupLabel][side];\n      return {\n        ...datum,\n        percent: total === 0 ? 0 : Math.round(datum.value / total * 100),\n      }\n    })\n\n  });\n}\n\nexport class TornadoD3 {\n  svg: undefined | Selection<any, any, any, any>;;\n  tipContainer;\n  tipContent;\n  x = scaleLinear();\n  y = scaleBand();\n  innerScaleBand = scaleBand();\n  container: undefined | Selection<SVGElement, any, any, any>;\n  dataSets: IGroupData = [[]];\n  gridX: undefined | TSelection;\n  gridY: undefined | TSelection;\n  yAxisContainer: undefined | TSelection;\n  xAxisContainer: undefined | TSelection;\n  xAxisContainer2: undefined | TSelection;\n  yAxisLabel: undefined | TSelection;\n  xAxisLabel: undefined | TSelection;\n  domain: [number, number] = [0, 0];\n\n  props: ITornadoProps = {\n    axis: cloneDeep(defaultAxis),\n    bar: {\n      grouped: {\n        paddingInner: 0.1,\n        paddingOuter: 0,\n      },\n      paddingInner: 0.1,\n      paddingOuter: 0,\n      overlayMargin: 5,\n    },\n    className: 'torando-d3',\n    colorScheme,\n    center: true,\n    data: {\n      bins: [],\n      colorScheme: [],\n      counts: [],\n    },\n    delay: 0,\n    domain: {\n      max: null,\n      min: null,\n    },\n    duration: 400,\n    grid: defaultGrid,\n    groupLayout: EGroupedBarLayout.GROUPED,\n    height: 200,\n    margin: {\n      bottom: 0,\n      left: 5,\n      right: 0,\n      top: 5,\n    },\n    showBinPercentages: false,\n    splitBins: ['Left', 'Right'],\n    stroke: {\n      color: '#005870',\n      dasharray: '',\n      linecap: 'butt',\n      width: 0,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (bins: string[], i: number, d: number): string =>\n      bins[i] + '<br />' + d,\n    visible: {},\n    width: 200,\n  };\n\n  /**\n   * Initialization\n   */\n  create(el: Element, newProps: DeepPartial<ITornadoProps> = {}) {\n    const { props } = this;\n    this.mergeProps(newProps);\n    this.svg = makeSvg(el, undefined);\n    const { margin, width, height, className } = props;\n    sizeSVG(this.svg, { margin, width, height, className });\n    const r = makeTip(props.tipContainer, this.tipContainer);\n    this.tipContent = r.tipContent;\n    this.tipContainer = r.tipContainer;\n    [this.gridX, this.gridY] = makeGrid(this.svg);\n\n    // Used to display the 2 split bin labels\n    this.xAxisContainer2 = this.svg.append('g').attr('class', 'xAxisContainer2');\n    this.container = this.svg\n      .append<SVGElement>('g')\n      .attr('class', 'histogram-container');\n\n    // Render Axis above bars so that we can see the y axis overlaid\n    [this.xAxisContainer, this.yAxisContainer, this.xAxisLabel, this.yAxisLabel] = makeScales(this.svg);\n\n    this.update(props);\n  }\n\n  /**\n   * Draw Axes\n   */\n  drawAxes() {\n    const { props, svg, x, y, innerScaleBand, yAxisContainer, domain, xAxisContainer, xAxisContainer2 } = this;\n    const { bar, data, groupLayout, margin, width, height, axis } = props;\n    const valuesCount = maxValueCount(data.counts);\n    const w = gridWidth(props);\n    const h = gridHeight(props) - SPLIT_AXIS_HEIGHT;\n    const dataLabels = data.counts.map((c) => c.label);\n\n    y.domain(data.bins)\n      .rangeRound([h, 0])\n      .paddingInner(groupedPaddingInner(bar));\n\n    innerScaleBand\n      .domain(groupedBarsUseSameXAxisValue({ groupLayout }) ? ['main'] : dataLabels)\n      .rangeRound([0, y.bandwidth()])\n      .paddingInner(paddingInner(props.bar));\n\n    const xAxis = axisBottom<number>(x)\n      .tickFormat((v) => {\n        const n = v.toString().replace('-', '');\n\n        if (shouldFormatTick(axis.x)) {\n          if (axis.x.scale === 'TIME') {\n            return timeFormat(axis.x.dateFormat)(new Date(n));\n          }\n          return isNaN(Number(v)) ? n : format(axis.x.numberFormat)(Number(n))\n        }\n        return n;\n      });\n\n    tickSize({\n      axis: xAxis,\n      axisLength: w,\n      scaleBand: x,\n      axisConfig: axis.x,\n      limitByValues: false,\n      valuesCount: 10,\n    });\n\n    this.calculateDomain();\n\n    const x2 = scalePoint<any>();\n\n    const xGroupAxis = axisBottom(x2).tickPadding(SPLIT_AXIS_HEIGHT)\n      .tickSize(0)\n\n    x2.range([Number(width) / 4, Number(width) * (3 / 4) - (margin.top * 2) - axis.y.width])\n      .domain(props.splitBins);\n\n    /** Y-Axis (label axis) set up */\n    const yAxis = axisLeft<string>(y);\n    ticks({\n      axis: yAxis,\n      valuesCount,\n      axisLength: h,\n      axisConfig: axis.y,\n      scaleBand: y,\n      limitByValues: true,\n    });\n\n\n    // @TODO - Stacked? (was using appendDomainRange())\n    x.range([0, Number(width) - (margin.top * 2) - axis.y.width])\n      .domain(this.domain)\n      .nice();\n\n    const xAxisY = height - xAxisHeight(props.axis) - margin.top - SPLIT_AXIS_HEIGHT;\n    xAxisContainer\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        xAxisY + ')')\n      .call(xAxis);\n\n    xAxisContainer2\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        (xAxisY) + ')')\n      .call(xGroupAxis);\n\n\n    // Move the y axis ticks to the left of the chart (need to go after the x axis range set up)\n    yAxis.tickPadding(x(0) + 10)\n    yAxisContainer\n      // Place the y axis in the middle of the chart\n      ?.attr('transform', 'translate(' + (yAxisWidth(axis) + x(0)) + ', ' + margin.top + ' )')\n      .call(yAxis);\n    attrs(svg?.selectAll('.y-axis .domain, .y-axis .tick line'), axis.y.style);\n    attrs(svg?.selectAll('.y-axis .tick text'), axis.y.text.style as any);\n\n    attrs(svg?.selectAll('.x-axis .domain, .x-axis .tick line'), axis.x.style);\n    attrs(svg?.selectAll('.x-axis .tick text'), axis.x.text.style as any);\n  }\n\n  calculateDomain() {\n    const { props } = this;\n    const { data, center } = props;\n    const leftValues = data.counts.reduce((prev, next) => prev.concat(next.data[0]), [] as number[]);\n    const rightValues = data.counts.reduce((prev, next) => prev.concat(next.data[1]), [] as number[]);\n\n    // Use applyDomainAffordance to allow space for percentage labels\n    this.domain = [\n      applyDomainAffordance(-Math.max(...leftValues)),\n      applyDomainAffordance(Math.max(...rightValues)),\n    ];\n\n    // Center the 0 axis value in the middle of the chart\n    if (center) {\n      const max = Math.max(Math.max(...leftValues), this.domain[1]);\n      this.domain = [\n        applyDomainAffordance(-max),\n        applyDomainAffordance(max)];\n    }\n    return this.domain;\n  }\n\n  /**\n   * Draw a single data set into the chart\n   */\n  updateChart(\n    bins: string[],\n    groupData: IGroupData,\n  ) {\n    const { props, container, tipContainer, yAxisLabel, x, innerScaleBand, tipContent, y } = this;\n    const { axis, height, margin, delay, duration, tip, showBinPercentages } = props;\n\n    const percentData = calculatePercents(groupData);\n\n    const stackedOffset = (d: IGroupDataItem, stackIndex: number) => {\n      const w = d.side === 'left' ? -d.value : d.value;\n      return x(Math.min(0, w));\n    }\n\n    const colors = scaleOrdinal(props.colorScheme);\n    const gWidth = gridWidth(props);\n\n    const g = container\n      ?.selectAll<SVGElement, {}>('g')\n      .data(percentData);\n\n    const bars = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const xX = yAxisWidth(axis) + axis.x.style['stroke-width'];\n        return `translate(${xX}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('rect')\n      .data((d) => d);\n\n    bars\n      ?.enter()\n      .append<SVGElement>('rect')\n      .attr('width', 0)\n      .attr('x', (d) => x(0))\n      .attr('class', (d) => `bar ${d.side}`)\n      .on('click', onClick(props.onClick))\n      .on('mouseover', onMouseOver({ bins, hover: props.bar.hover, colors, tipContentFn: props.tipContentFn, tipContent, tip, tipContainer }))\n      .on('mousemove', () => tip.fx.move(tipContainer))\n      .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n      .merge(bars)\n      .attr('y', (d: IGroupDataItem, i: number) => {\n        const overlay = (props.groupLayout === EGroupedBarLayout.OVERLAID)\n          ? Math.floor(i / 2) * props.bar.overlayMargin\n          : Number(innerScaleBand(String(d.groupLabel)));\n        return overlay;\n      })\n      .attr('height', (d, i) => getBarWidth(Math.floor(i / 2), props.groupLayout, props.bar, innerScaleBand))\n      .attr('fill', (d, i) => colors(String(d.groupLabel)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', stackedOffset)\n      .attr('width', (d: IGroupDataItem): number => {\n        const w = d.side === 'left' ? -d.value : d.value;\n        return Math.abs(x(w) - x(0));\n      });\n\n    const percents = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const xX = yAxisWidth(axis) + axis.x.style['stroke-width'];\n        return `translate(${xX}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('text')\n      .data((d) => d);\n\n    percents\n      ?.enter()\n      .append<SVGElement>('text')\n      .attr('width', 0)\n      .attr('x', (d) => {\n        const w = d.side === 'left' ? -40 : 40;\n        return x(0) + w;\n      })\n      .attr('class', 'percentage-label')\n      .style('text-anchor', 'middle')\n      .style('font-size', '0.675rem')\n      .merge(percents)\n      .text((d, i) => {\n        return showBinPercentages ? `${d.percent}%` : '';\n      })\n      .attr('y', (d: IGroupDataItem, i: number) => {\n        const h = getBarWidth(0, props.groupLayout, props.bar, innerScaleBand);\n        const offset = h / 2;\n\n        // Ensure that percentage labels don't overlap\n        const verticalOffset = i < 2 ? 0 : 14;\n        return offset + verticalOffset;\n      })\n      .attr('fill', (d, i) => colors(String(d.groupLabel)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', (d) => {\n        const w = d.side === 'left' ? - 20 : 20;\n        const v = d.side === 'left' ? -d.value : d.value;\n        return x(v) + w;\n      })\n      .attr('width', (d: IGroupDataItem): number => {\n        const w = d.side === 'left' ? -d.value : d.value;\n        return Math.abs(x(w) - x(0));\n      });\n\n    percents?.exit().remove();\n\n    bars?.exit().remove();\n    g?.exit().remove();\n\n    const yText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.y.label]);\n\n    yText?.enter().append('text')\n      .attr('class', 'y-axis-label')\n      .merge(yText)\n      .attr('transform',\n        'translate(' + 0 + ' ,' +\n        ((height - yAxisWidth(props.axis) - (margin.left * 2)) + axis.x.margin) + ')')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n\n    const xText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.x.label]);\n\n    xText?.enter().append('text')\n      .attr('class', 'x-axis-label')\n      .merge(xText)\n      .attr('transform', 'rotate(-90)')\n      .attr('y', 0)\n      .attr('x', 0 - (gWidth / 2 - (margin.top * 2)))\n      .attr('dy', '1em')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n  }\n\n  mergeProps(newProps: DeepPartial<ITornadoProps>) {\n    const { props } = this;\n\n    const customerizer = (objValue, srcValue, key, object, source, stack) => {\n      if (['data'].includes(key)) {\n        return srcValue;\n      }\n    }\n    mergeWith(props, newProps, customerizer);\n  }\n\n  /**\n   * Update chart\n   */\n  update(newProps: DeepPartial<ITornadoProps>) {\n    const { props } = this;\n    if (!props.data) {\n      return;\n    }\n    if (!props.data.bins) {\n      return;\n    }\n    this.mergeProps(newProps);\n    const { margin, width, height, className, data, visible } = props;\n    sizeSVG(this.svg, { margin, width, height, className });\n    this.dataSets = [];\n\n    data.counts.forEach((count) => {\n      count.data.forEach((value, genderIndex) => {\n        value.forEach((aValue, rowIndex) => {\n          if (!this.dataSets[rowIndex]) {\n            this.dataSets[rowIndex] = [];\n          }\n          this.dataSets[rowIndex].push({\n            side: genderIndex === 0 ? 'left' : 'right',\n            groupLabel: count.label,\n            colorRef: count.label,\n            label: data.bins[rowIndex],\n            value: visible[data.bins[rowIndex]] !== false && visible[count.label] !== false ? aValue : 0,\n          });\n        })\n\n      });\n    });\n    this.drawAxes();\n    // @TODO add back in,\n    // drawHorizontalGrid<any>({ x, y, gridX, gridY, props, ticks: maxValueCount(data.counts) });\n    this.updateChart(data.bins, this.dataSets);\n  }\n\n  /**\n   * Any necessary clean up\n   */\n  destroy() {\n    this.svg?.selectAll('svg > *').remove();\n  }\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { IGroupDataItem } from './BaseHistogramD3';\nimport {\n  EGroupedBarLayout,\n  IAxes,\n  IChartAdaptor,\n  IChartState,\n  IDomain,\n  IGrid,\n  IHistogramBar,\n  IMargin,\n  IStroke,\n  TipContentFn,\n} from './Histogram';\nimport { TornadoD3 } from './TornadoD3';\nimport { DeepPartial } from './utils/types';\n\nexport interface ITornadoDataSet {\n  borderColors?: string[];\n  colors?: string[];\n  label: string;\n  data: [number[], number[]];\n}\n\nexport interface ITornadoData {\n  bins: string[];\n  counts: ITornadoDataSet[];\n  colorScheme?: string[];\n  title?: string;\n}\n\nexport interface ITornadoProps {\n  axis: IAxes;\n  bar: IHistogramBar;\n  center: boolean;\n  className: string;\n  data: ITornadoData;\n  delay: number;\n  duration: number;\n  colorScheme: string[];\n  domain: IDomain;\n  grid: IGrid;\n  height: number;\n  margin: IMargin;\n  groupLayout: EGroupedBarLayout;\n  onClick?: (bar: IGroupDataItem) => void;\n  showBinPercentages: boolean;\n  splitBins: [string, string];\n  stroke: IStroke;\n  tip: any;\n  tipContainer: string;\n  tipContentFn: TipContentFn<string>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\n/**\n * Tornado component\n */\nclass Tornado extends Component<DeepPartial<ITornadoProps>, IChartState> {\n\n  private chart: IChartAdaptor<ITornadoProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<ITornadoProps>) {\n    super(props);\n    this.chart = new TornadoD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.chart.update(this.getChartState()));\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<ITornadoProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    this.chart.destroy();\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"tornado-chart-container\"></div>);\n  }\n}\n\nexport default Tornado;\n","var noop = {\n  value: function value() {}\n};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || t in _) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function (t) {\n    var name = \"\",\n        i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {\n      type: t,\n      name: name\n    };\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function on(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length; // If no callback was specified, return the callback of the given type and name.\n\n    if (arguments.length < 2) {\n      while (++i < n) {\n        if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      }\n\n      return;\n    } // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n\n\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);else if (callback == null) for (t in _) {\n        _[t] = set(_[t], typename.name, null);\n      }\n    }\n\n    return this;\n  },\n  copy: function copy() {\n    var copy = {},\n        _ = this._;\n\n    for (var t in _) {\n      copy[t] = _[t].slice();\n    }\n\n    return new Dispatch(copy);\n  },\n  call: function call(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) {\n      args[i] = arguments[i + 2];\n    }\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  },\n  apply: function apply(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) {\n      t[i].value.apply(that, args);\n    }\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n\n  if (callback != null) type.push({\n    name: name,\n    value: callback\n  });\n  return type;\n}\n\nexport default dispatch;","import { color } from 'd3-color';\nimport { scaleLinear } from 'd3-scale';\nimport React, {\n  FC,\n  useState,\n} from 'react';\nimport {\n  animated,\n  SpringConfig,\n  useSprings,\n} from 'react-spring';\nimport { Tooltip } from 'react-svg-tooltip';\n\nimport { IBarChartDataSet } from '../../Histogram';\nimport { EChartDirection } from '../../v3/BarChart';\nimport { TTipFunc } from '../ToolTip';\nimport { ExtendedGroupItem } from './Bars';\nimport { buildHistogramSprings } from './histogramHelper';\n\nconst TipContent: TTipFunc = ({ item, bin }) => <>\n  <rect x={12} y={-12} width={150} height={65} rx={3} ry={3} fill='#fff' />\n  <foreignObject x=\"0\" y=\"0\" width=\"160\" height=\"65\">\n    {\n      // @ts-ignore\n      <div xmlns=\"http://www.w3.org/1999/xhtml\" style={{ paddingLeft: '10px', textAlign: 'center', height: '65px' }}>\n        {bin?.[0]} to {bin?.[1]}<br />\n        Count: {item.value}\n      </div>\n    }\n  </foreignObject>\n</>\n\n\ninterface IProps {\n  bins: [number, number][];\n  config?: SpringConfig;\n  colorScheme?: readonly string[],\n  continuousDomain: [number, number];\n  direction?: EChartDirection;\n  domain: [number, number];\n  height: number;\n  hoverColorScheme?: readonly string[];\n  left?: number;\n  stroke?: string;\n  top?: number;\n  tip?: TTipFunc;\n  values: IBarChartDataSet[];\n  visible?: Record<string, boolean>;\n  width: number;\n}\n\nconst HistogramBars: FC<IProps> = ({\n  bins,\n  config = {\n    duration: 250,\n  },\n  colorScheme = ['#a9a9a9', '#2a5379'],\n  continuousDomain,\n  direction = EChartDirection.horizontal,\n  domain,\n  height,\n  hoverColorScheme,\n  left = 0,\n  stroke = \"#FFF\",\n  top = 0,\n  tip,\n  values,\n  visible = {},\n  width,\n}) => {\n  if (width === 0) {\n    return null;\n  }\n\n  if (!hoverColorScheme) {\n    hoverColorScheme = colorScheme.map((c) => color(c)?.brighter(0.1).toString()) as readonly string[];\n  }\n  const dataSets: ExtendedGroupItem[] = [];\n\n  const binLabels = bins.reduce((p, n) => p.concat(Array.isArray(n) ? n : [n]), [] as (number | string)[]);\n\n  values.forEach((count, datasetIndex) => {\n    count.data.forEach((value, i) => {\n      dataSets.push({\n        groupLabel: count.label,\n        datasetIndex,\n        label: String(binLabels[i]),\n        binIndex: i,\n        value: visible[binLabels[i]] !== false && visible[count.label] !== false ? value : 0,\n      });\n    });\n  });\n\n  const numericScale = scaleLinear()\n    .domain(domain)\n    .rangeRound([0, direction === EChartDirection.horizontal ? width : height]);\n\n  // Distribute the bin values across the x axis\n  const continuousScale = scaleLinear()\n    .domain(continuousDomain)\n    .rangeRound([0, direction === EChartDirection.vertical ? width : height]);\n\n  const transform = `(${left}, ${top})`;\n\n  const [hover, setHover] = useState(-1);\n  const springs = useSprings(dataSets.length, buildHistogramSprings({\n    bins,\n    values,\n    height,\n    width,\n    dataSets,\n    continuousScale,\n    numericScale,\n    colorScheme,\n    hoverColorScheme,\n    config,\n    direction,\n  }));\n\n  const ThisTip = tip ?? TipContent;\n  const refs: any[] = [];\n  return (\n    <>\n      <g className=\"bars\"\n        transform={`translate${transform}`}>\n        {\n          springs.map((props: any, i) => {\n            refs[i] = React.createRef<any>();\n            return <animated.rect\n              ref={refs[i]}\n              stroke={stroke}\n              onMouseEnter={() => setHover(i)}\n              onMouseLeave={() => setHover(-1)}\n              key={dataSets[i].groupLabel + dataSets[i].label}\n              height={props.height}\n              fill={hover == i ? props.hoverFill : props.fill}\n              width={props.width}\n              x={props.x as any}\n              y={props.y as any}\n            />\n          })\n        }\n      </g>\n      <g className=\"tips\">\n        {\n          springs.map((_, i) => <Tooltip triggerRef={refs[i]}>\n            <ThisTip item={dataSets[i]} bin={bins[i]} />\n          </Tooltip>)\n        }\n      </g>\n    </>)\n}\n\n\nexport default HistogramBars;\n","import { ScaleLinear } from 'd3-scale';\nimport { SpringConfig } from 'react-spring';\n\nimport { IBarChartDataSet } from '../../Histogram';\nimport { EChartDirection } from '../../v3/BarChart';\nimport { ExtendedGroupItem } from './Bars';\n\ninterface IHistogramSpringProps {\n  bins: [number, number][];\n  values: IBarChartDataSet[];\n  height: number;\n  width: number;\n  dataSets: ExtendedGroupItem[];\n  numericScale: ScaleLinear<any, any>;\n  continuousScale: ScaleLinear<any, any>;\n  colorScheme: readonly string[];\n  hoverColorScheme?: readonly string[];\n  config: SpringConfig,\n  direction: EChartDirection;\n}\n/**\n * Build the from / to spring animation properties to animate the bars.\n */\nexport const buildHistogramSprings = (props: IHistogramSpringProps) => {\n  const { bins, direction, config, height, dataSets, numericScale, continuousScale, colorScheme, hoverColorScheme } = props;\n  const s = dataSets.map((item, index) => {\n    const bandPosition = continuousScale(bins[index][0]);\n    const itemWidth = continuousScale(bins[index][1] - bins[index][0]);\n    const itemHeight = numericScale(item.value);\n\n    if (direction === EChartDirection.horizontal) {\n      return {\n        from: {\n          width: 0,\n          fill: colorScheme[item.datasetIndex],\n          hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n          x: 0,\n          y: height - itemWidth - bandPosition,\n          height: itemWidth,\n        },\n        to: {\n          width: itemHeight,\n          fill: colorScheme[item.datasetIndex],\n          hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n          x: 0,\n          y: height - itemWidth - bandPosition,\n          height: itemWidth,\n        },\n        config,\n      }\n    }\n\n    return {\n      from: {\n        height: 0,\n        fill: colorScheme[item.datasetIndex],\n        hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n        x: bandPosition,\n        y: height,\n        width: itemWidth,\n      },\n      to: {\n        height: itemHeight,\n        fill: colorScheme[item.datasetIndex],\n        hoverFill: hoverColorScheme?.[item.datasetIndex] ?? colorScheme[item.datasetIndex],\n        x: bandPosition,\n        y: height - numericScale(item.value),\n        width: itemWidth,\n      },\n      config,\n    }\n  });\n  return s;\n}\n","import { extent } from 'd3-array';\nimport { schemeSet3 } from 'd3-scale-chromatic';\nimport React, { FC } from 'react';\nimport { SpringConfig } from 'react-spring';\n\nimport HistogramBars from '../components/Bars/HistogramBars';\nimport Base from '../components/Base';\nimport Grid from '../components/Grid';\nimport { TTipFunc } from '../components/ToolTip';\nimport XAxis from '../components/XAxis';\nimport YAxis, {\n  ELabelOrientation,\n  TAxisLabelFormat,\n} from '../components/YAxis';\nimport {\n  IGrid,\n  IHistogramData,\n} from '../Histogram';\nimport { EChartDirection } from './BarChart';\n\nexport interface IHistogramProps {\n  animation?: SpringConfig;\n  axisLabelFormat?: TAxisLabelFormat;\n  colorScheme?: string[];\n  data: IHistogramData;\n  direction?: EChartDirection;\n  grid?: IGrid;\n  height: number;\n  tip?: TTipFunc;\n  visible?: Record<string, boolean>;\n  width: number;\n  xAxisHeight?: number;\n  xAxisLabelOrientation?: ELabelOrientation;\n  yAxisWidth?: number;\n}\n\n/**\n * A Histogram renders continuous data and thus use a ScaleLinear x & y axis \n */\nconst Histogram: FC<IHistogramProps> = ({\n  animation,\n  axisLabelFormat,\n  colorScheme = schemeSet3,\n  data,\n  direction = EChartDirection.vertical,\n  grid,\n  height,\n  tip,\n  visible,\n  width,\n  xAxisHeight,\n  xAxisLabelOrientation = ELabelOrientation.horizontal,\n  yAxisWidth,\n}) => {\n  if (!yAxisWidth) {\n    yAxisWidth = direction === EChartDirection.vertical ? 40 : 100;\n  }\n  if (!xAxisHeight) {\n    xAxisHeight = direction === EChartDirection.vertical ? 100 : 40;\n  }\n\n  if (width === 0) {\n    return null;\n  }\n\n  const bins = data.bins.reduce((p, n) => p.concat(Array.isArray(n) ? n : [n]), [] as number[]);\n  const continuousDomain = extent(bins) as [number, number];\n  const domain = extent([0].concat(data.counts.reduce((p, n) => p.concat(n.data), [] as number[]))) as [number, number];\n  return (\n    <Base\n      width={width + 30} // @TODO work out why without this the bars exceed the chart\n      height={height}>\n\n      {\n        grid && <Grid\n          left={yAxisWidth}\n          height={height - xAxisHeight}\n          svgProps={{ ...grid.x.style }}\n          lines={{\n            vertical: grid.y.ticks,\n            horizontal: grid.x.ticks,\n          }}\n          width={width - yAxisWidth} />\n      }\n\n      <HistogramBars\n        colorScheme={colorScheme}\n        left={yAxisWidth}\n        height={height - xAxisHeight}\n        width={width - yAxisWidth}\n        values={data.counts}\n        config={animation}\n        bins={data.bins}\n        direction={direction}\n        domain={domain}\n        continuousDomain={continuousDomain}\n        tip={tip}\n        visible={visible}\n      />\n\n      <YAxis\n        width={yAxisWidth}\n        height={height - xAxisHeight}\n        labelFormat={axisLabelFormat}\n        scale=\"linear\"\n        domain={direction === EChartDirection.horizontal ? continuousDomain : domain}\n      />\n\n      <XAxis\n        width={width - yAxisWidth}\n        height={xAxisHeight}\n        top={height - xAxisHeight}\n        left={yAxisWidth}\n        labelFormat={axisLabelFormat}\n        labelOrientation={xAxisLabelOrientation}\n        scale=\"linear\"\n        domain={direction === EChartDirection.horizontal ? domain : continuousDomain}\n      />\n\n    </Base>\n  )\n\n}\n\nexport default Histogram;\n","import { interpolate } from 'd3-interpolate';\nimport React, {\n  FC,\n  useLayoutEffect,\n  useRef,\n} from 'react';\nimport {\n  animated,\n  useSpring,\n} from 'react-spring';\n\nimport { IAxes } from '../Histogram';\nimport {\n  IChartPoint,\n  IChartPointValue,\n  ILineProps,\n} from '../LineChart';\nimport { useMakeArea } from '../utils/useMakeLine';\n\ninterface IProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  label?: string;\n  line: ILineProps;\n  width: number;\n  left: number;\n  height: number;\n  axis: IAxes;\n  data: T[];\n}\n\nconst AreaFill: FC<IProps> = (props) => {\n  const { label = '', line } = props;\n  const className = `area-${label.replace(/[^a-z]/gi, '')}`;\n  const { previous, current } = useMakeArea(props);\n\n  const spring = useSpring<any>({\n    from: { t: 0 },\n    to: { t: 1 },\n    reset: true,\n    delay: 0\n  });\n\n  const getInterpolator = () => interpolate(previous, current);\n\n  const interpolator = useRef(getInterpolator());\n  useLayoutEffect(() => {\n    interpolator.current = getInterpolator();\n  });\n\n  return (\n    <>\n      <animated.path\n        className={className}\n        fill={line.fill.fill}\n        d={spring.t.interpolate((t) => interpolator.current(t))}\n      />\n    </>\n  )\n}\n\nexport default AreaFill;\n","import { interpolate } from 'd3-interpolate';\nimport React, {\n  FC,\n  useLayoutEffect,\n  useRef,\n} from 'react';\nimport {\n  animated,\n  useSpring,\n} from 'react-spring';\n\nimport {\n  IProps,\n  useMakeLine,\n} from '../utils/useMakeLine';\n\n// @TODO look at using https://github.com/pbeshai/d3-interpolate-path instead \nconst Line: FC<IProps & { label: string }> = (props) => {\n  const { label = '', line } = props;\n  const className = `line-${label.replace(/[^a-z]/gi, '')}`;\n  const { previous, current } = useMakeLine(props);\n\n  const spring = useSpring<any>({\n    from: { t: 0 },\n    to: { t: 1 },\n    reset: true,\n    delay: 0\n  });\n\n  const getInterpolator = () => interpolate(previous, current);\n\n  const interpolator = useRef(getInterpolator());\n  useLayoutEffect(() => {\n    interpolator.current = getInterpolator();\n  });\n\n  return (\n    <>\n      <animated.path\n        className={className}\n        fill=\"none\"\n        strokeDashoffset={line.strokeDashOffset}\n        strokeDasharray={line.strokeDashArray}\n        stroke={line.stroke}\n        d={spring.t.interpolate((t) => interpolator.current(t))}\n      />\n    </>\n  )\n}\n\nexport default Line;\n","import React, { FC } from 'react';\n\nimport {\n  IProps,\n  useScales,\n} from '../utils/useMakeLine';\n\nconst Points: FC<Omit<IProps, 'line'> & {\n  radius?: number;\n  fill?: string;\n  stroke?: string;\n}> = (props) => {\n  const { data, radius = 5, fill = '#000', stroke = '#000' } = props;\n  const { xScale, yScale } = useScales(props);\n\n  if (yScale === null) {\n    return null;\n  }\n\n  return <>\n    {\n      data.map((d) => {\n        const { x, y, ...rest } = d;\n        const yValue = yScale(y);\n        const xValue = xScale(x);\n        return <circle\n          key={`point-${xValue}-${yValue}`}\n          className={`point-${xValue}-${yValue}`}\n          r={radius}\n          cy={yValue}\n          cx={xValue}\n          fill={fill}\n          stroke={stroke}\n          {...rest}\n        />\n      })\n    }\n  </>\n}\n\nexport default Points;\n","import React, { FC } from 'react';\n\nimport AreaFill from '../components/AreaFill';\nimport Base from '../components/Base';\nimport Grid from '../components/Grid';\nimport Line from '../components/Line';\nimport Points from '../components/Points';\nimport XAxis from '../components/XAxis';\nimport YAxis from '../components/YAxis';\nimport {\n  IAxes,\n  IGrid,\n} from '../Histogram';\nimport {\n  IChartPoint,\n  IChartPointValue,\n  ILineChartDataSet,\n} from '../LineChart';\nimport { useLineDomain } from '../utils/useDomain';\n\ninterface IProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  axis: IAxes;\n  data: ILineChartDataSet<T>[];\n  grid: IGrid;\n  height: number;\n  width: number;\n  xAxisHeight?: number;\n  yAxisWidth?: number;\n}\nconst LineChart: FC<IProps> = ({\n  axis,\n  data,\n  grid,\n  height,\n  width,\n  xAxisHeight = 60,\n  yAxisWidth = 100,\n}) => {\n  const domain = useLineDomain({\n    values: data,\n  });\n  return (\n    <Base\n      width={width}\n      height={height}>\n\n      <Grid\n        left={yAxisWidth}\n        height={height - xAxisHeight}\n        svgProps={{ ...grid.x.style }}\n        lines={{\n          vertical: grid.y.ticks,\n          horizontal: grid.x.ticks,\n        }}\n        width={width - yAxisWidth} />\n      {\n        data.map((item) => <> <Line\n          axis={axis}\n          key={item.label}\n          label={item.label}\n          line={item.line}\n          width={width - yAxisWidth}\n          left={yAxisWidth}\n          height={height - xAxisHeight}\n          data={item.data} />\n          {\n\n            item.point.show &&\n            <Points\n              axis={axis}\n              key={item.label}\n              width={width - yAxisWidth}\n              left={yAxisWidth}\n              height={height - xAxisHeight}\n              radius={item.point.radius}\n              fill={item.point.fill}\n              stroke={item.point.stroke}\n              data={item.data} />\n          }\n\n          {\n            item.line.fill.show && <AreaFill\n              axis={axis}\n              key={item.label}\n              width={width - yAxisWidth}\n              left={yAxisWidth}\n              height={height - xAxisHeight}\n              line={item.line}\n              data={item.data} />\n          }\n        </>)}\n\n      <YAxis\n        width={yAxisWidth}\n        height={height - xAxisHeight}\n        // values={[0, 1000, 2000]}\n        scale=\"linear\"\n        domain={domain}\n      />\n\n      <XAxis\n        width={width - yAxisWidth}\n        height={xAxisHeight}\n        top={height - xAxisHeight}\n        left={yAxisWidth} />\n\n    </Base>\n  )\n}\n\nexport default LineChart;\n","import { extent } from 'd3-array';\nimport {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport { Selection } from 'd3-selection';\nimport {\n  area,\n  curveCatmullRom,\n  CurveFactory,\n  line,\n} from 'd3-shape';\nimport {\n  timeFormat,\n  timeParse,\n} from 'd3-time-format';\nimport cloneDeep from 'lodash/cloneDeep';\nimport mergeWith from 'lodash/mergeWith';\n\nimport attrs from './d3/attrs';\nimport {\n  drawGrid,\n  gridHeight,\n  gridWidth,\n  yAxisWidth as getYAxisWidth,\n} from './grid';\nimport { IChartAdaptor } from './Histogram';\nimport {\n  IChartPoint,\n  ILineChartDataSet,\n  ILineChartProps,\n  ILineProps,\n  ISVGPoint,\n} from './LineChart';\nimport tips, { makeTip } from './tip';\nimport {\n  axis as defaultAxis,\n  grid as defaultGrid,\n  lineStyle,\n} from './utils/defaults';\nimport {\n  rangeAffordance,\n  ticks,\n} from './utils/domain';\nimport { buildScales } from './utils/scales';\nimport {\n  makeGrid,\n  makeScales,\n  makeSvg,\n  sizeSVG,\n  TSelection,\n} from './utils/svg';\nimport { DeepPartial } from './utils/types';\n\nconst ZERO_SUBSTITUTE: number = 1e-6;\n\nexport const lineChartD3 = ((): IChartAdaptor<ILineChartProps> => {\n  let svg: TSelection;\n  let tipContainer: any;\n  let xParseTime: (x: string) => Date | null;\n  let xFormatTime: (v: any) => string;\n  let tipContent: {\n    html: (fn: any) => string,\n  };\n\n  const lineProps: ILineProps = {\n    curveType: curveCatmullRom,\n    fill: {\n      fill: '#eee',\n      show: false,\n    },\n    show: true,\n    stroke: '#005870',\n    strokeDashArray: '5 5',\n    strokeDashOffset: 0,\n  };\n\n  const pointProps: ISVGPoint = {\n    ...lineStyle,\n    fill: 'rgba(255, 255, 255, 0)',\n    radius: 4,\n    show: true,\n    stroke: '#005870',\n  };\n\n  const props: ILineChartProps = {\n    axis: cloneDeep(defaultAxis),\n    className: 'line-chart-d3',\n    data: [],\n    grid: defaultGrid,\n    height: 250,\n    margin: {\n      bottom: 0,\n      left: 5,\n      right: 0,\n      top: 5,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (info, i, d) => {\n      switch (typeof info[i].x) {\n        case 'object': // date\n          return xFormatTime(info[i].x) + ', ' + info[i].y;\n        default:\n          return Number(info[i].x).toFixed(3) + ', ' + info[i].y;\n      }\n    },\n    visible: {},\n    width: 200,\n  };\n\n  const datumProps = {\n    line: lineProps,\n    point: pointProps,\n  };\n\n  const curve = (\n    dataset: ILineChartDataSet<any>,\n    x: (x: number) => number,\n    y: (y: number) => number,\n  ) => line()\n    .curve(dataset.line.curveType)\n    .x((d: any) => x(d.x))\n    .y((d: any) => y(d.y));\n\n  let container: Selection<SVGElement, any, any, any>;\n  let lineContainer: TSelection;\n  let gridX: TSelection;\n  let gridY: TSelection;\n  let xScale: any; // AnyScale;\n  let yScale: any; // AnyScale;\n  let xAxisContainer: TSelection;\n  let yAxisContainer: TSelection;\n  let xAxisLabel: TSelection;\n  let yAxisLabel: TSelection;\n\n  const xOffset = (d: ILineChartDataSet<any>) => {\n    return d.point.show ? d.point.radius / 2 : 0;\n  };\n\n  const LineChartD3 = {\n    /**\n     * Initialization\n     */\n    create(el: Element, newProps: DeepPartial<ILineChartProps> = {}) {\n      this.mergeProps(newProps);\n      svg = makeSvg(el, svg);\n      const { margin, width, height, className } = props;\n      sizeSVG(svg, { margin, width, height, className });\n      const r = makeTip(props.tipContainer, tipContainer);\n      tipContent = r.tipContent;\n      tipContainer = r.tipContainer;\n      [xScale, yScale] = buildScales(props.axis);\n      [xAxisContainer, yAxisContainer, xAxisLabel, yAxisLabel] = makeScales(svg);\n      [gridX, gridY] = makeGrid(svg);\n      const yAxisWidth = getYAxisWidth(props.axis);\n      container = svg\n        .append<SVGElement>('g')\n        .attr('class', 'linechart-container')\n        .attr('transform', `translate(${yAxisWidth}, 0)`)\n\n      lineContainer = container\n        .append<SVGElement>('g')\n        .attr('class', 'line-container');\n      this.update(props);\n    },\n\n    mergeProps(newProps: DeepPartial<ILineChartProps>) {\n      const customerizer = (objValue, srcValue, key, object, source, stack) => {\n        if (key === 'data') {\n          return srcValue;\n        }\n      }\n      mergeWith(props, newProps, customerizer);\n    },\n\n    /**\n     * Iterate over the dataset drawing points for sets marked as\n     * requiring points.\n     */\n    _drawDataPointSet(data: ILineChartProps['data']) {\n      const { tip, tipContentFn } = props;\n\n      const pointContainer = container.selectAll<SVGElement, {}>('g').data(data);\n\n      // Don't ask why but we must reference tipContentFn as props.tipContentFn otherwise\n      // it doesn't update with props changes\n      const onMouseOver = (d: any) => {\n        tipContent.html(() => tipContentFn([d as any], 0, 0, ''));\n        tip.fx.in(tipContainer);\n      };\n      const onMouseMove = () => tip.fx.move(tipContainer);\n      const onMouseOut = () => tip.fx.out(tipContainer);\n\n      const points = pointContainer.enter()\n        .append<SVGElement>('g')\n        .attr('class', (d, i: number) => 'point-container' + i)\n        .merge(pointContainer)\n        .selectAll<SVGElement, {}>('circle')\n        .data((d: ILineChartDataSet<any>) => {\n          return d.data.map((dx) => ({\n            ...dx,\n            point: d.point,\n          }));\n        });\n\n      // UPDATE - Update old elements as needed.\n      points.attr('class', 'update');\n\n      // ENTER + UPDATE\n      // After merging the entered elements with the update selection,\n      // apply operations to both.\n      points.enter().append<SVGElement>('circle')\n        .attr('class', 'enter')\n        .on('mouseover', onMouseOver)\n        .on('mousemove', onMouseMove)\n        .on('mouseout', onMouseOut)\n        .merge(points)\n        .attr('class', 'point')\n        .attr('cy', (d) => yScale(d.y))\n        .attr('r', (d, i: number) => 0)\n        .attr('fill', (d) => d.point.fill)\n        .attr('stroke', (d) => d.point.stroke)\n        .attr('cx', (d) => {\n          return xScale(d.x);\n        })\n        .transition()\n        .duration(400)\n        .attr('r', (d: ILineChartDataSet<any>) => xOffset(d) * 2)\n        .delay(650);\n\n      // EXIT - Remove old elements as needed.\n      pointContainer.exit().remove();\n      points.exit().remove();\n    },\n\n    /**\n     * Draw the chart axes\n     */\n    drawAxes() {\n      const { axis, data } = props;\n      const valuesCount = data.reduce((a: number, b): number => {\n        return b.data.length > a ? b.data.length : a;\n      }, 0)\n      const w = gridWidth(props);\n      const h = gridHeight(props);\n      const ys: any[] = [];\n      const xs: any[] = [];\n\n      const yAxis = axisLeft<number>(yScale);\n      const xAxis = axisBottom<number | string>(xScale);\n\n      ticks({\n        axis: xAxis,\n        valuesCount,\n        axisLength: w,\n        axisConfig: axis.x,\n        scaleBand: xScale,\n        limitByValues: true,\n      });\n\n      ticks({\n        axis: yAxis,\n        valuesCount,\n        axisLength: h,\n        axisConfig: axis.y,\n        scaleBand: yScale,\n        limitByValues: true,\n      });\n\n      const yAxisWidth = getYAxisWidth(axis);\n\n      data.forEach((datum) => {\n        datum.data.forEach((d) => {\n          let parsedY = d.y;\n          let parsedX = d.x;\n          if (axis.y.scale === 'LOG' && d.y === 0) {\n            parsedY = ZERO_SUBSTITUTE;\n          }\n          if (axis.x.scale === 'LOG' && d.x === 0) {\n            parsedX = ZERO_SUBSTITUTE;\n          }\n          ys.push(parsedY);\n          xs.push(parsedX);\n        });\n      });\n      const yDomain = rangeAffordance(extent(ys), axis.y);\n      const xDomain = rangeAffordance(extent(xs), axis.x);\n\n      xScale\n        .domain(xDomain)\n        .rangeRound([0, w]);\n      yScale.domain(yDomain)\n        .range([h, 0]);\n\n      yAxisContainer\n        .attr('transform', `translate(${yAxisWidth}, 0)`)\n        .transition()\n        .call(yAxis);\n\n      xAxisContainer\n        .attr('transform', `translate(${yAxisWidth + axis.y.style['stroke-width']},${h})`)\n        .call(xAxis);\n\n      attrs(svg.selectAll('.y-axis .domain, .y-axis .tick line'), axis.y.style);\n      attrs(svg.selectAll('.y-axis .tick text'), axis.y.text.style as any);\n\n      attrs(svg.selectAll('.x-axis .domain, .x-axis .tick line'), axis.x.style);\n      attrs(svg.selectAll('.x-axis .tick text'), axis.x.text.style as any);\n    },\n\n    /**\n     * Iterate over data and update lines\n     */\n    _drawLines(data: ILineChartDataSet<any>[], oldData: ILineChartDataSet<any>[]) {\n\n      // Remove old lines\n      oldData.forEach((d, i) => {\n        const keep = data.find(((newD) => newD.label === d.label));\n        if (keep === undefined) {\n          const l = d.label.replace(/[^a-z]/gi, '');\n          lineContainer.select(`.line-${l}`)\n            .remove();\n        }\n      })\n\n      // change the line\n      data.forEach((d, i) => {\n        const selector = `line-${d.label.replace(/[^a-z]/gi, '')}`;\n        let selection = lineContainer.select(`.${selector}`)\n        if (selection.empty()) {\n          lineContainer.append('path')\n            .attr('class', selector);\n          selection = lineContainer.select(`.${selector}`)\n        }\n        selection\n          .attr('fill', 'none')\n          .attr('stroke-dashoffset', d.line.strokeDashOffset)\n          .attr('stroke-dasharray', d.line.strokeDashOffset)\n          .attr('stroke', d.line.stroke)\n          .transition()\n          .duration(500)\n          .attr('d', curve(d, xScale, yScale)(d.data as any) as any)\n          .delay(50);\n      });\n    },\n\n    /**\n     * Iterates ove data and updates area fills\n     */\n    drawAreas(data: ILineChartDataSet<any>[], oldData: ILineChartDataSet<any>[]) {\n      const h = gridHeight(props);\n      const thisArea = (dataset: ILineChartDataSet<any>) => area()\n        .curve(dataset.line.curveType as CurveFactory)\n        .x((d: any) => xScale(d.x))\n        .y0((d) => h)\n        .y1((d: any) => yScale(d.y));\n\n      // Remove old lines\n      oldData.forEach((d, i) => {\n        const keep = data.find(((newD) => newD.label === d.label));\n        if (keep === undefined) {\n          const l = d.label.replace(/[^a-z]/gi, '');\n          lineContainer.select(`.fill-${l}`).remove();\n        }\n      })\n\n      // change the line\n      data\n        .forEach((d, i) => {\n          const selector = `fill-${d.label.replace(/[^a-z]/gi, '')}`;\n          let selection = lineContainer.select(`.${selector}`);\n          if (selection.empty()) {\n            lineContainer.append('path')\n              .attr('class', selector);\n            selection = lineContainer.select(`.${selector}`)\n\n          }\n          selection\n            .attr('fill', d.line.fill.fill)\n            .style('opacity', d.line.show && d.line.fill.show ? 1 : 0)\n            .transition()\n            .duration(500)\n            .delay(50)\n            .attr('d', thisArea(d)(d.data) as any);\n        });\n    },\n\n    /**\n     * Get a max count of values in each data set\n     */\n    valuesCount(data: ILineChartProps['data']): number {\n      return data.reduce((a: number, b): number => {\n        return b.data.length > a ? b.data.length : a;\n      }, 0);\n    },\n\n    /**\n     * Update chart\n     */\n    update(newProps: DeepPartial<ILineChartProps>) {\n      if (!newProps.data) {\n        return;\n      }\n      const oldData = [...props.data];\n      this.mergeProps(newProps);\n      const { margin, width, height, className } = props;\n      sizeSVG(svg, { margin, width, height, className });\n      [xScale, yScale] = buildScales(props.axis);\n      let data = [...props.data];\n\n      xParseTime = timeParse(props.axis.x.dateFormat);\n      xFormatTime = timeFormat(props.axis.x.dateFormat);\n      data = data.map((datum) => {\n        if (props.axis.x.scale === 'TIME') {\n          datum.data = datum.data.map((d) => {\n            const newd: IChartPoint<any> = {\n              ...d,\n              x: typeof d.x === 'object'\n                ? d.x\n                : xParseTime(d.x.toString()),\n            };\n            return newd;\n          });\n        }\n        // Assign in default line & point styles\n        return Object.assign({}, datumProps, datum);\n      });\n      this.drawAxes();\n      this._drawLines(data, oldData);\n      this.drawAreas(data, oldData);\n      drawGrid(xScale, yScale, gridX, gridY, props, this.valuesCount(data));\n      this._drawDataPointSet(data);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n  return LineChartD3;\n});\n","import {\n  CurveFactory,\n  CurveFactoryLineOnly,\n} from 'd3-shape';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  IAxes,\n  IChartAdaptor,\n  IGrid,\n  IMargin,\n  ISVGLineStyle,\n  TipContentFn,\n} from './Histogram';\nimport { lineChartD3 } from './lineChartD3';\nimport { DeepPartial } from './utils/types';\n\ninterface IState {\n  parentWidth?: number;\n}\n\nexport type IChartPointValue = number | string | Date | object;\nexport interface IChartPoint<X extends IChartPointValue = Date | number | string, Y extends IChartPointValue = number> {\n  x: X;\n  y: Y;\n}\nexport interface ILineProps {\n  show: boolean;\n  fill: {\n    show: boolean;\n    fill: string;\n  };\n  curveType: CurveFactory | CurveFactoryLineOnly;\n  stroke: string;\n  strokeDashOffset: number;\n  strokeDashArray: string;\n}\n\nexport interface ILineChartDataSet<T> {\n  label: string;\n  point: {\n    radius: number;\n    stroke: string;\n    fill: string;\n    show: boolean;\n  };\n  line: ILineProps;\n  data: T[];\n}\n\nexport interface ISVGPoint extends ISVGLineStyle {\n  radius?: 4;\n  show: boolean;\n}\n\nexport interface ILineChartProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  axis: IAxes;\n  className: string;\n  data: ILineChartDataSet<T>[];\n  grid: IGrid;\n  height: number | string;\n  margin: IMargin;\n  tip: any;\n  tipContainer?: string;\n  tipContentFn: TipContentFn<{ x: string | number, y: string | number }>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\nclass LineChart extends React.Component<DeepPartial<ILineChartProps>, IState> {\n\n  private chart: IChartAdaptor<ILineChartProps>;\n  private ref: HTMLDivElement | null = null;\n\n  constructor(props: DeepPartial<ILineChartProps>) {\n    super(props);\n    this.chart = lineChartD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.chart.update(this.getChartState()));\n\n  }\n\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state. If a histogram has been assigned\n   * to the props, then render this data. Otherwise generate\n   * a random normal dist\n   */\n  public getChartState(): DeepPartial<ILineChartProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  public componentWillUnmount() {\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.destroy();\n  }\n\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  public render(): JSX.Element {\n    return <div ref={(ref) => this.ref = ref} className=\"chart-container\"></div>;\n  }\n}\n\nexport default LineChart;\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  IChartAdaptor,\n  IChartState,\n} from './Histogram';\nimport { scatterPlotD3 } from './ScatterPlotD3';\nimport { DeepPartial } from './utils/types';\n\nexport interface IScatterPlotProps {\n  choices: string[];\n  className: string;\n  data: {\n    keys: string[],\n    values: any[];\n  };\n  delay: number;\n  distModels: string[];\n  duration: number;\n  height: number;\n  legendWidth: number;\n  colorScheme: string[];\n  padding: number;\n  radius: number;\n  split: string;\n  width: string | number;\n}\nclass ScatterPlot extends Component<DeepPartial<IScatterPlotProps>, IChartState> {\n\n  private chart: IChartAdaptor<IScatterPlotProps>;\n  private ref: HTMLDivElement | null = null;\n\n  public static defaultProps = {\n    height: 400,\n    width: '100%',\n  };\n\n  constructor(props: IScatterPlotProps) {\n    super(props);\n    this.chart = scatterPlotD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (el) {\n      const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n      this.setState({\n        parentWidth: width,\n      }, () => this.chart.update(this.getChartState()));\n    }\n  }\n\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.create(el, this.getChartState());\n    const { width } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  private getChartState(): DeepPartial<IScatterPlotProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  public componentWillReceiveProps(props: DeepPartial<IScatterPlotProps>) {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.chart.update(this.getChartState());\n  }\n\n  public componentWillUnmount() {\n    const { width } = this.props;\n    if (typeof width === 'string' && width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    this.chart.destroy();\n  }\n\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  public render() {\n    return <div ref={(ref) => this.ref = ref} className=\"scatterplot-chart-container\"></div>;\n  }\n}\n\nexport default ScatterPlot;\n","import { extent } from 'd3-array';\nimport {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport {\n  scaleLinear,\n  scaleOrdinal,\n} from 'd3-scale';\nimport {\n  select,\n  Selection,\n} from 'd3-selection';\nimport merge from 'lodash/merge';\n\nimport colorScheme from './colors';\nimport { IChartAdaptor } from './Histogram';\nimport { IChartPoint } from './LineChart';\nimport { IScatterPlotProps } from './ScatterPlot';\nimport { DeepPartial } from './utils/types';\n\nexport const scatterPlotD3 = ((): IChartAdaptor<IScatterPlotProps> => {\n  let svg: Selection<any, any, any, any>;\n  const yScale = scaleLinear();\n  const xScale = scaleLinear();\n  const domainByTrait = {};\n  let xAxis;\n  let color;\n  let yAxis;\n\n  const props: IScatterPlotProps = {\n    choices: [],\n    className: 'scatter-plot-d3',\n    colorScheme,\n    data: {\n      keys: [],\n      values: []\n    },\n    delay: 0,\n    distModels: [],\n    duration: 400,\n    height: 300,\n    legendWidth: 100,\n    padding: 20,\n    radius: 4,\n    split: '',\n    width: '100%',\n  };\n\n  const GenerateChart = {\n\n    /**\n     * Initialization\n     */\n    create(el: Element, newProps: DeepPartial<IScatterPlotProps> = props) {\n      merge(props, newProps);\n      this._makeSvg(el, props.data);\n      this.update(newProps);\n    },\n\n    /**\n     * Make the SVG container element\n     * Recreate if it previously existed\n     */\n    _makeSvg(el: Element, data: IScatterPlotProps['data']) {\n      if (svg) {\n        svg.selectAll('svg > *').remove();\n        svg.remove();\n        const childNodes = el.getElementsByTagName('svg');\n        if (childNodes.length > 0) {\n          el.removeChild(childNodes[0]);\n        }\n      }\n      const { width, className, height, legendWidth, padding } = props;\n\n      // Reference to svg element containing chart\n      svg = select(el).append('svg')\n        .attr('class', className)\n        .attr('width', Number(width) + padding + legendWidth)\n        .attr('height', height + padding)\n        .append('g')\n        .attr('transform', 'translate(' + padding + ',' + padding / 2 + ')');\n\n      color = scaleOrdinal(props.colorScheme);\n    },\n\n    /**\n     * Draw the chart scales\n     */\n    _drawScales(data: IScatterPlotProps['data']['keys']) {\n      const { height, padding, width } = props;\n      const xSize = Number(width) / data.length;\n      const ySize = height / data.length;\n      xScale.range([padding / 2, xSize - padding / 2]);\n      yScale.range([height - padding / 2, padding / 2]);\n\n      svg.selectAll('.x.axis')\n        .data(data)\n        .enter().append('g')\n        .attr('class', 'x axis')\n        .attr('transform', (d, i) =>\n          'translate(' + (data.length - i - 1) * xSize + ',0)')\n        .each(function (this: any, d: any) {\n          xScale.domain(domainByTrait[d]);\n          select(this).call(xAxis);\n        });\n\n      svg.selectAll('.y.axis')\n        .data(data)\n        .enter().append('g')\n        .attr('class', 'y axis')\n        .attr('transform', (d: any, i: number) => 'translate(0,' + i * ySize + ')')\n        .each(function (this: any, d: any) {\n          yScale.domain(domainByTrait[d]);\n          select(this).call(yAxis);\n        });\n    },\n\n    /**\n     * Make a legend showing spit choice options\n     */\n    _drawLegend() {\n      const { choices, padding, width, split } = props;\n      if (choices === undefined) {\n        return;\n      }\n      const legend = svg.append('g')\n        .attr('transform', 'translate(' + (Number(width) + padding / 2) +\n          ', ' + (padding + 50) + ')');\n\n      legend.append('g').append('text')\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dy', '.71em')\n        .text((d) => split);\n      legend.selectAll('.legendItem')\n        .data(choices)\n        .enter().append('g')\n        .each(function (this: any, c, i: number) {\n          const cell = select(this);\n          cell.append('rect')\n            .attr('class', 'legendItem')\n            .attr('x', 0)\n            .attr('y', 20 + (i * 15))\n            .attr('fill', color(i))\n            .attr('height', 10)\n            .attr('width', 10);\n\n          cell.append('text')\n            .attr('x', 15)\n            .attr('y', 20 + (i * 15))\n            .attr('dy', '.71em')\n            .text((d) => c);\n        });\n\n      legend.exit().remove();\n    },\n\n    /**\n     * Draw scatter points\n     */\n    _drawPoints(traits, width: number, height: number) {\n      const { data, delay, duration,\n        choices, split, padding, radius } = props;\n      const n = traits.length;\n      const cell = svg.selectAll('.cell')\n        .data(cross(traits, traits))\n        .enter().append('g')\n        .attr('class', 'cell')\n        .attr('transform', (d) => 'translate(' + (n - d.i - 1) * width +\n          ',' + d.j * width + ')')\n        .each(plot);\n\n      // Titles for the diagonal.\n      cell.filter((d) => d.i === d.j).append('text')\n        .attr('x', padding)\n        .attr('y', padding)\n        .attr('dy', '.71em')\n        .text((d) => d.x);\n\n      /**\n       * Plot a point\n       */\n      function plot(this: any, p: IChartPoint) {\n        const plotCell = select(this);\n        let circle: Selection<SVGCircleElement, any, any, any>;\n        xScale.domain(domainByTrait[Number(p.x)]);\n        yScale.domain(domainByTrait[Number(p.y)]);\n\n        plotCell.append<SVGRectElement>('rect')\n          .attr('class', 'frame')\n          .attr('x', padding / 2)\n          .attr('y', padding / 2)\n          .attr('width', width - padding)\n          .attr('height', height - padding);\n\n        circle = plotCell.selectAll('circle')\n          .data(data.values)\n          .enter().append('circle')\n          .attr('r', (d) => radius)\n          .attr('cx', (d) => xScale(d[Number(p.x)]))\n          .attr('cy', (d) => yScale(d[Number(p.y)]))\n          .style('fill', (d) => {\n            if (d[split]) {\n              const i = choices.findIndex((c) => c === d[split]);\n              return color(i);\n            }\n            return '#eeaabb';\n          });\n\n        circle\n          .transition()\n          .duration(duration)\n          .delay(delay)\n          .attr('r', (d) => radius);\n      }\n\n      /**\n       * Create cross array\n       * // @TODO looks like d3 has its own cross function now...\n       */\n      function cross(a, b) {\n        const c: { x: number; i: number; y: number; j: number; }[] = [];\n        const nx = a.length;\n        const m = b.length;\n        let i: number;\n        let j: number;\n        for (i = -1; ++i < nx;) {\n          for (j = -1; ++j < m;) {\n            c.push({ x: a[i], i, y: b[j], j });\n          }\n        }\n        return c;\n      }\n    },\n\n    /**\n     * Update chart\n     */\n    update(newProps: DeepPartial<IScatterPlotProps>) {\n      merge(props, newProps);\n      if (!props.data) {\n        return;\n      }\n      const { data, distModels, height, width } = props;\n      this._drawLegend();\n      const traits = data.keys.filter((k) => distModels.indexOf(k) !== -1);\n      const xSize = Number(width) / traits.length;\n      const ySize = height / traits.length;\n      const n = traits.length;\n\n      traits.forEach((trait) => {\n        domainByTrait[trait] = extent<any>(data.values, (d) => d[trait]);\n      });\n      xAxis = axisBottom(xScale)\n        .ticks(6)\n        .tickSize(xSize * n);\n      yAxis = axisLeft(yScale)\n        .ticks(6)\n        .tickSize(-ySize * n);\n\n      this._drawScales(traits);\n      this._drawPoints(traits, xSize, ySize);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n  return GenerateChart;\n});\n","import {\n  axisBottom,\n  axisLeft,\n} from 'd3-axis';\nimport {\n  scaleBand,\n  scaleLinear,\n  scaleOrdinal,\n} from 'd3-scale';\n\nimport {\n  BaseHistogramD3,\n  IGroupData,\n  IGroupDataItem,\n} from './BaseHistogramD3';\nimport attrs from './d3/attrs';\nimport {\n  gridHeight,\n  gridWidth,\n  xAxisHeight,\n  yAxisWidth,\n} from './grid';\nimport {\n  EGroupedBarLayout,\n  IAxis,\n} from './Histogram';\nimport {\n  getBarWidth,\n  groupedBarsUseSameXAxisValue,\n  groupedPaddingInner,\n  groupedPaddingOuter,\n  paddingInner,\n  paddingOuter,\n} from './utils/bars';\nimport { annotationAxisDefaults } from './utils/defaults';\nimport {\n  appendDomainRange,\n  formatTick,\n  isStacked,\n  maxValueCount,\n  shouldFormatTick,\n  ticks,\n} from './utils/domain';\nimport {\n  onClick,\n  onMouseOut,\n  onMouseOver,\n  onMouseOverAxis,\n} from './utils/mouseOver';\n\nexport class HorizontalHistogramD3 extends BaseHistogramD3 {\n  public x = scaleLinear();\n  public y = scaleBand();\n  public yAnnotations = scaleBand();\n\n  /**\n   * Draw Axes\n   */\n  public drawAxes() {\n    const { props, dataSets, xAxisContainer, svg, innerScaleBand, tipContent,\n      y, x, yAxisContainer, tipContainer, yAnnotationAxisContainer, yAnnotations } = this;\n    const { annotations, annotationTextSize, bar, data, domain, groupLayout, stacked,\n      margin, width, height, axis, tip } = props;\n    const valuesCount = maxValueCount(data.counts);\n    const h = gridHeight(props);\n    const dataLabels = data.counts.map((c) => c.label);\n    const annotationsEnabled = annotations && annotations.length === data.bins.length;\n\n    y.domain(data.bins)\n      .rangeRound([0, h])\n      .paddingInner(paddingInner(bar))\n      .paddingOuter(paddingOuter(bar));\n\n    innerScaleBand\n      .domain(groupedBarsUseSameXAxisValue({ groupLayout, stacked }) ? ['main'] : dataLabels)\n      .rangeRound([0, y.bandwidth()])\n      .paddingInner(groupedPaddingInner(bar))\n      .paddingOuter(groupedPaddingOuter(bar));\n\n    const xAxis = axisBottom<number>(x);\n    const yAxis = axisLeft<string>(y);\n\n    /** Y-Axis (label axis) set up */\n    const axisYAnnotationAllowance: IAxis = {\n      ...axis.y,\n      style: {\n        'fill': 'none',\n        'stroke': 'none',\n        'opacity': 0,\n        'shape-rendering': 'none',\n        'stroke-opacity': 0,\n        'stroke-width': 0,\n        'visible': false,\n      },\n      tickSize: 30,\n      visible: false,\n    };\n\n    ticks({\n      axis: yAxis,\n      axisConfig: annotationsEnabled ? axisYAnnotationAllowance : axis.y,\n      axisLength: h,\n      limitByValues: true,\n      scaleBand: y,\n      valuesCount,\n    });\n    yAxisContainer\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ', ' + margin.top + ' )')\n      .call(yAxis);\n\n    // Add a tooltip to the y axis if a custom method has been sent\n    const colors = scaleOrdinal(props.colorScheme);\n    if (props.axisLabelTipContentFn) {\n      yAxisContainer\n        ?.selectAll('g.tick')\n        .select('text')\n        .on('mouseover', (onMouseOverAxis({\n          ...props.data, colors,\n          tipContentFn: props.axisLabelTipContentFn, tipContent, tip, tipContainer,\n        })))\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', () => tip.fx.out(tipContainer));\n    }\n\n    /** Y-Axis 2 (bottom axis) for annotations if annotations data sent (and match bin length) */\n    if (annotations && annotations.length === data.bins.length) {\n\n      yAxisContainer\n        ?.selectAll('line')\n        .style('opacity', 0);\n\n      yAnnotations.domain(data.bins)\n        .rangeRound([0, h])\n        .paddingInner(paddingInner(bar))\n        .paddingOuter(paddingOuter(bar));\n\n      const annotationAxis = axisLeft<string>(yAnnotations);\n\n      ticks({\n        axis: annotationAxis,\n        axisConfig: annotationAxisDefaults,\n        axisLength: h,\n        limitByValues: true,\n        scaleBand: yAnnotations,\n        valuesCount: annotations.length,\n      });\n      // Override the default axis bin labels with the custom annotations\n      annotationAxis.tickFormat((d, i) => annotations[i].value);\n      yAnnotationAxisContainer\n        ?.attr('transform', 'translate(' + Number(yAxisWidth(axis)) + ', ' + margin.top + ' )')\n        .call(annotationAxis);\n\n      // Style the annotations with their specific color\n      yAnnotationAxisContainer\n        ?.selectAll('g.tick')\n        .select('text')\n        .style('font-size', annotationTextSize ? annotationTextSize : '0.475rem')\n        .style('fill', (d, i) => annotations[i].color);\n\n      // Hide the line for the annotations axis\n      yAnnotationAxisContainer?.call((g) => g.select('.domain').remove());\n\n    }\n\n    /** X-Axis (value axis) set up */\n    appendDomainRange({\n      data: dataSets,\n      domain,\n      range: [0, Number(width) - (margin.top * 2) - axis.y.width],\n      scale: x,\n      stacked: isStacked({ groupLayout, stacked }),\n    });\n\n    const xAxisY = height - xAxisHeight(props.axis) - margin.top;\n    // Format number axis if format prop provided\n    if (shouldFormatTick(axis.x)) {\n      xAxis.tickFormat((v) => {\n        const n = v.toString().replace('-', '');\n        return String(formatTick(axis.x)(n));\n      });\n    }\n    xAxisContainer\n      ?.attr('transform', 'translate(' + yAxisWidth(axis) + ',' +\n        xAxisY + ')')\n      .call(xAxis);\n\n    attrs(svg?.selectAll('.y-axis .domain, .y-axis .tick line'), axis.y.style);\n    attrs(svg?.selectAll('.y-axis .tick text'), axis.y.text.style as any);\n\n    attrs(svg?.selectAll('.x-axis .domain, .x-axis .tick line'), axis.x.style);\n    attrs(svg?.selectAll('.x-axis .tick text'), axis.x.text.style as any);\n  }\n\n  /**\n   * Draw a single data set into the chart\n   */\n  public updateChart(\n    bins: string[],\n    groupData: IGroupData,\n  ) {\n    const { props, innerScaleBand, container, tipContainer, tipContent, yAxisLabel } = this;\n    const { axis, height, margin, delay, duration, tip, groupLayout, showBinPercentages, stacked } = props;\n\n    const stackedOffset = (d: IGroupDataItem, stackIndex: number) => {\n      const thisGroupData = groupData.find((gData) => {\n        return gData.find((dx) => dx.label === d.label) !== undefined;\n      });\n      const oSet = (thisGroupData || [])\n        .filter((_, i) => i < stackIndex)\n        .reduce((prev, next) => prev + next.value, 0);\n      const isItStacked = isStacked({ groupLayout, stacked });\n      const offset = isItStacked && stackIndex > 0\n        ? oSet\n        : 0;\n      return isItStacked ? this.x(offset) : 0;\n    };\n\n    const calculateYPosition = (d: IGroupDataItem, stackIndex: number, offset: number, counts: number): number => {\n      const totalWidth = innerScaleBand.bandwidth();\n      const barWidth = getBarWidth(stackIndex, props.groupLayout, props.bar, innerScaleBand);\n      const overlaidYPos = (totalWidth / 2) - (barWidth / 3) + (stackIndex === 1 ? 1 : 0);\n      const finalYPos = (props.groupLayout === EGroupedBarLayout.OVERLAID || counts === 1)\n        ? overlaidYPos\n        : Number(innerScaleBand(String(d.groupLabel)));\n      return offset ? finalYPos + offset : finalYPos;\n    };\n\n    const colors = scaleOrdinal(props.colorScheme);\n    const gWidth = gridWidth(props);\n\n    const g = container\n      ?.selectAll<SVGElement, {}>('g')\n      .data(groupData);\n\n    const bars = g?.enter()\n      .append<SVGElement>('g')\n      .merge(g)\n      .attr('transform', (d: any[]) => {\n        let yd = this.y(d[0].label);\n        if (yd === undefined) {\n          yd = 0;\n        }\n        const x = yAxisWidth(axis) + axis.x.style['stroke-width'];\n        return `translate(${x}, ${margin.top + yd})`;\n      })\n\n      .selectAll<SVGElement, {}>('rect')\n      .data((d) => d);\n\n    bars\n      ?.enter()\n      .append<SVGElement>('rect')\n      .attr('width', 0)\n      .attr('x', stackedOffset)\n      .attr('class', 'bar')\n      .on('click', onClick(props.onClick))\n      .on('mouseover', onMouseOver({\n        bins,\n        colors,\n        hover: props.bar.hover,\n        tip,\n        tipContainer,\n        tipContent,\n        tipContentFn: props.tipContentFn,\n      }))\n      .on('mousemove', () => tip.fx.move(tipContainer))\n      .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n      .merge(bars)\n      .attr('y', (d: IGroupDataItem, i: number) => calculateYPosition(d, i, 0, props.data.counts.length))\n      .attr('height', (d, i) => getBarWidth(i, props.groupLayout, props.bar, innerScaleBand))\n      .attr('fill', (d, i) => colors(String(i)))\n      .transition()\n      .duration(duration)\n      .delay(delay)\n      .attr('x', stackedOffset)\n      // Hide bar's bottom border\n      .attr('stroke-dasharray',\n        (d: IGroupDataItem, i): string => {\n          const currentHeight = gWidth - (this.x(d.value));\n          const barWidth = getBarWidth(i, props.groupLayout, props.bar, innerScaleBand);\n          return `${barWidth} 0 ${currentHeight} ${barWidth}`;\n        })\n      .attr('width', (d: IGroupDataItem): number => this.x(d.value));\n\n    // We need to show the bar percentage splits if flag enabled\n    if (showBinPercentages) {\n\n      const percents = g?.enter()\n        .append<SVGElement>('g')\n        .merge(g)\n        .attr('transform', (d: any[], index: number) => {\n          let yd = this.y(d[0].label);\n          if (yd === undefined) {\n            yd = 0;\n          }\n          const x = yAxisWidth(axis) + axis.x.style['stroke-width'];\n          return `translate(${x}, ${(margin.top + yd)})`;\n        })\n\n        .selectAll<SVGElement, {}>('text')\n        .data((d) => d);\n\n      percents\n        ?.enter()\n        .append<SVGElement>('text')\n        .attr('width', 0)\n        .attr('x', 0)\n        .attr('y', 0)\n        .attr('dy', 0)\n        .attr('dx', 0)\n        .attr('class', 'percentage-label')\n        .attr('x', stackedOffset)\n        .text((d, i) => {\n          // To show the correct percentage split we need to total all the other values in this count set\n          const total = groupData.reduce((prev, group) => prev + group[i].value, 0);\n          const percentage = d.value === 0 ? 0 : Math.round((d.value / total) * 100);\n          return showBinPercentages[i] ? `${percentage}%` : '';\n        })\n        .data((d) => d)\n        .style('text-anchor', 'middle')\n        .style('font-size', '0.675rem')\n        .attr('fill', (d, i) => colors(String(i)))\n        .merge(percents)\n        .attr('x', (d: IGroupDataItem): number => this.x(d.value) + 12) // 12 added to space the label away from the bar\n        .attr('y', (d: IGroupDataItem, i: number) => {\n          const barWidth = getBarWidth(i, props.groupLayout, props.bar, innerScaleBand);\n          const overlaidOffset = props.bar.overlayMargin;\n          return calculateYPosition(d, i, ((barWidth + overlaidOffset) / 2), props.data.counts.length);\n        });\n      percents?.exit().remove();\n    }\n\n    bars?.exit().remove();\n    g?.exit().remove();\n\n    const yText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.y.label]);\n\n    yText?.enter().append('text')\n      .attr('class', 'y-axis-label')\n      .merge(yText)\n      .attr('transform',\n        'translate(' + (Number(height) / 2) + ' ,' +\n        ((height - yAxisWidth(props.axis) - (margin.left * 2)) + axis.x.margin) + ')')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n\n    const xText = yAxisLabel\n      ?.selectAll<any, any>('text')\n      .data([axis.x.label]);\n\n    xText?.enter().append('text')\n      .attr('class', 'x-axis-label')\n      .merge(xText)\n      .attr('transform', 'rotate(-90)')\n      .attr('y', 0)\n      .attr('x', 0 - (gWidth / 2 - (margin.top * 2)))\n      .attr('dy', '1em')\n      .style('text-anchor', 'middle')\n      .text((d) => d);\n  }\n\n}\n","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  IChartAdaptor,\n  IChartState,\n  IHistogramProps,\n} from './Histogram';\nimport { HorizontalHistogramD3 } from './HorizontalHistogramD3';\nimport { DeepPartial } from './utils/types';\n\n/**\n * Horizontal Histogram component\n */\nclass HorizontalHistogram extends Component<DeepPartial<IHistogramProps>, IChartState> {\n\n  private histogram: IChartAdaptor<IHistogramProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<IHistogramProps>) {\n    super(props);\n    this.histogram = new HorizontalHistogramD3();\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n    this.setState({\n      parentWidth: width,\n    }, () => this.histogram.update(this.getChartState()));\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.histogram.create(el, this.getChartState());\n    if (this.props.width === '100%') {\n      window.addEventListener('resize', (e) => this.handleResize());\n      this.handleResize();\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.histogram.update(this.getChartState());\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<IHistogramProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Props received, update the chart\n   */\n  public componentWillReceiveProps() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    this.histogram.update(this.getChartState());\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    const el = this.getDOMNode();\n    if (!el) {\n      return;\n    }\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    this.histogram.destroy();\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"histogram-chart-container\"></div>);\n  }\n}\n\nexport default HorizontalHistogram;\n","import _toConsumableArray from \"/home/rob/cl-react-graph/docs-src/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/rob/cl-react-graph/docs-src/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _classCallCheck from \"/home/rob/cl-react-graph/docs-src/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport { useState, useRef, useMemo, useEffect } from 'react';\nimport { debounce } from 'debounce';\n\nfunction useMeasure() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    debounce: 0,\n    scroll: false\n  },\n      debounce$1 = _ref.debounce,\n      scroll = _ref.scroll,\n      polyfill = _ref.polyfill;\n\n  var ResizeObserver = polyfill || (typeof window === 'undefined' ? function ResizeObserver() {\n    _classCallCheck(this, ResizeObserver);\n  } : window.ResizeObserver);\n\n  if (!ResizeObserver) {\n    throw new Error('This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills');\n  }\n\n  var _useState = useState({\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n    bottom: 0,\n    right: 0,\n    x: 0,\n    y: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      bounds = _useState2[0],\n      set = _useState2[1]; // keep all state in a ref\n\n\n  var state = useRef({\n    element: null,\n    scrollContainers: null,\n    resizeObserver: null,\n    lastBounds: bounds\n  }); // set actual debounce values early, so effects know if they should react accordingly\n\n  var scrollDebounce = debounce$1 ? typeof debounce$1 === 'number' ? debounce$1 : debounce$1.scroll : null;\n  var resizeDebounce = debounce$1 ? typeof debounce$1 === 'number' ? debounce$1 : debounce$1.resize : null; // memoize handlers, so event-listeners know when they should update\n\n  var _useMemo = useMemo(function () {\n    var callback = function callback() {\n      if (!state.current.element) return;\n\n      var _state$current$elemen = state.current.element.getBoundingClientRect(),\n          left = _state$current$elemen.left,\n          top = _state$current$elemen.top,\n          width = _state$current$elemen.width,\n          height = _state$current$elemen.height,\n          bottom = _state$current$elemen.bottom,\n          right = _state$current$elemen.right,\n          x = _state$current$elemen.x,\n          y = _state$current$elemen.y;\n\n      var size = {\n        left: left,\n        top: top,\n        width: width,\n        height: height,\n        bottom: bottom,\n        right: right,\n        x: x,\n        y: y\n      };\n      Object.freeze(size);\n      if (!areBoundsEqual(state.current.lastBounds, size)) set(state.current.lastBounds = size);\n    };\n\n    return [callback, resizeDebounce ? debounce(callback, resizeDebounce) : callback, scrollDebounce ? debounce(callback, scrollDebounce) : callback];\n  }, [set, scrollDebounce, resizeDebounce]),\n      _useMemo2 = _slicedToArray(_useMemo, 3),\n      forceRefresh = _useMemo2[0],\n      resizeChange = _useMemo2[1],\n      scrollChange = _useMemo2[2]; // cleanup current scroll-listeners / observers\n\n\n  function removeListeners() {\n    if (state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(function (element) {\n        return element.removeEventListener('scroll', scrollChange, true);\n      });\n      state.current.scrollContainers = null;\n    }\n\n    if (state.current.resizeObserver) {\n      state.current.resizeObserver.disconnect();\n      state.current.resizeObserver = null;\n    }\n  } // add scroll-listeners / observers\n\n\n  function addListeners() {\n    if (!state.current.element) return;\n    state.current.resizeObserver = new ResizeObserver(scrollChange);\n    state.current.resizeObserver.observe(state.current.element);\n\n    if (scroll && state.current.scrollContainers) {\n      state.current.scrollContainers.forEach(function (scrollContainer) {\n        return scrollContainer.addEventListener('scroll', scrollChange, {\n          capture: true,\n          passive: true\n        });\n      });\n    }\n  } // the ref we expose to the user\n\n\n  var ref = function ref(node) {\n    if (!node || node === state.current.element) return;\n    removeListeners();\n    state.current.element = node;\n    state.current.scrollContainers = findScrollContainers(node);\n    addListeners();\n  }; // add general event listeners\n\n\n  useOnWindowScroll(scrollChange, Boolean(scroll));\n  useOnWindowResize(resizeChange); // respond to changes that are relevant for the listeners\n\n  useEffect(function () {\n    removeListeners();\n    addListeners();\n  }, [scroll, scrollChange, resizeChange]); // remove all listeners when the components unmounts\n\n  useEffect(function () {\n    return removeListeners;\n  }, []);\n  return [ref, bounds, forceRefresh];\n} // Adds native resize listener to window\n\n\nfunction useOnWindowResize(onWindowResize) {\n  useEffect(function () {\n    var cb = onWindowResize;\n    window.addEventListener('resize', cb);\n    return function () {\n      return void window.removeEventListener('resize', cb);\n    };\n  }, [onWindowResize]);\n}\n\nfunction useOnWindowScroll(onScroll, enabled) {\n  useEffect(function () {\n    if (enabled) {\n      var cb = onScroll;\n      window.addEventListener('scroll', cb, {\n        capture: true,\n        passive: true\n      });\n      return function () {\n        return void window.removeEventListener('scroll', cb, true);\n      };\n    }\n  }, [onScroll, enabled]);\n} // Returns a list of scroll offsets\n\n\nfunction findScrollContainers(element) {\n  var result = [];\n  if (!element || element === document.body) return result;\n\n  var _window$getComputedSt = window.getComputedStyle(element),\n      overflow = _window$getComputedSt.overflow,\n      overflowX = _window$getComputedSt.overflowX,\n      overflowY = _window$getComputedSt.overflowY;\n\n  if ([overflow, overflowX, overflowY].some(function (prop) {\n    return prop === 'auto' || prop === 'scroll';\n  })) result.push(element);\n  return [].concat(result, _toConsumableArray(findScrollContainers(element.parentElement)));\n} // Checks if element boundaries are equal\n\n\nvar keys = ['x', 'y', 'top', 'bottom', 'left', 'right', 'width', 'height'];\n\nvar areBoundsEqual = function areBoundsEqual(a, b) {\n  return keys.every(function (key) {\n    return a[key] === b[key];\n  });\n};\n\nif (typeof module !== 'undefined' && Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(module, 'exports').writable) {\n  module.exports = useMeasure;\n}\n\nexport default useMeasure;","var frame = 0,\n    // is an animation frame pending?\ntimeout = 0,\n    // is a timeout pending?\ninterval = 0,\n    // are any timers active?\npokeDelay = 1000,\n    // how frequently we check for clock skew\ntaskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {\n  setTimeout(f, 17);\n};\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call = this._time = this._next = null;\n}\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function restart(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;else taskHead = this;\n      taskTail = this;\n    }\n\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function stop() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\nexport function timer(callback, delay, time) {\n  var t = new Timer();\n  t.restart(callback, delay, time);\n  return t;\n}\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n\n  ++frame; // Pretend weve set an alarm, if we havent already.\n\n  var t = taskHead,\n      e;\n\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(),\n      delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0,\n      t1 = taskHead,\n      t2,\n      time = Infinity;\n\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}","import { Timer } from \"./timer.js\";\nexport default function (callback, delay, time) {\n  var t = new Timer();\n  delay = delay == null ? 0 : +delay;\n  t.restart(function (elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}","import { dispatch } from \"d3-dispatch\";\nimport { timer, timeout } from \"d3-timer\";\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\nexport default function (node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index,\n    // For context during callback.\n    group: group,\n    // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween; // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time); // If the elapsed delay is less than our first sleep, start immediately.\n\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o; // If the state is not SCHEDULED, then we previously errored on start.\n\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue; // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n\n      if (o.state === STARTED) return timeout(start); // Interrupt the active transition, if any.\n\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      } // Cancel any pre-empted transitions.\n      else if (+i < id) {\n          o.state = ENDED;\n          o.timer.stop();\n          o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n          delete schedules[i];\n        }\n    } // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n\n\n    timeout(function () {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    }); // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n\n    self.state = STARTED; // Initialize the tween, deleting null tween.\n\n    tween = new Array(n = self.tween.length);\n\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    } // Dispatch the end event.\n\n\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n\n    for (var i in schedules) {\n      return;\n    } // eslint-disable-line no-unused-vars\n\n\n    delete node.__transition;\n  }\n}","import { STARTING, ENDING, ENDED } from \"./transition/schedule.js\";\nexport default function (node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n  if (!schedules) return;\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) {\n      empty = false;\n      continue;\n    }\n\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}","import { get, set } from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function () {\n    var schedule = set(this, id),\n        tween = schedule.tween; // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error();\n  return function () {\n    var schedule = set(this, id),\n        tween = schedule.tween; // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n\n      for (var t = {\n        name: name,\n        value: value\n      }, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function (name, value) {\n  var id = this._id;\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n  transition.each(function () {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n  return function (node) {\n    return get(node, id).value[name];\n  };\n}","import { color } from \"d3-color\";\nimport { interpolateNumber, interpolateRgb, interpolateString } from \"d3-interpolate\";\nexport default function (a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber : b instanceof color ? interpolateRgb : (c = color(b)) ? (b = c, interpolateRgb) : interpolateString)(a, b);\n}","import { interpolateTransformSvg as interpolateTransform } from \"d3-interpolate\";\nimport { namespace } from \"d3-selection\";\nimport { tweenValue } from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function () {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function () {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0,\n        value1 = value(this),\n        string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0,\n        value1 = value(this),\n        string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function (name, value) {\n  var fullname = namespace(name),\n      i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\" ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value)) : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname) : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}","import { namespace } from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function (t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function (t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}","import { get, init } from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function () {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function () {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? delayFunction : delayConstant)(id, value)) : get(this.node(), id).delay;\n}","import { get, set } from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function () {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function () {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? durationFunction : durationConstant)(id, value)) : get(this.node(), id).duration;\n}","import { get, set } from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error();\n  return function () {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each(easeConstant(id, value)) : get(this.node(), id).ease;\n}","import { get, set, init } from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function (t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0,\n      on1,\n      sit = start(name) ? init : set;\n  return function () {\n    var schedule = sit(this, id),\n        on = schedule.on; // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n    schedule.on = on1;\n  };\n}\n\nexport default function (name, listener) {\n  var id = this._id;\n  return arguments.length < 2 ? get(this.node(), id).on.on(name) : this.each(onFunction(id, name, listener));\n}","function removeFunction(id) {\n  return function () {\n    var parent = this.parentNode;\n\n    for (var i in this.__transition) {\n      if (+i !== id) return;\n    }\n\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function () {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}","import { selection } from \"d3-selection\";\nvar Selection = selection.prototype.constructor;\nexport default function () {\n  return new Selection(this._groups, this._parents);\n}","import { interpolateTransformCss as interpolateTransform } from \"d3-interpolate\";\nimport { style } from \"d3-selection\";\nimport { set } from \"./schedule.js\";\nimport { tweenValue } from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function () {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = style(this, name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0,\n      on1,\n      listener0,\n      key = \"style.\" + name,\n      event = \"end.\" + key,\n      remove;\n  return function () {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined; // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n    schedule.on = on1;\n  };\n}\n\nexport default function (name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this.styleTween(name, styleNull(name, i)).on(\"end.style.\" + name, styleRemove(name)) : typeof value === \"function\" ? this.styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value))).each(styleMaybeRemove(this._id, name)) : this.styleTween(name, styleConstant(name, i, value), priority).on(\"end.style.\" + name, null);\n}","function styleInterpolate(name, i, priority) {\n  return function (t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}","function textInterpolate(i) {\n  return function (t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  return this.tween(key, textTween(value));\n}","import { selection } from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\nvar id = 0;\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\nexport default function transition(name) {\n  return selection().transition(name);\n}\nexport function newId() {\n  return ++id;\n}\nvar selection_prototype = selection.prototype;\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  end: transition_end\n};","import { selector } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function (select) {\n  var name = this._name,\n      id = this._id;\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}","import { selectorAll } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function (select) {\n  var name = this._name,\n      id = this._id;\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}","import { matcher } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nexport default function (match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}","import { Transition } from \"./index.js\";\nexport default function (transition) {\n  if (transition._id !== this._id) throw new Error();\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}","import { Transition, newId } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function () {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}","import { tweenValue } from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function () {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function () {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function (value) {\n  return this.tween(\"text\", typeof value === \"function\" ? textFunction(tweenValue(this, \"text\", value)) : textConstant(value == null ? \"\" : value + \"\"));\n}","import { set } from \"./schedule.js\";\nexport default function () {\n  var on0,\n      on1,\n      that = this,\n      id = that._id,\n      size = that.size();\n  return new Promise(function (resolve, reject) {\n    var cancel = {\n      value: reject\n    },\n        end = {\n      value: function value() {\n        if (--size === 0) resolve();\n      }\n    };\n    that.each(function () {\n      var schedule = set(this, id),\n          on = schedule.on; // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n\n        on1._.cancel.push(cancel);\n\n        on1._.interrupt.push(cancel);\n\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n  });\n}","import { Transition, newId } from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport { easeCubicInOut } from \"d3-ease\";\nimport { now } from \"d3-timer\";\nvar defaultTiming = {\n  time: null,\n  // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n\n  return timing;\n}\n\nexport default function (name) {\n  var id, timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}","export function cubicIn(t) {\n  return t * t * t;\n}\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}","import { selection } from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;","import interrupt from \"../interrupt.js\";\nexport default function (name) {\n  return this.each(function () {\n    interrupt(this, name);\n  });\n}","import { Transition } from \"./transition/index.js\";\nimport { SCHEDULED } from \"./transition/schedule.js\";\nvar root = [null];\nexport default function (node, name) {\n  var schedules = node.__transition,\n      schedule,\n      i;\n\n  if (schedules) {\n    name = name == null ? null : name + \"\";\n\n    for (i in schedules) {\n      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {\n        return new Transition([[node]], root, name, +i);\n      }\n    }\n  }\n\n  return null;\n}","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}","export default function (d) {\n  return d;\n}","import { path } from \"d3-path\";\nimport constant from \"./constant.js\";\nimport { abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau } from \"./math.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0,\n      y10 = y1 - y0,\n      x32 = x3 - x2,\n      y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n} // Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\n\n\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00; // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function () {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null;\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n    if (!context) context = buffer = path(); // Ensure that the outer radius is always larger than the inner radius.\n\n    if (r1 < r0) r = r1, r1 = r0, r0 = r; // Is it a point?\n\n    if (!(r1 > epsilon)) context.moveTo(0, 0); // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n        context.moveTo(r1 * cos(a0), r1 * sin(a0));\n        context.arc(0, 0, r1, a0, a1, !cw);\n\n        if (r0 > epsilon) {\n          context.moveTo(r0 * cos(a1), r0 * sin(a1));\n          context.arc(0, 0, r0, a1, a0, cw);\n        }\n      } // Or is it a circular or annular sector?\n      else {\n          var a01 = a0,\n              a11 = a1,\n              a00 = a0,\n              a10 = a1,\n              da0 = da,\n              da1 = da,\n              ap = padAngle.apply(this, arguments) / 2,\n              rp = ap > epsilon && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n              rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n              rc0 = rc,\n              rc1 = rc,\n              t0,\n              t1; // Apply padding? Note that since r1  r0, da1  da0.\n\n          if (rp > epsilon) {\n            var p0 = asin(rp / r0 * sin(ap)),\n                p1 = asin(rp / r1 * sin(ap));\n            if ((da0 -= p0 * 2) > epsilon) p0 *= cw ? 1 : -1, a00 += p0, a10 -= p0;else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n            if ((da1 -= p1 * 2) > epsilon) p1 *= cw ? 1 : -1, a01 += p1, a11 -= p1;else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n          }\n\n          var x01 = r1 * cos(a01),\n              y01 = r1 * sin(a01),\n              x10 = r0 * cos(a10),\n              y10 = r0 * sin(a10); // Apply rounded corners?\n\n          if (rc > epsilon) {\n            var x11 = r1 * cos(a11),\n                y11 = r1 * sin(a11),\n                x00 = r0 * cos(a00),\n                y00 = r0 * sin(a00),\n                oc; // Restrict the corner radius according to the sector angle.\n\n            if (da < pi && (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10))) {\n              var ax = x01 - oc[0],\n                  ay = y01 - oc[1],\n                  bx = x11 - oc[0],\n                  by = y11 - oc[1],\n                  kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n                  lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n              rc0 = min(rc, (r0 - lc) / (kc - 1));\n              rc1 = min(rc, (r1 - lc) / (kc + 1));\n            }\n          } // Is the sector collapsed to a line?\n\n\n          if (!(da1 > epsilon)) context.moveTo(x01, y01); // Does the sectors outer ring have rounded corners?\n          else if (rc1 > epsilon) {\n              t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n              t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n              context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01); // Have the corners merged?\n\n              if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw); // Otherwise, draw the two corners and the ring.\n              else {\n                  context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n                  context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n                  context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n                }\n            } // Or is the outer ring just a circular arc?\n            else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw); // Is there no inner ring, and its a circular sector?\n          // Or perhaps its an annular sector collapsed due to padding?\n\n          if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10); // Does the sectors inner ring (or point) have rounded corners?\n          else if (rc0 > epsilon) {\n              t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n              t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n              context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01); // Have the corners merged?\n\n              if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw); // Otherwise, draw the two corners and the ring.\n              else {\n                  context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n                  context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n                  context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n                }\n            } // Or is the inner ring just a circular arc?\n            else context.arc(0, 0, r0, a10, a00, cw);\n        }\n    context.closePath();\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function () {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function (_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function (_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function (_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function (_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function (_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function (_) {\n    return arguments.length ? (context = _ == null ? null : _, arc) : context;\n  };\n\n  return arc;\n}","import 'd3-transition';\n\nimport { interpolate } from 'd3-interpolate';\nimport { scaleOrdinal } from 'd3-scale';\nimport {\n  select,\n  Selection,\n} from 'd3-selection';\nimport {\n  arc,\n  Arc,\n  pie,\n  PieArcDatum,\n} from 'd3-shape';\nimport cloneDeep from 'lodash/cloneDeep';\nimport merge from 'lodash/merge';\n\nimport colorScheme from './colors';\nimport {\n  IBarChartDataSet,\n  IChartAdaptor,\n} from './Histogram';\nimport {\n  IPieChartProps,\n  IPieDataItem,\n} from './PieChart';\nimport tips, { makeTip } from './tip';\nimport { onMouseOut } from './utils/mouseOver';\nimport { DeepPartial } from './utils/types';\n\ninterface IPieDataset {\n  count: number;\n  groupLabel: string;\n  label: string;\n}\n\n\n// Function to calculate pie chart paths from data\nconst thisPie = pie()\n  .sort(null)\n  .value((d: any) => d.count);\n\n\nconst outerRadius = (props, setIndex = 0) => {\n  const { donutWidth = 0, width, height } = props;\n\n  const radius = Math.min(Number(width), height) / 2;\n  return donutWidth === 0\n    ? radius - 10\n    : radius - 10 - (setIndex * (donutWidth + 10));\n};\n\nconst innerRadius = (props, setIndex = 0) => {\n  const { donutWidth = 0, width, height } = props;\n  const radius = Math.min(Number(width), height) / 2;\n  return donutWidth === 0\n    ? 0\n    : radius - 10 - donutWidth - (setIndex * (donutWidth + 10));\n};\n\nconst getArc = (props, i: number) => {\n  return arc()\n    .outerRadius(outerRadius(props, i))\n    .innerRadius(innerRadius(props, i));\n}\n\nexport const pieChartD3 = ((): IChartAdaptor<IPieChartProps> => {\n\n  let tipContainer;\n  let tipContent;\n\n  const props: IPieChartProps = {\n    backgroundColor: '#ddd',\n    className: 'piechart-d3',\n    colorScheme,\n    data: {\n      bins: [],\n      counts: [],\n    },\n    donutWidth: 0,\n    height: 200,\n    hover: {\n      lighten: 0.1,\n    },\n    labels: {\n      display: true,\n      displayFn: (d) => d.value,\n    },\n    margin: {\n      bottom: 0,\n      left: 10,\n      right: 0,\n      top: 10,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (bins: string[], i: number, d: number, groupLabel): string => {\n      return groupLabel + ': ' + bins[i] + '<br />' + d;\n    },\n    visible: {},\n    width: 200,\n  };\n\n  let containers: any[];\n  let svg: Selection<any, any, any, any>;\n  let dataSets: IPieDataset[][];\n  let previousData: any;\n  let storedWidth: number;\n  let storedHeight: number;\n\n  const PieChartD3 = {\n\n    create(el: Element, newProps: DeepPartial<IPieChartProps> = {}) {\n      merge(props, newProps);\n      previousData = props.data.counts.map((set: IBarChartDataSet, setIndex: number) => {\n        return set.data\n          .map((count, i) => ({\n            count,\n            groupLabel: set.label,\n            label: props.data.bins[i],\n          }));\n      });\n      this._makeSvg(el);\n      containers = [];\n      previousData.forEach((dataSet, i) => {\n        this.drawChartBg(i);\n      });\n\n      this.update(props);\n    },\n\n    _makeSvg(el: Element) {\n      if (svg) {\n        svg.selectAll('svg > *').remove();\n        svg.remove();\n        const childNodes = el.getElementsByTagName('svg');\n        if (childNodes.length > 0) {\n          el.removeChild(childNodes[0]);\n        }\n      }\n      const { margin, width, height, className } = props;\n\n      // Reference to svg element containing chart\n      svg = select(el).append('svg')\n        .attr('class', className)\n        .attr('width', width)\n        .attr('height', height)\n        .attr('viewBox', `0 0 ${width} ${height}`)\n        .append('g')\n        .attr('transform',\n          'translate(' + margin.left + ',' + margin.top + ')');\n\n      const r = makeTip(props.tipContainer, tipContainer);\n      tipContent = r.tipContent;\n      tipContainer = r.tipContainer;\n    },\n\n    update(newProps: DeepPartial<IPieChartProps>) {\n      if (!props.data) {\n        return;\n      }\n      merge(props, newProps);\n      if (newProps.data) {\n        props.data = cloneDeep(newProps.data) as IPieChartProps['data'];\n      }\n      if (props.colorScheme) {\n        props.colorScheme = props.colorScheme;\n      }\n      if (!props.data.bins) {\n        return;\n      }\n\n      this.drawCharts();\n    },\n\n    drawCharts() {\n      const { data, visible } = props;\n      dataSets = data.counts.map((set: IBarChartDataSet) => {\n        return set.data\n          .map((count, i) => ({\n            count: visible[data.bins[i]] !== false ? count : 0,\n            groupLabel: set.label,\n            label: data.bins[i],\n          }));\n      });\n\n      dataSets.forEach((dataSet, i) => {\n        const theme = data.counts[i]?.colors ?? props.colorScheme;\n        this.drawChart(dataSet, i, data.bins, theme);\n        this.drawLabels(dataSet, i, data.bins, theme);\n      });\n      previousData = dataSets;\n    },\n\n    drawChartBg(i: number) {\n      const { backgroundColor, width, height } = props;\n      const tau = 2 * Math.PI; // http://tauday.com/tau-manifesto\n      const bgArc = arc()\n        .innerRadius(innerRadius(props, i))\n        .outerRadius(outerRadius(props, i))\n        .startAngle(0)\n        .endAngle(tau);\n      const container = svg\n        .append('g')\n        .attr('class', 'pie-bg');\n      const background = container.append('path')\n        .attr('class', 'pie-background')\n        .style('fill', backgroundColor);\n      background.enter()\n        .attr('transform', 'translate(' + Number(width) / 2 + ',' + height / 2 + ')')\n        .attr('d', bgArc);\n\n      background.merge(background);\n\n      if (!containers[i]) {\n        svg\n          .append('g')\n          .attr('class', 'pie-container')\n\n        svg\n          .append('g')\n          .attr('class', 'pie-labels')\n        containers[i] = svg;\n      }\n    },\n\n    drawChart(data, i: number, bins: string[], theme: string[]) {\n      const { width, height, tip, tipContentFn, hover } = props;\n\n      // Formatted pie chart arcs based on previous current data.\n      // If data has changed length (i.e. swapping the entire dataset) use the new data.\n      const prev = previousData[i].length === data.length\n        ? previousData[i]\n        : data;\n      const arcs = thisPie(prev);\n      const colors = scaleOrdinal(theme);\n      // Set the domain to get consistent colours\n      colors.domain(Array.from(new Array(data.length).keys()).map(s => s.toString()));\n\n      // Stack multiple charts in concentric circles\n      const thisArc = getArc(props, i);\n\n      const path = containers[i].select('.pie-container').selectAll('path')\n        .data(thisPie(data));\n\n      path.enter()\n        .append('path')\n        .attr('transform', (d) => {\n          return 'translate(' + Number(width) / 2 + ',' + height / 2 + ')';\n        })\n        .attr('stroke', '#FFF')\n        .attr('fill', (_, j) => colors(j))\n        .on('mouseover', (d: PieArcDatum<IPieDataItem>, ix: number, nodes: any[]) => {\n          if (hover) {\n            select(nodes[ix])\n              .attr('fill-opacity', 1)\n              .transition('easeIn')\n              .attr('fill-opacity', 0.7);\n          }\n          tipContent.html(() => tipContentFn(bins, ix, d.data.count, d.data.groupLabel));\n          tip.fx.in(tipContainer);\n        })\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n        .attr('d', thisArc)\n        .style('opacity', 0)\n        .transition()\n        .duration(500)\n        .style('opacity', 1);\n\n      // Fade in when adding (merge)\n      path\n        .merge(path)\n        .on('mouseover', (d: PieArcDatum<IPieDataItem>, ix: number, nodes: any[]) => {\n          if (hover) {\n            select(nodes[ix])\n              .attr('fill-opacity', 1)\n              .transition('easeIn')\n              .attr('fill-opacity', 0.7);\n          }\n          tipContent.html(() => tipContentFn(bins, ix, d.data.count, d.data.groupLabel));\n          tip.fx.in(tipContainer);\n        })\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n        .transition()\n        .delay(400)\n        .duration(500)\n        .attrTween('d', arcTween(thisArc));\n\n      path.exit().transition()\n        .attrTween('d', arcTween(thisArc))\n        .duration(500)\n        .style('opacity', 0).remove();\n    },\n\n    drawLabels(data, i: number, bins: string[], theme: string[]) {\n      const { labels, width, height } = props;\n      const thisArc = getArc(props, i);\n      const path2 = containers[i].select('.pie-labels').selectAll('text.label')\n        .data(thisPie(data));\n      path2.enter().append('text')\n        .attr('class', 'label')\n        .each(() => {\n          // Store initial offset incase we change chart heights.\n          storedHeight = height;\n          storedWidth = Number(width);\n        })\n        .style('opacity', 0)\n        .text((d, ix: number) => d.value === 0 ? '' : labels.displayFn(d, ix))\n        .attr('transform', (d) => {\n          const centroid = thisArc.centroid(d);\n          const x = centroid[0] + (storedWidth / 2);\n          const y = centroid[1] + (storedHeight / 2);\n          return 'translate(' + x + ',' + y + ')';\n        })\n        .transition()\n        .duration(500)\n        .style('opacity', (d) => labels.display === false || d.value === 0 ? 0 : 1);\n\n      path2\n        .merge(path2)\n        .transition()\n        .duration(500)\n        .style('opacity', 0)\n        .transition()\n        .attr('transform', (d) => {\n          const centroid = thisArc.centroid(d);\n          const x = centroid[0] + (storedWidth / 2);\n          const y = centroid[1] + (storedHeight / 2);\n          return 'translate(' + x + ',' + y + ')';\n        })\n        .text((d, ix: number) => d.value === 0 ? '' : labels.displayFn(d, ix))\n        .transition()\n        .duration(500)\n        .style('opacity', (d) => {\n          // Only show if the new value is not 0 and labels are set to be displayed\n          return labels.display === false || d.value === 0 ? 0 : 1;\n        });\n\n      path2.exit().transition()\n        .duration(500)\n        .style('opacity', 0);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n\n  return PieChartD3;\n});\n\n// Returns a tween for a transitions \"d\" attribute, transitioning any selected\n// arcs from their current angle to the specified new angle.\nfunction arcTween(this: any, thisArc: Arc<any, any>) {\n  return function (this: any, d) {\n    const i = interpolate(this._current, d);\n    this._current = i(0);\n    return function (this: any, t) {\n      return thisArc(i(t));\n    };\n  };\n}\n","import constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport { tau } from \"./math.js\";\nexport default function () {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    } // Optionally sort the arcs by previously-computed values or by data.\n\n\n    if (sortValues != null) index.sort(function (i, j) {\n      return sortValues(arcs[i], arcs[j]);\n    });else if (sort != null) index.sort(function (i, j) {\n      return sort(data[i], data[j]);\n    }); // Compute the arcs! They are stored in the original data's order.\n\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function (_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function (_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function (_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function (_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  EColorManipulations,\n  IBarChartDataSet,\n  IChartAdaptor,\n  IChartState,\n  IMargin,\n  TipContentFn,\n} from './Histogram';\nimport { pieChartD3 } from './PieChartD3';\nimport { DeepPartial } from './utils/types';\n\ninterface ILabels {\n  display: boolean;\n  displayFn: (d: any, ix: number) => string | number;\n}\n\nexport interface IPieDataItem {\n  count: number;\n  groupLabel: string;\n  label: string;\n}\n\nexport interface IPieChartProps {\n  data: {\n    bins: string[],\n    counts: IBarChartDataSet[];\n  };\n  backgroundColor: string;\n  className: string;\n  colorScheme: string[];\n  donutWidth: number;\n  height: number;\n  hover?: Partial<Record<EColorManipulations, number>>,\n  labels: ILabels;\n  margin: IMargin;\n  tip: any;\n  tipContainer: string;\n  tipContentFn: TipContentFn<string>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\n/**\n * PieChart component\n */\nclass PieChart extends Component<DeepPartial<IPieChartProps>, IChartState> {\n\n  private chart: IChartAdaptor<IPieChartProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<IPieChartProps>) {\n    super(props);\n    this.chart = pieChartD3();\n\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (el) {\n      const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n      this.setState({\n        parentWidth: width,\n      }, () => this.chart.update(this.getChartState()));\n    }\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.create(el, this.getChartState());\n      if (this.props.width === '100%') {\n        window.addEventListener('resize', (e) => this.handleResize());\n        this.handleResize();\n      }\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.update(this.getChartState());\n    }\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<IPieChartProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.destroy();\n    }\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"piechart-chart-container\"></div>);\n  }\n}\n\nexport default PieChart;\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path();\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function moveTo(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function lineTo(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function quadraticCurveTo(x1, y1, x, y) {\n    this._ += \"Q\" + +x1 + \",\" + +y1 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + +x1 + \",\" + +y1 + \",\" + +x2 + \",\" + +y2 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x1,y1).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    } // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon)) ; // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n      // Equivalently, is (x1,y1) coincident with (x2,y2)?\n      // Or, is the radius zero? Line to (x1,y1).\n      else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n          this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n        } // Otherwise, draw an arc!\n        else {\n            var x20 = x2 - x0,\n                y20 = y2 - y0,\n                l21_2 = x21 * x21 + y21 * y21,\n                l20_2 = x20 * x20 + y20 * y20,\n                l21 = Math.sqrt(l21_2),\n                l01 = Math.sqrt(l01_2),\n                l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n                t01 = l / l01,\n                t21 = l / l21; // If the start tangent is not coincident with (x0,y0), line to.\n\n            if (Math.abs(t01 - 1) > epsilon) {\n              this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n            }\n\n            this._ += \"A\" + r + \",\" + r + \",0,0,\" + +(y01 * x20 > x01 * y20) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n          }\n  },\n  arc: function arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0; // Is the radius negative? Error.\n\n    if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x0,y0).\n\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    } // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n        this._ += \"L\" + x0 + \",\" + y0;\n      } // Is this arc empty? Were done.\n\n\n    if (!r) return; // Does the angle go the wrong way? Flip the direction.\n\n    if (da < 0) da = da % tau + tau; // Is this a complete circle? Draw two arcs to complete the circle.\n\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    } // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n        this._ += \"A\" + r + \",\" + r + \",0,\" + +(da >= pi) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n      }\n  },\n  rect: function rect(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + +w + \"v\" + +h + \"h\" + -w + \"Z\";\n  },\n  toString: function toString() {\n    return this._;\n  }\n};\nexport default path;","import { select } from 'd3-selection';\n\nexport type TOutputType = 'png' | 'blob';\nexport interface IWatermark {\n  svg: string;\n  width: number;\n  height: number;\n}\n// Method to combine an svg specified by id with the InfoSum watermark and \n// produce a blob or png output that can be used for download\nexport const outputSvg = (\n  svgId: string,\n  width: number,\n  height: number,\n  callback: (outpuData: string | Blob | null) => void,\n  watermark: IWatermark,\n  type: TOutputType = 'blob',\n) => {\n  // Select the first svg element\n  const svg: any = select(`svg#${svgId}`);\n  const serializer = new XMLSerializer();\n  // generate IMG in new tab\n  const svgStr = serializer.serializeToString(svg.node());\n  const svgData = 'data:image/svg+xml;base64,' + window.btoa(unescape(encodeURIComponent(svgStr)));\n  // create canvas in memory(not in DOM)\n  const canvas = document.createElement('canvas');\n  // set canvas size\n  canvas.width = width + 20 + watermark.width;\n  canvas.height = height + 20;\n  // get canvas context for drawing on canvas\n  const context = canvas.getContext('2d');\n  // create images in memory(not DOM)\n  var image = new Image();\n  const watermarkImage = new Image();\n  // when watermark loaded create main image\n  watermarkImage.onload = () => {\n    // later when image loads run this\n    image.onload = () => {\n      // clear canvas\n      context!.clearRect(0, 0, canvas.width, canvas.height);\n      // draw image with SVG data to canvas\n      context!.drawImage(image, 10, 10, width, height);\n      context!.drawImage(watermarkImage, canvas.width - watermark.width - 10, 10, watermark.width, watermark.height);\n      // add a background\n      context!.globalCompositeOperation = 'destination-over'\n      context!.fillStyle = \"#FFF\";\n      context!.fillRect(0, 0, canvas.width, canvas.height);\n      // snapshot canvas as png or blob depending on type\n      if (type === 'blob') {\n        canvas.toBlob(callback);\n      } else if (type === 'png') {\n        const pngData = canvas.toDataURL('image/png');\n        callback(pngData);\n      }\n    };\n    // start loading SVG data into in memory image\n    image.src = svgData;\n  }\n  // start loading watermark SVG data into memory\n  watermarkImage.src = watermark.svg;\n};\n","export default function (x) {\n  return function constant() {\n    return x;\n  };\n}","import { scaleOrdinal } from 'd3-scale';\nimport React, { FC } from 'react';\n\nimport colorScheme from './colors';\nimport { IBarChartDataSet } from './Histogram';\n\ninterface IProps {\n  className?: string;\n  theme?: string[];\n  data: {\n    bins: string[],\n    counts: IBarChartDataSet[];\n  };\n  onSelect: (label: string) => void;\n  visible: { [key: string]: boolean };\n}\n\nconst legendIconStyle = {\n  cursor: 'pointer',\n  display: 'inline-block',\n  height: '1rem',\n  margin: '0.25rem 0.5rem',\n  width: '1rem',\n};\n\nconst listStyle = {\n  listStyle: 'none',\n  padding: 0,\n  margin: 0,\n};\n\nconst liStyle = {\n  display: 'flex',\n  alignItems: 'center',\n}\n\nconst Legend: FC<IProps> = ({\n  className,\n  theme = colorScheme,\n  data,\n  onSelect,\n  visible,\n}) => {\n  const scheme: any = scaleOrdinal(theme);\n  const labels = data.bins;\n  return (\n    <div className={className}>\n      <ul style={listStyle}>\n        {\n          labels.map((label) => {\n            const active = (visible.hasOwnProperty(label) && visible[label]) || !visible.hasOwnProperty(label);\n            return (\n              <li key={label}\n                style={liStyle}>\n                <div style={{\n                  ...legendIconStyle,\n                  backgroundColor: active ? scheme(label) : '#FFF',\n                  border: '2px solid ' + scheme(label),\n                }}\n                  onClick={() => onSelect(label)}>\n                </div>\n                <div>\n                  {label}\n                </div>\n              </li>\n            );\n          })\n        }\n      </ul>\n    </div>\n  );\n};\n\nexport default Legend;\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate) {\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  }\n\n  ;\n\n  var debounced = function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function () {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  debounced.flush = function () {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n}\n\n; // Adds compatibility for ES modules\n\ndebounce.debounce = debounce;\nmodule.exports = debounce;"],"sourceRoot":""}