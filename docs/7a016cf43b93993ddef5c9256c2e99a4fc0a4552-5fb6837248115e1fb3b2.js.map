{"version":3,"sources":["webpack:///../node_modules/lodash/_copySymbols.js","webpack:///../node_modules/lodash/_baseClone.js","webpack:///../node_modules/lodash/_arrayFilter.js","webpack:///../node_modules/lodash/_getAllKeys.js","webpack:///../node_modules/lodash/_initCloneArray.js","webpack:///../node_modules/lodash/_cloneDataView.js","webpack:///../node_modules/lodash/_baseGetAllKeys.js","webpack:///../node_modules/lodash/_cloneRegExp.js","webpack:///../node_modules/lodash/_baseAssignIn.js","webpack:///../node_modules/lodash/_getSymbolsIn.js","webpack:///../node_modules/lodash/isMap.js","webpack:///../node_modules/lodash/_copySymbolsIn.js","webpack:///../node_modules/lodash/_baseIsMap.js","webpack:///../node_modules/lodash/isSet.js","webpack:///../node_modules/lodash/stubArray.js","webpack:///../src/JoyPlot.tsx","webpack:///../src/utils/useJoyPlot.ts","webpack:///../node_modules/lodash/_cloneSymbol.js","webpack:///../node_modules/lodash/_baseKeys.js","webpack:///../node_modules/lodash/_nativeKeys.js","webpack:///../src/Tornado.tsx","webpack:///../src/UpsetChart.tsx","webpack:///../node_modules/lodash/_DataView.js","webpack:///../src/ScatterPlot.tsx","webpack:///../node_modules/lodash/_arrayEach.js","webpack:///../node_modules/d3-timer/src/timer.js","webpack:///../node_modules/d3-timer/src/timeout.js","webpack:///../node_modules/d3-transition/src/transition/schedule.js","webpack:///../node_modules/d3-transition/src/interrupt.js","webpack:///../node_modules/d3-transition/src/transition/tween.js","webpack:///../node_modules/d3-transition/src/transition/interpolate.js","webpack:///../node_modules/d3-transition/src/transition/attr.js","webpack:///../node_modules/d3-transition/src/transition/attrTween.js","webpack:///../node_modules/d3-transition/src/transition/delay.js","webpack:///../node_modules/d3-transition/src/transition/duration.js","webpack:///../node_modules/d3-transition/src/transition/ease.js","webpack:///../node_modules/d3-transition/src/transition/on.js","webpack:///../node_modules/d3-transition/src/transition/remove.js","webpack:///../node_modules/d3-transition/src/transition/selection.js","webpack:///../node_modules/d3-transition/src/transition/style.js","webpack:///../node_modules/d3-transition/src/transition/styleTween.js","webpack:///../node_modules/d3-transition/src/transition/textTween.js","webpack:///../node_modules/d3-transition/src/transition/index.js","webpack:///../node_modules/d3-transition/src/transition/select.js","webpack:///../node_modules/d3-transition/src/transition/selectAll.js","webpack:///../node_modules/d3-transition/src/transition/filter.js","webpack:///../node_modules/d3-transition/src/transition/merge.js","webpack:///../node_modules/d3-transition/src/transition/transition.js","webpack:///../node_modules/d3-transition/src/transition/text.js","webpack:///../node_modules/d3-transition/src/transition/end.js","webpack:///../node_modules/d3-transition/src/selection/transition.js","webpack:///../node_modules/d3-ease/src/cubic.js","webpack:///../node_modules/d3-transition/src/selection/index.js","webpack:///../node_modules/d3-transition/src/selection/interrupt.js","webpack:///../node_modules/d3-transition/src/active.js","webpack:///../node_modules/d3-shape/src/descending.js","webpack:///../node_modules/d3-shape/src/identity.js","webpack:///../src/tip.ts","webpack:///../src/utils/mouseOver.ts","webpack:///../src/legacy/PieChartD3.ts","webpack:///../node_modules/d3-shape/src/pie.js","webpack:///../src/legacy/PieChart.tsx","webpack:///../node_modules/lodash/_Set.js","webpack:///../node_modules/lodash/_WeakMap.js","webpack:///../node_modules/lodash/_arrayPush.js","webpack:///../node_modules/lodash/keys.js","webpack:///../node_modules/lodash/_initCloneByTag.js","webpack:///../src/colors/index.js","webpack:///../node_modules/lodash/_Promise.js","webpack:///../node_modules/lodash/_getTag.js","webpack:///../src/Legend.tsx","webpack:///../node_modules/lodash/_getSymbols.js","webpack:///../node_modules/lodash/_baseAssign.js","webpack:///../node_modules/lodash/cloneDeep.js","webpack:///../node_modules/lodash/_getAllKeysIn.js","webpack:///../node_modules/lodash/_baseIsSet.js"],"names":["copyObject","getSymbols","module","exports","source","object","Stack","arrayEach","assignValue","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn","getTag","initCloneArray","initCloneByTag","initCloneObject","isArray","isBuffer","isMap","isObject","isSet","keys","keysIn","cloneableTags","baseClone","value","bitmask","customizer","key","stack","result","isDeep","isFlat","isFull","undefined","isArr","tag","isFunc","stacked","get","set","forEach","subValue","add","props","array","predicate","index","length","resIndex","baseGetAllKeys","hasOwnProperty","Object","prototype","constructor","call","input","cloneArrayBuffer","dataView","buffer","byteOffset","byteLength","arrayPush","keysFunc","symbolsFunc","reFlags","regexp","exec","lastIndex","getPrototype","stubArray","getSymbolsIn","getOwnPropertySymbols","baseIsMap","baseUnary","nodeUtil","nodeIsMap","isObjectLike","baseIsSet","nodeIsSet","JoyPlot","axisLabelFormat","colorScheme","data","direction","EChartDirection","VERTICAL","height","tip","width","xAxisHeight","padding","defaultPadding","yAxisWidth","titleHeight","titleLayout","ELabelOrientation","HORIZONTAL","clampToZero","chartHeight","useState","bins","setBins","domain","setDomain","values","setValues","useEffect","allBins","reduce","p","n","Array","from","Set","allValues","map","d","counts","count","fill","c","countIndex","allBinIndex","findIndex","b","eachValue","prev","next","push","e","extent","useJoyPlot","plotHeight","Base","i","top","xWidth","Number","title","transform","defaultTickFormat","stroke","fontSize","fontWeight","String","YAxis","scale","labelFormat","path","opacity","labelOrientation","tickFormat","XAxis","left","Bars","groupLayout","EGroupedBarLayout","STACKED","Symbol","symbolProto","symbolValueOf","valueOf","symbol","isPrototype","nativeKeys","overArg","Tornado","schemeSet3","id","GROUPED","splitBins","visible","splitAxisHeight","chartPadding","showBinPercentages","calculateDomain","baseProps","dataSets","genderIndex","aValue","rowIndex","side","groupLabel","label","colorRef","reverse","right","barWidth","barHeight","inverse","showLabels","tickSize","center","leftValues","concat","rightValues","applyDomainAffordance","Math","max","ActiveCircles","radius","colors","active","inactive","setBandScale","union","yPoints","bin","bandwidth","labels","join","bandScale","scaleBand","rangeRound","paddingInner","paddingOuter","align","x","includes","bounds","x1","y1","x2","y2","cy","cx","r","DistributionBars","LabelComponent","axisSpace","useMemo","useHistogramDomain","SetSizeBars","axisWidth","textFill","empty","className","textAnchor","y","iterables","iterable","item","UpsetChart","setSize","dimensions","chartWidth","distribution","description","h","style","border","DataView","getNative","ScatterPlot","axis","grid","PointComponent","useScatterDomain","svgProps","lines","vertical","ticks","horizontal","replace","point","show","showTitle","floor","iteratee","taskHead","taskTail","timeout","interval","clockLast","clockNow","clockSkew","clock","performance","now","Date","setFrame","window","requestAnimationFrame","bind","f","setTimeout","clearNow","Timer","this","_call","_time","_next","timer","callback","delay","time","t","restart","wake","timerFlush","t0","t2","t1","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","TypeError","stop","elapsed","emptyOn","emptyTween","schedules","node","__transition","self","tween","start","j","o","state","name","on","__data__","group","tick","duration","ease","timing","init","schedule","Error","tweenRemove","tween0","tween1","slice","splice","tweenFunction","tweenValue","transition","_id","each","apply","arguments","color","a","attrRemove","removeAttribute","attrRemoveNS","fullname","removeAttributeNS","space","local","attrConstant","interpolate","value1","string00","interpolate0","string1","string0","getAttribute","attrConstantNS","getAttributeNS","attrFunction","string10","attrFunctionNS","attrInterpolate","setAttribute","attrInterpolateNS","setAttributeNS","attrTweenNS","i0","_value","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","listener","on0","on1","sit","trim","split","every","indexOf","copy","Selection","selection","styleRemove","removeProperty","styleInterpolate","priority","setProperty","styleTween","textInterpolate","textContent","textTween","Transition","groups","parents","_groups","_parents","_name","newId","selection_prototype","select","m","subgroups","subnode","subgroup","selectAll","selectorAll","child","children","inherit","k","l","filter","match","matcher","merge","groups0","groups1","m0","m1","min","merges","group0","group1","id0","id1","nodes","size","attr","namespace","styleNull","styleFunction","listener0","remove","event","styleMaybeRemove","styleConstant","text","textFunction","textConstant","parent","parentNode","removeChild","end","that","Promise","resolve","reject","cancel","_","interrupt","defaultTiming","NaN","fx","in","container","pageX","pageY","move","out","onMouseOut","tipContainer","thisPie","identity","sortValues","descending","sort","startAngle","constant","endAngle","padAngle","pie","a1","v","sum","arcs","a0","da","abs","pa","outerRadius","setIndex","donutWidth","innerRadius","getArc","arc","pieChartD3","tipContent","containers","svg","previousData","storedWidth","storedHeight","backgroundColor","hover","lighten","display","displayFn","margin","bottom","tips","tipContentFn","create","el","newProps","_makeSvg","dataSet","drawChartBg","update","childNodes","getElementsByTagName","append","selector","makeTip","cloneDeep","drawCharts","theme","drawChart","drawLabels","tau","PI","bgArc","background","enter","scaleOrdinal","s","toString","thisArc","ix","html","arcTween","exit","path2","centroid","destroy","_current","PieChart","ref","chart","parentWidth","handleResize","getDOMNode","offsetWidth","setState","getChartState","componentDidMount","addEventListener","componentDidUpdate","rest","componentWillUnmount","removeEventListener","ReactDOM","findDOMNode","Text","render","Component","WeakMap","offset","arrayLikeKeys","baseKeys","isArrayLike","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","Ctor","Map","baseGetTag","toSource","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","ArrayBuffer","ctorString","legendIconStyle","cursor","listStyle","liStyle","alignItems","Legend","onSelect","scheme","onClick","arrayFilter","propertyIsEnumerable","nativeGetSymbols","CLONE_DEEP_FLAG"],"mappings":"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","file":"7a016cf43b93993ddef5c9256c2e99a4fc0a4552-5fb6837248115e1fb3b2.js","sourcesContent":["var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","import React, { FC } from 'react';\n\nimport { EChartDirection } from './BarChart';\nimport Bars, { defaultPadding } from './components/Bars/Bars';\nimport Base from './components/Base';\nimport { TTipFunc } from './components/ToolTip';\nimport XAxis from './components/XAxis';\nimport YAxis, {\n  defaultTickFormat,\n  ELabelOrientation,\n  TAxisLabelFormat,\n} from './components/YAxis';\nimport {\n  EGroupedBarLayout,\n  IBarChartData,\n  IHistogramBar,\n} from './Histogram';\nimport { useJoyPlot } from './utils/useJoyPlot';\n\nexport interface IProps {\n  axisLabelFormat?: TAxisLabelFormat;\n  colorScheme?: string[];\n  data: IBarChartData[];\n  direction?: EChartDirection;\n  height: number;\n  padding?: IHistogramBar;\n  tip?: TTipFunc;\n  width: number;\n  xAxisHeight?: number;\n  yAxisWidth?: number;\n  titleHeight?: number;\n  titleLayout?: ELabelOrientation;\n}\n\n/**\n * JoyPlot component\n */\nconst JoyPlot: FC<IProps> = ({\n  axisLabelFormat,\n  colorScheme,\n  data,\n  direction = EChartDirection.VERTICAL,\n  height,\n  tip,\n  width,\n  xAxisHeight,\n  padding = defaultPadding,\n  yAxisWidth,\n  titleHeight = 40,\n  titleLayout = ELabelOrientation.HORIZONTAL,\n}) => {\n  const {\n    chartHeight,\n    bins,\n    domain,\n    values\n  } = useJoyPlot({\n    data,\n    height,\n  })\n  if (!yAxisWidth) {\n    yAxisWidth = direction === EChartDirection.VERTICAL ? 40 : 100;\n  }\n  if (!xAxisHeight) {\n    xAxisHeight = direction === EChartDirection.VERTICAL ? 100 : 40;\n  }\n\n  const plotHeight = titleLayout === ELabelOrientation.HORIZONTAL\n    ? chartHeight - xAxisHeight - titleHeight\n    : chartHeight - xAxisHeight;\n\n\n  return (\n    <Base\n      width={width}\n      height={height}>\n\n      {\n        values.map((d, i) => {\n          const top = titleLayout === ELabelOrientation.HORIZONTAL\n            ? (chartHeight * i) + titleHeight\n            : (chartHeight * i);\n          const xWidth = width - Number(yAxisWidth);\n          return (<g key={`plot-${d.title}`}>\n            {\n              titleLayout === ELabelOrientation.HORIZONTAL\n                ? <g\n                  transform={`translate(${yAxisWidth}, ${(chartHeight * i) + (titleHeight / 2)})`}\n                  height={titleHeight}\n                  width={xWidth}\n                ><text\n                  fill={defaultTickFormat.stroke}\n                  fontSize=\"12px\"\n                  fontWeight=\"bold\"\n                  width={xWidth}\n\n                >{String(d.title)}\n                  </text>\n                </g>\n                :\n                <YAxis\n                  width={0}\n                  height={plotHeight}\n                  scale=\"band\"\n                  top={chartHeight * i}\n                  labelFormat={axisLabelFormat}\n                  path={{\n                    opacity: 0,\n                  }}\n                  labelOrientation={ELabelOrientation.VERTICAL}\n                  tickFormat={{\n                    fontSize: '12px',\n                    stroke: '#333',\n                  }}\n                  values={[String(d.title)]}\n                />\n            }\n            <YAxis\n              width={Number(yAxisWidth)}\n              labelFormat={axisLabelFormat}\n              height={plotHeight}\n              top={top}\n              domain={domain}\n            />\n            <XAxis\n              width={xWidth}\n              height={Number(xAxisHeight)}\n              top={((chartHeight) * (i + 1)) - Number(xAxisHeight)}\n              left={yAxisWidth}\n              labelFormat={axisLabelFormat}\n              padding={padding}\n              values={bins} />\n\n            <Bars\n              left={yAxisWidth}\n              height={plotHeight}\n              colorScheme={colorScheme}\n              groupLayout={EGroupedBarLayout.STACKED}\n              values={values[i].counts}\n              bins={bins}\n              top={top}\n              domain={domain}\n              padding={padding}\n              direction={direction}\n              tip={tip}\n              width={xWidth}\n            />\n          </g>);\n        })}\n    </Base>\n  )\n}\nexport default JoyPlot;\n","import { extent } from 'd3-array';\nimport {\n  useEffect,\n  useState,\n} from 'react';\n\nimport { IBarChartData } from '../Histogram';\n\nexport const useJoyPlot = ({\n  data,\n  height,\n  clampToZero = true,\n}: {\n  data: IBarChartData[];\n  height: number;\n  clampToZero?: boolean;\n}) => {\n  const chartHeight = height / (data.length);\n  const [bins, setBins] = useState<string[]>([]);\n  const [domain, setDomain] = useState<[number, number]>([0, 0]);\n  const [values, setValues] = useState<IBarChartData[]>([]);\n  useEffect(() => {\n    const allBins = data.reduce((p, n) => {\n      return Array.from(new Set([...p, ...n.bins]));\n    }, [] as string[])\n    setBins(allBins);\n    const allValues: IBarChartData[] = data.map((d) => {\n      const counts = d.counts.map((count) => {\n        const data = new Array(allBins.length).fill(0);\n        count.data.forEach((c, countIndex) => {\n          const allBinIndex = allBins.findIndex((b) => b === d[countIndex]);\n          data[allBinIndex] = c;\n        });\n        return count;\n      });\n      return {\n        ...d,\n        bins: allBins,\n        counts,\n      };\n    });\n    setValues(allValues);\n\n    const eachValue = allValues.reduce((prev, next) => {\n      const values = next.counts.reduce((p, n) => [...p, ...n.data], [] as number[]);\n      return [...values, ...prev];\n    }, [] as number[]);\n    if (clampToZero) {\n      eachValue.push(0);\n    }\n    const e = extent(eachValue) as [number, number];\n    if (e[0] == e[1]) {\n      e[1]++;\n    }\n\n    setDomain(e);\n\n  }, [data])\n  return ({\n    chartHeight,\n    bins,\n    domain,\n    values\n  });\n}\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","import { schemeSet3 } from 'd3-scale-chromatic';\nimport React, { FC } from 'react';\n\nimport { EChartDirection } from './BarChart';\nimport Bars, { defaultPadding } from './components/Bars/Bars';\nimport Base from './components/Base';\nimport XAxis from './components/XAxis';\nimport YAxis from './components/YAxis';\nimport {\n  EGroupedBarLayout,\n  IBarChartDataSet,\n  IHistogramBar,\n} from './Histogram';\nimport { applyDomainAffordance } from './utils/domain';\n\nexport interface ITornadoDataSet {\n  borderColors?: string[];\n  colors?: string[];\n  label: string;\n  data: [number[], number[]];\n}\n\nexport interface ITornadoData {\n  bins: string[];\n  counts: ITornadoDataSet[];\n  colorScheme?: string[];\n  title?: string;\n}\n\nexport interface IProps {\n  /** @description bar colour scheme */\n  colorScheme?: string[];\n  data: ITornadoData;\n  direction?: EChartDirection;\n  groupLayout: EGroupedBarLayout;\n  height: number;\n  id?: string;\n  /** @description Height in px of the axis which labels the left/right values */\n  splitAxisHeight?: number;\n  /** @description labels for the left/right split axis  */\n  splitBins: [string, string];\n  visible?: Record<string, boolean>;\n  xAxisHeight?: number;\n  yAxisWidth?: number;\n  width: number;\n  /** @description Padding inside the chart svg */\n  chartPadding?: number;\n  /** @description bar chart bar padding */\n  padding?: IHistogramBar;\n  showBinPercentages: boolean;\n}\n\nconst Tornado: FC<IProps> = ({\n  colorScheme = schemeSet3,\n  data,\n  id = '',\n  direction = EChartDirection.HORIZONTAL,\n  groupLayout = EGroupedBarLayout.GROUPED,\n  height,\n  splitBins = ['Left', 'Right'],\n  width,\n  visible = {},\n  xAxisHeight,\n  splitAxisHeight,\n  yAxisWidth,\n  chartPadding = 15,\n  padding = defaultPadding,\n  showBinPercentages = false,\n}) => {\n  if (!yAxisWidth) {\n    yAxisWidth = direction === EChartDirection.VERTICAL ? 40 : 100;\n  }\n  if (!xAxisHeight) {\n    xAxisHeight = direction === EChartDirection.VERTICAL ? 100 : 40;\n  }\n  if (!splitAxisHeight) {\n    splitAxisHeight = direction === EChartDirection.VERTICAL ? 100 : 40;\n  }\n\n  const domain = calculateDomain(data, true);\n  const baseProps = {\n    width,\n    height,\n    chartPadding,\n  }\n\n  const dataSets: any[] = []\n  data.counts.forEach((count) => {\n    count.data.forEach((value, genderIndex) => {\n      value.forEach((aValue, rowIndex) => {\n        if (!dataSets[rowIndex]) {\n          dataSets[rowIndex] = [];\n        }\n        dataSets[rowIndex].push({\n          side: genderIndex === 0 ? 'left' : 'right',\n          groupLabel: count.label,\n          colorRef: count.label,\n          label: data.bins[rowIndex],\n          value: visible[data.bins[rowIndex]] !== false && visible[count.label] !== false ? aValue : 0,\n        });\n      })\n\n    });\n  });\n\n  const left: IBarChartDataSet[] = data.counts.map((counts, i) => {\n\n    return {\n      label: splitBins[0] + ' ' + counts.label,\n      data: direction === EChartDirection.HORIZONTAL\n        ? [...counts.data[0]].reverse()\n        : [...counts.data[0]],\n    }\n  })\n\n  const right: IBarChartDataSet[] = data.counts.map((counts, i) => {\n    return {\n      label: splitBins[1] + ' ' + counts.label,\n      data: direction === EChartDirection.HORIZONTAL\n        ? [...counts.data[1]].reverse()\n        : [...counts.data[1]],\n    }\n  });\n\n  const barWidth = direction === EChartDirection.VERTICAL\n    ? (width - yAxisWidth) - (chartPadding * 2)\n    : ((width - (2 * chartPadding)) - yAxisWidth) / 2;\n  const barHeight = direction === EChartDirection.VERTICAL\n    ? ((height - (2 * chartPadding)) - xAxisHeight) / 2\n    : (height - xAxisHeight - splitAxisHeight) - (chartPadding * 2);\n  return (\n    <Base {...baseProps}\n      width={width + 30}\n      id={id}\n    >\n      <Bars values={left}\n        colorScheme={colorScheme}\n        direction={direction}\n        inverse={direction !== EChartDirection.VERTICAL}\n        left={direction === EChartDirection.VERTICAL\n          ? splitAxisHeight + xAxisHeight\n          : yAxisWidth}\n        height={barHeight}\n        width={barWidth}\n        groupLayout={groupLayout}\n        bins={data.bins}\n        domain={domain}\n        id={`left-${id}`}\n        padding={padding}\n        showLabels={[showBinPercentages, showBinPercentages]}\n      />\n\n      <Bars values={right}\n        colorScheme={colorScheme}\n        direction={direction}\n        inverse={direction === EChartDirection.VERTICAL}\n        left={direction === EChartDirection.VERTICAL\n          ? splitAxisHeight + xAxisHeight\n          : (((width - (2 * chartPadding)) + yAxisWidth) / 2)}\n        height={barHeight}\n        width={barWidth}\n        groupLayout={groupLayout}\n        bins={data.bins}\n        domain={domain}\n        id={`right-${id}`}\n        top={direction === EChartDirection.HORIZONTAL ? 0 : barHeight}\n        padding={padding}\n        showLabels={[showBinPercentages, showBinPercentages]}\n      />\n\n      {\n        direction === EChartDirection.HORIZONTAL && <>\n          {\n            // Band axis (Left hand axis)\n          }\n          <YAxis\n            width={yAxisWidth}\n            height={barHeight}\n            scale=\"band\"\n            path={{ opacity: 0 }}\n            tickSize={0}\n            padding={padding}\n            values={[...data.bins].reverse()}\n          />\n          {\n            // Middle y axis\n          }\n          <YAxis\n            width={yAxisWidth}\n            height={barHeight}\n            left={barWidth}\n            labelFormat={() => ''}\n            padding={padding}\n            values={direction === EChartDirection.HORIZONTAL ? data.bins : undefined}\n            scale=\"band\"\n          />\n\n          {\n            // Bottom left values axis\n          }\n          <XAxis\n            width={barWidth}\n            inverse={true}\n            height={xAxisHeight}\n            top={barHeight}\n            left={yAxisWidth}\n            scale=\"linear\"\n            domain={domain}\n          />\n\n          {\n            // Bottom right values axis\n          }\n          <XAxis\n            width={barWidth}\n            height={xAxisHeight}\n            top={barHeight}\n            left={((width - (2 * chartPadding) + yAxisWidth) / 2)}\n            scale=\"linear\"\n            domain={domain}\n          />\n          {\n            // Bottom split bin axis (grouped labels)\n          }\n          <XAxis\n            height={splitAxisHeight}\n            left={yAxisWidth}\n            top={barHeight + splitAxisHeight}\n            width={baseProps.width - yAxisWidth}\n            values={splitBins}\n            path={{ opacity: 0 }}\n            scale='point'\n          />\n        </>\n      }\n      {\n\n        direction === EChartDirection.VERTICAL && <>\n          {\n            // Band axis (bottom axis)\n          }\n          <XAxis\n            width={barWidth}\n            height={yAxisWidth}\n            scale=\"band\"\n            padding={padding}\n            path={{ opacity: 0 }}\n            tickSize={0}\n            left={xAxisHeight + splitAxisHeight}\n            top={(barHeight * 2)}\n            values={[...data.bins]}\n          />\n\n          {\n            // Middle x axis\n          }\n          <XAxis\n            width={barWidth}\n            height={yAxisWidth}\n            left={xAxisHeight + splitAxisHeight}\n            labelFormat={() => ''}\n            values={data.bins}\n            top={(barHeight)}\n            scale=\"band\"\n            padding={padding}\n          />\n\n          {\n            // Top left values axis\n          }\n          <YAxis\n            width={xAxisHeight}\n            height={barHeight}\n            top={0}\n            left={splitAxisHeight}\n            scale=\"linear\"\n            domain={domain}\n          />\n\n          {\n            // Bottom left values axis\n          }\n          <YAxis\n            width={xAxisHeight}\n            height={barHeight}\n            inverse={true}\n            top={barHeight}\n            left={splitAxisHeight}\n            scale=\"linear\"\n            domain={domain}\n          />\n          {\n            // Left split bin axis (grouped labels)\n          }\n          <YAxis\n            height={barHeight * 2}\n            left={0}\n            width={splitAxisHeight}\n            values={splitBins}\n            path={{ opacity: 0 }}\n            scale='point'\n          />\n        </>\n      }\n\n    </Base>\n  )\n}\n\nexport default Tornado;\n\nconst calculateDomain = (data: ITornadoData, center = true) => {\n  const leftValues = data.counts.reduce((prev, next) => prev.concat(next.data[0]), [] as number[]);\n  const rightValues = data.counts.reduce((prev, next) => prev.concat(next.data[1]), [] as number[]);\n\n  // Use applyDomainAffordance to allow space for percentage labels\n  let domain = [\n    0,\n    applyDomainAffordance(Math.max(...rightValues)),\n  ];\n\n  // Center the 0 axis value in the middle of the chart\n  if (center) {\n    const max = Math.max(Math.max(...leftValues), domain[1]);\n    domain = [\n      0,\n      applyDomainAffordance(max),\n    ];\n  }\n  return domain;\n}\n","import {\n  ScaleBand,\n  scaleBand,\n} from 'd3-scale';\nimport { schemeSet3 } from 'd3-scale-chromatic';\nimport React, {\n  FC,\n  useMemo,\n} from 'react';\n\nimport {\n  Bars,\n  XAxis,\n  YAxis,\n} from './';\nimport { EChartDirection } from './BarChart';\nimport {\n  defaultPadding,\n  IProps as IBarProps,\n} from './components/Bars/Bars';\nimport Base from './components/Base';\nimport { TLabelComponent } from './components/Label';\nimport {\n  EGroupedBarLayout,\n  IBarChartDataSet,\n} from './Histogram';\nimport {\n  paddingInner,\n  paddingOuter,\n} from './utils/bars';\nimport { useHistogramDomain } from './utils/useDomain';\n\nexport type TUpsetData = { keys: string[], value: number }[];\n\ntype TBarProps = Pick<IBarProps, 'width' | 'height' | 'top' | 'left' | 'colorScheme' | 'LabelComponent'> & {\n  data: TUpsetData,\n  axisSpace: number;\n  axisWidth?: number;\n  textFill?: string;\n};\n\nexport interface IProps {\n  colorScheme?: string[];\n  data: TUpsetData;\n  height: number;\n  hoverColorScheme?: string[];\n  showLabels?: boolean[];\n  visible?: Record<string, boolean>;\n  width: number;\n  xAxisHeight?: number;\n  yAxisWidth?: number;\n  textFill?: string;\n  distribution?: {\n    colorScheme: string[];\n    fill: {\n      active: string;\n      inactive: string;\n    };\n    label?: string;\n  };\n  setSize?: {\n    dimensions: {\n      chartWidth: number;\n      axisWidth: number;\n      height: number;\n    },\n    label?: string;\n    colorScheme: string[];\n    LabelComponent?: TLabelComponent;\n  }\n  axisSpace?: number;\n  radius?: number;\n  /** @description accessible title */\n  title: string;\n  /** @description accessible description */\n  description: string;\n}\n\nconst UpsetChart: FC<IProps> = ({\n  data,\n  width,\n  height,\n  setSize = {\n    dimensions: { chartWidth: 100, axisWidth: 100, height: 200 },\n    colorScheme: [schemeSet3[0]],\n  },\n  axisSpace = 30,\n  textFill = '#a9a9a9',\n  radius = 7,\n  distribution = {\n    colorScheme: [schemeSet3[1]],\n    fill: {\n      active: schemeSet3[1],\n      inactive: '#eee',\n    },\n    label: 'Intersection size',\n  },\n  title,\n  description,\n}) => {\n\n  const left = (setSize.dimensions.chartWidth + setSize.dimensions.axisWidth);\n  const h = height - setSize.dimensions.height;\n\n  const { bins, setBandScale } = useMemo(() => {\n    const bins = Array.from(data.reduce((prev, next) => {\n      return union<string>(new Set<string>(next.keys), prev);\n    }, new Set<string>()));\n    const setBandScale = scaleBand().domain(bins as string[])\n      .rangeRound([0, setSize.dimensions.height - axisSpace - axisSpace])\n      .paddingInner(paddingInner(defaultPadding))\n      .paddingOuter(paddingOuter(defaultPadding))\n      .align(0.5);\n    return { bins, setBandScale };\n  }, [data]);\n\n  return <Base\n    width={width}\n    title={title}\n    description={description}\n    height={height}>\n\n    <text\n      textAnchor={'middle'}\n      fill={textFill}\n      fontSize=\"12px\"\n      style={{ border: '1px solid red' }}\n      transform={`translate(${left - 20}, ${h - (h / 2)}) rotate(270)`}>\n      {distribution.label ?? 'Intersection size'}\n    </text>\n    <SetSizeBars\n      width={setSize.dimensions.chartWidth}\n      axisWidth={setSize.dimensions.axisWidth}\n      height={setSize.dimensions.height - axisSpace}\n      top={height - setSize.dimensions.height + axisSpace}\n      colorScheme={setSize.colorScheme}\n      data={data}\n      axisSpace={axisSpace}\n      textFill={textFill}\n      setBandScale={setBandScale}\n      bins={bins}\n      left={0}\n      label={setSize.label ?? 'Set size'}\n    />\n\n    <DistributionBars\n      width={width - left}\n      height={height - setSize.dimensions.height}\n      colorScheme={distribution.colorScheme}\n      left={left}\n      data={data}\n      top={0}\n      axisSpace={axisSpace}\n      textFill={textFill}\n    />\n\n    <ActiveCircles\n      data={data}\n      left={left + axisSpace}\n      radius={radius}\n      colors={distribution.fill}\n      width={width - left - axisSpace}\n      height={setSize.dimensions.height - axisSpace}\n      top={height - setSize.dimensions.height + axisSpace}\n      setBandScale={setBandScale}\n    />\n  </Base>\n}\n\ninterface IActiveCirclesProps {\n  data: TUpsetData;\n  left: number;\n  width: number;\n  height: number;\n  top: number;\n  radius: number;\n  colors?: {\n    active: string;\n    inactive: string;\n  },\n  setBandScale: ScaleBand<string>\n}\n\n/**\n * Renders a grid of circles. Highlighted if the column's data contains that key\n */\nconst ActiveCircles: FC<IActiveCirclesProps> = ({\n  data,\n  left,\n  width,\n  top,\n  radius,\n  colors = {\n    active: '#000',\n    inactive: '#eee',\n  },\n  setBandScale,\n}) => {\n  const bins = Array.from(data.reduce((prev, next) => union<string>(new Set<string>(next.keys), prev), new Set<string>()));\n  const yPoints = bins.map((bin) => Number(setBandScale(bin)) + (setBandScale.bandwidth() / 2));\n  const labels = data.map((d) => d.keys.join(' & '))\n  const bandScale = scaleBand().domain(labels as string[])\n    .rangeRound([0, width])\n    .paddingInner(paddingInner(defaultPadding))\n    .paddingOuter(paddingOuter(defaultPadding))\n    .align(0.5);\n\n  return (\n    <g transform={`translate(${left},${top})`}>\n      {\n        data.map((d) => {\n          const x = Number(bandScale(d.keys.join(' & '))) + (bandScale.bandwidth() / 2);\n          const active = bins.map((bin) => d.keys.includes(bin));\n          const bounds = active.reduce((prev, next, index) => {\n            if (!next) {\n              return prev;\n            }\n            if (prev.length === 0) {\n              prev[0] = yPoints[index];\n            } else {\n              prev[1] = yPoints[index];\n            }\n            return prev;\n          }, [] as number[]);\n          return (\n            <g\n              key={d.keys.join('.')}\n              transform={`translate(${x}, 0)`}>\n              <line x1=\"0\" y1={bounds[0]} x2=\"0\" y2={bounds[1] ?? bounds[0]} stroke={colors.active} />\n              {\n                bins.map((bin, i) => {\n                  return (\n                    <circle key={bin} cy={yPoints[i]}\n                      cx={(0 * i)} r={radius} fill={active[i] ? colors.active : colors.inactive} />\n                  )\n                })\n              }\n            </g>\n          )\n        })\n      }\n    </g>\n  );\n};\n\nconst DistributionBars: FC<TBarProps> = ({\n  LabelComponent,\n  colorScheme,\n  width,\n  height,\n  left,\n  top,\n  data,\n  axisSpace,\n}) => {\n  const bins = useMemo(() => data.map((d) => d.keys.join(' & ')), [data]);\n  const values: IBarChartDataSet[] = useMemo(() => ([{\n    label: 'segments',\n    data: data.map((d) => d.value),\n  }]), [data]);\n\n  const domain = useHistogramDomain({\n    groupLayout: EGroupedBarLayout.GROUPED,\n    bins,\n    values,\n  });\n  return (\n    <>\n      <Bars\n        bins={bins}\n        colorScheme={colorScheme}\n        direction={EChartDirection.VERTICAL}\n        domain={domain}\n        showLabels={[true]}\n        groupLayout={EGroupedBarLayout.GROUPED}\n        height={height}\n        LabelComponent={LabelComponent}\n        left={(left ?? 0) + axisSpace}\n        top={top}\n        padding={defaultPadding}\n        values={values}\n        width={width - axisSpace}\n      />\n      <YAxis\n        width={20}\n        height={height}\n        label=\"intersection size\"\n        top={top}\n        left={left}\n        scale={'linear'}\n        values={undefined}\n        domain={domain}\n      />\n    </>\n  )\n}\n\n/**\n * Shows a bar chat of the accumulated total number of records in each data point.\n */\nconst SetSizeBars: FC<TBarProps & { setBandScale: ScaleBand<string>, bins: string[], label: string }> = ({\n  width,\n  height,\n  colorScheme,\n  data,\n  top,\n  axisSpace,\n  axisWidth,\n  textFill = '#a9a9a9',\n  setBandScale,\n  bins,\n  label,\n}) => {\n  const values = useMemo(() => {\n    const empty = new Array(bins.length).fill(0);\n    const counts = data.reduce((prev, next) => {\n      next.keys.forEach((key) => {\n        const index = bins.findIndex((bin) => bin === key);\n        prev[index] = prev[index] + next.value;\n      })\n      return prev;\n    }, empty);\n    const values: IBarChartDataSet[] = [{\n      label: 'tets',\n      data: counts,\n    }];\n    return values;\n  }, [data, bins]);\n\n  const domain = useHistogramDomain({\n    groupLayout: EGroupedBarLayout.GROUPED,\n    bins: bins.reverse(),\n    values,\n  });\n  return (\n    <g className=\"size-bars\" transform={`translate(${0},${top})`}>\n      <Bars\n        bins={bins}\n        colorScheme={colorScheme}\n        direction={EChartDirection.HORIZONTAL}\n        domain={domain}\n        groupLayout={EGroupedBarLayout.GROUPED}\n        height={height - axisSpace}\n        inverse={true}\n        showLabels={[true]}\n        padding={defaultPadding}\n        values={values}\n        width={width}\n      />\n      {\n        bins.map((bin) => <text\n          key={bin}\n          x={(axisWidth ?? 0) + width}\n          fontSize=\"12px\"\n          textAnchor=\"end\"\n          fill={textFill}\n          y={Number(setBandScale(bin)) + (setBandScale.bandwidth() / 2)}\n        >\n          {bin}\n        </text>)\n      }\n      <XAxis\n        width={width}\n        height={20}\n        label=\"Set size\"\n        top={height - axisSpace}\n        scale=\"linear\"\n        values={undefined}\n        inverse={true}\n        domain={domain}\n      />\n      <text\n        x={width / 2}\n        textAnchor=\"middle\"\n        fontSize=\"12px\"\n        fill={textFill}\n        y={height}>{label}\n      </text>\n    </g>\n  )\n}\n\n\nfunction union<T>(...iterables: any): Set<T> {\n  const set = new Set<T>();\n  for (const iterable of iterables) {\n    for (const item of iterable) {\n      set.add(item);\n    }\n  }\n  return set;\n}\n\nexport default UpsetChart;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","import React, {\n  FC,\n  Fragment,\n} from 'react';\n\nimport Base from './components/Base';\nimport Grid from './components/Grid';\nimport Points, { IPointProps } from './components/Points';\nimport XAxis from './components/XAxis';\nimport YAxis, { TAxisLabelFormat } from './components/YAxis';\nimport { IGrid } from './Histogram';\nimport { IAxes } from './legacy/types';\nimport {\n  IChartPoint,\n  IChartPointValue,\n} from './LineChart';\nimport { useScatterDomain } from './utils/useDomain';\n\nexport interface IScatterPlotDataSet<T> {\n  label: string;\n  point: {\n    radius: number;\n    stroke: string;\n    fill: string;\n    show: boolean;\n    showTitle?: boolean;\n  };\n  data: T[];\n}\n\nexport interface IProps<T extends IChartPoint<IChartPointValue, IChartPointValue> = IChartPoint> {\n  axis: IAxes;\n  data: IScatterPlotDataSet<T>[];\n  grid?: IGrid;\n  height: number;\n  id?: string;\n  width: number;\n  xAxisHeight?: number;\n  yAxisWidth?: number;\n  title?: string;\n  description?: string;\n  /**\n   * @description if true then adds a 0 to the data domain. Useful if you don't want your lowest value to appear on top of the x axis\n   */\n  clampToZero?: boolean;\n  axisLabelFormat?: TAxisLabelFormat;\n  /** @description Custom component to override the default <circle /> used to plot points */\n  PointComponent?: FC<IPointProps>;\n}\n\nconst ScatterPlot: FC<IProps> = ({\n  axis,\n  clampToZero = true,\n  data,\n  grid,\n  height,\n  width,\n  xAxisHeight = 60,\n  yAxisWidth = 100,\n  title,\n  description,\n  axisLabelFormat,\n  PointComponent,\n}) => {\n  const domain = useScatterDomain({\n    values: data,\n    clampToZero,\n  });\n  const values = data.reduce((prev, next) => prev.concat(next.data.map((d) => d.x)), [] as any[])\n\n  return (\n    <Base\n      width={width}\n      height={height}\n      title={title}\n      description={description}>\n\n      {\n        grid && <Grid\n          left={yAxisWidth}\n          height={height - xAxisHeight}\n          svgProps={{ ...grid.x.style }}\n          lines={{\n            vertical: grid.y.ticks,\n            horizontal: grid.x.ticks,\n          }}\n          width={width - yAxisWidth} />\n      }\n      {\n        data.map((item) => <Fragment key={item.label.replace(/[^a-zA-Z0-9-]/, '')}>\n\n          {\n            item.point.show &&\n            <Points\n              axis={axis}\n              label={item.label}\n              key={`points-${item.label}`}\n              width={width - yAxisWidth}\n              left={yAxisWidth}\n              height={height - xAxisHeight}\n              radius={item.point.radius}\n              fill={item.point.fill}\n              showTitle={item.point.showTitle}\n              stroke={item.point.stroke}\n              data={item.data}\n              PointComponent={PointComponent} />\n          }\n\n\n        </Fragment>)\n      }\n\n      <YAxis\n        width={yAxisWidth}\n        height={height - xAxisHeight}\n        scale={axis.y.scale ?? 'linear'}\n        domain={domain}\n      />\n\n      <XAxis\n        width={width - yAxisWidth}\n        height={xAxisHeight}\n        labelFormat={axisLabelFormat}\n        scale={axis.x.scale ?? 'band'}\n        top={height - xAxisHeight}\n        left={yAxisWidth}\n        values={\n          values.length > 4\n            ? [values[0], values[Math.floor(values.length / 4)],\n            values[Math.floor(values.length / 2)],\n            values[Math.floor(values.length * (3 / 4))],\n            ] as number[]\n            : values}\n      />\n\n    </Base>\n  )\n}\n\nexport default ScatterPlot;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var frame = 0,\n    // is an animation frame pending?\ntimeout = 0,\n    // is a timeout pending?\ninterval = 0,\n    // are any timers active?\npokeDelay = 1000,\n    // how frequently we check for clock skew\ntaskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (f) {\n  setTimeout(f, 17);\n};\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call = this._time = this._next = null;\n}\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function restart(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;else taskHead = this;\n      taskTail = this;\n    }\n\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function stop() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\nexport function timer(callback, delay, time) {\n  var t = new Timer();\n  t.restart(callback, delay, time);\n  return t;\n}\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n\n  ++frame; // Pretend weve set an alarm, if we havent already.\n\n  var t = taskHead,\n      e;\n\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(),\n      delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0,\n      t1 = taskHead,\n      t2,\n      time = Infinity;\n\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}","import { Timer } from \"./timer.js\";\nexport default function (callback, delay, time) {\n  var t = new Timer();\n  delay = delay == null ? 0 : +delay;\n  t.restart(function (elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}","import { dispatch } from \"d3-dispatch\";\nimport { timer, timeout } from \"d3-timer\";\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\nexport default function (node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index,\n    // For context during callback.\n    group: group,\n    // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween; // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time); // If the elapsed delay is less than our first sleep, start immediately.\n\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o; // If the state is not SCHEDULED, then we previously errored on start.\n\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue; // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n\n      if (o.state === STARTED) return timeout(start); // Interrupt the active transition, if any.\n\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      } // Cancel any pre-empted transitions.\n      else if (+i < id) {\n          o.state = ENDED;\n          o.timer.stop();\n          o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n          delete schedules[i];\n        }\n    } // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n\n\n    timeout(function () {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    }); // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n\n    self.state = STARTED; // Initialize the tween, deleting null tween.\n\n    tween = new Array(n = self.tween.length);\n\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    } // Dispatch the end event.\n\n\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n\n    for (var i in schedules) {\n      return;\n    } // eslint-disable-line no-unused-vars\n\n\n    delete node.__transition;\n  }\n}","import { STARTING, ENDING, ENDED } from \"./transition/schedule.js\";\nexport default function (node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n  if (!schedules) return;\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) {\n      empty = false;\n      continue;\n    }\n\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}","import { get, set } from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function () {\n    var schedule = set(this, id),\n        tween = schedule.tween; // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error();\n  return function () {\n    var schedule = set(this, id),\n        tween = schedule.tween; // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n\n      for (var t = {\n        name: name,\n        value: value\n      }, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function (name, value) {\n  var id = this._id;\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n  transition.each(function () {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n  return function (node) {\n    return get(node, id).value[name];\n  };\n}","import { color } from \"d3-color\";\nimport { interpolateNumber, interpolateRgb, interpolateString } from \"d3-interpolate\";\nexport default function (a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber : b instanceof color ? interpolateRgb : (c = color(b)) ? (b = c, interpolateRgb) : interpolateString)(a, b);\n}","import { interpolateTransformSvg as interpolateTransform } from \"d3-interpolate\";\nimport { namespace } from \"d3-selection\";\nimport { tweenValue } from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function () {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function () {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0,\n        value1 = value(this),\n        string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0,\n        value1 = value(this),\n        string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function (name, value) {\n  var fullname = namespace(name),\n      i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\" ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value)) : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname) : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}","import { namespace } from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function (t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function (t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}","import { get, init } from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function () {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function () {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? delayFunction : delayConstant)(id, value)) : get(this.node(), id).delay;\n}","import { get, set } from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function () {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function () {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each((typeof value === \"function\" ? durationFunction : durationConstant)(id, value)) : get(this.node(), id).duration;\n}","import { get, set } from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error();\n  return function () {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function (value) {\n  var id = this._id;\n  return arguments.length ? this.each(easeConstant(id, value)) : get(this.node(), id).ease;\n}","import { get, set, init } from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function (t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0,\n      on1,\n      sit = start(name) ? init : set;\n  return function () {\n    var schedule = sit(this, id),\n        on = schedule.on; // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n    schedule.on = on1;\n  };\n}\n\nexport default function (name, listener) {\n  var id = this._id;\n  return arguments.length < 2 ? get(this.node(), id).on.on(name) : this.each(onFunction(id, name, listener));\n}","function removeFunction(id) {\n  return function () {\n    var parent = this.parentNode;\n\n    for (var i in this.__transition) {\n      if (+i !== id) return;\n    }\n\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function () {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}","import { selection } from \"d3-selection\";\nvar Selection = selection.prototype.constructor;\nexport default function () {\n  return new Selection(this._groups, this._parents);\n}","import { interpolateTransformCss as interpolateTransform } from \"d3-interpolate\";\nimport { style } from \"d3-selection\";\nimport { set } from \"./schedule.js\";\nimport { tweenValue } from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function () {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function () {\n    var string0 = style(this, name);\n    return string0 === string1 ? null : string0 === string00 ? interpolate0 : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00, string10, interpolate0;\n  return function () {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null : string0 === string00 && string1 === string10 ? interpolate0 : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0,\n      on1,\n      listener0,\n      key = \"style.\" + name,\n      event = \"end.\" + key,\n      remove;\n  return function () {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined; // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n    schedule.on = on1;\n  };\n}\n\nexport default function (name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this.styleTween(name, styleNull(name, i)).on(\"end.style.\" + name, styleRemove(name)) : typeof value === \"function\" ? this.styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value))).each(styleMaybeRemove(this._id, name)) : this.styleTween(name, styleConstant(name, i, value), priority).on(\"end.style.\" + name, null);\n}","function styleInterpolate(name, i, priority) {\n  return function (t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}","function textInterpolate(i) {\n  return function (t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n\n  tween._value = value;\n  return tween;\n}\n\nexport default function (value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error();\n  return this.tween(key, textTween(value));\n}","import { selection } from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\nvar id = 0;\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\nexport default function transition(name) {\n  return selection().transition(name);\n}\nexport function newId() {\n  return ++id;\n}\nvar selection_prototype = selection.prototype;\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  end: transition_end\n};","import { selector } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function (select) {\n  var name = this._name,\n      id = this._id;\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}","import { selectorAll } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function (select) {\n  var name = this._name,\n      id = this._id;\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}","import { matcher } from \"d3-selection\";\nimport { Transition } from \"./index.js\";\nexport default function (match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}","import { Transition } from \"./index.js\";\nexport default function (transition) {\n  if (transition._id !== this._id) throw new Error();\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}","import { Transition, newId } from \"./index.js\";\nimport schedule, { get } from \"./schedule.js\";\nexport default function () {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}","import { tweenValue } from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function () {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function () {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function (value) {\n  return this.tween(\"text\", typeof value === \"function\" ? textFunction(tweenValue(this, \"text\", value)) : textConstant(value == null ? \"\" : value + \"\"));\n}","import { set } from \"./schedule.js\";\nexport default function () {\n  var on0,\n      on1,\n      that = this,\n      id = that._id,\n      size = that.size();\n  return new Promise(function (resolve, reject) {\n    var cancel = {\n      value: reject\n    },\n        end = {\n      value: function value() {\n        if (--size === 0) resolve();\n      }\n    };\n    that.each(function () {\n      var schedule = set(this, id),\n          on = schedule.on; // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n\n        on1._.cancel.push(cancel);\n\n        on1._.interrupt.push(cancel);\n\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n  });\n}","import { Transition, newId } from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport { easeCubicInOut } from \"d3-ease\";\nimport { now } from \"d3-timer\";\nvar defaultTiming = {\n  time: null,\n  // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n\n  return timing;\n}\n\nexport default function (name) {\n  var id, timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}","export function cubicIn(t) {\n  return t * t * t;\n}\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}","import { selection } from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;","import interrupt from \"../interrupt.js\";\nexport default function (name) {\n  return this.each(function () {\n    interrupt(this, name);\n  });\n}","import { Transition } from \"./transition/index.js\";\nimport { SCHEDULED } from \"./transition/schedule.js\";\nvar root = [null];\nexport default function (node, name) {\n  var schedules = node.__transition,\n      schedule,\n      i;\n\n  if (schedules) {\n    name = name == null ? null : name + \"\";\n\n    for (i in schedules) {\n      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {\n        return new Transition([[node]], root, name, +i);\n      }\n    }\n  }\n\n  return null;\n}","export default function (a, b) {\n  return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n}","export default function (d) {\n  return d;\n}","import {\n  event,\n  select,\n} from 'd3-selection';\n\nexport default {\n  fx: {\n    in: (container) => {\n      if (typeof container === 'string') {\n        return;\n      }\n      container?.style('left', (event.pageX) + 'px')\n        .style('top', (event.pageY - 55) + 'px');\n      container?.transition()\n        .duration(200)\n        .style('opacity', 0.9);\n    },\n    move: (container) => {\n      if (typeof container === 'string') {\n        return;\n      }\n      container?.style('left', (event.pageX) + 'px')\n        .style('top', (event.pageY - 55) + 'px');\n    },\n    out: (container) => {\n      if (typeof container === 'string') {\n        return;\n      }\n      container?.transition()\n        .duration(100)\n        .style('opacity', 0);\n    },\n  },\n};\n\nexport const makeTip = (selector, tipContainer): { tipContainer: any, tipContent: any } => {\n  if (tipContainer) {\n    // Chart could be rebuilt - remove old tip\n    tipContainer.remove();\n  }\n  tipContainer = select(selector).append('div')\n    .attr('class', 'tooltip top')\n    .style('opacity', 0);\n\n  tipContainer.append('div')\n    .attr('class', 'tooltip-arrow');\n  return {\n    tipContainer,\n    tipContent: tipContainer.append('div')\n      .attr('class', 'tooltip-inner'),\n  };\n};\n","import { ScaleOrdinal } from 'd3-scale';\nimport { select } from 'd3-selection';\n\nimport {\n  EColorManipulations,\n  IGroupDataItem,\n} from '../Histogram';\nimport { TipContentFn } from '../legacy/types';\n\ninterface IProps {\n  bins: string[],\n  hover?: Partial<Record<EColorManipulations, number>>,\n  colors: ScaleOrdinal<string, string>,\n  tipContentFn: TipContentFn<string> | undefined,\n  tipContent: any,\n  tip: any,\n  tipContainer: string,\n  colourIndex?: string,\n};\n\ninterface IMouseOutTipProps {\n  tip: any,\n  tipContainer: any,\n}\n\ninterface IMouseOutProps extends IMouseOutTipProps {\n  colors: ScaleOrdinal<string, string>,\n}\n\n\nexport const onMouseOver = (props: IProps) => (d: IGroupDataItem | any, i: number, nodes: any) => {\n  const {\n    bins,\n    hover,\n    tipContentFn,\n    tipContent,\n    tip,\n    tipContainer,\n  } = props;\n  const ix = bins.findIndex((b) => b === d.label);\n  if (!tipContentFn) {\n    return;\n  }\n  if (hover) {\n    select(nodes[i])\n      .attr('fill-opacity', 1)\n      .transition('easeIn')\n      .attr('fill-opacity', 0.7);\n  }\n  tipContent.html(() => tipContentFn(bins, ix, d.value || d));\n  tip.fx.in(tipContainer);\n};\n\nexport const onMouseOut = (props: IMouseOutProps) => (d: IGroupDataItem | number, i: number, nodes: any) => {\n  const { tip, tipContainer, colors } = props;\n  tip.fx.out(tipContainer);\n  select(nodes[i])\n    .attr('fill-opacity', 0.7)\n    .transition('easeIn')\n    .attr('fill-opacity', 1);\n}\nexport const onClick = (onClick?: (v: any) => void) => (d: IGroupDataItem | number) => {\n  if (onClick) {\n    onClick(d);\n  }\n}\n","import 'd3-transition';\n\nimport { interpolate } from 'd3-interpolate';\nimport { scaleOrdinal } from 'd3-scale';\nimport {\n  select,\n  Selection,\n} from 'd3-selection';\nimport {\n  arc,\n  Arc,\n  pie,\n  PieArcDatum,\n} from 'd3-shape';\nimport cloneDeep from 'lodash/cloneDeep';\nimport merge from 'lodash/merge';\n\nimport colorScheme from '../colors';\nimport { IBarChartDataSet } from '../Histogram';\nimport tips, { makeTip } from '../tip';\nimport { onMouseOut } from '../utils/mouseOver';\nimport { DeepPartial } from '../utils/types';\nimport {\n  IPieChartProps,\n  IPieDataItem,\n} from './PieChart';\nimport { IChartAdaptor } from './types';\n\ninterface IPieDataset {\n  count: number;\n  groupLabel: string;\n  label: string;\n}\n\n\n// Function to calculate pie chart paths from data\nconst thisPie = pie()\n  .sort(null)\n  .value((d: any) => d.count);\n\n\nconst outerRadius = (props, setIndex = 0) => {\n  const { donutWidth = 0, width, height } = props;\n\n  const radius = Math.min(Number(width), height) / 2;\n  return donutWidth === 0\n    ? radius - 10\n    : radius - 10 - (setIndex * (donutWidth + 10));\n};\n\nconst innerRadius = (props, setIndex = 0) => {\n  const { donutWidth = 0, width, height } = props;\n  const radius = Math.min(Number(width), height) / 2;\n  return donutWidth === 0\n    ? 0\n    : radius - 10 - donutWidth - (setIndex * (donutWidth + 10));\n};\n\nconst getArc = (props, i: number) => {\n  return arc()\n    .outerRadius(outerRadius(props, i))\n    .innerRadius(innerRadius(props, i));\n}\n\nexport const pieChartD3 = ((): IChartAdaptor<IPieChartProps> => {\n\n  let tipContainer;\n  let tipContent;\n\n  const props: IPieChartProps = {\n    backgroundColor: '#ddd',\n    className: 'piechart-d3',\n    colorScheme,\n    data: {\n      bins: [],\n      counts: [],\n    },\n    donutWidth: 0,\n    height: 200,\n    hover: {\n      lighten: 0.1,\n    },\n    labels: {\n      display: true,\n      displayFn: (d) => d.value,\n    },\n    margin: {\n      bottom: 0,\n      left: 10,\n      right: 0,\n      top: 10,\n    },\n    tip: tips,\n    tipContainer: 'body',\n    tipContentFn: (bins: string[], i: number, d: number, groupLabel): string => {\n      return groupLabel + ': ' + bins[i] + '<br />' + d;\n    },\n    visible: {},\n    width: 200,\n  };\n\n  let containers: any[];\n  let svg: Selection<any, any, any, any>;\n  let dataSets: IPieDataset[][];\n  let previousData: any;\n  let storedWidth: number;\n  let storedHeight: number;\n\n  const PieChartD3 = {\n\n    create(el: Element, newProps: DeepPartial<IPieChartProps> = {}) {\n      merge(props, newProps);\n      previousData = props.data.counts.map((set: IBarChartDataSet, setIndex: number) => {\n        return set.data\n          .map((count, i) => ({\n            count,\n            groupLabel: set.label,\n            label: props.data.bins[i],\n          }));\n      });\n      this._makeSvg(el);\n      containers = [];\n      previousData.forEach((dataSet, i) => {\n        this.drawChartBg(i);\n      });\n\n      this.update(props);\n    },\n\n    _makeSvg(el: Element) {\n      if (svg) {\n        svg.selectAll('svg > *').remove();\n        svg.remove();\n        const childNodes = el.getElementsByTagName('svg');\n        if (childNodes.length > 0) {\n          el.removeChild(childNodes[0]);\n        }\n      }\n      const { margin, width, height, className } = props;\n\n      // Reference to svg element containing chart\n      svg = select(el).append('svg')\n        .attr('class', className)\n        .attr('width', width)\n        .attr('height', height)\n        .attr('viewBox', `0 0 ${width} ${height}`)\n        .append('g')\n        .attr('transform',\n          'translate(' + margin.left + ',' + margin.top + ')');\n\n      const r = makeTip(props.tipContainer, tipContainer);\n      tipContent = r.tipContent;\n      tipContainer = r.tipContainer;\n    },\n\n    update(newProps: DeepPartial<IPieChartProps>) {\n      if (!props.data) {\n        return;\n      }\n      merge(props, newProps);\n      if (newProps.data) {\n        props.data = cloneDeep(newProps.data) as IPieChartProps['data'];\n      }\n      if (props.colorScheme) {\n        props.colorScheme = props.colorScheme;\n      }\n      if (!props.data.bins) {\n        return;\n      }\n\n      this.drawCharts();\n    },\n\n    drawCharts() {\n      const { data, visible } = props;\n      dataSets = data.counts.map((set: IBarChartDataSet) => {\n        return set.data\n          .map((count, i) => ({\n            count: visible[data.bins[i]] !== false ? count : 0,\n            groupLabel: set.label,\n            label: data.bins[i],\n          }));\n      });\n\n      dataSets.forEach((dataSet, i) => {\n        const theme = data.counts[i]?.colors ?? props.colorScheme;\n        this.drawChart(dataSet, i, data.bins, theme);\n        this.drawLabels(dataSet, i, data.bins, theme);\n      });\n      previousData = dataSets;\n    },\n\n    drawChartBg(i: number) {\n      const { backgroundColor, width, height } = props;\n      const tau = 2 * Math.PI; // http://tauday.com/tau-manifesto\n      const bgArc = arc()\n        .innerRadius(innerRadius(props, i))\n        .outerRadius(outerRadius(props, i))\n        .startAngle(0)\n        .endAngle(tau);\n      const container = svg\n        .append('g')\n        .attr('class', 'pie-bg');\n      const background = container.append('path')\n        .attr('class', 'pie-background')\n        .style('fill', backgroundColor);\n      background.enter()\n        .attr('transform', 'translate(' + Number(width) / 2 + ',' + height / 2 + ')')\n        .attr('d', bgArc);\n\n      background.merge(background);\n\n      if (!containers[i]) {\n        svg\n          .append('g')\n          .attr('class', 'pie-container')\n\n        svg\n          .append('g')\n          .attr('class', 'pie-labels')\n        containers[i] = svg;\n      }\n    },\n\n    drawChart(data, i: number, bins: string[], theme: string[]) {\n      const { width, height, tip, tipContentFn, hover } = props;\n\n      // Formatted pie chart arcs based on previous current data.\n      // If data has changed length (i.e. swapping the entire dataset) use the new data.\n      const prev = previousData[i].length === data.length\n        ? previousData[i]\n        : data;\n      const arcs = thisPie(prev);\n      const colors = scaleOrdinal(theme);\n      // Set the domain to get consistent colours\n      colors.domain(Array.from(new Array(data.length).keys()).map(s => s.toString()));\n\n      // Stack multiple charts in concentric circles\n      const thisArc = getArc(props, i);\n\n      const path = containers[i].select('.pie-container').selectAll('path')\n        .data(thisPie(data));\n\n      path.enter()\n        .append('path')\n        .attr('transform', (d) => {\n          return 'translate(' + Number(width) / 2 + ',' + height / 2 + ')';\n        })\n        .attr('stroke', '#FFF')\n        .attr('fill', (_, j) => colors(j))\n        .on('mouseover', (d: PieArcDatum<IPieDataItem>, ix: number, nodes: any[]) => {\n          if (hover) {\n            select(nodes[ix])\n              .attr('fill-opacity', 1)\n              .transition('easeIn')\n              .attr('fill-opacity', 0.7);\n          }\n          tipContent.html(() => tipContentFn(bins, ix, d.data.count, d.data.groupLabel));\n          tip.fx.in(tipContainer);\n        })\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n        .attr('d', thisArc)\n        .style('opacity', 0)\n        .transition()\n        .duration(500)\n        .style('opacity', 1);\n\n      // Fade in when adding (merge)\n      path\n        .merge(path)\n        .on('mouseover', (d: PieArcDatum<IPieDataItem>, ix: number, nodes: any[]) => {\n          if (hover) {\n            select(nodes[ix])\n              .attr('fill-opacity', 1)\n              .transition('easeIn')\n              .attr('fill-opacity', 0.7);\n          }\n          tipContent.html(() => tipContentFn(bins, ix, d.data.count, d.data.groupLabel));\n          tip.fx.in(tipContainer);\n        })\n        .on('mousemove', () => tip.fx.move(tipContainer))\n        .on('mouseout', onMouseOut({ tip, tipContainer, colors }))\n        .transition()\n        .delay(400)\n        .duration(500)\n        .attrTween('d', arcTween(thisArc));\n\n      path.exit().transition()\n        .attrTween('d', arcTween(thisArc))\n        .duration(500)\n        .style('opacity', 0).remove();\n    },\n\n    drawLabels(data, i: number, bins: string[], theme: string[]) {\n      const { labels, width, height } = props;\n      const thisArc = getArc(props, i);\n      const path2 = containers[i].select('.pie-labels').selectAll('text.label')\n        .data(thisPie(data));\n      path2.enter().append('text')\n        .attr('class', 'label')\n        .each(() => {\n          // Store initial offset incase we change chart heights.\n          storedHeight = height;\n          storedWidth = Number(width);\n        })\n        .style('opacity', 0)\n        .text((d, ix: number) => d.value === 0 ? '' : labels.displayFn(d, ix))\n        .attr('transform', (d) => {\n          const centroid = thisArc.centroid(d);\n          const x = centroid[0] + (storedWidth / 2);\n          const y = centroid[1] + (storedHeight / 2);\n          return 'translate(' + x + ',' + y + ')';\n        })\n        .transition()\n        .duration(500)\n        .style('opacity', (d) => labels.display === false || d.value === 0 ? 0 : 1);\n\n      path2\n        .merge(path2)\n        .transition()\n        .duration(500)\n        .style('opacity', 0)\n        .transition()\n        .attr('transform', (d) => {\n          const centroid = thisArc.centroid(d);\n          const x = centroid[0] + (storedWidth / 2);\n          const y = centroid[1] + (storedHeight / 2);\n          return 'translate(' + x + ',' + y + ')';\n        })\n        .text((d, ix: number) => d.value === 0 ? '' : labels.displayFn(d, ix))\n        .transition()\n        .duration(500)\n        .style('opacity', (d) => {\n          // Only show if the new value is not 0 and labels are set to be displayed\n          return labels.display === false || d.value === 0 ? 0 : 1;\n        });\n\n      path2.exit().transition()\n        .duration(500)\n        .style('opacity', 0);\n    },\n\n    /**\n     * Any necessary clean up\n     */\n    destroy() {\n      svg.selectAll('svg > *').remove();\n    },\n  };\n\n  return PieChartD3;\n});\n\n// Returns a tween for a transitions \"d\" attribute, transitioning any selected\n// arcs from their current angle to the specified new angle.\nfunction arcTween(this: any, thisArc: Arc<any, any>) {\n  return function (this: any, d) {\n    const i = interpolate(this._current, d);\n    this._current = i(0);\n    return function (this: any, t) {\n      return thisArc(i(t));\n    };\n  };\n}\n","import constant from \"./constant.js\";\nimport descending from \"./descending.js\";\nimport identity from \"./identity.js\";\nimport { tau } from \"./math.js\";\nexport default function () {\n  var value = identity,\n      sortValues = descending,\n      sort = null,\n      startAngle = constant(0),\n      endAngle = constant(tau),\n      padAngle = constant(0);\n\n  function pie(data) {\n    var i,\n        n = data.length,\n        j,\n        k,\n        sum = 0,\n        index = new Array(n),\n        arcs = new Array(n),\n        a0 = +startAngle.apply(this, arguments),\n        da = Math.min(tau, Math.max(-tau, endAngle.apply(this, arguments) - a0)),\n        a1,\n        p = Math.min(Math.abs(da) / n, padAngle.apply(this, arguments)),\n        pa = p * (da < 0 ? -1 : 1),\n        v;\n\n    for (i = 0; i < n; ++i) {\n      if ((v = arcs[index[i] = i] = +value(data[i], i, data)) > 0) {\n        sum += v;\n      }\n    } // Optionally sort the arcs by previously-computed values or by data.\n\n\n    if (sortValues != null) index.sort(function (i, j) {\n      return sortValues(arcs[i], arcs[j]);\n    });else if (sort != null) index.sort(function (i, j) {\n      return sort(data[i], data[j]);\n    }); // Compute the arcs! They are stored in the original data's order.\n\n    for (i = 0, k = sum ? (da - n * pa) / sum : 0; i < n; ++i, a0 = a1) {\n      j = index[i], v = arcs[j], a1 = a0 + (v > 0 ? v * k : 0) + pa, arcs[j] = {\n        data: data[j],\n        index: i,\n        value: v,\n        startAngle: a0,\n        endAngle: a1,\n        padAngle: p\n      };\n    }\n\n    return arcs;\n  }\n\n  pie.value = function (_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), pie) : value;\n  };\n\n  pie.sortValues = function (_) {\n    return arguments.length ? (sortValues = _, sort = null, pie) : sortValues;\n  };\n\n  pie.sort = function (_) {\n    return arguments.length ? (sort = _, sortValues = null, pie) : sort;\n  };\n\n  pie.startAngle = function (_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : startAngle;\n  };\n\n  pie.endAngle = function (_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : endAngle;\n  };\n\n  pie.padAngle = function (_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), pie) : padAngle;\n  };\n\n  return pie;\n}","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport {\n  EColorManipulations,\n  IBarChartDataSet,\n} from '../Histogram';\nimport { DeepPartial } from '../utils/types';\nimport { pieChartD3 } from './PieChartD3';\nimport {\n  IChartAdaptor,\n  IChartState,\n  IMargin,\n  TipContentFn,\n} from './types';\n\ninterface ILabels {\n  display: boolean;\n  displayFn: (d: any, ix: number) => string | number;\n}\n\nexport interface IPieDataItem {\n  count: number;\n  groupLabel: string;\n  label: string;\n}\n\nexport interface IPieChartProps {\n  data: {\n    bins: string[],\n    counts: IBarChartDataSet[];\n  };\n  backgroundColor: string;\n  className: string;\n  colorScheme: string[];\n  donutWidth: number;\n  height: number;\n  hover?: Partial<Record<EColorManipulations, number>>,\n  labels: ILabels;\n  margin: IMargin;\n  tip: any;\n  tipContainer: string;\n  tipContentFn: TipContentFn<string>;\n  visible: { [key: string]: boolean };\n  width: number | string;\n}\n\n/**\n * PieChart component\n */\nclass PieChart extends Component<DeepPartial<IPieChartProps>, IChartState> {\n\n  private chart: IChartAdaptor<IPieChartProps>;\n  private ref: HTMLDivElement | null = null;\n\n  /**\n   * Constructor\n   */\n  constructor(props: DeepPartial<IPieChartProps>) {\n    super(props);\n    this.chart = pieChartD3();\n\n    this.state = {\n      parentWidth: 300,\n    };\n  }\n\n  /**\n   * Handle the page resize\n   */\n  private handleResize() {\n    const el = this.getDOMNode();\n    if (el) {\n      const width = (this.ref && this.ref.offsetWidth) ? this.ref.offsetWidth : 0;\n\n      this.setState({\n        parentWidth: width,\n      }, () => this.chart.update(this.getChartState()));\n    }\n  }\n\n  /**\n   * Component mounted\n   */\n  public componentDidMount() {\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.create(el, this.getChartState());\n      if (this.props.width === '100%') {\n        window.addEventListener('resize', (e) => this.handleResize());\n        this.handleResize();\n      }\n    }\n  }\n\n  /**\n   * Component updated\n   */\n  public componentDidUpdate() {\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.update(this.getChartState());\n    }\n  }\n\n  /**\n   * Get the chart state\n   */\n  public getChartState(): DeepPartial<IPieChartProps> {\n    let { width } = this.props;\n    const { children, ...rest } = this.props;\n    if (width === '100%') {\n      width = this.state.parentWidth || 300;\n    }\n    return {\n      ...rest,\n      width,\n    };\n  }\n\n  /**\n   * Component will un mount, remove the chart and\n   * any event listeners\n   */\n  public componentWillUnmount() {\n    if (this.props.width === '100%') {\n      window.removeEventListener('resize', this.handleResize);\n    }\n    const el = this.getDOMNode();\n    if (el) {\n      this.chart.destroy();\n    }\n  }\n\n  /**\n   * Get the chart's dom node\n   */\n  private getDOMNode(): Element | undefined | null {\n    const node = ReactDOM.findDOMNode(this.ref);\n    try {\n      if (node instanceof Text) {\n        return undefined;\n      }\n      return node;\n    } catch (e) {\n      // instanceof Text not working when running tests - just presume its ok\n      return node as Element;\n    }\n  }\n\n  /**\n   * Render\n   */\n  public render(): JSX.Element {\n    return (<div ref={(ref) => this.ref = ref} className=\"piechart-chart-container\"></div>);\n  }\n}\n\nexport default PieChart;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","export default ['#4bbcad',\n  '#d54539',\n  '#5ab94d',\n  '#8a5cd3',\n  '#a4b243',\n  '#ba5ccd',\n  '#54995c',\n  '#cf47a1',\n  '#d29f3e',\n  '#5c6fda',\n  '#c36528',\n  '#5fa6dc',\n  '#d74770',\n  '#7d7430',\n  '#8a529e',\n  '#df9273',\n  '#5f74b8',\n  '#ac5450',\n  '#d192d7',\n  '#b26088'];\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","import { scaleOrdinal } from 'd3-scale';\nimport React, { FC } from 'react';\n\nimport colorScheme from './colors';\nimport { IBarChartDataSet } from './Histogram';\n\ninterface IProps {\n  className?: string;\n  theme?: string[];\n  data: {\n    bins: string[],\n    counts: IBarChartDataSet[];\n  };\n  onSelect: (label: string) => void;\n  visible: { [key: string]: boolean };\n}\n\nconst legendIconStyle = {\n  cursor: 'pointer',\n  display: 'inline-block',\n  height: '1rem',\n  margin: '0.25rem 0.5rem',\n  width: '1rem',\n};\n\nconst listStyle = {\n  listStyle: 'none',\n  padding: 0,\n  margin: 0,\n};\n\nconst liStyle = {\n  display: 'flex',\n  alignItems: 'center',\n}\n\nconst Legend: FC<IProps> = ({\n  className,\n  theme = colorScheme,\n  data,\n  onSelect,\n  visible,\n}) => {\n  const scheme: any = scaleOrdinal(theme);\n  const labels = data.bins;\n  return (\n    <div className={className}>\n      <ul style={listStyle}>\n        {\n          labels.map((label) => {\n            const active = (visible.hasOwnProperty(label) && visible[label]) || !visible.hasOwnProperty(label);\n            return (\n              <li key={label}\n                style={liStyle}>\n                <div style={{\n                  ...legendIconStyle,\n                  backgroundColor: active ? scheme(label) : '#FFF',\n                  border: '2px solid ' + scheme(label),\n                }}\n                  onClick={() => onSelect(label)}>\n                </div>\n                <div>\n                  {label}\n                </div>\n              </li>\n            );\n          })\n        }\n      </ul>\n    </div>\n  );\n};\n\nexport default Legend;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n"],"sourceRoot":""}